{
"version":3,
"file":"module$node_modules$monaco_editor$esm$vs$editor$common$diff$defaultLinesDiffComputer$algorithms$dynamicProgrammingDiffing.js",
"lineCount":43,
"mappings":"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",
"sources":["node_modules/monaco-editor/esm/vs/editor/common/diff/defaultLinesDiffComputer/algorithms/dynamicProgrammingDiffing.js"],
"sourcesContent":["shadow$provide[\"module$node_modules$monaco_editor$esm$vs$editor$common$diff$defaultLinesDiffComputer$algorithms$dynamicProgrammingDiffing\"] = function(require,module,exports) {\nObject.defineProperties(exports, {__esModule:{enumerable:true, value:true}, DynamicProgrammingDiffing:{enumerable:true, get:function() {\n  return DynamicProgrammingDiffing;\n}}});\nvar require$_DOT__DOT__SLASH__DOT__DOT__SLASH__DOT__DOT__SLASH_core_SLASH_offsetRange_DOT_js = require(\"../../../core/offsetRange.js\");\nvar require$_DOT__SLASH_diffAlgorithm_DOT_js = require(\"./diffAlgorithm.js\");\nvar require$_DOT__DOT__SLASH_utils_DOT_js = require(\"../utils.js\");\nclass DynamicProgrammingDiffing {\n  compute(sequence1, sequence2, timeout = require$_DOT__SLASH_diffAlgorithm_DOT_js.InfiniteTimeout.instance, equalityScore) {\n    if (sequence1.length === 0 || sequence2.length === 0) {\n      return require$_DOT__SLASH_diffAlgorithm_DOT_js.DiffAlgorithmResult.trivial(sequence1, sequence2);\n    }\n    const lcsLengths = new require$_DOT__DOT__SLASH_utils_DOT_js.Array2D(sequence1.length, sequence2.length);\n    const directions = new require$_DOT__DOT__SLASH_utils_DOT_js.Array2D(sequence1.length, sequence2.length);\n    const lengths = new require$_DOT__DOT__SLASH_utils_DOT_js.Array2D(sequence1.length, sequence2.length);\n    for (let s1 = 0; s1 < sequence1.length; s1++) {\n      for (let s2 = 0; s2 < sequence2.length; s2++) {\n        if (!timeout.isValid()) {\n          return require$_DOT__SLASH_diffAlgorithm_DOT_js.DiffAlgorithmResult.trivialTimedOut(sequence1, sequence2);\n        }\n        const horizontalLen = s1 === 0 ? 0 : lcsLengths.get(s1 - 1, s2);\n        const verticalLen = s2 === 0 ? 0 : lcsLengths.get(s1, s2 - 1);\n        let extendedSeqScore;\n        if (sequence1.getElement(s1) === sequence2.getElement(s2)) {\n          if (s1 === 0 || s2 === 0) {\n            extendedSeqScore = 0;\n          } else {\n            extendedSeqScore = lcsLengths.get(s1 - 1, s2 - 1);\n          }\n          if (s1 > 0 && s2 > 0 && directions.get(s1 - 1, s2 - 1) === 3) {\n            extendedSeqScore += lengths.get(s1 - 1, s2 - 1);\n          }\n          extendedSeqScore += equalityScore ? equalityScore(s1, s2) : 1;\n        } else {\n          extendedSeqScore = -1;\n        }\n        const newValue = Math.max(horizontalLen, verticalLen, extendedSeqScore);\n        if (newValue === extendedSeqScore) {\n          const prevLen = s1 > 0 && s2 > 0 ? lengths.get(s1 - 1, s2 - 1) : 0;\n          lengths.set(s1, s2, prevLen + 1);\n          directions.set(s1, s2, 3);\n        } else if (newValue === horizontalLen) {\n          lengths.set(s1, s2, 0);\n          directions.set(s1, s2, 1);\n        } else if (newValue === verticalLen) {\n          lengths.set(s1, s2, 0);\n          directions.set(s1, s2, 2);\n        }\n        lcsLengths.set(s1, s2, newValue);\n      }\n    }\n    const result = [];\n    let lastAligningPosS1 = sequence1.length;\n    let lastAligningPosS2 = sequence2.length;\n    function reportDecreasingAligningPositions(s1, s2) {\n      if (s1 + 1 !== lastAligningPosS1 || s2 + 1 !== lastAligningPosS2) {\n        result.push(new require$_DOT__SLASH_diffAlgorithm_DOT_js.SequenceDiff(new require$_DOT__DOT__SLASH__DOT__DOT__SLASH__DOT__DOT__SLASH_core_SLASH_offsetRange_DOT_js.OffsetRange(s1 + 1, lastAligningPosS1), new require$_DOT__DOT__SLASH__DOT__DOT__SLASH__DOT__DOT__SLASH_core_SLASH_offsetRange_DOT_js.OffsetRange(s2 + 1, lastAligningPosS2)));\n      }\n      lastAligningPosS1 = s1;\n      lastAligningPosS2 = s2;\n    }\n    let s1 = sequence1.length - 1;\n    let s2 = sequence2.length - 1;\n    while (s1 >= 0 && s2 >= 0) {\n      if (directions.get(s1, s2) === 3) {\n        reportDecreasingAligningPositions(s1, s2);\n        s1--;\n        s2--;\n      } else {\n        if (directions.get(s1, s2) === 1) {\n          s1--;\n        } else {\n          s2--;\n        }\n      }\n    }\n    reportDecreasingAligningPositions(-1, -1);\n    result.reverse();\n    return new require$_DOT__SLASH_diffAlgorithm_DOT_js.DiffAlgorithmResult(result, false);\n  }\n}\n\n};"],
"names":["shadow$provide","require","module","exports","Object","defineProperties","__esModule","enumerable","value","DynamicProgrammingDiffing","get","require$_DOT__DOT__SLASH__DOT__DOT__SLASH__DOT__DOT__SLASH_core_SLASH_offsetRange_DOT_js","require$_DOT__SLASH_diffAlgorithm_DOT_js","require$_DOT__DOT__SLASH_utils_DOT_js","compute","sequence1","sequence2","timeout","InfiniteTimeout","instance","equalityScore","reportDecreasingAligningPositions","s1","s2","lastAligningPosS1","lastAligningPosS2","result","push","SequenceDiff","OffsetRange","length","DiffAlgorithmResult","trivial","lcsLengths","Array2D","directions","lengths","isValid","trivialTimedOut","horizontalLen","verticalLen","extendedSeqScore","getElement","newValue","Math","max","prevLen","set","reverse"]
}
