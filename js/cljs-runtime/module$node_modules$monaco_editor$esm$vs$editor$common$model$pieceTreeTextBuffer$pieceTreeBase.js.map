{
"version":3,
"file":"module$node_modules$monaco_editor$esm$vs$editor$common$model$pieceTreeTextBuffer$pieceTreeBase.js",
"lineCount":894,
"mappings":"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",
"sources":["node_modules/monaco-editor/esm/vs/editor/common/model/pieceTreeTextBuffer/pieceTreeBase.js"],
"sourcesContent":["shadow$provide[\"module$node_modules$monaco_editor$esm$vs$editor$common$model$pieceTreeTextBuffer$pieceTreeBase\"] = function(require,module,exports) {\nObject.defineProperties(exports, {__esModule:{enumerable:true, value:true}, Piece:{enumerable:true, get:function() {\n  return Piece;\n}}, PieceTreeBase:{enumerable:true, get:function() {\n  return PieceTreeBase;\n}}, StringBuffer:{enumerable:true, get:function() {\n  return StringBuffer;\n}}, createLineStarts:{enumerable:true, get:function() {\n  return createLineStarts;\n}}, createLineStartsFast:{enumerable:true, get:function() {\n  return createLineStartsFast;\n}}});\nvar require$_DOT__DOT__SLASH__DOT__DOT__SLASH_core_SLASH_position_DOT_js = require(\"../../core/position.js\");\nvar require$_DOT__DOT__SLASH__DOT__DOT__SLASH_core_SLASH_range_DOT_js = require(\"../../core/range.js\");\nvar require$_DOT__DOT__SLASH__DOT__DOT__SLASH_model_DOT_js = require(\"../../model.js\");\nvar require$_DOT__SLASH_rbTreeBase_DOT_js = require(\"./rbTreeBase.js\");\nvar require$_DOT__DOT__SLASH_textModelSearch_DOT_js = require(\"../textModelSearch.js\");\nconst AverageBufferSize = 65535;\nfunction createUintArray(arr) {\n  let r;\n  if (arr[arr.length - 1] < 65536) {\n    r = new Uint16Array(arr.length);\n  } else {\n    r = new Uint32Array(arr.length);\n  }\n  r.set(arr, 0);\n  return r;\n}\nclass LineStarts {\n  constructor(lineStarts, cr, lf, crlf, isBasicASCII) {\n    this.lineStarts = lineStarts;\n    this.cr = cr;\n    this.lf = lf;\n    this.crlf = crlf;\n    this.isBasicASCII = isBasicASCII;\n  }\n}\nfunction createLineStartsFast(str, readonly = true) {\n  const r = [0];\n  let rLength = 1;\n  for (let i = 0, len = str.length; i < len; i++) {\n    const chr = str.charCodeAt(i);\n    if (chr === 13) {\n      if (i + 1 < len && str.charCodeAt(i + 1) === 10) {\n        r[rLength++] = i + 2;\n        i++;\n      } else {\n        r[rLength++] = i + 1;\n      }\n    } else if (chr === 10) {\n      r[rLength++] = i + 1;\n    }\n  }\n  if (readonly) {\n    return createUintArray(r);\n  } else {\n    return r;\n  }\n}\nfunction createLineStarts(r, str) {\n  r.length = 0;\n  r[0] = 0;\n  let rLength = 1;\n  let cr = 0, lf = 0, crlf = 0;\n  let isBasicASCII = true;\n  for (let i = 0, len = str.length; i < len; i++) {\n    const chr = str.charCodeAt(i);\n    if (chr === 13) {\n      if (i + 1 < len && str.charCodeAt(i + 1) === 10) {\n        crlf++;\n        r[rLength++] = i + 2;\n        i++;\n      } else {\n        cr++;\n        r[rLength++] = i + 1;\n      }\n    } else if (chr === 10) {\n      lf++;\n      r[rLength++] = i + 1;\n    } else {\n      if (isBasicASCII) {\n        if (chr !== 9 && (chr < 32 || chr > 126)) {\n          isBasicASCII = false;\n        }\n      }\n    }\n  }\n  const result = new LineStarts(createUintArray(r), cr, lf, crlf, isBasicASCII);\n  r.length = 0;\n  return result;\n}\nclass Piece {\n  constructor(bufferIndex, start, end, lineFeedCnt, length) {\n    this.bufferIndex = bufferIndex;\n    this.start = start;\n    this.end = end;\n    this.lineFeedCnt = lineFeedCnt;\n    this.length = length;\n  }\n}\nclass StringBuffer {\n  constructor(buffer, lineStarts) {\n    this.buffer = buffer;\n    this.lineStarts = lineStarts;\n  }\n}\nclass PieceTreeSnapshot {\n  constructor(tree, BOM) {\n    this._pieces = [];\n    this._tree = tree;\n    this._BOM = BOM;\n    this._index = 0;\n    if (tree.root !== require$_DOT__SLASH_rbTreeBase_DOT_js.SENTINEL) {\n      tree.iterate(tree.root, node => {\n        if (node !== require$_DOT__SLASH_rbTreeBase_DOT_js.SENTINEL) {\n          this._pieces.push(node.piece);\n        }\n        return true;\n      });\n    }\n  }\n  read() {\n    if (this._pieces.length === 0) {\n      if (this._index === 0) {\n        this._index++;\n        return this._BOM;\n      } else {\n        return null;\n      }\n    }\n    if (this._index > this._pieces.length - 1) {\n      return null;\n    }\n    if (this._index === 0) {\n      return this._BOM + this._tree.getPieceContent(this._pieces[this._index++]);\n    }\n    return this._tree.getPieceContent(this._pieces[this._index++]);\n  }\n}\nclass PieceTreeSearchCache {\n  constructor(limit) {\n    this._limit = limit;\n    this._cache = [];\n  }\n  get(offset) {\n    for (let i = this._cache.length - 1; i >= 0; i--) {\n      const nodePos = this._cache[i];\n      if (nodePos.nodeStartOffset <= offset && nodePos.nodeStartOffset + nodePos.node.piece.length >= offset) {\n        return nodePos;\n      }\n    }\n    return null;\n  }\n  get2(lineNumber) {\n    for (let i = this._cache.length - 1; i >= 0; i--) {\n      const nodePos = this._cache[i];\n      if (nodePos.nodeStartLineNumber && nodePos.nodeStartLineNumber < lineNumber && nodePos.nodeStartLineNumber + nodePos.node.piece.lineFeedCnt >= lineNumber) {\n        return nodePos;\n      }\n    }\n    return null;\n  }\n  set(nodePosition) {\n    if (this._cache.length >= this._limit) {\n      this._cache.shift();\n    }\n    this._cache.push(nodePosition);\n  }\n  validate(offset) {\n    let hasInvalidVal = false;\n    const tmp = this._cache;\n    for (let i = 0; i < tmp.length; i++) {\n      const nodePos = tmp[i];\n      if (nodePos.node.parent === null || nodePos.nodeStartOffset >= offset) {\n        tmp[i] = null;\n        hasInvalidVal = true;\n        continue;\n      }\n    }\n    if (hasInvalidVal) {\n      const newArr = [];\n      for (const entry of tmp) {\n        if (entry !== null) {\n          newArr.push(entry);\n        }\n      }\n      this._cache = newArr;\n    }\n  }\n}\nclass PieceTreeBase {\n  constructor(chunks, eol, eolNormalized) {\n    this.create(chunks, eol, eolNormalized);\n  }\n  create(chunks, eol, eolNormalized) {\n    this._buffers = [new StringBuffer(\"\", [0])];\n    this._lastChangeBufferPos = {line:0, column:0};\n    this.root = require$_DOT__SLASH_rbTreeBase_DOT_js.SENTINEL;\n    this._lineCnt = 1;\n    this._length = 0;\n    this._EOL = eol;\n    this._EOLLength = eol.length;\n    this._EOLNormalized = eolNormalized;\n    let lastNode = null;\n    for (let i = 0, len = chunks.length; i < len; i++) {\n      if (chunks[i].buffer.length > 0) {\n        if (!chunks[i].lineStarts) {\n          chunks[i].lineStarts = createLineStartsFast(chunks[i].buffer);\n        }\n        const piece = new Piece(i + 1, {line:0, column:0}, {line:chunks[i].lineStarts.length - 1, column:chunks[i].buffer.length - chunks[i].lineStarts[chunks[i].lineStarts.length - 1]}, chunks[i].lineStarts.length - 1, chunks[i].buffer.length);\n        this._buffers.push(chunks[i]);\n        lastNode = this.rbInsertRight(lastNode, piece);\n      }\n    }\n    this._searchCache = new PieceTreeSearchCache(1);\n    this._lastVisitedLine = {lineNumber:0, value:\"\"};\n    this.computeBufferMetadata();\n  }\n  normalizeEOL(eol) {\n    const averageBufferSize = AverageBufferSize;\n    const min = averageBufferSize - Math.floor(averageBufferSize / 3);\n    const max = min * 2;\n    let tempChunk = \"\";\n    let tempChunkLen = 0;\n    const chunks = [];\n    this.iterate(this.root, node => {\n      const str = this.getNodeContent(node);\n      const len = str.length;\n      if (tempChunkLen <= min || tempChunkLen + len < max) {\n        tempChunk += str;\n        tempChunkLen += len;\n        return true;\n      }\n      const text = tempChunk.replace(/\\r\\n|\\r|\\n/g, eol);\n      chunks.push(new StringBuffer(text, createLineStartsFast(text)));\n      tempChunk = str;\n      tempChunkLen = len;\n      return true;\n    });\n    if (tempChunkLen > 0) {\n      const text = tempChunk.replace(/\\r\\n|\\r|\\n/g, eol);\n      chunks.push(new StringBuffer(text, createLineStartsFast(text)));\n    }\n    this.create(chunks, eol, true);\n  }\n  getEOL() {\n    return this._EOL;\n  }\n  setEOL(newEOL) {\n    this._EOL = newEOL;\n    this._EOLLength = this._EOL.length;\n    this.normalizeEOL(newEOL);\n  }\n  createSnapshot(BOM) {\n    return new PieceTreeSnapshot(this, BOM);\n  }\n  getOffsetAt(lineNumber, column) {\n    let leftLen = 0;\n    let x = this.root;\n    while (x !== require$_DOT__SLASH_rbTreeBase_DOT_js.SENTINEL) {\n      if (x.left !== require$_DOT__SLASH_rbTreeBase_DOT_js.SENTINEL && x.lf_left + 1 >= lineNumber) {\n        x = x.left;\n      } else if (x.lf_left + x.piece.lineFeedCnt + 1 >= lineNumber) {\n        leftLen += x.size_left;\n        const accumualtedValInCurrentIndex = this.getAccumulatedValue(x, lineNumber - x.lf_left - 2);\n        return leftLen += accumualtedValInCurrentIndex + column - 1;\n      } else {\n        lineNumber -= x.lf_left + x.piece.lineFeedCnt;\n        leftLen += x.size_left + x.piece.length;\n        x = x.right;\n      }\n    }\n    return leftLen;\n  }\n  getPositionAt(offset) {\n    offset = Math.floor(offset);\n    offset = Math.max(0, offset);\n    let x = this.root;\n    let lfCnt = 0;\n    const originalOffset = offset;\n    while (x !== require$_DOT__SLASH_rbTreeBase_DOT_js.SENTINEL) {\n      if (x.size_left !== 0 && x.size_left >= offset) {\n        x = x.left;\n      } else if (x.size_left + x.piece.length >= offset) {\n        const out = this.getIndexOf(x, offset - x.size_left);\n        lfCnt += x.lf_left + out.index;\n        if (out.index === 0) {\n          const lineStartOffset = this.getOffsetAt(lfCnt + 1, 1);\n          const column = originalOffset - lineStartOffset;\n          return new require$_DOT__DOT__SLASH__DOT__DOT__SLASH_core_SLASH_position_DOT_js.Position(lfCnt + 1, column + 1);\n        }\n        return new require$_DOT__DOT__SLASH__DOT__DOT__SLASH_core_SLASH_position_DOT_js.Position(lfCnt + 1, out.remainder + 1);\n      } else {\n        offset -= x.size_left + x.piece.length;\n        lfCnt += x.lf_left + x.piece.lineFeedCnt;\n        if (x.right === require$_DOT__SLASH_rbTreeBase_DOT_js.SENTINEL) {\n          const lineStartOffset = this.getOffsetAt(lfCnt + 1, 1);\n          const column = originalOffset - offset - lineStartOffset;\n          return new require$_DOT__DOT__SLASH__DOT__DOT__SLASH_core_SLASH_position_DOT_js.Position(lfCnt + 1, column + 1);\n        } else {\n          x = x.right;\n        }\n      }\n    }\n    return new require$_DOT__DOT__SLASH__DOT__DOT__SLASH_core_SLASH_position_DOT_js.Position(1, 1);\n  }\n  getValueInRange(range, eol) {\n    if (range.startLineNumber === range.endLineNumber && range.startColumn === range.endColumn) {\n      return \"\";\n    }\n    const startPosition = this.nodeAt2(range.startLineNumber, range.startColumn);\n    const endPosition = this.nodeAt2(range.endLineNumber, range.endColumn);\n    const value = this.getValueInRange2(startPosition, endPosition);\n    if (eol) {\n      if (eol !== this._EOL || !this._EOLNormalized) {\n        return value.replace(/\\r\\n|\\r|\\n/g, eol);\n      }\n      if (eol === this.getEOL() && this._EOLNormalized) {\n        if (eol === \"\\r\\n\") {\n        }\n        return value;\n      }\n      return value.replace(/\\r\\n|\\r|\\n/g, eol);\n    }\n    return value;\n  }\n  getValueInRange2(startPosition, endPosition) {\n    if (startPosition.node === endPosition.node) {\n      const node = startPosition.node;\n      const buffer = this._buffers[node.piece.bufferIndex].buffer;\n      const startOffset = this.offsetInBuffer(node.piece.bufferIndex, node.piece.start);\n      return buffer.substring(startOffset + startPosition.remainder, startOffset + endPosition.remainder);\n    }\n    let x = startPosition.node;\n    const buffer = this._buffers[x.piece.bufferIndex].buffer;\n    const startOffset = this.offsetInBuffer(x.piece.bufferIndex, x.piece.start);\n    let ret = buffer.substring(startOffset + startPosition.remainder, startOffset + x.piece.length);\n    x = x.next();\n    while (x !== require$_DOT__SLASH_rbTreeBase_DOT_js.SENTINEL) {\n      const buffer = this._buffers[x.piece.bufferIndex].buffer;\n      const startOffset = this.offsetInBuffer(x.piece.bufferIndex, x.piece.start);\n      if (x === endPosition.node) {\n        ret += buffer.substring(startOffset, startOffset + endPosition.remainder);\n        break;\n      } else {\n        ret += buffer.substr(startOffset, x.piece.length);\n      }\n      x = x.next();\n    }\n    return ret;\n  }\n  getLinesContent() {\n    const lines = [];\n    let linesLength = 0;\n    let currentLine = \"\";\n    let danglingCR = false;\n    this.iterate(this.root, node => {\n      if (node === require$_DOT__SLASH_rbTreeBase_DOT_js.SENTINEL) {\n        return true;\n      }\n      const piece = node.piece;\n      let pieceLength = piece.length;\n      if (pieceLength === 0) {\n        return true;\n      }\n      const buffer = this._buffers[piece.bufferIndex].buffer;\n      const lineStarts = this._buffers[piece.bufferIndex].lineStarts;\n      const pieceStartLine = piece.start.line;\n      const pieceEndLine = piece.end.line;\n      let pieceStartOffset = lineStarts[pieceStartLine] + piece.start.column;\n      if (danglingCR) {\n        if (buffer.charCodeAt(pieceStartOffset) === 10) {\n          pieceStartOffset++;\n          pieceLength--;\n        }\n        lines[linesLength++] = currentLine;\n        currentLine = \"\";\n        danglingCR = false;\n        if (pieceLength === 0) {\n          return true;\n        }\n      }\n      if (pieceStartLine === pieceEndLine) {\n        if (!this._EOLNormalized && buffer.charCodeAt(pieceStartOffset + pieceLength - 1) === 13) {\n          danglingCR = true;\n          currentLine += buffer.substr(pieceStartOffset, pieceLength - 1);\n        } else {\n          currentLine += buffer.substr(pieceStartOffset, pieceLength);\n        }\n        return true;\n      }\n      currentLine += this._EOLNormalized ? buffer.substring(pieceStartOffset, Math.max(pieceStartOffset, lineStarts[pieceStartLine + 1] - this._EOLLength)) : buffer.substring(pieceStartOffset, lineStarts[pieceStartLine + 1]).replace(/(\\r\\n|\\r|\\n)$/, \"\");\n      lines[linesLength++] = currentLine;\n      for (let line = pieceStartLine + 1; line < pieceEndLine; line++) {\n        currentLine = this._EOLNormalized ? buffer.substring(lineStarts[line], lineStarts[line + 1] - this._EOLLength) : buffer.substring(lineStarts[line], lineStarts[line + 1]).replace(/(\\r\\n|\\r|\\n)$/, \"\");\n        lines[linesLength++] = currentLine;\n      }\n      if (!this._EOLNormalized && buffer.charCodeAt(lineStarts[pieceEndLine] + piece.end.column - 1) === 13) {\n        danglingCR = true;\n        if (piece.end.column === 0) {\n          linesLength--;\n        } else {\n          currentLine = buffer.substr(lineStarts[pieceEndLine], piece.end.column - 1);\n        }\n      } else {\n        currentLine = buffer.substr(lineStarts[pieceEndLine], piece.end.column);\n      }\n      return true;\n    });\n    if (danglingCR) {\n      lines[linesLength++] = currentLine;\n      currentLine = \"\";\n    }\n    lines[linesLength++] = currentLine;\n    return lines;\n  }\n  getLength() {\n    return this._length;\n  }\n  getLineCount() {\n    return this._lineCnt;\n  }\n  getLineContent(lineNumber) {\n    if (this._lastVisitedLine.lineNumber === lineNumber) {\n      return this._lastVisitedLine.value;\n    }\n    this._lastVisitedLine.lineNumber = lineNumber;\n    if (lineNumber === this._lineCnt) {\n      this._lastVisitedLine.value = this.getLineRawContent(lineNumber);\n    } else if (this._EOLNormalized) {\n      this._lastVisitedLine.value = this.getLineRawContent(lineNumber, this._EOLLength);\n    } else {\n      this._lastVisitedLine.value = this.getLineRawContent(lineNumber).replace(/(\\r\\n|\\r|\\n)$/, \"\");\n    }\n    return this._lastVisitedLine.value;\n  }\n  _getCharCode(nodePos) {\n    if (nodePos.remainder === nodePos.node.piece.length) {\n      const matchingNode = nodePos.node.next();\n      if (!matchingNode) {\n        return 0;\n      }\n      const buffer = this._buffers[matchingNode.piece.bufferIndex];\n      const startOffset = this.offsetInBuffer(matchingNode.piece.bufferIndex, matchingNode.piece.start);\n      return buffer.buffer.charCodeAt(startOffset);\n    } else {\n      const buffer = this._buffers[nodePos.node.piece.bufferIndex];\n      const startOffset = this.offsetInBuffer(nodePos.node.piece.bufferIndex, nodePos.node.piece.start);\n      const targetOffset = startOffset + nodePos.remainder;\n      return buffer.buffer.charCodeAt(targetOffset);\n    }\n  }\n  getLineCharCode(lineNumber, index) {\n    const nodePos = this.nodeAt2(lineNumber, index + 1);\n    return this._getCharCode(nodePos);\n  }\n  getLineLength(lineNumber) {\n    if (lineNumber === this.getLineCount()) {\n      const startOffset = this.getOffsetAt(lineNumber, 1);\n      return this.getLength() - startOffset;\n    }\n    return this.getOffsetAt(lineNumber + 1, 1) - this.getOffsetAt(lineNumber, 1) - this._EOLLength;\n  }\n  findMatchesInNode(node, searcher, startLineNumber, startColumn, startCursor, endCursor, searchData, captureMatches, limitResultCount, resultLen, result) {\n    const buffer = this._buffers[node.piece.bufferIndex];\n    const startOffsetInBuffer = this.offsetInBuffer(node.piece.bufferIndex, node.piece.start);\n    const start = this.offsetInBuffer(node.piece.bufferIndex, startCursor);\n    const end = this.offsetInBuffer(node.piece.bufferIndex, endCursor);\n    let m;\n    const ret = {line:0, column:0};\n    let searchText;\n    let offsetInBuffer;\n    if (searcher._wordSeparators) {\n      searchText = buffer.buffer.substring(start, end);\n      offsetInBuffer = offset => offset + start;\n      searcher.reset(0);\n    } else {\n      searchText = buffer.buffer;\n      offsetInBuffer = offset => offset;\n      searcher.reset(start);\n    }\n    do {\n      m = searcher.next(searchText);\n      if (m) {\n        if (offsetInBuffer(m.index) >= end) {\n          return resultLen;\n        }\n        this.positionInBuffer(node, offsetInBuffer(m.index) - startOffsetInBuffer, ret);\n        const lineFeedCnt = this.getLineFeedCnt(node.piece.bufferIndex, startCursor, ret);\n        const retStartColumn = ret.line === startCursor.line ? ret.column - startCursor.column + startColumn : ret.column + 1;\n        const retEndColumn = retStartColumn + m[0].length;\n        result[resultLen++] = (0,require$_DOT__DOT__SLASH_textModelSearch_DOT_js.createFindMatch)(new require$_DOT__DOT__SLASH__DOT__DOT__SLASH_core_SLASH_range_DOT_js.Range(startLineNumber + lineFeedCnt, retStartColumn, startLineNumber + lineFeedCnt, retEndColumn), m, captureMatches);\n        if (offsetInBuffer(m.index) + m[0].length >= end) {\n          return resultLen;\n        }\n        if (resultLen >= limitResultCount) {\n          return resultLen;\n        }\n      }\n    } while (m);\n    return resultLen;\n  }\n  findMatchesLineByLine(searchRange, searchData, captureMatches, limitResultCount) {\n    const result = [];\n    let resultLen = 0;\n    const searcher = new require$_DOT__DOT__SLASH_textModelSearch_DOT_js.Searcher(searchData.wordSeparators, searchData.regex);\n    let startPosition = this.nodeAt2(searchRange.startLineNumber, searchRange.startColumn);\n    if (startPosition === null) {\n      return [];\n    }\n    const endPosition = this.nodeAt2(searchRange.endLineNumber, searchRange.endColumn);\n    if (endPosition === null) {\n      return [];\n    }\n    let start = this.positionInBuffer(startPosition.node, startPosition.remainder);\n    const end = this.positionInBuffer(endPosition.node, endPosition.remainder);\n    if (startPosition.node === endPosition.node) {\n      this.findMatchesInNode(startPosition.node, searcher, searchRange.startLineNumber, searchRange.startColumn, start, end, searchData, captureMatches, limitResultCount, resultLen, result);\n      return result;\n    }\n    let startLineNumber = searchRange.startLineNumber;\n    let currentNode = startPosition.node;\n    while (currentNode !== endPosition.node) {\n      const lineBreakCnt = this.getLineFeedCnt(currentNode.piece.bufferIndex, start, currentNode.piece.end);\n      if (lineBreakCnt >= 1) {\n        const lineStarts = this._buffers[currentNode.piece.bufferIndex].lineStarts;\n        const startOffsetInBuffer = this.offsetInBuffer(currentNode.piece.bufferIndex, currentNode.piece.start);\n        const nextLineStartOffset = lineStarts[start.line + lineBreakCnt];\n        const startColumn = startLineNumber === searchRange.startLineNumber ? searchRange.startColumn : 1;\n        resultLen = this.findMatchesInNode(currentNode, searcher, startLineNumber, startColumn, start, this.positionInBuffer(currentNode, nextLineStartOffset - startOffsetInBuffer), searchData, captureMatches, limitResultCount, resultLen, result);\n        if (resultLen >= limitResultCount) {\n          return result;\n        }\n        startLineNumber += lineBreakCnt;\n      }\n      const startColumn = startLineNumber === searchRange.startLineNumber ? searchRange.startColumn - 1 : 0;\n      if (startLineNumber === searchRange.endLineNumber) {\n        const text = this.getLineContent(startLineNumber).substring(startColumn, searchRange.endColumn - 1);\n        resultLen = this._findMatchesInLine(searchData, searcher, text, searchRange.endLineNumber, startColumn, resultLen, result, captureMatches, limitResultCount);\n        return result;\n      }\n      resultLen = this._findMatchesInLine(searchData, searcher, this.getLineContent(startLineNumber).substr(startColumn), startLineNumber, startColumn, resultLen, result, captureMatches, limitResultCount);\n      if (resultLen >= limitResultCount) {\n        return result;\n      }\n      startLineNumber++;\n      startPosition = this.nodeAt2(startLineNumber, 1);\n      currentNode = startPosition.node;\n      start = this.positionInBuffer(startPosition.node, startPosition.remainder);\n    }\n    if (startLineNumber === searchRange.endLineNumber) {\n      const startColumn = startLineNumber === searchRange.startLineNumber ? searchRange.startColumn - 1 : 0;\n      const text = this.getLineContent(startLineNumber).substring(startColumn, searchRange.endColumn - 1);\n      resultLen = this._findMatchesInLine(searchData, searcher, text, searchRange.endLineNumber, startColumn, resultLen, result, captureMatches, limitResultCount);\n      return result;\n    }\n    const startColumn = startLineNumber === searchRange.startLineNumber ? searchRange.startColumn : 1;\n    resultLen = this.findMatchesInNode(endPosition.node, searcher, startLineNumber, startColumn, start, end, searchData, captureMatches, limitResultCount, resultLen, result);\n    return result;\n  }\n  _findMatchesInLine(searchData, searcher, text, lineNumber, deltaOffset, resultLen, result, captureMatches, limitResultCount) {\n    const wordSeparators = searchData.wordSeparators;\n    if (!captureMatches && searchData.simpleSearch) {\n      const searchString = searchData.simpleSearch;\n      const searchStringLen = searchString.length;\n      const textLength = text.length;\n      let lastMatchIndex = -searchStringLen;\n      while ((lastMatchIndex = text.indexOf(searchString, lastMatchIndex + searchStringLen)) !== -1) {\n        if (!wordSeparators || (0,require$_DOT__DOT__SLASH_textModelSearch_DOT_js.isValidMatch)(wordSeparators, text, textLength, lastMatchIndex, searchStringLen)) {\n          result[resultLen++] = new require$_DOT__DOT__SLASH__DOT__DOT__SLASH_model_DOT_js.FindMatch(new require$_DOT__DOT__SLASH__DOT__DOT__SLASH_core_SLASH_range_DOT_js.Range(lineNumber, lastMatchIndex + 1 + deltaOffset, lineNumber, lastMatchIndex + 1 + searchStringLen + deltaOffset), null);\n          if (resultLen >= limitResultCount) {\n            return resultLen;\n          }\n        }\n      }\n      return resultLen;\n    }\n    let m;\n    searcher.reset(0);\n    do {\n      m = searcher.next(text);\n      if (m) {\n        result[resultLen++] = (0,require$_DOT__DOT__SLASH_textModelSearch_DOT_js.createFindMatch)(new require$_DOT__DOT__SLASH__DOT__DOT__SLASH_core_SLASH_range_DOT_js.Range(lineNumber, m.index + 1 + deltaOffset, lineNumber, m.index + 1 + m[0].length + deltaOffset), m, captureMatches);\n        if (resultLen >= limitResultCount) {\n          return resultLen;\n        }\n      }\n    } while (m);\n    return resultLen;\n  }\n  insert(offset, value, eolNormalized = false) {\n    this._EOLNormalized = this._EOLNormalized && eolNormalized;\n    this._lastVisitedLine.lineNumber = 0;\n    this._lastVisitedLine.value = \"\";\n    if (this.root !== require$_DOT__SLASH_rbTreeBase_DOT_js.SENTINEL) {\n      const {node, remainder, nodeStartOffset} = this.nodeAt(offset);\n      const piece = node.piece;\n      const bufferIndex = piece.bufferIndex;\n      const insertPosInBuffer = this.positionInBuffer(node, remainder);\n      if (node.piece.bufferIndex === 0 && piece.end.line === this._lastChangeBufferPos.line && piece.end.column === this._lastChangeBufferPos.column && nodeStartOffset + piece.length === offset && value.length < AverageBufferSize) {\n        this.appendToNode(node, value);\n        this.computeBufferMetadata();\n        return;\n      }\n      if (nodeStartOffset === offset) {\n        this.insertContentToNodeLeft(value, node);\n        this._searchCache.validate(offset);\n      } else if (nodeStartOffset + node.piece.length > offset) {\n        const nodesToDel = [];\n        let newRightPiece = new Piece(piece.bufferIndex, insertPosInBuffer, piece.end, this.getLineFeedCnt(piece.bufferIndex, insertPosInBuffer, piece.end), this.offsetInBuffer(bufferIndex, piece.end) - this.offsetInBuffer(bufferIndex, insertPosInBuffer));\n        if (this.shouldCheckCRLF() && this.endWithCR(value)) {\n          const headOfRight = this.nodeCharCodeAt(node, remainder);\n          if (headOfRight === 10) {\n            const newStart = {line:newRightPiece.start.line + 1, column:0};\n            newRightPiece = new Piece(newRightPiece.bufferIndex, newStart, newRightPiece.end, this.getLineFeedCnt(newRightPiece.bufferIndex, newStart, newRightPiece.end), newRightPiece.length - 1);\n            value += \"\\n\";\n          }\n        }\n        if (this.shouldCheckCRLF() && this.startWithLF(value)) {\n          const tailOfLeft = this.nodeCharCodeAt(node, remainder - 1);\n          if (tailOfLeft === 13) {\n            const previousPos = this.positionInBuffer(node, remainder - 1);\n            this.deleteNodeTail(node, previousPos);\n            value = \"\\r\" + value;\n            if (node.piece.length === 0) {\n              nodesToDel.push(node);\n            }\n          } else {\n            this.deleteNodeTail(node, insertPosInBuffer);\n          }\n        } else {\n          this.deleteNodeTail(node, insertPosInBuffer);\n        }\n        const newPieces = this.createNewPieces(value);\n        if (newRightPiece.length > 0) {\n          this.rbInsertRight(node, newRightPiece);\n        }\n        let tmpNode = node;\n        for (let k = 0; k < newPieces.length; k++) {\n          tmpNode = this.rbInsertRight(tmpNode, newPieces[k]);\n        }\n        this.deleteNodes(nodesToDel);\n      } else {\n        this.insertContentToNodeRight(value, node);\n      }\n    } else {\n      const pieces = this.createNewPieces(value);\n      let node = this.rbInsertLeft(null, pieces[0]);\n      for (let k = 1; k < pieces.length; k++) {\n        node = this.rbInsertRight(node, pieces[k]);\n      }\n    }\n    this.computeBufferMetadata();\n  }\n  delete(offset, cnt) {\n    this._lastVisitedLine.lineNumber = 0;\n    this._lastVisitedLine.value = \"\";\n    if (cnt <= 0 || this.root === require$_DOT__SLASH_rbTreeBase_DOT_js.SENTINEL) {\n      return;\n    }\n    const startPosition = this.nodeAt(offset);\n    const endPosition = this.nodeAt(offset + cnt);\n    const startNode = startPosition.node;\n    const endNode = endPosition.node;\n    if (startNode === endNode) {\n      const startSplitPosInBuffer = this.positionInBuffer(startNode, startPosition.remainder);\n      const endSplitPosInBuffer = this.positionInBuffer(startNode, endPosition.remainder);\n      if (startPosition.nodeStartOffset === offset) {\n        if (cnt === startNode.piece.length) {\n          const next = startNode.next();\n          (0,require$_DOT__SLASH_rbTreeBase_DOT_js.rbDelete)(this, startNode);\n          this.validateCRLFWithPrevNode(next);\n          this.computeBufferMetadata();\n          return;\n        }\n        this.deleteNodeHead(startNode, endSplitPosInBuffer);\n        this._searchCache.validate(offset);\n        this.validateCRLFWithPrevNode(startNode);\n        this.computeBufferMetadata();\n        return;\n      }\n      if (startPosition.nodeStartOffset + startNode.piece.length === offset + cnt) {\n        this.deleteNodeTail(startNode, startSplitPosInBuffer);\n        this.validateCRLFWithNextNode(startNode);\n        this.computeBufferMetadata();\n        return;\n      }\n      this.shrinkNode(startNode, startSplitPosInBuffer, endSplitPosInBuffer);\n      this.computeBufferMetadata();\n      return;\n    }\n    const nodesToDel = [];\n    const startSplitPosInBuffer = this.positionInBuffer(startNode, startPosition.remainder);\n    this.deleteNodeTail(startNode, startSplitPosInBuffer);\n    this._searchCache.validate(offset);\n    if (startNode.piece.length === 0) {\n      nodesToDel.push(startNode);\n    }\n    const endSplitPosInBuffer = this.positionInBuffer(endNode, endPosition.remainder);\n    this.deleteNodeHead(endNode, endSplitPosInBuffer);\n    if (endNode.piece.length === 0) {\n      nodesToDel.push(endNode);\n    }\n    const secondNode = startNode.next();\n    for (let node = secondNode; node !== require$_DOT__SLASH_rbTreeBase_DOT_js.SENTINEL && node !== endNode; node = node.next()) {\n      nodesToDel.push(node);\n    }\n    const prev = startNode.piece.length === 0 ? startNode.prev() : startNode;\n    this.deleteNodes(nodesToDel);\n    this.validateCRLFWithNextNode(prev);\n    this.computeBufferMetadata();\n  }\n  insertContentToNodeLeft(value, node) {\n    const nodesToDel = [];\n    if (this.shouldCheckCRLF() && this.endWithCR(value) && this.startWithLF(node)) {\n      const piece = node.piece;\n      const newStart = {line:piece.start.line + 1, column:0};\n      const nPiece = new Piece(piece.bufferIndex, newStart, piece.end, this.getLineFeedCnt(piece.bufferIndex, newStart, piece.end), piece.length - 1);\n      node.piece = nPiece;\n      value += \"\\n\";\n      (0,require$_DOT__SLASH_rbTreeBase_DOT_js.updateTreeMetadata)(this, node, -1, -1);\n      if (node.piece.length === 0) {\n        nodesToDel.push(node);\n      }\n    }\n    const newPieces = this.createNewPieces(value);\n    let newNode = this.rbInsertLeft(node, newPieces[newPieces.length - 1]);\n    for (let k = newPieces.length - 2; k >= 0; k--) {\n      newNode = this.rbInsertLeft(newNode, newPieces[k]);\n    }\n    this.validateCRLFWithPrevNode(newNode);\n    this.deleteNodes(nodesToDel);\n  }\n  insertContentToNodeRight(value, node) {\n    if (this.adjustCarriageReturnFromNext(value, node)) {\n      value += \"\\n\";\n    }\n    const newPieces = this.createNewPieces(value);\n    const newNode = this.rbInsertRight(node, newPieces[0]);\n    let tmpNode = newNode;\n    for (let k = 1; k < newPieces.length; k++) {\n      tmpNode = this.rbInsertRight(tmpNode, newPieces[k]);\n    }\n    this.validateCRLFWithPrevNode(newNode);\n  }\n  positionInBuffer(node, remainder, ret) {\n    const piece = node.piece;\n    const bufferIndex = node.piece.bufferIndex;\n    const lineStarts = this._buffers[bufferIndex].lineStarts;\n    const startOffset = lineStarts[piece.start.line] + piece.start.column;\n    const offset = startOffset + remainder;\n    let low = piece.start.line;\n    let high = piece.end.line;\n    let mid = 0;\n    let midStop = 0;\n    let midStart = 0;\n    while (low <= high) {\n      mid = low + (high - low) / 2 | 0;\n      midStart = lineStarts[mid];\n      if (mid === high) {\n        break;\n      }\n      midStop = lineStarts[mid + 1];\n      if (offset < midStart) {\n        high = mid - 1;\n      } else if (offset >= midStop) {\n        low = mid + 1;\n      } else {\n        break;\n      }\n    }\n    if (ret) {\n      ret.line = mid;\n      ret.column = offset - midStart;\n      return null;\n    }\n    return {line:mid, column:offset - midStart};\n  }\n  getLineFeedCnt(bufferIndex, start, end) {\n    if (end.column === 0) {\n      return end.line - start.line;\n    }\n    const lineStarts = this._buffers[bufferIndex].lineStarts;\n    if (end.line === lineStarts.length - 1) {\n      return end.line - start.line;\n    }\n    const nextLineStartOffset = lineStarts[end.line + 1];\n    const endOffset = lineStarts[end.line] + end.column;\n    if (nextLineStartOffset > endOffset + 1) {\n      return end.line - start.line;\n    }\n    const previousCharOffset = endOffset - 1;\n    const buffer = this._buffers[bufferIndex].buffer;\n    if (buffer.charCodeAt(previousCharOffset) === 13) {\n      return end.line - start.line + 1;\n    } else {\n      return end.line - start.line;\n    }\n  }\n  offsetInBuffer(bufferIndex, cursor) {\n    const lineStarts = this._buffers[bufferIndex].lineStarts;\n    return lineStarts[cursor.line] + cursor.column;\n  }\n  deleteNodes(nodes) {\n    for (let i = 0; i < nodes.length; i++) {\n      (0,require$_DOT__SLASH_rbTreeBase_DOT_js.rbDelete)(this, nodes[i]);\n    }\n  }\n  createNewPieces(text) {\n    if (text.length > AverageBufferSize) {\n      const newPieces = [];\n      while (text.length > AverageBufferSize) {\n        const lastChar = text.charCodeAt(AverageBufferSize - 1);\n        let splitText;\n        if (lastChar === 13 || lastChar >= 55296 && lastChar <= 56319) {\n          splitText = text.substring(0, AverageBufferSize - 1);\n          text = text.substring(AverageBufferSize - 1);\n        } else {\n          splitText = text.substring(0, AverageBufferSize);\n          text = text.substring(AverageBufferSize);\n        }\n        const lineStarts = createLineStartsFast(splitText);\n        newPieces.push(new Piece(this._buffers.length, {line:0, column:0}, {line:lineStarts.length - 1, column:splitText.length - lineStarts[lineStarts.length - 1]}, lineStarts.length - 1, splitText.length));\n        this._buffers.push(new StringBuffer(splitText, lineStarts));\n      }\n      const lineStarts = createLineStartsFast(text);\n      newPieces.push(new Piece(this._buffers.length, {line:0, column:0}, {line:lineStarts.length - 1, column:text.length - lineStarts[lineStarts.length - 1]}, lineStarts.length - 1, text.length));\n      this._buffers.push(new StringBuffer(text, lineStarts));\n      return newPieces;\n    }\n    let startOffset = this._buffers[0].buffer.length;\n    const lineStarts = createLineStartsFast(text, false);\n    let start = this._lastChangeBufferPos;\n    if (this._buffers[0].lineStarts[this._buffers[0].lineStarts.length - 1] === startOffset && startOffset !== 0 && this.startWithLF(text) && this.endWithCR(this._buffers[0].buffer)) {\n      this._lastChangeBufferPos = {line:this._lastChangeBufferPos.line, column:this._lastChangeBufferPos.column + 1};\n      start = this._lastChangeBufferPos;\n      for (let i = 0; i < lineStarts.length; i++) {\n        lineStarts[i] += startOffset + 1;\n      }\n      this._buffers[0].lineStarts = this._buffers[0].lineStarts.concat(lineStarts.slice(1));\n      this._buffers[0].buffer += \"_\" + text;\n      startOffset += 1;\n    } else {\n      if (startOffset !== 0) {\n        for (let i = 0; i < lineStarts.length; i++) {\n          lineStarts[i] += startOffset;\n        }\n      }\n      this._buffers[0].lineStarts = this._buffers[0].lineStarts.concat(lineStarts.slice(1));\n      this._buffers[0].buffer += text;\n    }\n    const endOffset = this._buffers[0].buffer.length;\n    const endIndex = this._buffers[0].lineStarts.length - 1;\n    const endColumn = endOffset - this._buffers[0].lineStarts[endIndex];\n    const endPos = {line:endIndex, column:endColumn};\n    const newPiece = new Piece(0, start, endPos, this.getLineFeedCnt(0, start, endPos), endOffset - startOffset);\n    this._lastChangeBufferPos = endPos;\n    return [newPiece];\n  }\n  getLineRawContent(lineNumber, endOffset = 0) {\n    let x = this.root;\n    let ret = \"\";\n    const cache = this._searchCache.get2(lineNumber);\n    if (cache) {\n      x = cache.node;\n      const prevAccumulatedValue = this.getAccumulatedValue(x, lineNumber - cache.nodeStartLineNumber - 1);\n      const buffer = this._buffers[x.piece.bufferIndex].buffer;\n      const startOffset = this.offsetInBuffer(x.piece.bufferIndex, x.piece.start);\n      if (cache.nodeStartLineNumber + x.piece.lineFeedCnt === lineNumber) {\n        ret = buffer.substring(startOffset + prevAccumulatedValue, startOffset + x.piece.length);\n      } else {\n        const accumulatedValue = this.getAccumulatedValue(x, lineNumber - cache.nodeStartLineNumber);\n        return buffer.substring(startOffset + prevAccumulatedValue, startOffset + accumulatedValue - endOffset);\n      }\n    } else {\n      let nodeStartOffset = 0;\n      const originalLineNumber = lineNumber;\n      while (x !== require$_DOT__SLASH_rbTreeBase_DOT_js.SENTINEL) {\n        if (x.left !== require$_DOT__SLASH_rbTreeBase_DOT_js.SENTINEL && x.lf_left >= lineNumber - 1) {\n          x = x.left;\n        } else if (x.lf_left + x.piece.lineFeedCnt > lineNumber - 1) {\n          const prevAccumulatedValue = this.getAccumulatedValue(x, lineNumber - x.lf_left - 2);\n          const accumulatedValue = this.getAccumulatedValue(x, lineNumber - x.lf_left - 1);\n          const buffer = this._buffers[x.piece.bufferIndex].buffer;\n          const startOffset = this.offsetInBuffer(x.piece.bufferIndex, x.piece.start);\n          nodeStartOffset += x.size_left;\n          this._searchCache.set({node:x, nodeStartOffset, nodeStartLineNumber:originalLineNumber - (lineNumber - 1 - x.lf_left)});\n          return buffer.substring(startOffset + prevAccumulatedValue, startOffset + accumulatedValue - endOffset);\n        } else if (x.lf_left + x.piece.lineFeedCnt === lineNumber - 1) {\n          const prevAccumulatedValue = this.getAccumulatedValue(x, lineNumber - x.lf_left - 2);\n          const buffer = this._buffers[x.piece.bufferIndex].buffer;\n          const startOffset = this.offsetInBuffer(x.piece.bufferIndex, x.piece.start);\n          ret = buffer.substring(startOffset + prevAccumulatedValue, startOffset + x.piece.length);\n          break;\n        } else {\n          lineNumber -= x.lf_left + x.piece.lineFeedCnt;\n          nodeStartOffset += x.size_left + x.piece.length;\n          x = x.right;\n        }\n      }\n    }\n    x = x.next();\n    while (x !== require$_DOT__SLASH_rbTreeBase_DOT_js.SENTINEL) {\n      const buffer = this._buffers[x.piece.bufferIndex].buffer;\n      if (x.piece.lineFeedCnt > 0) {\n        const accumulatedValue = this.getAccumulatedValue(x, 0);\n        const startOffset = this.offsetInBuffer(x.piece.bufferIndex, x.piece.start);\n        ret += buffer.substring(startOffset, startOffset + accumulatedValue - endOffset);\n        return ret;\n      } else {\n        const startOffset = this.offsetInBuffer(x.piece.bufferIndex, x.piece.start);\n        ret += buffer.substr(startOffset, x.piece.length);\n      }\n      x = x.next();\n    }\n    return ret;\n  }\n  computeBufferMetadata() {\n    let x = this.root;\n    let lfCnt = 1;\n    let len = 0;\n    while (x !== require$_DOT__SLASH_rbTreeBase_DOT_js.SENTINEL) {\n      lfCnt += x.lf_left + x.piece.lineFeedCnt;\n      len += x.size_left + x.piece.length;\n      x = x.right;\n    }\n    this._lineCnt = lfCnt;\n    this._length = len;\n    this._searchCache.validate(this._length);\n  }\n  getIndexOf(node, accumulatedValue) {\n    const piece = node.piece;\n    const pos = this.positionInBuffer(node, accumulatedValue);\n    const lineCnt = pos.line - piece.start.line;\n    if (this.offsetInBuffer(piece.bufferIndex, piece.end) - this.offsetInBuffer(piece.bufferIndex, piece.start) === accumulatedValue) {\n      const realLineCnt = this.getLineFeedCnt(node.piece.bufferIndex, piece.start, pos);\n      if (realLineCnt !== lineCnt) {\n        return {index:realLineCnt, remainder:0};\n      }\n    }\n    return {index:lineCnt, remainder:pos.column};\n  }\n  getAccumulatedValue(node, index) {\n    if (index < 0) {\n      return 0;\n    }\n    const piece = node.piece;\n    const lineStarts = this._buffers[piece.bufferIndex].lineStarts;\n    const expectedLineStartIndex = piece.start.line + index + 1;\n    if (expectedLineStartIndex > piece.end.line) {\n      return lineStarts[piece.end.line] + piece.end.column - lineStarts[piece.start.line] - piece.start.column;\n    } else {\n      return lineStarts[expectedLineStartIndex] - lineStarts[piece.start.line] - piece.start.column;\n    }\n  }\n  deleteNodeTail(node, pos) {\n    const piece = node.piece;\n    const originalLFCnt = piece.lineFeedCnt;\n    const originalEndOffset = this.offsetInBuffer(piece.bufferIndex, piece.end);\n    const newEnd = pos;\n    const newEndOffset = this.offsetInBuffer(piece.bufferIndex, newEnd);\n    const newLineFeedCnt = this.getLineFeedCnt(piece.bufferIndex, piece.start, newEnd);\n    const lf_delta = newLineFeedCnt - originalLFCnt;\n    const size_delta = newEndOffset - originalEndOffset;\n    const newLength = piece.length + size_delta;\n    node.piece = new Piece(piece.bufferIndex, piece.start, newEnd, newLineFeedCnt, newLength);\n    (0,require$_DOT__SLASH_rbTreeBase_DOT_js.updateTreeMetadata)(this, node, size_delta, lf_delta);\n  }\n  deleteNodeHead(node, pos) {\n    const piece = node.piece;\n    const originalLFCnt = piece.lineFeedCnt;\n    const originalStartOffset = this.offsetInBuffer(piece.bufferIndex, piece.start);\n    const newStart = pos;\n    const newLineFeedCnt = this.getLineFeedCnt(piece.bufferIndex, newStart, piece.end);\n    const newStartOffset = this.offsetInBuffer(piece.bufferIndex, newStart);\n    const lf_delta = newLineFeedCnt - originalLFCnt;\n    const size_delta = originalStartOffset - newStartOffset;\n    const newLength = piece.length + size_delta;\n    node.piece = new Piece(piece.bufferIndex, newStart, piece.end, newLineFeedCnt, newLength);\n    (0,require$_DOT__SLASH_rbTreeBase_DOT_js.updateTreeMetadata)(this, node, size_delta, lf_delta);\n  }\n  shrinkNode(node, start, end) {\n    const piece = node.piece;\n    const originalStartPos = piece.start;\n    const originalEndPos = piece.end;\n    const oldLength = piece.length;\n    const oldLFCnt = piece.lineFeedCnt;\n    const newEnd = start;\n    const newLineFeedCnt = this.getLineFeedCnt(piece.bufferIndex, piece.start, newEnd);\n    const newLength = this.offsetInBuffer(piece.bufferIndex, start) - this.offsetInBuffer(piece.bufferIndex, originalStartPos);\n    node.piece = new Piece(piece.bufferIndex, piece.start, newEnd, newLineFeedCnt, newLength);\n    (0,require$_DOT__SLASH_rbTreeBase_DOT_js.updateTreeMetadata)(this, node, newLength - oldLength, newLineFeedCnt - oldLFCnt);\n    const newPiece = new Piece(piece.bufferIndex, end, originalEndPos, this.getLineFeedCnt(piece.bufferIndex, end, originalEndPos), this.offsetInBuffer(piece.bufferIndex, originalEndPos) - this.offsetInBuffer(piece.bufferIndex, end));\n    const newNode = this.rbInsertRight(node, newPiece);\n    this.validateCRLFWithPrevNode(newNode);\n  }\n  appendToNode(node, value) {\n    if (this.adjustCarriageReturnFromNext(value, node)) {\n      value += \"\\n\";\n    }\n    const hitCRLF = this.shouldCheckCRLF() && this.startWithLF(value) && this.endWithCR(node);\n    const startOffset = this._buffers[0].buffer.length;\n    this._buffers[0].buffer += value;\n    const lineStarts = createLineStartsFast(value, false);\n    for (let i = 0; i < lineStarts.length; i++) {\n      lineStarts[i] += startOffset;\n    }\n    if (hitCRLF) {\n      const prevStartOffset = this._buffers[0].lineStarts[this._buffers[0].lineStarts.length - 2];\n      this._buffers[0].lineStarts.pop();\n      this._lastChangeBufferPos = {line:this._lastChangeBufferPos.line - 1, column:startOffset - prevStartOffset};\n    }\n    this._buffers[0].lineStarts = this._buffers[0].lineStarts.concat(lineStarts.slice(1));\n    const endIndex = this._buffers[0].lineStarts.length - 1;\n    const endColumn = this._buffers[0].buffer.length - this._buffers[0].lineStarts[endIndex];\n    const newEnd = {line:endIndex, column:endColumn};\n    const newLength = node.piece.length + value.length;\n    const oldLineFeedCnt = node.piece.lineFeedCnt;\n    const newLineFeedCnt = this.getLineFeedCnt(0, node.piece.start, newEnd);\n    const lf_delta = newLineFeedCnt - oldLineFeedCnt;\n    node.piece = new Piece(node.piece.bufferIndex, node.piece.start, newEnd, newLineFeedCnt, newLength);\n    this._lastChangeBufferPos = newEnd;\n    (0,require$_DOT__SLASH_rbTreeBase_DOT_js.updateTreeMetadata)(this, node, value.length, lf_delta);\n  }\n  nodeAt(offset) {\n    let x = this.root;\n    const cache = this._searchCache.get(offset);\n    if (cache) {\n      return {node:cache.node, nodeStartOffset:cache.nodeStartOffset, remainder:offset - cache.nodeStartOffset};\n    }\n    let nodeStartOffset = 0;\n    while (x !== require$_DOT__SLASH_rbTreeBase_DOT_js.SENTINEL) {\n      if (x.size_left > offset) {\n        x = x.left;\n      } else if (x.size_left + x.piece.length >= offset) {\n        nodeStartOffset += x.size_left;\n        const ret = {node:x, remainder:offset - x.size_left, nodeStartOffset};\n        this._searchCache.set(ret);\n        return ret;\n      } else {\n        offset -= x.size_left + x.piece.length;\n        nodeStartOffset += x.size_left + x.piece.length;\n        x = x.right;\n      }\n    }\n    return null;\n  }\n  nodeAt2(lineNumber, column) {\n    let x = this.root;\n    let nodeStartOffset = 0;\n    while (x !== require$_DOT__SLASH_rbTreeBase_DOT_js.SENTINEL) {\n      if (x.left !== require$_DOT__SLASH_rbTreeBase_DOT_js.SENTINEL && x.lf_left >= lineNumber - 1) {\n        x = x.left;\n      } else if (x.lf_left + x.piece.lineFeedCnt > lineNumber - 1) {\n        const prevAccumualtedValue = this.getAccumulatedValue(x, lineNumber - x.lf_left - 2);\n        const accumulatedValue = this.getAccumulatedValue(x, lineNumber - x.lf_left - 1);\n        nodeStartOffset += x.size_left;\n        return {node:x, remainder:Math.min(prevAccumualtedValue + column - 1, accumulatedValue), nodeStartOffset};\n      } else if (x.lf_left + x.piece.lineFeedCnt === lineNumber - 1) {\n        const prevAccumualtedValue = this.getAccumulatedValue(x, lineNumber - x.lf_left - 2);\n        if (prevAccumualtedValue + column - 1 <= x.piece.length) {\n          return {node:x, remainder:prevAccumualtedValue + column - 1, nodeStartOffset};\n        } else {\n          column -= x.piece.length - prevAccumualtedValue;\n          break;\n        }\n      } else {\n        lineNumber -= x.lf_left + x.piece.lineFeedCnt;\n        nodeStartOffset += x.size_left + x.piece.length;\n        x = x.right;\n      }\n    }\n    x = x.next();\n    while (x !== require$_DOT__SLASH_rbTreeBase_DOT_js.SENTINEL) {\n      if (x.piece.lineFeedCnt > 0) {\n        const accumulatedValue = this.getAccumulatedValue(x, 0);\n        const nodeStartOffset = this.offsetOfNode(x);\n        return {node:x, remainder:Math.min(column - 1, accumulatedValue), nodeStartOffset};\n      } else {\n        if (x.piece.length >= column - 1) {\n          const nodeStartOffset = this.offsetOfNode(x);\n          return {node:x, remainder:column - 1, nodeStartOffset};\n        } else {\n          column -= x.piece.length;\n        }\n      }\n      x = x.next();\n    }\n    return null;\n  }\n  nodeCharCodeAt(node, offset) {\n    if (node.piece.lineFeedCnt < 1) {\n      return -1;\n    }\n    const buffer = this._buffers[node.piece.bufferIndex];\n    const newOffset = this.offsetInBuffer(node.piece.bufferIndex, node.piece.start) + offset;\n    return buffer.buffer.charCodeAt(newOffset);\n  }\n  offsetOfNode(node) {\n    if (!node) {\n      return 0;\n    }\n    let pos = node.size_left;\n    while (node !== this.root) {\n      if (node.parent.right === node) {\n        pos += node.parent.size_left + node.parent.piece.length;\n      }\n      node = node.parent;\n    }\n    return pos;\n  }\n  shouldCheckCRLF() {\n    return !(this._EOLNormalized && this._EOL === \"\\n\");\n  }\n  startWithLF(val) {\n    if (typeof val === \"string\") {\n      return val.charCodeAt(0) === 10;\n    }\n    if (val === require$_DOT__SLASH_rbTreeBase_DOT_js.SENTINEL || val.piece.lineFeedCnt === 0) {\n      return false;\n    }\n    const piece = val.piece;\n    const lineStarts = this._buffers[piece.bufferIndex].lineStarts;\n    const line = piece.start.line;\n    const startOffset = lineStarts[line] + piece.start.column;\n    if (line === lineStarts.length - 1) {\n      return false;\n    }\n    const nextLineOffset = lineStarts[line + 1];\n    if (nextLineOffset > startOffset + 1) {\n      return false;\n    }\n    return this._buffers[piece.bufferIndex].buffer.charCodeAt(startOffset) === 10;\n  }\n  endWithCR(val) {\n    if (typeof val === \"string\") {\n      return val.charCodeAt(val.length - 1) === 13;\n    }\n    if (val === require$_DOT__SLASH_rbTreeBase_DOT_js.SENTINEL || val.piece.lineFeedCnt === 0) {\n      return false;\n    }\n    return this.nodeCharCodeAt(val, val.piece.length - 1) === 13;\n  }\n  validateCRLFWithPrevNode(nextNode) {\n    if (this.shouldCheckCRLF() && this.startWithLF(nextNode)) {\n      const node = nextNode.prev();\n      if (this.endWithCR(node)) {\n        this.fixCRLF(node, nextNode);\n      }\n    }\n  }\n  validateCRLFWithNextNode(node) {\n    if (this.shouldCheckCRLF() && this.endWithCR(node)) {\n      const nextNode = node.next();\n      if (this.startWithLF(nextNode)) {\n        this.fixCRLF(node, nextNode);\n      }\n    }\n  }\n  fixCRLF(prev, next) {\n    const nodesToDel = [];\n    const lineStarts = this._buffers[prev.piece.bufferIndex].lineStarts;\n    let newEnd;\n    if (prev.piece.end.column === 0) {\n      newEnd = {line:prev.piece.end.line - 1, column:lineStarts[prev.piece.end.line] - lineStarts[prev.piece.end.line - 1] - 1};\n    } else {\n      newEnd = {line:prev.piece.end.line, column:prev.piece.end.column - 1};\n    }\n    const prevNewLength = prev.piece.length - 1;\n    const prevNewLFCnt = prev.piece.lineFeedCnt - 1;\n    prev.piece = new Piece(prev.piece.bufferIndex, prev.piece.start, newEnd, prevNewLFCnt, prevNewLength);\n    (0,require$_DOT__SLASH_rbTreeBase_DOT_js.updateTreeMetadata)(this, prev, -1, -1);\n    if (prev.piece.length === 0) {\n      nodesToDel.push(prev);\n    }\n    const newStart = {line:next.piece.start.line + 1, column:0};\n    const newLength = next.piece.length - 1;\n    const newLineFeedCnt = this.getLineFeedCnt(next.piece.bufferIndex, newStart, next.piece.end);\n    next.piece = new Piece(next.piece.bufferIndex, newStart, next.piece.end, newLineFeedCnt, newLength);\n    (0,require$_DOT__SLASH_rbTreeBase_DOT_js.updateTreeMetadata)(this, next, -1, -1);\n    if (next.piece.length === 0) {\n      nodesToDel.push(next);\n    }\n    const pieces = this.createNewPieces(\"\\r\\n\");\n    this.rbInsertRight(prev, pieces[0]);\n    for (let i = 0; i < nodesToDel.length; i++) {\n      (0,require$_DOT__SLASH_rbTreeBase_DOT_js.rbDelete)(this, nodesToDel[i]);\n    }\n  }\n  adjustCarriageReturnFromNext(value, node) {\n    if (this.shouldCheckCRLF() && this.endWithCR(value)) {\n      const nextNode = node.next();\n      if (this.startWithLF(nextNode)) {\n        value += \"\\n\";\n        if (nextNode.piece.length === 1) {\n          (0,require$_DOT__SLASH_rbTreeBase_DOT_js.rbDelete)(this, nextNode);\n        } else {\n          const piece = nextNode.piece;\n          const newStart = {line:piece.start.line + 1, column:0};\n          const newLength = piece.length - 1;\n          const newLineFeedCnt = this.getLineFeedCnt(piece.bufferIndex, newStart, piece.end);\n          nextNode.piece = new Piece(piece.bufferIndex, newStart, piece.end, newLineFeedCnt, newLength);\n          (0,require$_DOT__SLASH_rbTreeBase_DOT_js.updateTreeMetadata)(this, nextNode, -1, -1);\n        }\n        return true;\n      }\n    }\n    return false;\n  }\n  iterate(node, callback) {\n    if (node === require$_DOT__SLASH_rbTreeBase_DOT_js.SENTINEL) {\n      return callback(require$_DOT__SLASH_rbTreeBase_DOT_js.SENTINEL);\n    }\n    const leftRet = this.iterate(node.left, callback);\n    if (!leftRet) {\n      return leftRet;\n    }\n    return callback(node) && this.iterate(node.right, callback);\n  }\n  getNodeContent(node) {\n    if (node === require$_DOT__SLASH_rbTreeBase_DOT_js.SENTINEL) {\n      return \"\";\n    }\n    const buffer = this._buffers[node.piece.bufferIndex];\n    const piece = node.piece;\n    const startOffset = this.offsetInBuffer(piece.bufferIndex, piece.start);\n    const endOffset = this.offsetInBuffer(piece.bufferIndex, piece.end);\n    const currentContent = buffer.buffer.substring(startOffset, endOffset);\n    return currentContent;\n  }\n  getPieceContent(piece) {\n    const buffer = this._buffers[piece.bufferIndex];\n    const startOffset = this.offsetInBuffer(piece.bufferIndex, piece.start);\n    const endOffset = this.offsetInBuffer(piece.bufferIndex, piece.end);\n    const currentContent = buffer.buffer.substring(startOffset, endOffset);\n    return currentContent;\n  }\n  rbInsertRight(node, p) {\n    const z = new require$_DOT__SLASH_rbTreeBase_DOT_js.TreeNode(p, 1);\n    z.left = require$_DOT__SLASH_rbTreeBase_DOT_js.SENTINEL;\n    z.right = require$_DOT__SLASH_rbTreeBase_DOT_js.SENTINEL;\n    z.parent = require$_DOT__SLASH_rbTreeBase_DOT_js.SENTINEL;\n    z.size_left = 0;\n    z.lf_left = 0;\n    const x = this.root;\n    if (x === require$_DOT__SLASH_rbTreeBase_DOT_js.SENTINEL) {\n      this.root = z;\n      z.color = 0;\n    } else if (node.right === require$_DOT__SLASH_rbTreeBase_DOT_js.SENTINEL) {\n      node.right = z;\n      z.parent = node;\n    } else {\n      const nextNode = (0,require$_DOT__SLASH_rbTreeBase_DOT_js.leftest)(node.right);\n      nextNode.left = z;\n      z.parent = nextNode;\n    }\n    (0,require$_DOT__SLASH_rbTreeBase_DOT_js.fixInsert)(this, z);\n    return z;\n  }\n  rbInsertLeft(node, p) {\n    const z = new require$_DOT__SLASH_rbTreeBase_DOT_js.TreeNode(p, 1);\n    z.left = require$_DOT__SLASH_rbTreeBase_DOT_js.SENTINEL;\n    z.right = require$_DOT__SLASH_rbTreeBase_DOT_js.SENTINEL;\n    z.parent = require$_DOT__SLASH_rbTreeBase_DOT_js.SENTINEL;\n    z.size_left = 0;\n    z.lf_left = 0;\n    if (this.root === require$_DOT__SLASH_rbTreeBase_DOT_js.SENTINEL) {\n      this.root = z;\n      z.color = 0;\n    } else if (node.left === require$_DOT__SLASH_rbTreeBase_DOT_js.SENTINEL) {\n      node.left = z;\n      z.parent = node;\n    } else {\n      const prevNode = (0,require$_DOT__SLASH_rbTreeBase_DOT_js.righttest)(node.left);\n      prevNode.right = z;\n      z.parent = prevNode;\n    }\n    (0,require$_DOT__SLASH_rbTreeBase_DOT_js.fixInsert)(this, z);\n    return z;\n  }\n}\n\n};"],
"names":["shadow$provide","require","module","exports","createUintArray","arr","r","length","Uint16Array","Uint32Array","set","createLineStartsFast","str","readonly","rLength","i","len","chr","charCodeAt","createLineStarts","cr","lf","crlf","isBasicASCII","result","LineStarts","Object","defineProperties","__esModule","enumerable","value","Piece","get","PieceTreeBase","StringBuffer","require$_DOT__DOT__SLASH__DOT__DOT__SLASH_core_SLASH_position_DOT_js","require$_DOT__DOT__SLASH__DOT__DOT__SLASH_core_SLASH_range_DOT_js","require$_DOT__DOT__SLASH__DOT__DOT__SLASH_model_DOT_js","require$_DOT__SLASH_rbTreeBase_DOT_js","require$_DOT__DOT__SLASH_textModelSearch_DOT_js","constructor","lineStarts","bufferIndex","start","end","lineFeedCnt","buffer","PieceTreeSnapshot","tree","BOM","_pieces","_tree","_BOM","_index","root","SENTINEL","iterate","node","push","piece","read","getPieceContent","PieceTreeSearchCache","limit","_limit","_cache","offset","nodePos","nodeStartOffset","get2","lineNumber","nodeStartLineNumber","nodePosition","shift","validate","hasInvalidVal","tmp","parent","newArr","entry","chunks","eol","eolNormalized","create","_buffers","_lastChangeBufferPos","line","column","_lineCnt","_length","_EOL","_EOLLength","_EOLNormalized","lastNode","rbInsertRight","_searchCache","_lastVisitedLine","computeBufferMetadata","normalizeEOL","tempChunk","tempChunkLen","getNodeContent","min","max","text","replace","getEOL","setEOL","newEOL","createSnapshot","getOffsetAt","leftLen","x","left","lf_left","size_left","accumualtedValInCurrentIndex","getAccumulatedValue","right","getPositionAt","Math","floor","lfCnt","originalOffset","out","getIndexOf","index","lineStartOffset","Position","remainder","getValueInRange","range","startLineNumber","endLineNumber","startColumn","endColumn","startPosition","nodeAt2","endPosition","getValueInRange2","startOffset","offsetInBuffer","substring","ret","next","substr","getLinesContent","lines","linesLength","currentLine","danglingCR","pieceLength","pieceStartLine","pieceEndLine","pieceStartOffset","getLength","getLineCount","getLineContent","getLineRawContent","_getCharCode","matchingNode","targetOffset","getLineCharCode","getLineLength","findMatchesInNode","searcher","startCursor","endCursor","searchData","captureMatches","limitResultCount","resultLen","startOffsetInBuffer","searchText","_wordSeparators","reset","m","positionInBuffer","getLineFeedCnt","retStartColumn","retEndColumn","createFindMatch","Range","findMatchesLineByLine","searchRange","Searcher","wordSeparators","regex","currentNode","lineBreakCnt","nextLineStartOffset","_findMatchesInLine","deltaOffset","simpleSearch","searchString","searchStringLen","textLength","lastMatchIndex","indexOf","isValidMatch","FindMatch","insert","nodeAt","insertPosInBuffer","AverageBufferSize","appendToNode","insertContentToNodeLeft","nodesToDel","newRightPiece","shouldCheckCRLF","endWithCR","nodeCharCodeAt","headOfRight","newStart","startWithLF","tailOfLeft","previousPos","deleteNodeTail","newPieces","createNewPieces","tmpNode","k","deleteNodes","insertContentToNodeRight","pieces","rbInsertLeft","delete","cnt","startNode","endNode","startSplitPosInBuffer","endSplitPosInBuffer","rbDelete","validateCRLFWithPrevNode","deleteNodeHead","validateCRLFWithNextNode","shrinkNode","secondNode","prev","nPiece","updateTreeMetadata","newNode","adjustCarriageReturnFromNext","low","high","mid","midStop","midStart","endOffset","cursor","nodes","lastChar","splitText","concat","slice","endIndex","endPos","newPiece","cache","prevAccumulatedValue","accumulatedValue","originalLineNumber","pos","lineCnt","realLineCnt","expectedLineStartIndex","originalLFCnt","originalEndOffset","newEndOffset","newLineFeedCnt","lf_delta","size_delta","originalStartOffset","newStartOffset","originalStartPos","originalEndPos","oldLength","oldLFCnt","newLength","hitCRLF","prevStartOffset","pop","newEnd","oldLineFeedCnt","prevAccumualtedValue","offsetOfNode","newOffset","val","nextLineOffset","nextNode","fixCRLF","callback","leftRet","currentContent","p","z","TreeNode","color","leftest","fixInsert","prevNode","righttest"]
}
