shadow$provide.module$node_modules$monaco_editor$esm$vs$editor$contrib$editorState$browser$keybindingCancellation = function(require, module, exports) {
  Object.defineProperties(exports, {__esModule:{enumerable:!0, value:!0}, EditorKeybindingCancellationTokenSource:{enumerable:!0, get:function() {
    return EditorKeybindingCancellationTokenSource;
  }}});
  module = require("module$node_modules$monaco_editor$esm$vs$editor$browser$editorExtensions");
  var require$_DOT__DOT__SLASH__DOT__DOT__SLASH__DOT__DOT__SLASH__DOT__DOT__SLASH_platform_SLASH_contextkey_SLASH_common_SLASH_contextkey_DOT_js = require("module$node_modules$monaco_editor$esm$vs$platform$contextkey$common$contextkey");
  exports = require("module$node_modules$monaco_editor$esm$vs$base$common$cancellation");
  var require$_DOT__DOT__SLASH__DOT__DOT__SLASH__DOT__DOT__SLASH__DOT__DOT__SLASH_base_SLASH_common_SLASH_linkedList_DOT_js = require("module$node_modules$monaco_editor$esm$vs$base$common$linkedList"), require$_DOT__DOT__SLASH__DOT__DOT__SLASH__DOT__DOT__SLASH__DOT__DOT__SLASH_platform_SLASH_instantiation_SLASH_common_SLASH_instantiation_DOT_js = require("module$node_modules$monaco_editor$esm$vs$platform$instantiation$common$instantiation"), require$_DOT__DOT__SLASH__DOT__DOT__SLASH__DOT__DOT__SLASH__DOT__DOT__SLASH_platform_SLASH_instantiation_SLASH_common_SLASH_extensions_DOT_js = 
  require("module$node_modules$monaco_editor$esm$vs$platform$instantiation$common$extensions");
  require = require("module$node_modules$monaco_editor$esm$vs$nls");
  const IEditorCancellationTokens = (0,require$_DOT__DOT__SLASH__DOT__DOT__SLASH__DOT__DOT__SLASH__DOT__DOT__SLASH_platform_SLASH_instantiation_SLASH_common_SLASH_instantiation_DOT_js.createDecorator)("IEditorCancelService"), ctxCancellableOperation = new require$_DOT__DOT__SLASH__DOT__DOT__SLASH__DOT__DOT__SLASH__DOT__DOT__SLASH_platform_SLASH_contextkey_SLASH_common_SLASH_contextkey_DOT_js.RawContextKey("cancellableOperation", !1, (0,require.localize)("cancellableOperation", "Whether the editor runs a cancellable operation, e.g. like 'Peek References'"));
  (0,require$_DOT__DOT__SLASH__DOT__DOT__SLASH__DOT__DOT__SLASH__DOT__DOT__SLASH_platform_SLASH_instantiation_SLASH_common_SLASH_extensions_DOT_js.registerSingleton)(IEditorCancellationTokens, class {
    constructor() {
      this._tokens = new WeakMap();
    }
    add(editor, cts) {
      let data = this._tokens.get(editor);
      data || (data = editor.invokeWithinContext(accessor => {
        accessor = ctxCancellableOperation.bindTo(accessor.get(require$_DOT__DOT__SLASH__DOT__DOT__SLASH__DOT__DOT__SLASH__DOT__DOT__SLASH_platform_SLASH_contextkey_SLASH_common_SLASH_contextkey_DOT_js.IContextKeyService));
        const tokens = new require$_DOT__DOT__SLASH__DOT__DOT__SLASH__DOT__DOT__SLASH__DOT__DOT__SLASH_base_SLASH_common_SLASH_linkedList_DOT_js.LinkedList();
        return {key:accessor, tokens};
      }), this._tokens.set(editor, data));
      let removeFn;
      data.key.set(!0);
      removeFn = data.tokens.push(cts);
      return () => {
        removeFn && (removeFn(), data.key.set(!data.tokens.isEmpty()), removeFn = void 0);
      };
    }
    cancel(editor) {
      if (editor = this._tokens.get(editor)) {
        var cts = editor.tokens.pop();
        cts && (cts.cancel(), editor.key.set(!editor.tokens.isEmpty()));
      }
    }
  }, 1);
  class EditorKeybindingCancellationTokenSource extends exports.CancellationTokenSource {
    constructor(editor, parent) {
      super(parent);
      this.editor = editor;
      this._unregister = editor.invokeWithinContext(accessor => accessor.get(IEditorCancellationTokens).add(editor, this));
    }
    dispose() {
      this._unregister();
      super.dispose();
    }
  }
  (0,module.registerEditorCommand)(new class extends module.EditorCommand {
    constructor() {
      super({id:"editor.cancelOperation", kbOpts:{weight:100, primary:9}, precondition:ctxCancellableOperation});
    }
    runEditorCommand(accessor, editor) {
      accessor.get(IEditorCancellationTokens).cancel(editor);
    }
  }());
};

//# sourceMappingURL=module$node_modules$monaco_editor$esm$vs$editor$contrib$editorState$browser$keybindingCancellation.js.map
