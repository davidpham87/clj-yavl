{
"version":3,
"file":"module$node_modules$vega_loader$build$vega_loader_browser.js",
"lineCount":275,
"mappings":"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",
"sources":["node_modules/vega-loader/build/vega-loader.browser.js"],
"sourcesContent":["shadow$provide[\"module$node_modules$vega_loader$build$vega_loader_browser\"] = function(require,module,exports) {\nvar Buffer = require('buffer').Buffer;\n(function (global, factory) {\n  typeof exports === 'object' && typeof module !== 'undefined' ? factory(exports, require('vega-util'), require('topojson-client'), require('vega-format')) :\n  typeof define === 'function' && define.amd ? define(['exports', 'vega-util', 'topojson-client', 'vega-format'], factory) :\n  (global = typeof globalThis !== 'undefined' ? globalThis : global || self, factory(global.vega = {}, global.vega, global.topojson, global.vega));\n})(this, (function (exports, vegaUtil, topojsonClient, vegaFormat) { 'use strict';\n\n  // Matches absolute URLs with optional protocol\n  //   https://...    file://...    //...\n  const protocol_re = /^(data:|([A-Za-z]+:)?\\/\\/)/;\n\n  // Matches allowed URIs. From https://github.com/cure53/DOMPurify/blob/master/src/regexp.js with added file://\n  const allowed_re = /^(?:(?:(?:f|ht)tps?|mailto|tel|callto|cid|xmpp|file|data):|[^a-z]|[a-z+.\\-]+(?:[^a-z+.\\-:]|$))/i; // eslint-disable-line no-useless-escape\n  const whitespace_re = /[\\u0000-\\u0020\\u00A0\\u1680\\u180E\\u2000-\\u2029\\u205f\\u3000]/g; // eslint-disable-line no-control-regex\n\n  // Special treatment in node.js for the file: protocol\n  const fileProtocol = 'file://';\n\n  /**\n   * Factory for a loader constructor that provides methods for requesting\n   * files from either the network or disk, and for sanitizing request URIs.\n   * @param {function} fetch - The Fetch API for HTTP network requests.\n   *   If null or undefined, HTTP loading will be disabled.\n   * @param {object} fs - The file system interface for file loading.\n   *   If null or undefined, local file loading will be disabled.\n   * @return {function} A loader constructor with the following signature:\n   *   param {object} [options] - Optional default loading options to use.\n   *   return {object} - A new loader instance.\n   */\n  function loaderFactory (fetch, fs) {\n    return options => ({\n      options: options || {},\n      sanitize: sanitize,\n      load: load,\n      fileAccess: false,\n      file: fileLoader(),\n      http: httpLoader(fetch)\n    });\n  }\n\n  /**\n   * Load an external resource, typically either from the web or from the local\n   * filesystem. This function uses {@link sanitize} to first sanitize the uri,\n   * then calls either {@link http} (for web requests) or {@link file} (for\n   * filesystem loading).\n   * @param {string} uri - The resource indicator (e.g., URL or filename).\n   * @param {object} [options] - Optional loading options. These options will\n   *   override any existing default options.\n   * @return {Promise} - A promise that resolves to the loaded content.\n   */\n  async function load(uri, options) {\n    const opt = await this.sanitize(uri, options),\n      url = opt.href;\n    return opt.localFile ? this.file(url) : this.http(url, options);\n  }\n\n  /**\n   * URI sanitizer function.\n   * @param {string} uri - The uri (url or filename) to check.\n   * @param {object} options - An options hash.\n   * @return {Promise} - A promise that resolves to an object containing\n   *  sanitized uri data, or rejects it the input uri is deemed invalid.\n   *  The properties of the resolved object are assumed to be\n   *  valid attributes for an HTML 'a' tag. The sanitized uri *must* be\n   *  provided by the 'href' property of the returned object.\n   */\n  async function sanitize(uri, options) {\n    options = vegaUtil.extend({}, this.options, options);\n    const fileAccess = this.fileAccess,\n      result = {\n        href: null\n      };\n    let isFile, loadFile, base;\n    const isAllowed = allowed_re.test(uri.replace(whitespace_re, ''));\n    if (uri == null || typeof uri !== 'string' || !isAllowed) {\n      vegaUtil.error('Sanitize failure, invalid URI: ' + vegaUtil.stringValue(uri));\n    }\n    const hasProtocol = protocol_re.test(uri);\n\n    // if relative url (no protocol/host), prepend baseURL\n    if ((base = options.baseURL) && !hasProtocol) {\n      // Ensure that there is a slash between the baseURL (e.g. hostname) and url\n      if (!uri.startsWith('/') && !base.endsWith('/')) {\n        uri = '/' + uri;\n      }\n      uri = base + uri;\n    }\n\n    // should we load from file system?\n    loadFile = (isFile = uri.startsWith(fileProtocol)) || options.mode === 'file' || options.mode !== 'http' && !hasProtocol && fileAccess;\n    if (isFile) {\n      // strip file protocol\n      uri = uri.slice(fileProtocol.length);\n    } else if (uri.startsWith('//')) {\n      if (options.defaultProtocol === 'file') {\n        // if is file, strip protocol and set loadFile flag\n        uri = uri.slice(2);\n        loadFile = true;\n      } else {\n        // if relative protocol (starts with '//'), prepend default protocol\n        uri = (options.defaultProtocol || 'http') + ':' + uri;\n      }\n    }\n\n    // set non-enumerable mode flag to indicate local file load\n    Object.defineProperty(result, 'localFile', {\n      value: !!loadFile\n    });\n\n    // set uri\n    result.href = uri;\n\n    // set default result target, if specified\n    if (options.target) {\n      result.target = options.target + '';\n    }\n\n    // set default result rel, if specified (#1542)\n    if (options.rel) {\n      result.rel = options.rel + '';\n    }\n\n    // provide control over cross-origin image handling (#2238)\n    // https://developer.mozilla.org/en-US/docs/Web/HTML/CORS_enabled_image\n    if (options.context === 'image' && options.crossOrigin) {\n      result.crossOrigin = options.crossOrigin + '';\n    }\n\n    // return\n    return result;\n  }\n\n  /**\n   * File system loader factory.\n   * @param {object} fs - The file system interface.\n   * @return {function} - A file loader with the following signature:\n   *   param {string} filename - The file system path to load.\n   *   param {string} filename - The file system path to load.\n   *   return {Promise} A promise that resolves to the file contents.\n   */\n  function fileLoader(fs) {\n    return fileReject;\n  }\n\n  /**\n   * Default file system loader that simply rejects.\n   */\n  async function fileReject() {\n    vegaUtil.error('No file system access.');\n  }\n\n  /**\n   * HTTP request handler factory.\n   * @param {function} fetch - The Fetch API method.\n   * @return {function} - An http loader with the following signature:\n   *   param {string} url - The url to request.\n   *   param {object} options - An options hash.\n   *   return {Promise} - A promise that resolves to the file contents.\n   */\n  function httpLoader(fetch) {\n    return fetch ? async function (url, options) {\n      const opt = vegaUtil.extend({}, this.options.http, options),\n        type = options && options.response,\n        response = await fetch(url, opt);\n      return !response.ok ? vegaUtil.error(response.status + '' + response.statusText) : vegaUtil.isFunction(response[type]) ? response[type]() : response.text();\n    } : httpReject;\n  }\n\n  /**\n   * Default http request handler that simply rejects.\n   */\n  async function httpReject() {\n    vegaUtil.error('No HTTP fetch method available.');\n  }\n\n  const isValid = _ => _ != null && _ === _;\n  const isBoolean = _ => _ === 'true' || _ === 'false' || _ === true || _ === false;\n  const isDate = _ => !Number.isNaN(Date.parse(_));\n  const isNumber = _ => !Number.isNaN(+_) && !(_ instanceof Date);\n  const isInteger = _ => isNumber(_) && Number.isInteger(+_);\n  const typeParsers = {\n    boolean: vegaUtil.toBoolean,\n    integer: vegaUtil.toNumber,\n    number: vegaUtil.toNumber,\n    date: vegaUtil.toDate,\n    string: vegaUtil.toString,\n    unknown: vegaUtil.identity\n  };\n  const typeTests = [isBoolean, isInteger, isNumber, isDate];\n  const typeList = ['boolean', 'integer', 'number', 'date'];\n  function inferType(values, field) {\n    if (!values || !values.length) return 'unknown';\n    const n = values.length,\n      m = typeTests.length,\n      a = typeTests.map((_, i) => i + 1);\n    for (let i = 0, t = 0, j, value; i < n; ++i) {\n      value = field ? values[i][field] : values[i];\n      for (j = 0; j < m; ++j) {\n        if (a[j] && isValid(value) && !typeTests[j](value)) {\n          a[j] = 0;\n          ++t;\n          if (t === typeTests.length) return 'string';\n        }\n      }\n    }\n    return typeList[a.reduce((u, v) => u === 0 ? v : u, 0) - 1];\n  }\n  function inferTypes(data, fields) {\n    return fields.reduce((types, field) => {\n      types[field] = inferType(data, field);\n      return types;\n    }, {});\n  }\n\n  var EOL = {},\n    EOF = {},\n    QUOTE = 34,\n    NEWLINE = 10,\n    RETURN = 13;\n  function objectConverter(columns) {\n    return new Function(\"d\", \"return {\" + columns.map(function (name, i) {\n      return JSON.stringify(name) + \": d[\" + i + \"] || \\\"\\\"\";\n    }).join(\",\") + \"}\");\n  }\n  function customConverter(columns, f) {\n    var object = objectConverter(columns);\n    return function (row, i) {\n      return f(object(row), i, columns);\n    };\n  }\n\n  // Compute unique columns in order of discovery.\n  function inferColumns(rows) {\n    var columnSet = Object.create(null),\n      columns = [];\n    rows.forEach(function (row) {\n      for (var column in row) {\n        if (!(column in columnSet)) {\n          columns.push(columnSet[column] = column);\n        }\n      }\n    });\n    return columns;\n  }\n  function pad(value, width) {\n    var s = value + \"\",\n      length = s.length;\n    return length < width ? new Array(width - length + 1).join(0) + s : s;\n  }\n  function formatYear(year) {\n    return year < 0 ? \"-\" + pad(-year, 6) : year > 9999 ? \"+\" + pad(year, 6) : pad(year, 4);\n  }\n  function formatDate(date) {\n    var hours = date.getUTCHours(),\n      minutes = date.getUTCMinutes(),\n      seconds = date.getUTCSeconds(),\n      milliseconds = date.getUTCMilliseconds();\n    return isNaN(date) ? \"Invalid Date\" : formatYear(date.getUTCFullYear()) + \"-\" + pad(date.getUTCMonth() + 1, 2) + \"-\" + pad(date.getUTCDate(), 2) + (milliseconds ? \"T\" + pad(hours, 2) + \":\" + pad(minutes, 2) + \":\" + pad(seconds, 2) + \".\" + pad(milliseconds, 3) + \"Z\" : seconds ? \"T\" + pad(hours, 2) + \":\" + pad(minutes, 2) + \":\" + pad(seconds, 2) + \"Z\" : minutes || hours ? \"T\" + pad(hours, 2) + \":\" + pad(minutes, 2) + \"Z\" : \"\");\n  }\n  function dsvFormat (delimiter) {\n    var reFormat = new RegExp(\"[\\\"\" + delimiter + \"\\n\\r]\"),\n      DELIMITER = delimiter.charCodeAt(0);\n    function parse(text, f) {\n      var convert,\n        columns,\n        rows = parseRows(text, function (row, i) {\n          if (convert) return convert(row, i - 1);\n          columns = row, convert = f ? customConverter(row, f) : objectConverter(row);\n        });\n      rows.columns = columns || [];\n      return rows;\n    }\n    function parseRows(text, f) {\n      var rows = [],\n        // output rows\n        N = text.length,\n        I = 0,\n        // current character index\n        n = 0,\n        // current line number\n        t,\n        // current token\n        eof = N <= 0,\n        // current token followed by EOF?\n        eol = false; // current token followed by EOL?\n\n      // Strip the trailing newline.\n      if (text.charCodeAt(N - 1) === NEWLINE) --N;\n      if (text.charCodeAt(N - 1) === RETURN) --N;\n      function token() {\n        if (eof) return EOF;\n        if (eol) return eol = false, EOL;\n\n        // Unescape quotes.\n        var i,\n          j = I,\n          c;\n        if (text.charCodeAt(j) === QUOTE) {\n          while (I++ < N && text.charCodeAt(I) !== QUOTE || text.charCodeAt(++I) === QUOTE);\n          if ((i = I) >= N) eof = true;else if ((c = text.charCodeAt(I++)) === NEWLINE) eol = true;else if (c === RETURN) {\n            eol = true;\n            if (text.charCodeAt(I) === NEWLINE) ++I;\n          }\n          return text.slice(j + 1, i - 1).replace(/\"\"/g, \"\\\"\");\n        }\n\n        // Find next delimiter or newline.\n        while (I < N) {\n          if ((c = text.charCodeAt(i = I++)) === NEWLINE) eol = true;else if (c === RETURN) {\n            eol = true;\n            if (text.charCodeAt(I) === NEWLINE) ++I;\n          } else if (c !== DELIMITER) continue;\n          return text.slice(j, i);\n        }\n\n        // Return last token before EOF.\n        return eof = true, text.slice(j, N);\n      }\n      while ((t = token()) !== EOF) {\n        var row = [];\n        while (t !== EOL && t !== EOF) row.push(t), t = token();\n        if (f && (row = f(row, n++)) == null) continue;\n        rows.push(row);\n      }\n      return rows;\n    }\n    function preformatBody(rows, columns) {\n      return rows.map(function (row) {\n        return columns.map(function (column) {\n          return formatValue(row[column]);\n        }).join(delimiter);\n      });\n    }\n    function format(rows, columns) {\n      if (columns == null) columns = inferColumns(rows);\n      return [columns.map(formatValue).join(delimiter)].concat(preformatBody(rows, columns)).join(\"\\n\");\n    }\n    function formatBody(rows, columns) {\n      if (columns == null) columns = inferColumns(rows);\n      return preformatBody(rows, columns).join(\"\\n\");\n    }\n    function formatRows(rows) {\n      return rows.map(formatRow).join(\"\\n\");\n    }\n    function formatRow(row) {\n      return row.map(formatValue).join(delimiter);\n    }\n    function formatValue(value) {\n      return value == null ? \"\" : value instanceof Date ? formatDate(value) : reFormat.test(value += \"\") ? \"\\\"\" + value.replace(/\"/g, \"\\\"\\\"\") + \"\\\"\" : value;\n    }\n    return {\n      parse: parse,\n      parseRows: parseRows,\n      format: format,\n      formatBody: formatBody,\n      formatRows: formatRows,\n      formatRow: formatRow,\n      formatValue: formatValue\n    };\n  }\n\n  function delimitedFormat(delimiter) {\n    const parse = function (data, format) {\n      const delim = {\n        delimiter: delimiter\n      };\n      return dsv(data, format ? vegaUtil.extend(format, delim) : delim);\n    };\n    parse.responseType = 'text';\n    return parse;\n  }\n  function dsv(data, format) {\n    if (format.header) {\n      data = format.header.map(vegaUtil.stringValue).join(format.delimiter) + '\\n' + data;\n    }\n    return dsvFormat(format.delimiter).parse(data + '');\n  }\n  dsv.responseType = 'text';\n\n  function isBuffer(_) {\n    return typeof Buffer === 'function' && vegaUtil.isFunction(Buffer.isBuffer) ? Buffer.isBuffer(_) : false;\n  }\n  function json(data, format) {\n    const prop = format && format.property ? vegaUtil.field(format.property) : vegaUtil.identity;\n    return vegaUtil.isObject(data) && !isBuffer(data) ? parseJSON(prop(data), format) : prop(JSON.parse(data));\n  }\n  json.responseType = 'json';\n  function parseJSON(data, format) {\n    if (!vegaUtil.isArray(data) && vegaUtil.isIterable(data)) {\n      data = [...data];\n    }\n    return format && format.copy ? JSON.parse(JSON.stringify(data)) : data;\n  }\n\n  const filters = {\n    interior: (a, b) => a !== b,\n    exterior: (a, b) => a === b\n  };\n  function topojson(data, format) {\n    let method, object, property, filter;\n    data = json(data, format);\n    if (format && format.feature) {\n      method = topojsonClient.feature;\n      property = format.feature;\n    } else if (format && format.mesh) {\n      method = topojsonClient.mesh;\n      property = format.mesh;\n      filter = filters[format.filter];\n    } else {\n      vegaUtil.error('Missing TopoJSON feature or mesh parameter.');\n    }\n    object = (object = data.objects[property]) ? method(data, object, filter) : vegaUtil.error('Invalid TopoJSON object: ' + property);\n    return object && object.features || [object];\n  }\n  topojson.responseType = 'json';\n\n  const format = {\n    dsv: dsv,\n    csv: delimitedFormat(','),\n    tsv: delimitedFormat('\\t'),\n    json: json,\n    topojson: topojson\n  };\n  function formats(name, reader) {\n    if (arguments.length > 1) {\n      format[name] = reader;\n      return this;\n    } else {\n      return vegaUtil.hasOwnProperty(format, name) ? format[name] : null;\n    }\n  }\n  function responseType(type) {\n    const f = formats(type);\n    return f && f.responseType || 'text';\n  }\n\n  function read (data, schema, timeParser, utcParser) {\n    schema = schema || {};\n    const reader = formats(schema.type || 'json');\n    if (!reader) vegaUtil.error('Unknown data format type: ' + schema.type);\n    data = reader(data, schema);\n    if (schema.parse) parse(data, schema.parse, timeParser, utcParser);\n    if (vegaUtil.hasOwnProperty(data, 'columns')) delete data.columns;\n    return data;\n  }\n  function parse(data, types, timeParser, utcParser) {\n    if (!data.length) return; // early exit for empty data\n\n    const locale = vegaFormat.timeFormatDefaultLocale();\n    timeParser = timeParser || locale.timeParse;\n    utcParser = utcParser || locale.utcParse;\n    let fields = data.columns || Object.keys(data[0]),\n      datum,\n      field,\n      i,\n      j,\n      n,\n      m;\n    if (types === 'auto') types = inferTypes(data, fields);\n    fields = Object.keys(types);\n    const parsers = fields.map(field => {\n      const type = types[field];\n      let parts, pattern;\n      if (type && (type.startsWith('date:') || type.startsWith('utc:'))) {\n        parts = type.split(/:(.+)?/, 2); // split on first :\n        pattern = parts[1];\n        if (pattern[0] === '\\'' && pattern[pattern.length - 1] === '\\'' || pattern[0] === '\"' && pattern[pattern.length - 1] === '\"') {\n          pattern = pattern.slice(1, -1);\n        }\n        const parse = parts[0] === 'utc' ? utcParser : timeParser;\n        return parse(pattern);\n      }\n      if (!typeParsers[type]) {\n        throw Error('Illegal format pattern: ' + field + ':' + type);\n      }\n      return typeParsers[type];\n    });\n    for (i = 0, n = data.length, m = fields.length; i < n; ++i) {\n      datum = data[i];\n      for (j = 0; j < m; ++j) {\n        field = fields[j];\n        datum[field] = parsers[j](datum[field]);\n      }\n    }\n  }\n\n  const loader = loaderFactory(typeof fetch !== 'undefined' && fetch);\n\n  exports.format = format;\n  exports.formats = formats;\n  exports.inferType = inferType;\n  exports.inferTypes = inferTypes;\n  exports.loader = loader;\n  exports.read = read;\n  exports.responseType = responseType;\n  exports.typeParsers = typeParsers;\n\n}));\n\n};"],
"names":["shadow$provide","require","module","exports","Buffer","global","factory","define","amd","globalThis","self","vega","topojson","vegaUtil","topojsonClient","vegaFormat","load","uri","options","opt","sanitize","url","href","localFile","file","http","extend","fileAccess","result","isFile","loadFile","isAllowed","allowed_re","test","replace","whitespace_re","error","stringValue","hasProtocol","protocol_re","base","baseURL","startsWith","endsWith","fileProtocol","mode","slice","length","defaultProtocol","Object","defineProperty","value","target","rel","context","crossOrigin","fileReject","httpLoader","fetch","type","response","ok","isFunction","text","status","statusText","httpReject","inferType","values","field","n","m","typeTests","a","map","_","i","t","j","typeList","reduce","u","v","inferTypes","data","fields","types","objectConverter","columns","Function","name","JSON","stringify","join","customConverter","f","object","row","inferColumns","rows","columnSet","create","forEach","column","push","pad","width","s","Array","dsvFormat","delimiter","parseRows","token","eof","EOF","eol","EOL","I","c","charCodeAt","QUOTE","N","NEWLINE","RETURN","DELIMITER","preformatBody","formatValue","formatRow","hours","date","getUTCHours","minutes","getUTCMinutes","seconds","getUTCSeconds","milliseconds","getUTCMilliseconds","isNaN","year","reFormat","RegExp","parse","convert","format","concat","formatBody","formatRows","delimitedFormat","delim","dsv","responseType","header","json","prop","property","identity","isBuffer","isArray","isIterable","copy","method","filter","feature","mesh","filters","objects","features","formats","reader","arguments","hasOwnProperty","timeParser","utcParser","locale","timeFormatDefaultLocale","timeParse","utcParse","keys","parsers","parts","split","pattern","typeParsers","Error","datum","isNumber","Number","Date","boolean","toBoolean","integer","toNumber","number","toDate","string","toString","unknown","isBoolean","isInteger","isDate","interior","b","exterior","csv","tsv","loader","loaderFactory","fs","read","schema"]
}
