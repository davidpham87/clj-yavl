shadow$provide.module$node_modules$monaco_editor$esm$vs$editor$browser$services$openerService = function(require, module, exports) {
  Object.defineProperties(exports, {__esModule:{enumerable:!0, value:!0}, OpenerService:{enumerable:!0, get:function() {
    return OpenerService;
  }}});
  var dom = require("module$node_modules$monaco_editor$esm$vs$base$browser$dom"), require$_DOT__DOT__SLASH__DOT__DOT__SLASH__DOT__DOT__SLASH_base_SLASH_browser_SLASH_window_DOT_js = require("module$node_modules$monaco_editor$esm$vs$base$browser$window"), require$_DOT__DOT__SLASH__DOT__DOT__SLASH__DOT__DOT__SLASH_base_SLASH_common_SLASH_cancellation_DOT_js = require("module$node_modules$monaco_editor$esm$vs$base$common$cancellation"), require$_DOT__DOT__SLASH__DOT__DOT__SLASH__DOT__DOT__SLASH_base_SLASH_common_SLASH_linkedList_DOT_js = 
  require("module$node_modules$monaco_editor$esm$vs$base$common$linkedList"), require$_DOT__DOT__SLASH__DOT__DOT__SLASH__DOT__DOT__SLASH_base_SLASH_common_SLASH_map_DOT_js = require("module$node_modules$monaco_editor$esm$vs$base$common$map"), require$_DOT__DOT__SLASH__DOT__DOT__SLASH__DOT__DOT__SLASH_base_SLASH_common_SLASH_marshalling_DOT_js = require("module$node_modules$monaco_editor$esm$vs$base$common$marshalling"), require$_DOT__DOT__SLASH__DOT__DOT__SLASH__DOT__DOT__SLASH_base_SLASH_common_SLASH_network_DOT_js = 
  require("module$node_modules$monaco_editor$esm$vs$base$common$network"), require$_DOT__DOT__SLASH__DOT__DOT__SLASH__DOT__DOT__SLASH_base_SLASH_common_SLASH_resources_DOT_js = require("module$node_modules$monaco_editor$esm$vs$base$common$resources"), require$_DOT__DOT__SLASH__DOT__DOT__SLASH__DOT__DOT__SLASH_base_SLASH_common_SLASH_uri_DOT_js = require("module$node_modules$monaco_editor$esm$vs$base$common$uri");
  module = require("module$node_modules$monaco_editor$esm$vs$editor$browser$services$codeEditorService");
  exports = require("module$node_modules$monaco_editor$esm$vs$platform$commands$common$commands");
  var require$_DOT__DOT__SLASH__DOT__DOT__SLASH__DOT__DOT__SLASH_platform_SLASH_editor_SLASH_common_SLASH_editor_DOT_js = require("module$node_modules$monaco_editor$esm$vs$platform$editor$common$editor"), require$_DOT__DOT__SLASH__DOT__DOT__SLASH__DOT__DOT__SLASH_platform_SLASH_opener_SLASH_common_SLASH_opener_DOT_js = require("module$node_modules$monaco_editor$esm$vs$platform$opener$common$opener");
  require = this && this.__decorate || function(decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") {
      r = Reflect.decorate(decorators, target, key, desc);
    } else {
      for (var i = decorators.length - 1; i >= 0; i--) {
        if (d = decorators[i]) {
          r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
        }
      }
    }
    return c > 3 && r && Object.defineProperty(target, key, r), r;
  };
  var __param = this && this.__param || function(paramIndex, decorator) {
    return function(target, key) {
      decorator(target, key, paramIndex);
    };
  };
  let CommandOpener = class {
    constructor(_commandService) {
      this._commandService = _commandService;
    }
    async open(target, options) {
      if (!(0,require$_DOT__DOT__SLASH__DOT__DOT__SLASH__DOT__DOT__SLASH_base_SLASH_common_SLASH_network_DOT_js.matchesScheme)(target, require$_DOT__DOT__SLASH__DOT__DOT__SLASH__DOT__DOT__SLASH_base_SLASH_common_SLASH_network_DOT_js.Schemas.command)) {
        return !1;
      }
      if (options === null || options === void 0 || !options.allowCommands) {
        return !0;
      }
      typeof target === "string" && (target = require$_DOT__DOT__SLASH__DOT__DOT__SLASH__DOT__DOT__SLASH_base_SLASH_common_SLASH_uri_DOT_js.URI.parse(target));
      if (Array.isArray(options.allowCommands) && !options.allowCommands.includes(target.path)) {
        return !0;
      }
      options = [];
      try {
        options = (0,require$_DOT__DOT__SLASH__DOT__DOT__SLASH__DOT__DOT__SLASH_base_SLASH_common_SLASH_marshalling_DOT_js.parse)(decodeURIComponent(target.query));
      } catch (_a) {
        try {
          options = (0,require$_DOT__DOT__SLASH__DOT__DOT__SLASH__DOT__DOT__SLASH_base_SLASH_common_SLASH_marshalling_DOT_js.parse)(target.query);
        } catch (_b) {
        }
      }
      Array.isArray(options) || (options = [options]);
      await this._commandService.executeCommand(target.path, ...options);
      return !0;
    }
  };
  CommandOpener = require([__param(0, exports.ICommandService)], CommandOpener);
  let EditorOpener = class {
    constructor(_editorService) {
      this._editorService = _editorService;
    }
    async open(target, options) {
      typeof target === "string" && (target = require$_DOT__DOT__SLASH__DOT__DOT__SLASH__DOT__DOT__SLASH_base_SLASH_common_SLASH_uri_DOT_js.URI.parse(target));
      const {selection, uri} = (0,require$_DOT__DOT__SLASH__DOT__DOT__SLASH__DOT__DOT__SLASH_platform_SLASH_opener_SLASH_common_SLASH_opener_DOT_js.extractSelection)(target);
      target = uri;
      target.scheme === require$_DOT__DOT__SLASH__DOT__DOT__SLASH__DOT__DOT__SLASH_base_SLASH_common_SLASH_network_DOT_js.Schemas.file && (target = (0,require$_DOT__DOT__SLASH__DOT__DOT__SLASH__DOT__DOT__SLASH_base_SLASH_common_SLASH_resources_DOT_js.normalizePath)(target));
      await this._editorService.openCodeEditor({resource:target, options:{selection, source:(options === null || options === void 0 ? 0 : options.fromUserGesture) ? require$_DOT__DOT__SLASH__DOT__DOT__SLASH__DOT__DOT__SLASH_platform_SLASH_editor_SLASH_common_SLASH_editor_DOT_js.EditorOpenSource.USER : require$_DOT__DOT__SLASH__DOT__DOT__SLASH__DOT__DOT__SLASH_platform_SLASH_editor_SLASH_common_SLASH_editor_DOT_js.EditorOpenSource.API, ...(options === null || options === void 0 ? void 0 : options.editorOptions)}}, 
      this._editorService.getFocusedCodeEditor(), options === null || options === void 0 ? void 0 : options.openToSide);
      return !0;
    }
  };
  EditorOpener = require([__param(0, module.ICodeEditorService)], EditorOpener);
  let OpenerService = class {
    constructor(editorService, commandService) {
      this._openers = new require$_DOT__DOT__SLASH__DOT__DOT__SLASH__DOT__DOT__SLASH_base_SLASH_common_SLASH_linkedList_DOT_js.LinkedList();
      this._validators = new require$_DOT__DOT__SLASH__DOT__DOT__SLASH__DOT__DOT__SLASH_base_SLASH_common_SLASH_linkedList_DOT_js.LinkedList();
      this._resolvers = new require$_DOT__DOT__SLASH__DOT__DOT__SLASH__DOT__DOT__SLASH_base_SLASH_common_SLASH_linkedList_DOT_js.LinkedList();
      this._resolvedUriTargets = new require$_DOT__DOT__SLASH__DOT__DOT__SLASH__DOT__DOT__SLASH_base_SLASH_common_SLASH_map_DOT_js.ResourceMap(uri => uri.with({path:null, fragment:null, query:null}).toString());
      this._externalOpeners = new require$_DOT__DOT__SLASH__DOT__DOT__SLASH__DOT__DOT__SLASH_base_SLASH_common_SLASH_linkedList_DOT_js.LinkedList();
      this._defaultExternalOpener = {openExternal:async href => {
        (0,require$_DOT__DOT__SLASH__DOT__DOT__SLASH__DOT__DOT__SLASH_base_SLASH_common_SLASH_network_DOT_js.matchesSomeScheme)(href, require$_DOT__DOT__SLASH__DOT__DOT__SLASH__DOT__DOT__SLASH_base_SLASH_common_SLASH_network_DOT_js.Schemas.http, require$_DOT__DOT__SLASH__DOT__DOT__SLASH__DOT__DOT__SLASH_base_SLASH_common_SLASH_network_DOT_js.Schemas.https) ? dom.windowOpenNoOpener(href) : require$_DOT__DOT__SLASH__DOT__DOT__SLASH__DOT__DOT__SLASH_base_SLASH_browser_SLASH_window_DOT_js.mainWindow.location.href = 
        href;
        return !0;
      }};
      this._openers.push({open:async(target, options) => (options === null || options === void 0 ? 0 : options.openExternal) || (0,require$_DOT__DOT__SLASH__DOT__DOT__SLASH__DOT__DOT__SLASH_base_SLASH_common_SLASH_network_DOT_js.matchesSomeScheme)(target, require$_DOT__DOT__SLASH__DOT__DOT__SLASH__DOT__DOT__SLASH_base_SLASH_common_SLASH_network_DOT_js.Schemas.mailto, require$_DOT__DOT__SLASH__DOT__DOT__SLASH__DOT__DOT__SLASH_base_SLASH_common_SLASH_network_DOT_js.Schemas.http, require$_DOT__DOT__SLASH__DOT__DOT__SLASH__DOT__DOT__SLASH_base_SLASH_common_SLASH_network_DOT_js.Schemas.https, 
      require$_DOT__DOT__SLASH__DOT__DOT__SLASH__DOT__DOT__SLASH_base_SLASH_common_SLASH_network_DOT_js.Schemas.vsls) ? (await this._doOpenExternal(target, options), !0) : !1});
      this._openers.push(new CommandOpener(commandService));
      this._openers.push(new EditorOpener(editorService));
    }
    registerOpener(opener) {
      return {dispose:this._openers.unshift(opener)};
    }
    async open(target, options) {
      var _a, targetURI = typeof target === "string" ? require$_DOT__DOT__SLASH__DOT__DOT__SLASH__DOT__DOT__SLASH_base_SLASH_common_SLASH_uri_DOT_js.URI.parse(target) : target;
      targetURI = (_a = this._resolvedUriTargets.get(targetURI)) !== null && _a !== void 0 ? _a : target;
      for (const validator of this._validators) {
        if (!await validator.shouldOpen(targetURI, options)) {
          return !1;
        }
      }
      for (const opener of this._openers) {
        if (await opener.open(target, options)) {
          return !0;
        }
      }
      return !1;
    }
    async resolveExternalUri(resource, options) {
      for (const resolver of this._resolvers) {
        try {
          const result = await resolver.resolveExternalUri(resource, options);
          if (result) {
            return this._resolvedUriTargets.has(result.resolved) || this._resolvedUriTargets.set(result.resolved, resource), result;
          }
        } catch (_a) {
        }
      }
      throw Error("Could not resolve external URI: " + resource.toString());
    }
    async _doOpenExternal(resource, options) {
      const uri = typeof resource === "string" ? require$_DOT__DOT__SLASH__DOT__DOT__SLASH__DOT__DOT__SLASH_base_SLASH_common_SLASH_uri_DOT_js.URI.parse(resource) : resource;
      let externalUri;
      try {
        externalUri = (await this.resolveExternalUri(uri, options)).resolved;
      } catch (_a) {
        externalUri = uri;
      }
      resource = typeof resource === "string" && uri.toString() === externalUri.toString() ? resource : encodeURI(externalUri.toString(!0));
      if (options === null || options === void 0 ? 0 : options.allowContributedOpeners) {
        options = typeof(options === null || options === void 0 ? void 0 : options.allowContributedOpeners) === "string" ? options === null || options === void 0 ? void 0 : options.allowContributedOpeners : void 0;
        for (const opener of this._externalOpeners) {
          if (await opener.openExternal(resource, {sourceUri:uri, preferredOpenerId:options}, require$_DOT__DOT__SLASH__DOT__DOT__SLASH__DOT__DOT__SLASH_base_SLASH_common_SLASH_cancellation_DOT_js.CancellationToken.None)) {
            return !0;
          }
        }
      }
      return this._defaultExternalOpener.openExternal(resource, {sourceUri:uri}, require$_DOT__DOT__SLASH__DOT__DOT__SLASH__DOT__DOT__SLASH_base_SLASH_common_SLASH_cancellation_DOT_js.CancellationToken.None);
    }
    dispose() {
      this._validators.clear();
    }
  };
  OpenerService = require([__param(0, module.ICodeEditorService), __param(1, exports.ICommandService)], OpenerService);
};

//# sourceMappingURL=module$node_modules$monaco_editor$esm$vs$editor$browser$services$openerService.js.map
