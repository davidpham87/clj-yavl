{
"version":3,
"file":"module$node_modules$monaco_editor$esm$vs$editor$common$model$bracketPairsTextModelPart$bracketPairsImpl.js",
"lineCount":456,
"mappings":"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",
"sources":["node_modules/monaco-editor/esm/vs/editor/common/model/bracketPairsTextModelPart/bracketPairsImpl.js"],
"sourcesContent":["shadow$provide[\"module$node_modules$monaco_editor$esm$vs$editor$common$model$bracketPairsTextModelPart$bracketPairsImpl\"] = function(require,module,exports) {\nObject.defineProperties(exports, {__esModule:{enumerable:true, value:true}, BracketPairsTextModelPart:{enumerable:true, get:function() {\n  return BracketPairsTextModelPart;\n}}});\nvar require$_DOT__DOT__SLASH__DOT__DOT__SLASH__DOT__DOT__SLASH__DOT__DOT__SLASH_base_SLASH_common_SLASH_arrays_DOT_js = require(\"../../../../base/common/arrays.js\");\nvar require$_DOT__DOT__SLASH__DOT__DOT__SLASH__DOT__DOT__SLASH__DOT__DOT__SLASH_base_SLASH_common_SLASH_event_DOT_js = require(\"../../../../base/common/event.js\");\nvar require$_DOT__DOT__SLASH__DOT__DOT__SLASH__DOT__DOT__SLASH__DOT__DOT__SLASH_base_SLASH_common_SLASH_lifecycle_DOT_js = require(\"../../../../base/common/lifecycle.js\");\nvar require$_DOT__DOT__SLASH__DOT__DOT__SLASH_core_SLASH_range_DOT_js = require(\"../../core/range.js\");\nvar require$_DOT__DOT__SLASH__DOT__DOT__SLASH_languages_SLASH_supports_DOT_js = require(\"../../languages/supports.js\");\nvar require$_DOT__DOT__SLASH__DOT__DOT__SLASH_languages_SLASH_supports_SLASH_richEditBrackets_DOT_js = require(\"../../languages/supports/richEditBrackets.js\");\nvar require$_DOT__SLASH_bracketPairsTree_SLASH_bracketPairsTree_DOT_js = require(\"./bracketPairsTree/bracketPairsTree.js\");\nclass BracketPairsTextModelPart extends require$_DOT__DOT__SLASH__DOT__DOT__SLASH__DOT__DOT__SLASH__DOT__DOT__SLASH_base_SLASH_common_SLASH_lifecycle_DOT_js.Disposable {\n  get canBuildAST() {\n    const maxSupportedDocumentLength = 50000 * 100;\n    return this.textModel.getValueLength() <= maxSupportedDocumentLength;\n  }\n  constructor(textModel, languageConfigurationService) {\n    super();\n    this.textModel = textModel;\n    this.languageConfigurationService = languageConfigurationService;\n    this.bracketPairsTree = this._register(new require$_DOT__DOT__SLASH__DOT__DOT__SLASH__DOT__DOT__SLASH__DOT__DOT__SLASH_base_SLASH_common_SLASH_lifecycle_DOT_js.MutableDisposable());\n    this.onDidChangeEmitter = new require$_DOT__DOT__SLASH__DOT__DOT__SLASH__DOT__DOT__SLASH__DOT__DOT__SLASH_base_SLASH_common_SLASH_event_DOT_js.Emitter();\n    this.onDidChange = this.onDidChangeEmitter.event;\n    this.bracketsRequested = false;\n    this._register(this.languageConfigurationService.onDidChange(e => {\n      var _a;\n      if (!e.languageId || ((_a = this.bracketPairsTree.value) === null || _a === void 0 ? void 0 : _a.object.didLanguageChange(e.languageId))) {\n        this.bracketPairsTree.clear();\n        this.updateBracketPairsTree();\n      }\n    }));\n  }\n  handleDidChangeOptions(e) {\n    this.bracketPairsTree.clear();\n    this.updateBracketPairsTree();\n  }\n  handleDidChangeLanguage(e) {\n    this.bracketPairsTree.clear();\n    this.updateBracketPairsTree();\n  }\n  handleDidChangeContent(change) {\n    var _a;\n    (_a = this.bracketPairsTree.value) === null || _a === void 0 ? void 0 : _a.object.handleContentChanged(change);\n  }\n  handleDidChangeBackgroundTokenizationState() {\n    var _a;\n    (_a = this.bracketPairsTree.value) === null || _a === void 0 ? void 0 : _a.object.handleDidChangeBackgroundTokenizationState();\n  }\n  handleDidChangeTokens(e) {\n    var _a;\n    (_a = this.bracketPairsTree.value) === null || _a === void 0 ? void 0 : _a.object.handleDidChangeTokens(e);\n  }\n  updateBracketPairsTree() {\n    if (this.bracketsRequested && this.canBuildAST) {\n      if (!this.bracketPairsTree.value) {\n        const store = new require$_DOT__DOT__SLASH__DOT__DOT__SLASH__DOT__DOT__SLASH__DOT__DOT__SLASH_base_SLASH_common_SLASH_lifecycle_DOT_js.DisposableStore();\n        this.bracketPairsTree.value = createDisposableRef(store.add(new require$_DOT__SLASH_bracketPairsTree_SLASH_bracketPairsTree_DOT_js.BracketPairsTree(this.textModel, languageId => {\n          return this.languageConfigurationService.getLanguageConfiguration(languageId);\n        })), store);\n        store.add(this.bracketPairsTree.value.object.onDidChange(e => this.onDidChangeEmitter.fire(e)));\n        this.onDidChangeEmitter.fire();\n      }\n    } else {\n      if (this.bracketPairsTree.value) {\n        this.bracketPairsTree.clear();\n        this.onDidChangeEmitter.fire();\n      }\n    }\n  }\n  getBracketPairsInRange(range) {\n    var _a;\n    this.bracketsRequested = true;\n    this.updateBracketPairsTree();\n    return ((_a = this.bracketPairsTree.value) === null || _a === void 0 ? void 0 : _a.object.getBracketPairsInRange(range, false)) || require$_DOT__DOT__SLASH__DOT__DOT__SLASH__DOT__DOT__SLASH__DOT__DOT__SLASH_base_SLASH_common_SLASH_arrays_DOT_js.CallbackIterable.empty;\n  }\n  getBracketPairsInRangeWithMinIndentation(range) {\n    var _a;\n    this.bracketsRequested = true;\n    this.updateBracketPairsTree();\n    return ((_a = this.bracketPairsTree.value) === null || _a === void 0 ? void 0 : _a.object.getBracketPairsInRange(range, true)) || require$_DOT__DOT__SLASH__DOT__DOT__SLASH__DOT__DOT__SLASH__DOT__DOT__SLASH_base_SLASH_common_SLASH_arrays_DOT_js.CallbackIterable.empty;\n  }\n  getBracketsInRange(range, onlyColorizedBrackets = false) {\n    var _a;\n    this.bracketsRequested = true;\n    this.updateBracketPairsTree();\n    return ((_a = this.bracketPairsTree.value) === null || _a === void 0 ? void 0 : _a.object.getBracketsInRange(range, onlyColorizedBrackets)) || require$_DOT__DOT__SLASH__DOT__DOT__SLASH__DOT__DOT__SLASH__DOT__DOT__SLASH_base_SLASH_common_SLASH_arrays_DOT_js.CallbackIterable.empty;\n  }\n  findMatchingBracketUp(_bracket, _position, maxDuration) {\n    const position = this.textModel.validatePosition(_position);\n    const languageId = this.textModel.getLanguageIdAtPosition(position.lineNumber, position.column);\n    if (this.canBuildAST) {\n      const closingBracketInfo = this.languageConfigurationService.getLanguageConfiguration(languageId).bracketsNew.getClosingBracketInfo(_bracket);\n      if (!closingBracketInfo) {\n        return null;\n      }\n      const bracketPair = this.getBracketPairsInRange(require$_DOT__DOT__SLASH__DOT__DOT__SLASH_core_SLASH_range_DOT_js.Range.fromPositions(_position, _position)).findLast(b => closingBracketInfo.closes(b.openingBracketInfo));\n      if (bracketPair) {\n        return bracketPair.openingBracketRange;\n      }\n      return null;\n    } else {\n      const bracket = _bracket.toLowerCase();\n      const bracketsSupport = this.languageConfigurationService.getLanguageConfiguration(languageId).brackets;\n      if (!bracketsSupport) {\n        return null;\n      }\n      const data = bracketsSupport.textIsBracket[bracket];\n      if (!data) {\n        return null;\n      }\n      return stripBracketSearchCanceled(this._findMatchingBracketUp(data, position, createTimeBasedContinueBracketSearchPredicate(maxDuration)));\n    }\n  }\n  matchBracket(position, maxDuration) {\n    if (this.canBuildAST) {\n      const bracketPair = this.getBracketPairsInRange(require$_DOT__DOT__SLASH__DOT__DOT__SLASH_core_SLASH_range_DOT_js.Range.fromPositions(position, position)).filter(item => item.closingBracketRange !== undefined && (item.openingBracketRange.containsPosition(position) || item.closingBracketRange.containsPosition(position))).findLastMaxBy((0,require$_DOT__DOT__SLASH__DOT__DOT__SLASH__DOT__DOT__SLASH__DOT__DOT__SLASH_base_SLASH_common_SLASH_arrays_DOT_js.compareBy)(item => item.openingBracketRange.containsPosition(position) ? \n      item.openingBracketRange : item.closingBracketRange, require$_DOT__DOT__SLASH__DOT__DOT__SLASH_core_SLASH_range_DOT_js.Range.compareRangesUsingStarts));\n      if (bracketPair) {\n        return [bracketPair.openingBracketRange, bracketPair.closingBracketRange];\n      }\n      return null;\n    } else {\n      const continueSearchPredicate = createTimeBasedContinueBracketSearchPredicate(maxDuration);\n      return this._matchBracket(this.textModel.validatePosition(position), continueSearchPredicate);\n    }\n  }\n  _establishBracketSearchOffsets(position, lineTokens, modeBrackets, tokenIndex) {\n    const tokenCount = lineTokens.getCount();\n    const currentLanguageId = lineTokens.getLanguageId(tokenIndex);\n    let searchStartOffset = Math.max(0, position.column - 1 - modeBrackets.maxBracketLength);\n    for (let i = tokenIndex - 1; i >= 0; i--) {\n      const tokenEndOffset = lineTokens.getEndOffset(i);\n      if (tokenEndOffset <= searchStartOffset) {\n        break;\n      }\n      if ((0,require$_DOT__DOT__SLASH__DOT__DOT__SLASH_languages_SLASH_supports_DOT_js.ignoreBracketsInToken)(lineTokens.getStandardTokenType(i)) || lineTokens.getLanguageId(i) !== currentLanguageId) {\n        searchStartOffset = tokenEndOffset;\n        break;\n      }\n    }\n    let searchEndOffset = Math.min(lineTokens.getLineContent().length, position.column - 1 + modeBrackets.maxBracketLength);\n    for (let i = tokenIndex + 1; i < tokenCount; i++) {\n      const tokenStartOffset = lineTokens.getStartOffset(i);\n      if (tokenStartOffset >= searchEndOffset) {\n        break;\n      }\n      if ((0,require$_DOT__DOT__SLASH__DOT__DOT__SLASH_languages_SLASH_supports_DOT_js.ignoreBracketsInToken)(lineTokens.getStandardTokenType(i)) || lineTokens.getLanguageId(i) !== currentLanguageId) {\n        searchEndOffset = tokenStartOffset;\n        break;\n      }\n    }\n    return {searchStartOffset, searchEndOffset};\n  }\n  _matchBracket(position, continueSearchPredicate) {\n    const lineNumber = position.lineNumber;\n    const lineTokens = this.textModel.tokenization.getLineTokens(lineNumber);\n    const lineText = this.textModel.getLineContent(lineNumber);\n    const tokenIndex = lineTokens.findTokenIndexAtOffset(position.column - 1);\n    if (tokenIndex < 0) {\n      return null;\n    }\n    const currentModeBrackets = this.languageConfigurationService.getLanguageConfiguration(lineTokens.getLanguageId(tokenIndex)).brackets;\n    if (currentModeBrackets && !(0,require$_DOT__DOT__SLASH__DOT__DOT__SLASH_languages_SLASH_supports_DOT_js.ignoreBracketsInToken)(lineTokens.getStandardTokenType(tokenIndex))) {\n      let {searchStartOffset, searchEndOffset} = this._establishBracketSearchOffsets(position, lineTokens, currentModeBrackets, tokenIndex);\n      let bestResult = null;\n      while (true) {\n        const foundBracket = require$_DOT__DOT__SLASH__DOT__DOT__SLASH_languages_SLASH_supports_SLASH_richEditBrackets_DOT_js.BracketsUtils.findNextBracketInRange(currentModeBrackets.forwardRegex, lineNumber, lineText, searchStartOffset, searchEndOffset);\n        if (!foundBracket) {\n          break;\n        }\n        if (foundBracket.startColumn <= position.column && position.column <= foundBracket.endColumn) {\n          const foundBracketText = lineText.substring(foundBracket.startColumn - 1, foundBracket.endColumn - 1).toLowerCase();\n          const r = this._matchFoundBracket(foundBracket, currentModeBrackets.textIsBracket[foundBracketText], currentModeBrackets.textIsOpenBracket[foundBracketText], continueSearchPredicate);\n          if (r) {\n            if (r instanceof BracketSearchCanceled) {\n              return null;\n            }\n            bestResult = r;\n          }\n        }\n        searchStartOffset = foundBracket.endColumn - 1;\n      }\n      if (bestResult) {\n        return bestResult;\n      }\n    }\n    if (tokenIndex > 0 && lineTokens.getStartOffset(tokenIndex) === position.column - 1) {\n      const prevTokenIndex = tokenIndex - 1;\n      const prevModeBrackets = this.languageConfigurationService.getLanguageConfiguration(lineTokens.getLanguageId(prevTokenIndex)).brackets;\n      if (prevModeBrackets && !(0,require$_DOT__DOT__SLASH__DOT__DOT__SLASH_languages_SLASH_supports_DOT_js.ignoreBracketsInToken)(lineTokens.getStandardTokenType(prevTokenIndex))) {\n        const {searchStartOffset, searchEndOffset} = this._establishBracketSearchOffsets(position, lineTokens, prevModeBrackets, prevTokenIndex);\n        const foundBracket = require$_DOT__DOT__SLASH__DOT__DOT__SLASH_languages_SLASH_supports_SLASH_richEditBrackets_DOT_js.BracketsUtils.findPrevBracketInRange(prevModeBrackets.reversedRegex, lineNumber, lineText, searchStartOffset, searchEndOffset);\n        if (foundBracket && foundBracket.startColumn <= position.column && position.column <= foundBracket.endColumn) {\n          const foundBracketText = lineText.substring(foundBracket.startColumn - 1, foundBracket.endColumn - 1).toLowerCase();\n          const r = this._matchFoundBracket(foundBracket, prevModeBrackets.textIsBracket[foundBracketText], prevModeBrackets.textIsOpenBracket[foundBracketText], continueSearchPredicate);\n          if (r) {\n            if (r instanceof BracketSearchCanceled) {\n              return null;\n            }\n            return r;\n          }\n        }\n      }\n    }\n    return null;\n  }\n  _matchFoundBracket(foundBracket, data, isOpen, continueSearchPredicate) {\n    if (!data) {\n      return null;\n    }\n    const matched = isOpen ? this._findMatchingBracketDown(data, foundBracket.getEndPosition(), continueSearchPredicate) : this._findMatchingBracketUp(data, foundBracket.getStartPosition(), continueSearchPredicate);\n    if (!matched) {\n      return null;\n    }\n    if (matched instanceof BracketSearchCanceled) {\n      return matched;\n    }\n    return [foundBracket, matched];\n  }\n  _findMatchingBracketUp(bracket, position, continueSearchPredicate) {\n    const languageId = bracket.languageId;\n    const reversedBracketRegex = bracket.reversedRegex;\n    let count = -1;\n    let totalCallCount = 0;\n    const searchPrevMatchingBracketInRange = (lineNumber, lineText, searchStartOffset, searchEndOffset) => {\n      while (true) {\n        if (continueSearchPredicate && ++totalCallCount % 100 === 0 && !continueSearchPredicate()) {\n          return BracketSearchCanceled.INSTANCE;\n        }\n        const r = require$_DOT__DOT__SLASH__DOT__DOT__SLASH_languages_SLASH_supports_SLASH_richEditBrackets_DOT_js.BracketsUtils.findPrevBracketInRange(reversedBracketRegex, lineNumber, lineText, searchStartOffset, searchEndOffset);\n        if (!r) {\n          break;\n        }\n        const hitText = lineText.substring(r.startColumn - 1, r.endColumn - 1).toLowerCase();\n        if (bracket.isOpen(hitText)) {\n          count++;\n        } else if (bracket.isClose(hitText)) {\n          count--;\n        }\n        if (count === 0) {\n          return r;\n        }\n        searchEndOffset = r.startColumn - 1;\n      }\n      return null;\n    };\n    for (let lineNumber = position.lineNumber; lineNumber >= 1; lineNumber--) {\n      const lineTokens = this.textModel.tokenization.getLineTokens(lineNumber);\n      const tokenCount = lineTokens.getCount();\n      const lineText = this.textModel.getLineContent(lineNumber);\n      let tokenIndex = tokenCount - 1;\n      let searchStartOffset = lineText.length;\n      let searchEndOffset = lineText.length;\n      if (lineNumber === position.lineNumber) {\n        tokenIndex = lineTokens.findTokenIndexAtOffset(position.column - 1);\n        searchStartOffset = position.column - 1;\n        searchEndOffset = position.column - 1;\n      }\n      let prevSearchInToken = true;\n      for (; tokenIndex >= 0; tokenIndex--) {\n        const searchInToken = lineTokens.getLanguageId(tokenIndex) === languageId && !(0,require$_DOT__DOT__SLASH__DOT__DOT__SLASH_languages_SLASH_supports_DOT_js.ignoreBracketsInToken)(lineTokens.getStandardTokenType(tokenIndex));\n        if (searchInToken) {\n          if (prevSearchInToken) {\n            searchStartOffset = lineTokens.getStartOffset(tokenIndex);\n          } else {\n            searchStartOffset = lineTokens.getStartOffset(tokenIndex);\n            searchEndOffset = lineTokens.getEndOffset(tokenIndex);\n          }\n        } else {\n          if (prevSearchInToken && searchStartOffset !== searchEndOffset) {\n            const r = searchPrevMatchingBracketInRange(lineNumber, lineText, searchStartOffset, searchEndOffset);\n            if (r) {\n              return r;\n            }\n          }\n        }\n        prevSearchInToken = searchInToken;\n      }\n      if (prevSearchInToken && searchStartOffset !== searchEndOffset) {\n        const r = searchPrevMatchingBracketInRange(lineNumber, lineText, searchStartOffset, searchEndOffset);\n        if (r) {\n          return r;\n        }\n      }\n    }\n    return null;\n  }\n  _findMatchingBracketDown(bracket, position, continueSearchPredicate) {\n    const languageId = bracket.languageId;\n    const bracketRegex = bracket.forwardRegex;\n    let count = 1;\n    let totalCallCount = 0;\n    const searchNextMatchingBracketInRange = (lineNumber, lineText, searchStartOffset, searchEndOffset) => {\n      while (true) {\n        if (continueSearchPredicate && ++totalCallCount % 100 === 0 && !continueSearchPredicate()) {\n          return BracketSearchCanceled.INSTANCE;\n        }\n        const r = require$_DOT__DOT__SLASH__DOT__DOT__SLASH_languages_SLASH_supports_SLASH_richEditBrackets_DOT_js.BracketsUtils.findNextBracketInRange(bracketRegex, lineNumber, lineText, searchStartOffset, searchEndOffset);\n        if (!r) {\n          break;\n        }\n        const hitText = lineText.substring(r.startColumn - 1, r.endColumn - 1).toLowerCase();\n        if (bracket.isOpen(hitText)) {\n          count++;\n        } else if (bracket.isClose(hitText)) {\n          count--;\n        }\n        if (count === 0) {\n          return r;\n        }\n        searchStartOffset = r.endColumn - 1;\n      }\n      return null;\n    };\n    const lineCount = this.textModel.getLineCount();\n    for (let lineNumber = position.lineNumber; lineNumber <= lineCount; lineNumber++) {\n      const lineTokens = this.textModel.tokenization.getLineTokens(lineNumber);\n      const tokenCount = lineTokens.getCount();\n      const lineText = this.textModel.getLineContent(lineNumber);\n      let tokenIndex = 0;\n      let searchStartOffset = 0;\n      let searchEndOffset = 0;\n      if (lineNumber === position.lineNumber) {\n        tokenIndex = lineTokens.findTokenIndexAtOffset(position.column - 1);\n        searchStartOffset = position.column - 1;\n        searchEndOffset = position.column - 1;\n      }\n      let prevSearchInToken = true;\n      for (; tokenIndex < tokenCount; tokenIndex++) {\n        const searchInToken = lineTokens.getLanguageId(tokenIndex) === languageId && !(0,require$_DOT__DOT__SLASH__DOT__DOT__SLASH_languages_SLASH_supports_DOT_js.ignoreBracketsInToken)(lineTokens.getStandardTokenType(tokenIndex));\n        if (searchInToken) {\n          if (prevSearchInToken) {\n            searchEndOffset = lineTokens.getEndOffset(tokenIndex);\n          } else {\n            searchStartOffset = lineTokens.getStartOffset(tokenIndex);\n            searchEndOffset = lineTokens.getEndOffset(tokenIndex);\n          }\n        } else {\n          if (prevSearchInToken && searchStartOffset !== searchEndOffset) {\n            const r = searchNextMatchingBracketInRange(lineNumber, lineText, searchStartOffset, searchEndOffset);\n            if (r) {\n              return r;\n            }\n          }\n        }\n        prevSearchInToken = searchInToken;\n      }\n      if (prevSearchInToken && searchStartOffset !== searchEndOffset) {\n        const r = searchNextMatchingBracketInRange(lineNumber, lineText, searchStartOffset, searchEndOffset);\n        if (r) {\n          return r;\n        }\n      }\n    }\n    return null;\n  }\n  findPrevBracket(_position) {\n    var _a;\n    const position = this.textModel.validatePosition(_position);\n    if (this.canBuildAST) {\n      this.bracketsRequested = true;\n      this.updateBracketPairsTree();\n      return ((_a = this.bracketPairsTree.value) === null || _a === void 0 ? void 0 : _a.object.getFirstBracketBefore(position)) || null;\n    }\n    let languageId = null;\n    let modeBrackets = null;\n    let bracketConfig = null;\n    for (let lineNumber = position.lineNumber; lineNumber >= 1; lineNumber--) {\n      const lineTokens = this.textModel.tokenization.getLineTokens(lineNumber);\n      const tokenCount = lineTokens.getCount();\n      const lineText = this.textModel.getLineContent(lineNumber);\n      let tokenIndex = tokenCount - 1;\n      let searchStartOffset = lineText.length;\n      let searchEndOffset = lineText.length;\n      if (lineNumber === position.lineNumber) {\n        tokenIndex = lineTokens.findTokenIndexAtOffset(position.column - 1);\n        searchStartOffset = position.column - 1;\n        searchEndOffset = position.column - 1;\n        const tokenLanguageId = lineTokens.getLanguageId(tokenIndex);\n        if (languageId !== tokenLanguageId) {\n          languageId = tokenLanguageId;\n          modeBrackets = this.languageConfigurationService.getLanguageConfiguration(languageId).brackets;\n          bracketConfig = this.languageConfigurationService.getLanguageConfiguration(languageId).bracketsNew;\n        }\n      }\n      let prevSearchInToken = true;\n      for (; tokenIndex >= 0; tokenIndex--) {\n        const tokenLanguageId = lineTokens.getLanguageId(tokenIndex);\n        if (languageId !== tokenLanguageId) {\n          if (modeBrackets && bracketConfig && prevSearchInToken && searchStartOffset !== searchEndOffset) {\n            const r = require$_DOT__DOT__SLASH__DOT__DOT__SLASH_languages_SLASH_supports_SLASH_richEditBrackets_DOT_js.BracketsUtils.findPrevBracketInRange(modeBrackets.reversedRegex, lineNumber, lineText, searchStartOffset, searchEndOffset);\n            if (r) {\n              return this._toFoundBracket(bracketConfig, r);\n            }\n            prevSearchInToken = false;\n          }\n          languageId = tokenLanguageId;\n          modeBrackets = this.languageConfigurationService.getLanguageConfiguration(languageId).brackets;\n          bracketConfig = this.languageConfigurationService.getLanguageConfiguration(languageId).bracketsNew;\n        }\n        const searchInToken = !!modeBrackets && !(0,require$_DOT__DOT__SLASH__DOT__DOT__SLASH_languages_SLASH_supports_DOT_js.ignoreBracketsInToken)(lineTokens.getStandardTokenType(tokenIndex));\n        if (searchInToken) {\n          if (prevSearchInToken) {\n            searchStartOffset = lineTokens.getStartOffset(tokenIndex);\n          } else {\n            searchStartOffset = lineTokens.getStartOffset(tokenIndex);\n            searchEndOffset = lineTokens.getEndOffset(tokenIndex);\n          }\n        } else {\n          if (bracketConfig && modeBrackets && prevSearchInToken && searchStartOffset !== searchEndOffset) {\n            const r = require$_DOT__DOT__SLASH__DOT__DOT__SLASH_languages_SLASH_supports_SLASH_richEditBrackets_DOT_js.BracketsUtils.findPrevBracketInRange(modeBrackets.reversedRegex, lineNumber, lineText, searchStartOffset, searchEndOffset);\n            if (r) {\n              return this._toFoundBracket(bracketConfig, r);\n            }\n          }\n        }\n        prevSearchInToken = searchInToken;\n      }\n      if (bracketConfig && modeBrackets && prevSearchInToken && searchStartOffset !== searchEndOffset) {\n        const r = require$_DOT__DOT__SLASH__DOT__DOT__SLASH_languages_SLASH_supports_SLASH_richEditBrackets_DOT_js.BracketsUtils.findPrevBracketInRange(modeBrackets.reversedRegex, lineNumber, lineText, searchStartOffset, searchEndOffset);\n        if (r) {\n          return this._toFoundBracket(bracketConfig, r);\n        }\n      }\n    }\n    return null;\n  }\n  findNextBracket(_position) {\n    var _a;\n    const position = this.textModel.validatePosition(_position);\n    if (this.canBuildAST) {\n      this.bracketsRequested = true;\n      this.updateBracketPairsTree();\n      return ((_a = this.bracketPairsTree.value) === null || _a === void 0 ? void 0 : _a.object.getFirstBracketAfter(position)) || null;\n    }\n    const lineCount = this.textModel.getLineCount();\n    let languageId = null;\n    let modeBrackets = null;\n    let bracketConfig = null;\n    for (let lineNumber = position.lineNumber; lineNumber <= lineCount; lineNumber++) {\n      const lineTokens = this.textModel.tokenization.getLineTokens(lineNumber);\n      const tokenCount = lineTokens.getCount();\n      const lineText = this.textModel.getLineContent(lineNumber);\n      let tokenIndex = 0;\n      let searchStartOffset = 0;\n      let searchEndOffset = 0;\n      if (lineNumber === position.lineNumber) {\n        tokenIndex = lineTokens.findTokenIndexAtOffset(position.column - 1);\n        searchStartOffset = position.column - 1;\n        searchEndOffset = position.column - 1;\n        const tokenLanguageId = lineTokens.getLanguageId(tokenIndex);\n        if (languageId !== tokenLanguageId) {\n          languageId = tokenLanguageId;\n          modeBrackets = this.languageConfigurationService.getLanguageConfiguration(languageId).brackets;\n          bracketConfig = this.languageConfigurationService.getLanguageConfiguration(languageId).bracketsNew;\n        }\n      }\n      let prevSearchInToken = true;\n      for (; tokenIndex < tokenCount; tokenIndex++) {\n        const tokenLanguageId = lineTokens.getLanguageId(tokenIndex);\n        if (languageId !== tokenLanguageId) {\n          if (bracketConfig && modeBrackets && prevSearchInToken && searchStartOffset !== searchEndOffset) {\n            const r = require$_DOT__DOT__SLASH__DOT__DOT__SLASH_languages_SLASH_supports_SLASH_richEditBrackets_DOT_js.BracketsUtils.findNextBracketInRange(modeBrackets.forwardRegex, lineNumber, lineText, searchStartOffset, searchEndOffset);\n            if (r) {\n              return this._toFoundBracket(bracketConfig, r);\n            }\n            prevSearchInToken = false;\n          }\n          languageId = tokenLanguageId;\n          modeBrackets = this.languageConfigurationService.getLanguageConfiguration(languageId).brackets;\n          bracketConfig = this.languageConfigurationService.getLanguageConfiguration(languageId).bracketsNew;\n        }\n        const searchInToken = !!modeBrackets && !(0,require$_DOT__DOT__SLASH__DOT__DOT__SLASH_languages_SLASH_supports_DOT_js.ignoreBracketsInToken)(lineTokens.getStandardTokenType(tokenIndex));\n        if (searchInToken) {\n          if (prevSearchInToken) {\n            searchEndOffset = lineTokens.getEndOffset(tokenIndex);\n          } else {\n            searchStartOffset = lineTokens.getStartOffset(tokenIndex);\n            searchEndOffset = lineTokens.getEndOffset(tokenIndex);\n          }\n        } else {\n          if (bracketConfig && modeBrackets && prevSearchInToken && searchStartOffset !== searchEndOffset) {\n            const r = require$_DOT__DOT__SLASH__DOT__DOT__SLASH_languages_SLASH_supports_SLASH_richEditBrackets_DOT_js.BracketsUtils.findNextBracketInRange(modeBrackets.forwardRegex, lineNumber, lineText, searchStartOffset, searchEndOffset);\n            if (r) {\n              return this._toFoundBracket(bracketConfig, r);\n            }\n          }\n        }\n        prevSearchInToken = searchInToken;\n      }\n      if (bracketConfig && modeBrackets && prevSearchInToken && searchStartOffset !== searchEndOffset) {\n        const r = require$_DOT__DOT__SLASH__DOT__DOT__SLASH_languages_SLASH_supports_SLASH_richEditBrackets_DOT_js.BracketsUtils.findNextBracketInRange(modeBrackets.forwardRegex, lineNumber, lineText, searchStartOffset, searchEndOffset);\n        if (r) {\n          return this._toFoundBracket(bracketConfig, r);\n        }\n      }\n    }\n    return null;\n  }\n  findEnclosingBrackets(_position, maxDuration) {\n    const position = this.textModel.validatePosition(_position);\n    if (this.canBuildAST) {\n      const range = require$_DOT__DOT__SLASH__DOT__DOT__SLASH_core_SLASH_range_DOT_js.Range.fromPositions(position);\n      const bracketPair = this.getBracketPairsInRange(require$_DOT__DOT__SLASH__DOT__DOT__SLASH_core_SLASH_range_DOT_js.Range.fromPositions(position, position)).findLast(item => item.closingBracketRange !== undefined && item.range.strictContainsRange(range));\n      if (bracketPair) {\n        return [bracketPair.openingBracketRange, bracketPair.closingBracketRange];\n      }\n      return null;\n    }\n    const continueSearchPredicate = createTimeBasedContinueBracketSearchPredicate(maxDuration);\n    const lineCount = this.textModel.getLineCount();\n    const savedCounts = new Map();\n    let counts = [];\n    const resetCounts = (languageId, modeBrackets) => {\n      if (!savedCounts.has(languageId)) {\n        const tmp = [];\n        for (let i = 0, len = modeBrackets ? modeBrackets.brackets.length : 0; i < len; i++) {\n          tmp[i] = 0;\n        }\n        savedCounts.set(languageId, tmp);\n      }\n      counts = savedCounts.get(languageId);\n    };\n    let totalCallCount = 0;\n    const searchInRange = (modeBrackets, lineNumber, lineText, searchStartOffset, searchEndOffset) => {\n      while (true) {\n        if (continueSearchPredicate && ++totalCallCount % 100 === 0 && !continueSearchPredicate()) {\n          return BracketSearchCanceled.INSTANCE;\n        }\n        const r = require$_DOT__DOT__SLASH__DOT__DOT__SLASH_languages_SLASH_supports_SLASH_richEditBrackets_DOT_js.BracketsUtils.findNextBracketInRange(modeBrackets.forwardRegex, lineNumber, lineText, searchStartOffset, searchEndOffset);\n        if (!r) {\n          break;\n        }\n        const hitText = lineText.substring(r.startColumn - 1, r.endColumn - 1).toLowerCase();\n        const bracket = modeBrackets.textIsBracket[hitText];\n        if (bracket) {\n          if (bracket.isOpen(hitText)) {\n            counts[bracket.index]++;\n          } else if (bracket.isClose(hitText)) {\n            counts[bracket.index]--;\n          }\n          if (counts[bracket.index] === -1) {\n            return this._matchFoundBracket(r, bracket, false, continueSearchPredicate);\n          }\n        }\n        searchStartOffset = r.endColumn - 1;\n      }\n      return null;\n    };\n    let languageId = null;\n    let modeBrackets = null;\n    for (let lineNumber = position.lineNumber; lineNumber <= lineCount; lineNumber++) {\n      const lineTokens = this.textModel.tokenization.getLineTokens(lineNumber);\n      const tokenCount = lineTokens.getCount();\n      const lineText = this.textModel.getLineContent(lineNumber);\n      let tokenIndex = 0;\n      let searchStartOffset = 0;\n      let searchEndOffset = 0;\n      if (lineNumber === position.lineNumber) {\n        tokenIndex = lineTokens.findTokenIndexAtOffset(position.column - 1);\n        searchStartOffset = position.column - 1;\n        searchEndOffset = position.column - 1;\n        const tokenLanguageId = lineTokens.getLanguageId(tokenIndex);\n        if (languageId !== tokenLanguageId) {\n          languageId = tokenLanguageId;\n          modeBrackets = this.languageConfigurationService.getLanguageConfiguration(languageId).brackets;\n          resetCounts(languageId, modeBrackets);\n        }\n      }\n      let prevSearchInToken = true;\n      for (; tokenIndex < tokenCount; tokenIndex++) {\n        const tokenLanguageId = lineTokens.getLanguageId(tokenIndex);\n        if (languageId !== tokenLanguageId) {\n          if (modeBrackets && prevSearchInToken && searchStartOffset !== searchEndOffset) {\n            const r = searchInRange(modeBrackets, lineNumber, lineText, searchStartOffset, searchEndOffset);\n            if (r) {\n              return stripBracketSearchCanceled(r);\n            }\n            prevSearchInToken = false;\n          }\n          languageId = tokenLanguageId;\n          modeBrackets = this.languageConfigurationService.getLanguageConfiguration(languageId).brackets;\n          resetCounts(languageId, modeBrackets);\n        }\n        const searchInToken = !!modeBrackets && !(0,require$_DOT__DOT__SLASH__DOT__DOT__SLASH_languages_SLASH_supports_DOT_js.ignoreBracketsInToken)(lineTokens.getStandardTokenType(tokenIndex));\n        if (searchInToken) {\n          if (prevSearchInToken) {\n            searchEndOffset = lineTokens.getEndOffset(tokenIndex);\n          } else {\n            searchStartOffset = lineTokens.getStartOffset(tokenIndex);\n            searchEndOffset = lineTokens.getEndOffset(tokenIndex);\n          }\n        } else {\n          if (modeBrackets && prevSearchInToken && searchStartOffset !== searchEndOffset) {\n            const r = searchInRange(modeBrackets, lineNumber, lineText, searchStartOffset, searchEndOffset);\n            if (r) {\n              return stripBracketSearchCanceled(r);\n            }\n          }\n        }\n        prevSearchInToken = searchInToken;\n      }\n      if (modeBrackets && prevSearchInToken && searchStartOffset !== searchEndOffset) {\n        const r = searchInRange(modeBrackets, lineNumber, lineText, searchStartOffset, searchEndOffset);\n        if (r) {\n          return stripBracketSearchCanceled(r);\n        }\n      }\n    }\n    return null;\n  }\n  _toFoundBracket(bracketConfig, r) {\n    if (!r) {\n      return null;\n    }\n    let text = this.textModel.getValueInRange(r);\n    text = text.toLowerCase();\n    const bracketInfo = bracketConfig.getBracketInfo(text);\n    if (!bracketInfo) {\n      return null;\n    }\n    return {range:r, bracketInfo};\n  }\n}\nfunction createDisposableRef(object, disposable) {\n  return {object, dispose:() => disposable === null || disposable === void 0 ? void 0 : disposable.dispose(),};\n}\nfunction createTimeBasedContinueBracketSearchPredicate(maxDuration) {\n  if (typeof maxDuration === \"undefined\") {\n    return () => true;\n  } else {\n    const startTime = Date.now();\n    return () => {\n      return Date.now() - startTime <= maxDuration;\n    };\n  }\n}\nclass BracketSearchCanceled {\n  constructor() {\n    this._searchCanceledBrand = undefined;\n  }\n}\nBracketSearchCanceled.INSTANCE = new BracketSearchCanceled();\nfunction stripBracketSearchCanceled(result) {\n  if (result instanceof BracketSearchCanceled) {\n    return null;\n  }\n  return result;\n}\n\n};"],
"names":["shadow$provide","require","module","exports","createDisposableRef","object","disposable","dispose","createTimeBasedContinueBracketSearchPredicate","maxDuration","startTime","Date","now","stripBracketSearchCanceled","result","BracketSearchCanceled","Object","defineProperties","__esModule","enumerable","value","BracketPairsTextModelPart","get","require$_DOT__DOT__SLASH__DOT__DOT__SLASH__DOT__DOT__SLASH__DOT__DOT__SLASH_base_SLASH_common_SLASH_arrays_DOT_js","require$_DOT__DOT__SLASH__DOT__DOT__SLASH__DOT__DOT__SLASH__DOT__DOT__SLASH_base_SLASH_common_SLASH_event_DOT_js","require$_DOT__DOT__SLASH__DOT__DOT__SLASH__DOT__DOT__SLASH__DOT__DOT__SLASH_base_SLASH_common_SLASH_lifecycle_DOT_js","require$_DOT__DOT__SLASH__DOT__DOT__SLASH_core_SLASH_range_DOT_js","require$_DOT__DOT__SLASH__DOT__DOT__SLASH_languages_SLASH_supports_DOT_js","require$_DOT__DOT__SLASH__DOT__DOT__SLASH_languages_SLASH_supports_SLASH_richEditBrackets_DOT_js","require$_DOT__SLASH_bracketPairsTree_SLASH_bracketPairsTree_DOT_js","Disposable","textModel","getValueLength","maxSupportedDocumentLength","constructor","languageConfigurationService","bracketPairsTree","_register","MutableDisposable","onDidChangeEmitter","Emitter","onDidChange","event","bracketsRequested","e","_a","languageId","didLanguageChange","clear","updateBracketPairsTree","handleDidChangeOptions","handleDidChangeLanguage","handleDidChangeContent","change","handleContentChanged","handleDidChangeBackgroundTokenizationState","handleDidChangeTokens","canBuildAST","store","DisposableStore","add","BracketPairsTree","getLanguageConfiguration","fire","getBracketPairsInRange","range","CallbackIterable","empty","getBracketPairsInRangeWithMinIndentation","getBracketsInRange","onlyColorizedBrackets","findMatchingBracketUp","_bracket","_position","position","validatePosition","getLanguageIdAtPosition","lineNumber","column","closingBracketInfo","bracketsNew","getClosingBracketInfo","bracketPair","Range","fromPositions","findLast","b","closes","openingBracketInfo","openingBracketRange","bracket","toLowerCase","bracketsSupport","brackets","data","textIsBracket","_findMatchingBracketUp","matchBracket","filter","item","closingBracketRange","undefined","containsPosition","findLastMaxBy","compareBy","compareRangesUsingStarts","continueSearchPredicate","_matchBracket","_establishBracketSearchOffsets","lineTokens","modeBrackets","tokenIndex","tokenCount","getCount","currentLanguageId","getLanguageId","searchStartOffset","Math","max","maxBracketLength","i","tokenEndOffset","getEndOffset","ignoreBracketsInToken","getStandardTokenType","searchEndOffset","min","getLineContent","length","tokenStartOffset","getStartOffset","tokenization","getLineTokens","lineText","findTokenIndexAtOffset","currentModeBrackets","bestResult","foundBracket","BracketsUtils","findNextBracketInRange","forwardRegex","startColumn","endColumn","foundBracketText","substring","r","_matchFoundBracket","textIsOpenBracket","prevTokenIndex","prevModeBrackets","findPrevBracketInRange","reversedRegex","isOpen","matched","_findMatchingBracketDown","getEndPosition","getStartPosition","reversedBracketRegex","count","totalCallCount","searchPrevMatchingBracketInRange","INSTANCE","hitText","isClose","prevSearchInToken","searchInToken","bracketRegex","searchNextMatchingBracketInRange","lineCount","getLineCount","findPrevBracket","getFirstBracketBefore","bracketConfig","tokenLanguageId","_toFoundBracket","findNextBracket","getFirstBracketAfter","findEnclosingBrackets","strictContainsRange","savedCounts","Map","counts","resetCounts","has","tmp","len","set","searchInRange","index","text","getValueInRange","bracketInfo","getBracketInfo","_searchCanceledBrand"]
}
