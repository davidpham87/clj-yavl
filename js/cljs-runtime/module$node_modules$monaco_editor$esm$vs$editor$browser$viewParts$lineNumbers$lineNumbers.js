shadow$provide.module$node_modules$monaco_editor$esm$vs$editor$browser$viewParts$lineNumbers$lineNumbers = function(require, module, exports) {
  Object.defineProperties(exports, {__esModule:{enumerable:!0, value:!0}, LineNumbersOverlay:{enumerable:!0, get:function() {
    return LineNumbersOverlay;
  }}});
  require("module$node_modules$monaco_editor$esm$vs$editor$browser$viewParts$lineNumbers$lineNumbers_css");
  var platform = require("module$node_modules$monaco_editor$esm$vs$base$common$platform");
  module = require("module$node_modules$monaco_editor$esm$vs$editor$browser$view$dynamicViewOverlay");
  var require$_DOT__DOT__SLASH__DOT__DOT__SLASH__DOT__DOT__SLASH_common_SLASH_core_SLASH_position_DOT_js = require("module$node_modules$monaco_editor$esm$vs$editor$common$core$position");
  exports = require("module$node_modules$monaco_editor$esm$vs$platform$theme$common$themeService");
  var require$_DOT__DOT__SLASH__DOT__DOT__SLASH__DOT__DOT__SLASH_common_SLASH_core_SLASH_editorColorRegistry_DOT_js = require("module$node_modules$monaco_editor$esm$vs$editor$common$core$editorColorRegistry");
  class LineNumbersOverlay extends module.DynamicViewOverlay {
    constructor(context) {
      super();
      this._context = context;
      this._readConfig();
      this._lastCursorModelPosition = new require$_DOT__DOT__SLASH__DOT__DOT__SLASH__DOT__DOT__SLASH_common_SLASH_core_SLASH_position_DOT_js.Position(1, 1);
      this._renderResult = null;
      this._activeLineNumber = 1;
      this._context.addEventHandler(this);
    }
    _readConfig() {
      var options = this._context.configuration.options;
      this._lineHeight = options.get(66);
      const lineNumbers = options.get(67);
      this._renderLineNumbers = lineNumbers.renderType;
      this._renderCustomLineNumbers = lineNumbers.renderFn;
      this._renderFinalNewline = options.get(94);
      options = options.get(143);
      this._lineNumbersLeft = options.lineNumbersLeft;
      this._lineNumbersWidth = options.lineNumbersWidth;
    }
    dispose() {
      this._context.removeEventHandler(this);
      this._renderResult = null;
      super.dispose();
    }
    onConfigurationChanged(e) {
      this._readConfig();
      return !0;
    }
    onCursorStateChanged(e) {
      e = e.selections[0].getPosition();
      this._lastCursorModelPosition = this._context.viewModel.coordinatesConverter.convertViewPositionToModelPosition(e);
      let shouldRender = !1;
      this._activeLineNumber !== e.lineNumber && (this._activeLineNumber = e.lineNumber, shouldRender = !0);
      if (this._renderLineNumbers === 2 || this._renderLineNumbers === 3) {
        shouldRender = !0;
      }
      return shouldRender;
    }
    onFlushed(e) {
      return !0;
    }
    onLinesChanged(e) {
      return !0;
    }
    onLinesDeleted(e) {
      return !0;
    }
    onLinesInserted(e) {
      return !0;
    }
    onScrollChanged(e) {
      return e.scrollTopChanged;
    }
    onZonesChanged(e) {
      return !0;
    }
    _getLineRenderLineNumber(viewLineNumber) {
      viewLineNumber = this._context.viewModel.coordinatesConverter.convertViewPositionToModelPosition(new require$_DOT__DOT__SLASH__DOT__DOT__SLASH__DOT__DOT__SLASH_common_SLASH_core_SLASH_position_DOT_js.Position(viewLineNumber, 1));
      if (viewLineNumber.column !== 1) {
        return "";
      }
      viewLineNumber = viewLineNumber.lineNumber;
      if (this._renderCustomLineNumbers) {
        return this._renderCustomLineNumbers(viewLineNumber);
      }
      if (this._renderLineNumbers === 2) {
        const diff = Math.abs(this._lastCursorModelPosition.lineNumber - viewLineNumber);
        return diff === 0 ? '\x3cspan class\x3d"relative-current-line-number"\x3e' + viewLineNumber + "\x3c/span\x3e" : String(diff);
      }
      return this._renderLineNumbers === 3 ? this._lastCursorModelPosition.lineNumber === viewLineNumber || viewLineNumber % 10 === 0 ? String(viewLineNumber) : "" : String(viewLineNumber);
    }
    prepareRender(ctx) {
      if (this._renderLineNumbers === 0) {
        this._renderResult = null;
      } else {
        var lineHeightClassName = platform.isLinux ? this._lineHeight % 2 === 0 ? " lh-even" : " lh-odd" : "", visibleStartLineNumber = ctx.visibleRange.startLineNumber;
        ctx = ctx.visibleRange.endLineNumber;
        var lineCount = this._context.viewModel.getLineCount(), output = [];
        for (let lineNumber = visibleStartLineNumber; lineNumber <= ctx; lineNumber++) {
          const lineIndex = lineNumber - visibleStartLineNumber, renderLineNumber = this._getLineRenderLineNumber(lineNumber);
          if (!renderLineNumber) {
            output[lineIndex] = "";
            continue;
          }
          let extraClassName = "";
          if (lineNumber === lineCount && this._context.viewModel.getLineLength(lineNumber) === 0) {
            if (this._renderFinalNewline === "off") {
              output[lineIndex] = "";
              continue;
            }
            this._renderFinalNewline === "dimmed" && (extraClassName = " dimmed-line-number");
          }
          lineNumber === this._activeLineNumber && (extraClassName = " active-line-number");
          output[lineIndex] = `<div class="${LineNumbersOverlay.CLASS_NAME}${lineHeightClassName}${extraClassName}" style="left:${this._lineNumbersLeft}px;width:${this._lineNumbersWidth}px;">${renderLineNumber}</div>`;
        }
        this._renderResult = output;
      }
    }
    render(startLineNumber, lineNumber) {
      if (!this._renderResult) {
        return "";
      }
      startLineNumber = lineNumber - startLineNumber;
      return startLineNumber < 0 || startLineNumber >= this._renderResult.length ? "" : this._renderResult[startLineNumber];
    }
  }
  LineNumbersOverlay.CLASS_NAME = "line-numbers";
  (0,exports.registerThemingParticipant)((theme, collector) => {
    const editorLineNumbersColor = theme.getColor(require$_DOT__DOT__SLASH__DOT__DOT__SLASH__DOT__DOT__SLASH_common_SLASH_core_SLASH_editorColorRegistry_DOT_js.editorLineNumbers);
    (theme = theme.getColor(require$_DOT__DOT__SLASH__DOT__DOT__SLASH__DOT__DOT__SLASH_common_SLASH_core_SLASH_editorColorRegistry_DOT_js.editorDimmedLineNumber)) ? collector.addRule(`.monaco-editor .line-numbers.dimmed-line-number { color: ${theme}; }`) : editorLineNumbersColor && collector.addRule(`.monaco-editor .line-numbers.dimmed-line-number { color: ${editorLineNumbersColor.transparent(0.4)}; }`);
  });
};

//# sourceMappingURL=module$node_modules$monaco_editor$esm$vs$editor$browser$viewParts$lineNumbers$lineNumbers.js.map
