{
"version":3,
"file":"module$node_modules$monaco_editor$esm$vs$editor$common$model$bracketPairsTextModelPart$bracketPairsTree$parser.js",
"lineCount":74,
"mappings":"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",
"sources":["node_modules/monaco-editor/esm/vs/editor/common/model/bracketPairsTextModelPart/bracketPairsTree/parser.js"],
"sourcesContent":["shadow$provide[\"module$node_modules$monaco_editor$esm$vs$editor$common$model$bracketPairsTextModelPart$bracketPairsTree$parser\"] = function(require,module,exports) {\nObject.defineProperties(exports, {__esModule:{enumerable:true, value:true}, parseDocument:{enumerable:true, get:function() {\n  return parseDocument;\n}}});\nvar require$_DOT__SLASH_ast_DOT_js = require(\"./ast.js\");\nvar require$_DOT__SLASH_beforeEditPositionMapper_DOT_js = require(\"./beforeEditPositionMapper.js\");\nvar require$_DOT__SLASH_smallImmutableSet_DOT_js = require(\"./smallImmutableSet.js\");\nvar require$_DOT__SLASH_length_DOT_js = require(\"./length.js\");\nvar require$_DOT__SLASH_concat23Trees_DOT_js = require(\"./concat23Trees.js\");\nvar require$_DOT__SLASH_nodeReader_DOT_js = require(\"./nodeReader.js\");\nfunction parseDocument(tokenizer, edits, oldNode, createImmutableLists) {\n  const parser = new Parser(tokenizer, edits, oldNode, createImmutableLists);\n  return parser.parseDocument();\n}\nclass Parser {\n  constructor(tokenizer, edits, oldNode, createImmutableLists) {\n    this.tokenizer = tokenizer;\n    this.createImmutableLists = createImmutableLists;\n    this._itemsConstructed = 0;\n    this._itemsFromCache = 0;\n    if (oldNode && createImmutableLists) {\n      throw new Error(\"Not supported\");\n    }\n    this.oldNodeReader = oldNode ? new require$_DOT__SLASH_nodeReader_DOT_js.NodeReader(oldNode) : undefined;\n    this.positionMapper = new require$_DOT__SLASH_beforeEditPositionMapper_DOT_js.BeforeEditPositionMapper(edits);\n  }\n  parseDocument() {\n    this._itemsConstructed = 0;\n    this._itemsFromCache = 0;\n    let result = this.parseList(require$_DOT__SLASH_smallImmutableSet_DOT_js.SmallImmutableSet.getEmpty(), 0);\n    if (!result) {\n      result = require$_DOT__SLASH_ast_DOT_js.ListAstNode.getEmpty();\n    }\n    return result;\n  }\n  parseList(openedBracketIds, level) {\n    const items = [];\n    while (true) {\n      let child = this.tryReadChildFromCache(openedBracketIds);\n      if (!child) {\n        const token = this.tokenizer.peek();\n        if (!token || token.kind === 2 && token.bracketIds.intersects(openedBracketIds)) {\n          break;\n        }\n        child = this.parseChild(openedBracketIds, level + 1);\n      }\n      if (child.kind === 4 && child.childrenLength === 0) {\n        continue;\n      }\n      items.push(child);\n    }\n    const result = this.oldNodeReader ? (0,require$_DOT__SLASH_concat23Trees_DOT_js.concat23Trees)(items) : (0,require$_DOT__SLASH_concat23Trees_DOT_js.concat23TreesOfSameHeight)(items, this.createImmutableLists);\n    return result;\n  }\n  tryReadChildFromCache(openedBracketIds) {\n    if (this.oldNodeReader) {\n      const maxCacheableLength = this.positionMapper.getDistanceToNextChange(this.tokenizer.offset);\n      if (maxCacheableLength === null || !(0,require$_DOT__SLASH_length_DOT_js.lengthIsZero)(maxCacheableLength)) {\n        const cachedNode = this.oldNodeReader.readLongestNodeAt(this.positionMapper.getOffsetBeforeChange(this.tokenizer.offset), curNode => {\n          if (maxCacheableLength !== null && !(0,require$_DOT__SLASH_length_DOT_js.lengthLessThan)(curNode.length, maxCacheableLength)) {\n            return false;\n          }\n          const canBeReused = curNode.canBeReused(openedBracketIds);\n          return canBeReused;\n        });\n        if (cachedNode) {\n          this._itemsFromCache++;\n          this.tokenizer.skip(cachedNode.length);\n          return cachedNode;\n        }\n      }\n    }\n    return undefined;\n  }\n  parseChild(openedBracketIds, level) {\n    this._itemsConstructed++;\n    const token = this.tokenizer.read();\n    switch(token.kind) {\n      case 2:\n        return new require$_DOT__SLASH_ast_DOT_js.InvalidBracketAstNode(token.bracketIds, token.length);\n      case 0:\n        return token.astNode;\n      case 1:\n        {\n          if (level > 300) {\n            return new require$_DOT__SLASH_ast_DOT_js.TextAstNode(token.length);\n          }\n          const set = openedBracketIds.merge(token.bracketIds);\n          const child = this.parseList(set, level + 1);\n          const nextToken = this.tokenizer.peek();\n          if (nextToken && nextToken.kind === 2 && (nextToken.bracketId === token.bracketId || nextToken.bracketIds.intersects(token.bracketIds))) {\n            this.tokenizer.read();\n            return require$_DOT__SLASH_ast_DOT_js.PairAstNode.create(token.astNode, child, nextToken.astNode);\n          } else {\n            return require$_DOT__SLASH_ast_DOT_js.PairAstNode.create(token.astNode, child, null);\n          }\n        }\n      default:\n        throw new Error(\"unexpected\");\n    }\n  }\n}\n\n};"],
"names":["shadow$provide","require","module","exports","parseDocument","tokenizer","edits","oldNode","createImmutableLists","parser","Parser","Object","defineProperties","__esModule","enumerable","value","get","require$_DOT__SLASH_ast_DOT_js","require$_DOT__SLASH_beforeEditPositionMapper_DOT_js","require$_DOT__SLASH_smallImmutableSet_DOT_js","require$_DOT__SLASH_length_DOT_js","require$_DOT__SLASH_concat23Trees_DOT_js","require$_DOT__SLASH_nodeReader_DOT_js","constructor","_itemsFromCache","_itemsConstructed","Error","oldNodeReader","NodeReader","undefined","positionMapper","BeforeEditPositionMapper","result","parseList","SmallImmutableSet","getEmpty","ListAstNode","openedBracketIds","level","items","child","tryReadChildFromCache","token","peek","kind","bracketIds","intersects","parseChild","childrenLength","push","concat23Trees","concat23TreesOfSameHeight","maxCacheableLength","getDistanceToNextChange","offset","lengthIsZero","cachedNode","readLongestNodeAt","getOffsetBeforeChange","curNode","lengthLessThan","length","canBeReused","skip","read","InvalidBracketAstNode","astNode","TextAstNode","set","merge","nextToken","bracketId","PairAstNode","create"]
}
