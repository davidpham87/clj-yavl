shadow$provide.module$node_modules$monaco_editor$esm$vs$platform$configuration$common$configurationRegistry = function(require, module, exports) {
  function overrideIdentifiersFromKey(key) {
    const identifiers = [];
    if (OVERRIDE_PROPERTY_REGEX.test(key)) {
      for (var matches = OVERRIDE_IDENTIFIER_REGEX.exec(key); matches === null || matches === void 0 ? 0 : matches.length;) {
        (matches = matches[1].trim()) && identifiers.push(matches), matches = OVERRIDE_IDENTIFIER_REGEX.exec(key);
      }
    }
    return (0,require$_DOT__DOT__SLASH__DOT__DOT__SLASH__DOT__DOT__SLASH_base_SLASH_common_SLASH_arrays_DOT_js.distinct)(identifiers);
  }
  function getDefaultValue(type) {
    switch(Array.isArray(type) ? type[0] : type) {
      case "boolean":
        return !1;
      case "integer":
      case "number":
        return 0;
      case "string":
        return "";
      case "array":
        return [];
      case "object":
        return {};
      default:
        return null;
    }
  }
  function validateProperty(property, schema) {
    var _a, _b, _c, _d;
    return property.trim() ? OVERRIDE_PROPERTY_REGEX.test(property) ? nls.localize("config.property.languageDefault", "Cannot register '{0}'. This matches property pattern '\\\\[.*\\\\]$' for describing language specific editor settings. Use 'configurationDefaults' contribution.", property) : configurationRegistry.getConfigurationProperties()[property] !== void 0 ? nls.localize("config.property.duplicate", "Cannot register '{0}'. This property is already registered.", property) : ((_a = schema.policy) === 
    null || _a === void 0 ? 0 : _a.name) && configurationRegistry.getPolicyConfigurations().get((_b = schema.policy) === null || _b === void 0 ? void 0 : _b.name) !== void 0 ? nls.localize("config.policy.duplicate", "Cannot register '{0}'. The associated policy {1} is already registered with {2}.", property, (_c = schema.policy) === null || _c === void 0 ? void 0 : _c.name, configurationRegistry.getPolicyConfigurations().get((_d = schema.policy) === null || _d === void 0 ? void 0 : _d.name)) : null : 
    nls.localize("config.property.empty", "Cannot register an empty property");
  }
  Object.defineProperties(exports, {__esModule:{enumerable:!0, value:!0}, Extensions:{enumerable:!0, get:function() {
    return Extensions;
  }}, OVERRIDE_PROPERTY_PATTERN:{enumerable:!0, get:function() {
    return "^(\\[([^\\]]+)\\])+$";
  }}, OVERRIDE_PROPERTY_REGEX:{enumerable:!0, get:function() {
    return OVERRIDE_PROPERTY_REGEX;
  }}, allSettings:{enumerable:!0, get:function() {
    return allSettings;
  }}, applicationSettings:{enumerable:!0, get:function() {
    return applicationSettings;
  }}, getDefaultValue:{enumerable:!0, get:function() {
    return getDefaultValue;
  }}, machineOverridableSettings:{enumerable:!0, get:function() {
    return machineOverridableSettings;
  }}, machineSettings:{enumerable:!0, get:function() {
    return machineSettings;
  }}, overrideIdentifiersFromKey:{enumerable:!0, get:function() {
    return overrideIdentifiersFromKey;
  }}, resourceLanguageSettingsSchemaId:{enumerable:!0, get:function() {
    return "vscode://schemas/settings/resourceLanguage";
  }}, resourceSettings:{enumerable:!0, get:function() {
    return resourceSettings;
  }}, validateProperty:{enumerable:!0, get:function() {
    return validateProperty;
  }}, windowSettings:{enumerable:!0, get:function() {
    return windowSettings;
  }}});
  var require$_DOT__DOT__SLASH__DOT__DOT__SLASH__DOT__DOT__SLASH_base_SLASH_common_SLASH_arrays_DOT_js = require("module$node_modules$monaco_editor$esm$vs$base$common$arrays"), require$_DOT__DOT__SLASH__DOT__DOT__SLASH__DOT__DOT__SLASH_base_SLASH_common_SLASH_event_DOT_js = require("module$node_modules$monaco_editor$esm$vs$base$common$event"), types = require("module$node_modules$monaco_editor$esm$vs$base$common$types"), nls = require("module$node_modules$monaco_editor$esm$vs$nls"), require$_DOT__SLASH_configuration_DOT_js = 
  require("module$node_modules$monaco_editor$esm$vs$platform$configuration$common$configuration");
  module = require("module$node_modules$monaco_editor$esm$vs$platform$jsonschemas$common$jsonContributionRegistry");
  require = require("module$node_modules$monaco_editor$esm$vs$platform$registry$common$platform");
  const Extensions = {Configuration:"base.contributions.configuration"}, allSettings = {properties:{}, patternProperties:{}}, applicationSettings = {properties:{}, patternProperties:{}}, machineSettings = {properties:{}, patternProperties:{}}, machineOverridableSettings = {properties:{}, patternProperties:{}}, windowSettings = {properties:{}, patternProperties:{}}, resourceSettings = {properties:{}, patternProperties:{}}, contributionRegistry = require.Registry.as(module.Extensions.JSONContribution);
  class ConfigurationRegistry {
    constructor() {
      this.overrideIdentifiers = new Set();
      this._onDidSchemaChange = new require$_DOT__DOT__SLASH__DOT__DOT__SLASH__DOT__DOT__SLASH_base_SLASH_common_SLASH_event_DOT_js.Emitter();
      this._onDidUpdateConfiguration = new require$_DOT__DOT__SLASH__DOT__DOT__SLASH__DOT__DOT__SLASH_base_SLASH_common_SLASH_event_DOT_js.Emitter();
      this.configurationDefaultsOverrides = new Map();
      this.defaultLanguageConfigurationOverridesNode = {id:"defaultOverrides", title:nls.localize("defaultLanguageConfigurationOverrides.title", "Default Language Configuration Overrides"), properties:{}};
      this.configurationContributors = [this.defaultLanguageConfigurationOverridesNode];
      this.resourceLanguageSettingsSchema = {properties:{}, patternProperties:{}, additionalProperties:!0, allowTrailingCommas:!0, allowComments:!0};
      this.configurationProperties = {};
      this.policyConfigurations = new Map();
      this.excludedConfigurationProperties = {};
      contributionRegistry.registerSchema("vscode://schemas/settings/resourceLanguage", this.resourceLanguageSettingsSchema);
      this.registerOverridePropertyPatternKey();
    }
    registerConfiguration(configuration, validate = !0) {
      this.registerConfigurations([configuration], validate);
    }
    registerConfigurations(configurations, validate = !0) {
      const properties = new Set();
      this.doRegisterConfigurations(configurations, validate, properties);
      contributionRegistry.registerSchema("vscode://schemas/settings/resourceLanguage", this.resourceLanguageSettingsSchema);
      this._onDidSchemaChange.fire();
      this._onDidUpdateConfiguration.fire({properties});
    }
    registerDefaultConfigurations(configurationDefaults) {
      const properties = new Set();
      this.doRegisterDefaultConfigurations(configurationDefaults, properties);
      this._onDidSchemaChange.fire();
      this._onDidUpdateConfiguration.fire({properties, defaultsOverrides:!0});
    }
    doRegisterDefaultConfigurations(configurationDefaults, bucket) {
      var _a;
      const overrideIdentifiers = [];
      for (const {overrides, source} of configurationDefaults) {
        for (const key in overrides) {
          if (bucket.add(key), OVERRIDE_PROPERTY_REGEX.test(key)) {
            var configurationDefaultOverride = this.configurationDefaultsOverrides.get(key);
            configurationDefaults = (_a = configurationDefaultOverride === null || configurationDefaultOverride === void 0 ? void 0 : configurationDefaultOverride.valuesSources) !== null && _a !== void 0 ? _a : new Map();
            if (source) {
              for (const configuration of Object.keys(overrides[key])) {
                configurationDefaults.set(configuration, source);
              }
            }
            configurationDefaultOverride = {...((configurationDefaultOverride === null || configurationDefaultOverride === void 0 ? void 0 : configurationDefaultOverride.value) || {}), ...overrides[key]};
            this.configurationDefaultsOverrides.set(key, {source, value:configurationDefaultOverride, valuesSources:configurationDefaults});
            configurationDefaults = (0,require$_DOT__SLASH_configuration_DOT_js.getLanguageTagSettingPlainKey)(key);
            configurationDefaults = {type:"object", default:configurationDefaultOverride, description:nls.localize("defaultLanguageConfiguration.description", "Configure settings to be overridden for the {0} language.", configurationDefaults), $ref:"vscode://schemas/settings/resourceLanguage", defaultDefaultValue:configurationDefaultOverride, source:types.isString(source) ? void 0 : source, defaultValueSource:source};
            overrideIdentifiers.push(...overrideIdentifiersFromKey(key));
            this.configurationProperties[key] = configurationDefaults;
            this.defaultLanguageConfigurationOverridesNode.properties[key] = configurationDefaults;
          } else {
            if (this.configurationDefaultsOverrides.set(key, {value:overrides[key], source}), configurationDefaults = this.configurationProperties[key]) {
              this.updatePropertyDefaultValue(key, configurationDefaults), this.updateSchema(key, configurationDefaults);
            }
          }
        }
      }
      this.doRegisterOverrideIdentifiers(overrideIdentifiers);
    }
    registerOverrideIdentifiers(overrideIdentifiers) {
      this.doRegisterOverrideIdentifiers(overrideIdentifiers);
      this._onDidSchemaChange.fire();
    }
    doRegisterOverrideIdentifiers(overrideIdentifiers) {
      for (const overrideIdentifier of overrideIdentifiers) {
        this.overrideIdentifiers.add(overrideIdentifier);
      }
      this.updateOverridePropertyPatternKey();
    }
    doRegisterConfigurations(configurations, validate, bucket) {
      configurations.forEach(configuration => {
        this.validateAndRegisterProperties(configuration, validate, configuration.extensionInfo, configuration.restrictedProperties, void 0, bucket);
        this.configurationContributors.push(configuration);
        this.registerJSONConfiguration(configuration);
      });
    }
    validateAndRegisterProperties(configuration, validate = !0, extensionInfo, restrictedProperties, scope = 3, bucket) {
      var _a;
      scope = types.isUndefinedOrNull(configuration.scope) ? scope : configuration.scope;
      const properties = configuration.properties;
      if (properties) {
        for (const key in properties) {
          const property = properties[key];
          validate && validateProperty(key, property) ? delete properties[key] : (property.source = extensionInfo, property.defaultDefaultValue = properties[key].default, this.updatePropertyDefaultValue(key, property), OVERRIDE_PROPERTY_REGEX.test(key) ? property.scope = void 0 : (property.scope = types.isUndefinedOrNull(property.scope) ? scope : property.scope, property.restricted = types.isUndefinedOrNull(property.restricted) ? !(restrictedProperties === null || restrictedProperties === void 0 || 
          !restrictedProperties.includes(key)) : property.restricted), properties[key].hasOwnProperty("included") && !properties[key].included ? (this.excludedConfigurationProperties[key] = properties[key], delete properties[key]) : (this.configurationProperties[key] = properties[key], ((_a = properties[key].policy) === null || _a === void 0 ? 0 : _a.name) && this.policyConfigurations.set(properties[key].policy.name, key), !properties[key].deprecationMessage && properties[key].markdownDeprecationMessage && 
          (properties[key].deprecationMessage = properties[key].markdownDeprecationMessage), bucket.add(key)));
        }
      }
      if (configuration = configuration.allOf) {
        for (const node of configuration) {
          this.validateAndRegisterProperties(node, validate, extensionInfo, restrictedProperties, scope, bucket);
        }
      }
    }
    getConfigurationProperties() {
      return this.configurationProperties;
    }
    getPolicyConfigurations() {
      return this.policyConfigurations;
    }
    registerJSONConfiguration(configuration) {
      const register = configuration => {
        const properties = configuration.properties;
        if (properties) {
          for (const key in properties) {
            this.updateSchema(key, properties[key]);
          }
        }
        configuration = configuration.allOf;
        configuration === null || configuration === void 0 || configuration.forEach(register);
      };
      register(configuration);
    }
    updateSchema(key, property) {
      allSettings.properties[key] = property;
      switch(property.scope) {
        case 1:
          applicationSettings.properties[key] = property;
          break;
        case 2:
          machineSettings.properties[key] = property;
          break;
        case 6:
          machineOverridableSettings.properties[key] = property;
          break;
        case 3:
          windowSettings.properties[key] = property;
          break;
        case 4:
          resourceSettings.properties[key] = property;
          break;
        case 5:
          resourceSettings.properties[key] = property, this.resourceLanguageSettingsSchema.properties[key] = property;
      }
    }
    updateOverridePropertyPatternKey() {
      for (const overrideIdentifier of this.overrideIdentifiers.values()) {
        const overrideIdentifierProperty = `[${overrideIdentifier}]`, resourceLanguagePropertiesSchema = {type:"object", description:nls.localize("overrideSettings.defaultDescription", "Configure editor settings to be overridden for a language."), errorMessage:nls.localize("overrideSettings.errorMessage", "This setting does not support per-language configuration."), $ref:"vscode://schemas/settings/resourceLanguage"};
        this.updatePropertyDefaultValue(overrideIdentifierProperty, resourceLanguagePropertiesSchema);
        allSettings.properties[overrideIdentifierProperty] = resourceLanguagePropertiesSchema;
        applicationSettings.properties[overrideIdentifierProperty] = resourceLanguagePropertiesSchema;
        machineSettings.properties[overrideIdentifierProperty] = resourceLanguagePropertiesSchema;
        machineOverridableSettings.properties[overrideIdentifierProperty] = resourceLanguagePropertiesSchema;
        windowSettings.properties[overrideIdentifierProperty] = resourceLanguagePropertiesSchema;
        resourceSettings.properties[overrideIdentifierProperty] = resourceLanguagePropertiesSchema;
      }
    }
    registerOverridePropertyPatternKey() {
      const resourceLanguagePropertiesSchema = {type:"object", description:nls.localize("overrideSettings.defaultDescription", "Configure editor settings to be overridden for a language."), errorMessage:nls.localize("overrideSettings.errorMessage", "This setting does not support per-language configuration."), $ref:"vscode://schemas/settings/resourceLanguage"};
      allSettings.patternProperties["^(\\[([^\\]]+)\\])+$"] = resourceLanguagePropertiesSchema;
      applicationSettings.patternProperties["^(\\[([^\\]]+)\\])+$"] = resourceLanguagePropertiesSchema;
      machineSettings.patternProperties["^(\\[([^\\]]+)\\])+$"] = resourceLanguagePropertiesSchema;
      machineOverridableSettings.patternProperties["^(\\[([^\\]]+)\\])+$"] = resourceLanguagePropertiesSchema;
      windowSettings.patternProperties["^(\\[([^\\]]+)\\])+$"] = resourceLanguagePropertiesSchema;
      resourceSettings.patternProperties["^(\\[([^\\]]+)\\])+$"] = resourceLanguagePropertiesSchema;
      this._onDidSchemaChange.fire();
    }
    updatePropertyDefaultValue(key, property) {
      var configurationdefaultOverride = this.configurationDefaultsOverrides.get(key);
      key = configurationdefaultOverride === null || configurationdefaultOverride === void 0 ? void 0 : configurationdefaultOverride.value;
      configurationdefaultOverride = configurationdefaultOverride === null || configurationdefaultOverride === void 0 ? void 0 : configurationdefaultOverride.source;
      types.isUndefined(key) && (key = property.defaultDefaultValue, configurationdefaultOverride = void 0);
      types.isUndefined(key) && (key = getDefaultValue(property.type));
      property.default = key;
      property.defaultValueSource = configurationdefaultOverride;
    }
  }
  const OVERRIDE_IDENTIFIER_REGEX = RegExp("\\[([^\\]]+)\\]", "g"), OVERRIDE_PROPERTY_REGEX = RegExp("^(\\[([^\\]]+)\\])+$"), configurationRegistry = new ConfigurationRegistry();
  require.Registry.add(Extensions.Configuration, configurationRegistry);
};

//# sourceMappingURL=module$node_modules$monaco_editor$esm$vs$platform$configuration$common$configurationRegistry.js.map
