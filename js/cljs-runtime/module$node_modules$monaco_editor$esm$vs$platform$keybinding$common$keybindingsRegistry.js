shadow$provide.module$node_modules$monaco_editor$esm$vs$platform$keybinding$common$keybindingsRegistry = function(require, module, exports) {
  function sorter(a, b) {
    if (a.weight1 !== b.weight1) {
      return a.weight1 - b.weight1;
    }
    if (a.command && b.command) {
      if (a.command < b.command) {
        return -1;
      }
      if (a.command > b.command) {
        return 1;
      }
    }
    return a.weight2 - b.weight2;
  }
  Object.defineProperties(exports, {__esModule:{enumerable:!0, value:!0}, Extensions:{enumerable:!0, get:function() {
    return Extensions;
  }}, KeybindingsRegistry:{enumerable:!0, get:function() {
    return KeybindingsRegistry;
  }}});
  var require$_DOT__DOT__SLASH__DOT__DOT__SLASH__DOT__DOT__SLASH_base_SLASH_common_SLASH_keybindings_DOT_js = require("module$node_modules$monaco_editor$esm$vs$base$common$keybindings"), require$_DOT__DOT__SLASH__DOT__DOT__SLASH__DOT__DOT__SLASH_base_SLASH_common_SLASH_platform_DOT_js = require("module$node_modules$monaco_editor$esm$vs$base$common$platform"), require$_DOT__DOT__SLASH__DOT__DOT__SLASH_commands_SLASH_common_SLASH_commands_DOT_js = require("module$node_modules$monaco_editor$esm$vs$platform$commands$common$commands");
  module = require("module$node_modules$monaco_editor$esm$vs$platform$registry$common$platform");
  var require$_DOT__DOT__SLASH__DOT__DOT__SLASH__DOT__DOT__SLASH_base_SLASH_common_SLASH_lifecycle_DOT_js = require("module$node_modules$monaco_editor$esm$vs$base$common$lifecycle"), require$_DOT__DOT__SLASH__DOT__DOT__SLASH__DOT__DOT__SLASH_base_SLASH_common_SLASH_linkedList_DOT_js = require("module$node_modules$monaco_editor$esm$vs$base$common$linkedList");
  class KeybindingsRegistryImpl {
    constructor() {
      this._coreKeybindings = new require$_DOT__DOT__SLASH__DOT__DOT__SLASH__DOT__DOT__SLASH_base_SLASH_common_SLASH_linkedList_DOT_js.LinkedList();
      this._extensionKeybindings = [];
      this._cachedMergedKeybindings = null;
    }
    static bindToCurrentPlatform(kb) {
      if (require$_DOT__DOT__SLASH__DOT__DOT__SLASH__DOT__DOT__SLASH_base_SLASH_common_SLASH_platform_DOT_js.OS === 1) {
        if (kb && kb.win) {
          return kb.win;
        }
      } else if (require$_DOT__DOT__SLASH__DOT__DOT__SLASH__DOT__DOT__SLASH_base_SLASH_common_SLASH_platform_DOT_js.OS === 2) {
        if (kb && kb.mac) {
          return kb.mac;
        }
      } else {
        if (kb && kb.linux) {
          return kb.linux;
        }
      }
      return kb;
    }
    registerKeybindingRule(rule) {
      const actualKb = KeybindingsRegistryImpl.bindToCurrentPlatform(rule), result = new require$_DOT__DOT__SLASH__DOT__DOT__SLASH__DOT__DOT__SLASH_base_SLASH_common_SLASH_lifecycle_DOT_js.DisposableStore();
      if (actualKb && actualKb.primary) {
        var kk = (0,require$_DOT__DOT__SLASH__DOT__DOT__SLASH__DOT__DOT__SLASH_base_SLASH_common_SLASH_keybindings_DOT_js.decodeKeybinding)(actualKb.primary, require$_DOT__DOT__SLASH__DOT__DOT__SLASH__DOT__DOT__SLASH_base_SLASH_common_SLASH_platform_DOT_js.OS);
        kk && result.add(this._registerDefaultKeybinding(kk, rule.id, rule.args, rule.weight, 0, rule.when));
      }
      if (actualKb && Array.isArray(actualKb.secondary)) {
        for (let i = 0, len = actualKb.secondary.length; i < len; i++) {
          (kk = (0,require$_DOT__DOT__SLASH__DOT__DOT__SLASH__DOT__DOT__SLASH_base_SLASH_common_SLASH_keybindings_DOT_js.decodeKeybinding)(actualKb.secondary[i], require$_DOT__DOT__SLASH__DOT__DOT__SLASH__DOT__DOT__SLASH_base_SLASH_common_SLASH_platform_DOT_js.OS)) && result.add(this._registerDefaultKeybinding(kk, rule.id, rule.args, rule.weight, -i - 1, rule.when));
        }
      }
      return result;
    }
    registerCommandAndKeybindingRule(desc) {
      return (0,require$_DOT__DOT__SLASH__DOT__DOT__SLASH__DOT__DOT__SLASH_base_SLASH_common_SLASH_lifecycle_DOT_js.combinedDisposable)(this.registerKeybindingRule(desc), require$_DOT__DOT__SLASH__DOT__DOT__SLASH_commands_SLASH_common_SLASH_commands_DOT_js.CommandsRegistry.registerCommand(desc));
    }
    _registerDefaultKeybinding(keybinding, commandId, commandArgs, weight1, weight2, when) {
      const remove = this._coreKeybindings.push({keybinding, command:commandId, commandArgs, when, weight1, weight2, extensionId:null, isBuiltinExtension:!1});
      this._cachedMergedKeybindings = null;
      return (0,require$_DOT__DOT__SLASH__DOT__DOT__SLASH__DOT__DOT__SLASH_base_SLASH_common_SLASH_lifecycle_DOT_js.toDisposable)(() => {
        remove();
        this._cachedMergedKeybindings = null;
      });
    }
    getDefaultKeybindings() {
      this._cachedMergedKeybindings || (this._cachedMergedKeybindings = Array.from(this._coreKeybindings).concat(this._extensionKeybindings), this._cachedMergedKeybindings.sort(sorter));
      return this._cachedMergedKeybindings.slice(0);
    }
  }
  const KeybindingsRegistry = new KeybindingsRegistryImpl(), Extensions = {EditorModes:"platform.keybindingsRegistry"};
  module.Registry.add(Extensions.EditorModes, KeybindingsRegistry);
};

//# sourceMappingURL=module$node_modules$monaco_editor$esm$vs$platform$keybinding$common$keybindingsRegistry.js.map
