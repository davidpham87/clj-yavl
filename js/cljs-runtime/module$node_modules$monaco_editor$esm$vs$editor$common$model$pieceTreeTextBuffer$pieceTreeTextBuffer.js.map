{
"version":3,
"file":"module$node_modules$monaco_editor$esm$vs$editor$common$model$pieceTreeTextBuffer$pieceTreeTextBuffer.js",
"lineCount":263,
"mappings":"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",
"sources":["node_modules/monaco-editor/esm/vs/editor/common/model/pieceTreeTextBuffer/pieceTreeTextBuffer.js"],
"sourcesContent":["shadow$provide[\"module$node_modules$monaco_editor$esm$vs$editor$common$model$pieceTreeTextBuffer$pieceTreeTextBuffer\"] = function(require,module,exports) {\nObject.defineProperties(exports, {__esModule:{enumerable:true, value:true}, PieceTreeTextBuffer:{enumerable:true, get:function() {\n  return PieceTreeTextBuffer;\n}}});\nvar require$_DOT__DOT__SLASH__DOT__DOT__SLASH__DOT__DOT__SLASH__DOT__DOT__SLASH_base_SLASH_common_SLASH_event_DOT_js = require(\"../../../../base/common/event.js\");\nvar strings = require(\"../../../../base/common/strings.js\");\nvar require$_DOT__DOT__SLASH__DOT__DOT__SLASH_core_SLASH_range_DOT_js = require(\"../../core/range.js\");\nvar require$_DOT__DOT__SLASH__DOT__DOT__SLASH_model_DOT_js = require(\"../../model.js\");\nvar require$_DOT__SLASH_pieceTreeBase_DOT_js = require(\"./pieceTreeBase.js\");\nvar require$_DOT__DOT__SLASH__DOT__DOT__SLASH_core_SLASH_eolCounter_DOT_js = require(\"../../core/eolCounter.js\");\nvar require$_DOT__DOT__SLASH__DOT__DOT__SLASH_core_SLASH_textChange_DOT_js = require(\"../../core/textChange.js\");\nvar require$_DOT__DOT__SLASH__DOT__DOT__SLASH__DOT__DOT__SLASH__DOT__DOT__SLASH_base_SLASH_common_SLASH_lifecycle_DOT_js = require(\"../../../../base/common/lifecycle.js\");\nclass PieceTreeTextBuffer extends require$_DOT__DOT__SLASH__DOT__DOT__SLASH__DOT__DOT__SLASH__DOT__DOT__SLASH_base_SLASH_common_SLASH_lifecycle_DOT_js.Disposable {\n  constructor(chunks, BOM, eol, containsRTL, containsUnusualLineTerminators, isBasicASCII, eolNormalized) {\n    super();\n    this._onDidChangeContent = this._register(new require$_DOT__DOT__SLASH__DOT__DOT__SLASH__DOT__DOT__SLASH__DOT__DOT__SLASH_base_SLASH_common_SLASH_event_DOT_js.Emitter());\n    this._BOM = BOM;\n    this._mightContainNonBasicASCII = !isBasicASCII;\n    this._mightContainRTL = containsRTL;\n    this._mightContainUnusualLineTerminators = containsUnusualLineTerminators;\n    this._pieceTree = new require$_DOT__SLASH_pieceTreeBase_DOT_js.PieceTreeBase(chunks, eol, eolNormalized);\n  }\n  mightContainRTL() {\n    return this._mightContainRTL;\n  }\n  mightContainUnusualLineTerminators() {\n    return this._mightContainUnusualLineTerminators;\n  }\n  resetMightContainUnusualLineTerminators() {\n    this._mightContainUnusualLineTerminators = false;\n  }\n  mightContainNonBasicASCII() {\n    return this._mightContainNonBasicASCII;\n  }\n  getBOM() {\n    return this._BOM;\n  }\n  getEOL() {\n    return this._pieceTree.getEOL();\n  }\n  createSnapshot(preserveBOM) {\n    return this._pieceTree.createSnapshot(preserveBOM ? this._BOM : \"\");\n  }\n  getOffsetAt(lineNumber, column) {\n    return this._pieceTree.getOffsetAt(lineNumber, column);\n  }\n  getPositionAt(offset) {\n    return this._pieceTree.getPositionAt(offset);\n  }\n  getRangeAt(start, length) {\n    const end = start + length;\n    const startPosition = this.getPositionAt(start);\n    const endPosition = this.getPositionAt(end);\n    return new require$_DOT__DOT__SLASH__DOT__DOT__SLASH_core_SLASH_range_DOT_js.Range(startPosition.lineNumber, startPosition.column, endPosition.lineNumber, endPosition.column);\n  }\n  getValueInRange(range, eol = 0) {\n    if (range.isEmpty()) {\n      return \"\";\n    }\n    const lineEnding = this._getEndOfLine(eol);\n    return this._pieceTree.getValueInRange(range, lineEnding);\n  }\n  getValueLengthInRange(range, eol = 0) {\n    if (range.isEmpty()) {\n      return 0;\n    }\n    if (range.startLineNumber === range.endLineNumber) {\n      return range.endColumn - range.startColumn;\n    }\n    const startOffset = this.getOffsetAt(range.startLineNumber, range.startColumn);\n    const endOffset = this.getOffsetAt(range.endLineNumber, range.endColumn);\n    let eolOffsetCompensation = 0;\n    const desiredEOL = this._getEndOfLine(eol);\n    const actualEOL = this.getEOL();\n    if (desiredEOL.length !== actualEOL.length) {\n      const delta = desiredEOL.length - actualEOL.length;\n      const eolCount = range.endLineNumber - range.startLineNumber;\n      eolOffsetCompensation = delta * eolCount;\n    }\n    return endOffset - startOffset + eolOffsetCompensation;\n  }\n  getCharacterCountInRange(range, eol = 0) {\n    if (this._mightContainNonBasicASCII) {\n      let result = 0;\n      const fromLineNumber = range.startLineNumber;\n      const toLineNumber = range.endLineNumber;\n      for (let lineNumber = fromLineNumber; lineNumber <= toLineNumber; lineNumber++) {\n        const lineContent = this.getLineContent(lineNumber);\n        const fromOffset = lineNumber === fromLineNumber ? range.startColumn - 1 : 0;\n        const toOffset = lineNumber === toLineNumber ? range.endColumn - 1 : lineContent.length;\n        for (let offset = fromOffset; offset < toOffset; offset++) {\n          if (strings.isHighSurrogate(lineContent.charCodeAt(offset))) {\n            result = result + 1;\n            offset = offset + 1;\n          } else {\n            result = result + 1;\n          }\n        }\n      }\n      result += this._getEndOfLine(eol).length * (toLineNumber - fromLineNumber);\n      return result;\n    }\n    return this.getValueLengthInRange(range, eol);\n  }\n  getLength() {\n    return this._pieceTree.getLength();\n  }\n  getLineCount() {\n    return this._pieceTree.getLineCount();\n  }\n  getLinesContent() {\n    return this._pieceTree.getLinesContent();\n  }\n  getLineContent(lineNumber) {\n    return this._pieceTree.getLineContent(lineNumber);\n  }\n  getLineCharCode(lineNumber, index) {\n    return this._pieceTree.getLineCharCode(lineNumber, index);\n  }\n  getLineLength(lineNumber) {\n    return this._pieceTree.getLineLength(lineNumber);\n  }\n  getLineFirstNonWhitespaceColumn(lineNumber) {\n    const result = strings.firstNonWhitespaceIndex(this.getLineContent(lineNumber));\n    if (result === -1) {\n      return 0;\n    }\n    return result + 1;\n  }\n  getLineLastNonWhitespaceColumn(lineNumber) {\n    const result = strings.lastNonWhitespaceIndex(this.getLineContent(lineNumber));\n    if (result === -1) {\n      return 0;\n    }\n    return result + 2;\n  }\n  _getEndOfLine(eol) {\n    switch(eol) {\n      case 1:\n        return \"\\n\";\n      case 2:\n        return \"\\r\\n\";\n      case 0:\n        return this.getEOL();\n      default:\n        throw new Error(\"Unknown EOL preference\");\n    }\n  }\n  setEOL(newEOL) {\n    this._pieceTree.setEOL(newEOL);\n  }\n  applyEdits(rawOperations, recordTrimAutoWhitespace, computeUndoEdits) {\n    let mightContainRTL = this._mightContainRTL;\n    let mightContainUnusualLineTerminators = this._mightContainUnusualLineTerminators;\n    let mightContainNonBasicASCII = this._mightContainNonBasicASCII;\n    let canReduceOperations = true;\n    let operations = [];\n    for (let i = 0; i < rawOperations.length; i++) {\n      const op = rawOperations[i];\n      if (canReduceOperations && op._isTracked) {\n        canReduceOperations = false;\n      }\n      const validatedRange = op.range;\n      if (op.text) {\n        let textMightContainNonBasicASCII = true;\n        if (!mightContainNonBasicASCII) {\n          textMightContainNonBasicASCII = !strings.isBasicASCII(op.text);\n          mightContainNonBasicASCII = textMightContainNonBasicASCII;\n        }\n        if (!mightContainRTL && textMightContainNonBasicASCII) {\n          mightContainRTL = strings.containsRTL(op.text);\n        }\n        if (!mightContainUnusualLineTerminators && textMightContainNonBasicASCII) {\n          mightContainUnusualLineTerminators = strings.containsUnusualLineTerminators(op.text);\n        }\n      }\n      let validText = \"\";\n      let eolCount = 0;\n      let firstLineLength = 0;\n      let lastLineLength = 0;\n      if (op.text) {\n        let strEOL;\n        [eolCount, firstLineLength, lastLineLength, strEOL] = (0,require$_DOT__DOT__SLASH__DOT__DOT__SLASH_core_SLASH_eolCounter_DOT_js.countEOL)(op.text);\n        const bufferEOL = this.getEOL();\n        const expectedStrEOL = bufferEOL === \"\\r\\n\" ? 2 : 1;\n        if (strEOL === 0 || strEOL === expectedStrEOL) {\n          validText = op.text;\n        } else {\n          validText = op.text.replace(/\\r\\n|\\r|\\n/g, bufferEOL);\n        }\n      }\n      operations[i] = {sortIndex:i, identifier:op.identifier || null, range:validatedRange, rangeOffset:this.getOffsetAt(validatedRange.startLineNumber, validatedRange.startColumn), rangeLength:this.getValueLengthInRange(validatedRange), text:validText, eolCount:eolCount, firstLineLength:firstLineLength, lastLineLength:lastLineLength, forceMoveMarkers:Boolean(op.forceMoveMarkers), isAutoWhitespaceEdit:op.isAutoWhitespaceEdit || false};\n    }\n    operations.sort(PieceTreeTextBuffer._sortOpsAscending);\n    let hasTouchingRanges = false;\n    for (let i = 0, count = operations.length - 1; i < count; i++) {\n      const rangeEnd = operations[i].range.getEndPosition();\n      const nextRangeStart = operations[i + 1].range.getStartPosition();\n      if (nextRangeStart.isBeforeOrEqual(rangeEnd)) {\n        if (nextRangeStart.isBefore(rangeEnd)) {\n          throw new Error(\"Overlapping ranges are not allowed!\");\n        }\n        hasTouchingRanges = true;\n      }\n    }\n    if (canReduceOperations) {\n      operations = this._reduceOperations(operations);\n    }\n    const reverseRanges = computeUndoEdits || recordTrimAutoWhitespace ? PieceTreeTextBuffer._getInverseEditRanges(operations) : [];\n    const newTrimAutoWhitespaceCandidates = [];\n    if (recordTrimAutoWhitespace) {\n      for (let i = 0; i < operations.length; i++) {\n        const op = operations[i];\n        const reverseRange = reverseRanges[i];\n        if (op.isAutoWhitespaceEdit && op.range.isEmpty()) {\n          for (let lineNumber = reverseRange.startLineNumber; lineNumber <= reverseRange.endLineNumber; lineNumber++) {\n            let currentLineContent = \"\";\n            if (lineNumber === reverseRange.startLineNumber) {\n              currentLineContent = this.getLineContent(op.range.startLineNumber);\n              if (strings.firstNonWhitespaceIndex(currentLineContent) !== -1) {\n                continue;\n              }\n            }\n            newTrimAutoWhitespaceCandidates.push({lineNumber:lineNumber, oldContent:currentLineContent});\n          }\n        }\n      }\n    }\n    let reverseOperations = null;\n    if (computeUndoEdits) {\n      let reverseRangeDeltaOffset = 0;\n      reverseOperations = [];\n      for (let i = 0; i < operations.length; i++) {\n        const op = operations[i];\n        const reverseRange = reverseRanges[i];\n        const bufferText = this.getValueInRange(op.range);\n        const reverseRangeOffset = op.rangeOffset + reverseRangeDeltaOffset;\n        reverseRangeDeltaOffset += op.text.length - bufferText.length;\n        reverseOperations[i] = {sortIndex:op.sortIndex, identifier:op.identifier, range:reverseRange, text:bufferText, textChange:new require$_DOT__DOT__SLASH__DOT__DOT__SLASH_core_SLASH_textChange_DOT_js.TextChange(op.rangeOffset, bufferText, reverseRangeOffset, op.text)};\n      }\n      if (!hasTouchingRanges) {\n        reverseOperations.sort((a, b) => a.sortIndex - b.sortIndex);\n      }\n    }\n    this._mightContainRTL = mightContainRTL;\n    this._mightContainUnusualLineTerminators = mightContainUnusualLineTerminators;\n    this._mightContainNonBasicASCII = mightContainNonBasicASCII;\n    const contentChanges = this._doApplyEdits(operations);\n    let trimAutoWhitespaceLineNumbers = null;\n    if (recordTrimAutoWhitespace && newTrimAutoWhitespaceCandidates.length > 0) {\n      newTrimAutoWhitespaceCandidates.sort((a, b) => b.lineNumber - a.lineNumber);\n      trimAutoWhitespaceLineNumbers = [];\n      for (let i = 0, len = newTrimAutoWhitespaceCandidates.length; i < len; i++) {\n        const lineNumber = newTrimAutoWhitespaceCandidates[i].lineNumber;\n        if (i > 0 && newTrimAutoWhitespaceCandidates[i - 1].lineNumber === lineNumber) {\n          continue;\n        }\n        const prevContent = newTrimAutoWhitespaceCandidates[i].oldContent;\n        const lineContent = this.getLineContent(lineNumber);\n        if (lineContent.length === 0 || lineContent === prevContent || strings.firstNonWhitespaceIndex(lineContent) !== -1) {\n          continue;\n        }\n        trimAutoWhitespaceLineNumbers.push(lineNumber);\n      }\n    }\n    this._onDidChangeContent.fire();\n    return new require$_DOT__DOT__SLASH__DOT__DOT__SLASH_model_DOT_js.ApplyEditsResult(reverseOperations, contentChanges, trimAutoWhitespaceLineNumbers);\n  }\n  _reduceOperations(operations) {\n    if (operations.length < 1000) {\n      return operations;\n    }\n    return [this._toSingleEditOperation(operations)];\n  }\n  _toSingleEditOperation(operations) {\n    let forceMoveMarkers = false;\n    const firstEditRange = operations[0].range;\n    const lastEditRange = operations[operations.length - 1].range;\n    const entireEditRange = new require$_DOT__DOT__SLASH__DOT__DOT__SLASH_core_SLASH_range_DOT_js.Range(firstEditRange.startLineNumber, firstEditRange.startColumn, lastEditRange.endLineNumber, lastEditRange.endColumn);\n    let lastEndLineNumber = firstEditRange.startLineNumber;\n    let lastEndColumn = firstEditRange.startColumn;\n    const result = [];\n    for (let i = 0, len = operations.length; i < len; i++) {\n      const operation = operations[i];\n      const range = operation.range;\n      forceMoveMarkers = forceMoveMarkers || operation.forceMoveMarkers;\n      result.push(this.getValueInRange(new require$_DOT__DOT__SLASH__DOT__DOT__SLASH_core_SLASH_range_DOT_js.Range(lastEndLineNumber, lastEndColumn, range.startLineNumber, range.startColumn)));\n      if (operation.text.length > 0) {\n        result.push(operation.text);\n      }\n      lastEndLineNumber = range.endLineNumber;\n      lastEndColumn = range.endColumn;\n    }\n    const text = result.join(\"\");\n    const [eolCount, firstLineLength, lastLineLength] = (0,require$_DOT__DOT__SLASH__DOT__DOT__SLASH_core_SLASH_eolCounter_DOT_js.countEOL)(text);\n    return {sortIndex:0, identifier:operations[0].identifier, range:entireEditRange, rangeOffset:this.getOffsetAt(entireEditRange.startLineNumber, entireEditRange.startColumn), rangeLength:this.getValueLengthInRange(entireEditRange, 0), text:text, eolCount:eolCount, firstLineLength:firstLineLength, lastLineLength:lastLineLength, forceMoveMarkers:forceMoveMarkers, isAutoWhitespaceEdit:false};\n  }\n  _doApplyEdits(operations) {\n    operations.sort(PieceTreeTextBuffer._sortOpsDescending);\n    const contentChanges = [];\n    for (let i = 0; i < operations.length; i++) {\n      const op = operations[i];\n      const startLineNumber = op.range.startLineNumber;\n      const startColumn = op.range.startColumn;\n      const endLineNumber = op.range.endLineNumber;\n      const endColumn = op.range.endColumn;\n      if (startLineNumber === endLineNumber && startColumn === endColumn && op.text.length === 0) {\n        continue;\n      }\n      if (op.text) {\n        this._pieceTree.delete(op.rangeOffset, op.rangeLength);\n        this._pieceTree.insert(op.rangeOffset, op.text, true);\n      } else {\n        this._pieceTree.delete(op.rangeOffset, op.rangeLength);\n      }\n      const contentChangeRange = new require$_DOT__DOT__SLASH__DOT__DOT__SLASH_core_SLASH_range_DOT_js.Range(startLineNumber, startColumn, endLineNumber, endColumn);\n      contentChanges.push({range:contentChangeRange, rangeLength:op.rangeLength, text:op.text, rangeOffset:op.rangeOffset, forceMoveMarkers:op.forceMoveMarkers});\n    }\n    return contentChanges;\n  }\n  findMatchesLineByLine(searchRange, searchData, captureMatches, limitResultCount) {\n    return this._pieceTree.findMatchesLineByLine(searchRange, searchData, captureMatches, limitResultCount);\n  }\n  static _getInverseEditRanges(operations) {\n    const result = [];\n    let prevOpEndLineNumber = 0;\n    let prevOpEndColumn = 0;\n    let prevOp = null;\n    for (let i = 0, len = operations.length; i < len; i++) {\n      const op = operations[i];\n      let startLineNumber;\n      let startColumn;\n      if (prevOp) {\n        if (prevOp.range.endLineNumber === op.range.startLineNumber) {\n          startLineNumber = prevOpEndLineNumber;\n          startColumn = prevOpEndColumn + (op.range.startColumn - prevOp.range.endColumn);\n        } else {\n          startLineNumber = prevOpEndLineNumber + (op.range.startLineNumber - prevOp.range.endLineNumber);\n          startColumn = op.range.startColumn;\n        }\n      } else {\n        startLineNumber = op.range.startLineNumber;\n        startColumn = op.range.startColumn;\n      }\n      let resultRange;\n      if (op.text.length > 0) {\n        const lineCount = op.eolCount + 1;\n        if (lineCount === 1) {\n          resultRange = new require$_DOT__DOT__SLASH__DOT__DOT__SLASH_core_SLASH_range_DOT_js.Range(startLineNumber, startColumn, startLineNumber, startColumn + op.firstLineLength);\n        } else {\n          resultRange = new require$_DOT__DOT__SLASH__DOT__DOT__SLASH_core_SLASH_range_DOT_js.Range(startLineNumber, startColumn, startLineNumber + lineCount - 1, op.lastLineLength + 1);\n        }\n      } else {\n        resultRange = new require$_DOT__DOT__SLASH__DOT__DOT__SLASH_core_SLASH_range_DOT_js.Range(startLineNumber, startColumn, startLineNumber, startColumn);\n      }\n      prevOpEndLineNumber = resultRange.endLineNumber;\n      prevOpEndColumn = resultRange.endColumn;\n      result.push(resultRange);\n      prevOp = op;\n    }\n    return result;\n  }\n  static _sortOpsAscending(a, b) {\n    const r = require$_DOT__DOT__SLASH__DOT__DOT__SLASH_core_SLASH_range_DOT_js.Range.compareRangesUsingEnds(a.range, b.range);\n    if (r === 0) {\n      return a.sortIndex - b.sortIndex;\n    }\n    return r;\n  }\n  static _sortOpsDescending(a, b) {\n    const r = require$_DOT__DOT__SLASH__DOT__DOT__SLASH_core_SLASH_range_DOT_js.Range.compareRangesUsingEnds(a.range, b.range);\n    if (r === 0) {\n      return b.sortIndex - a.sortIndex;\n    }\n    return -r;\n  }\n}\n\n};"],
"names":["shadow$provide","require","module","exports","Object","defineProperties","__esModule","enumerable","value","PieceTreeTextBuffer","get","require$_DOT__DOT__SLASH__DOT__DOT__SLASH__DOT__DOT__SLASH__DOT__DOT__SLASH_base_SLASH_common_SLASH_event_DOT_js","strings","require$_DOT__DOT__SLASH__DOT__DOT__SLASH_core_SLASH_range_DOT_js","require$_DOT__DOT__SLASH__DOT__DOT__SLASH_model_DOT_js","require$_DOT__SLASH_pieceTreeBase_DOT_js","require$_DOT__DOT__SLASH__DOT__DOT__SLASH_core_SLASH_eolCounter_DOT_js","require$_DOT__DOT__SLASH__DOT__DOT__SLASH_core_SLASH_textChange_DOT_js","require$_DOT__DOT__SLASH__DOT__DOT__SLASH__DOT__DOT__SLASH__DOT__DOT__SLASH_base_SLASH_common_SLASH_lifecycle_DOT_js","Disposable","constructor","chunks","BOM","eol","containsRTL","containsUnusualLineTerminators","isBasicASCII","eolNormalized","_onDidChangeContent","_register","Emitter","_BOM","_mightContainNonBasicASCII","_mightContainRTL","_mightContainUnusualLineTerminators","_pieceTree","PieceTreeBase","mightContainRTL","mightContainUnusualLineTerminators","resetMightContainUnusualLineTerminators","mightContainNonBasicASCII","getBOM","getEOL","createSnapshot","preserveBOM","getOffsetAt","lineNumber","column","getPositionAt","offset","getRangeAt","start","length","end","startPosition","endPosition","Range","getValueInRange","range","isEmpty","lineEnding","_getEndOfLine","getValueLengthInRange","startLineNumber","endLineNumber","endColumn","startColumn","startOffset","endOffset","eolOffsetCompensation","desiredEOL","actualEOL","getCharacterCountInRange","result","fromLineNumber","toLineNumber","lineContent","getLineContent","fromOffset","toOffset","isHighSurrogate","charCodeAt","getLength","getLineCount","getLinesContent","getLineCharCode","index","getLineLength","getLineFirstNonWhitespaceColumn","firstNonWhitespaceIndex","getLineLastNonWhitespaceColumn","lastNonWhitespaceIndex","Error","setEOL","newEOL","applyEdits","rawOperations","recordTrimAutoWhitespace","computeUndoEdits","canReduceOperations","operations","i","op","_isTracked","validatedRange","text","textMightContainNonBasicASCII","validText","firstLineLength","eolCount","lastLineLength","strEOL","countEOL","bufferEOL","expectedStrEOL","replace","sortIndex","identifier","rangeOffset","rangeLength","forceMoveMarkers","isAutoWhitespaceEdit","sort","_sortOpsAscending","hasTouchingRanges","count","rangeEnd","getEndPosition","nextRangeStart","getStartPosition","isBeforeOrEqual","isBefore","_reduceOperations","reverseRanges","_getInverseEditRanges","newTrimAutoWhitespaceCandidates","reverseRange","currentLineContent","push","oldContent","reverseOperations","reverseRangeDeltaOffset","bufferText","reverseRangeOffset","textChange","TextChange","a","b","contentChanges","_doApplyEdits","trimAutoWhitespaceLineNumbers","len","prevContent","fire","ApplyEditsResult","_toSingleEditOperation","firstEditRange","lastEditRange","entireEditRange","lastEndLineNumber","lastEndColumn","operation","join","_sortOpsDescending","delete","insert","contentChangeRange","findMatchesLineByLine","searchRange","searchData","captureMatches","limitResultCount","prevOpEndLineNumber","prevOpEndColumn","prevOp","lineCount","resultRange","r","compareRangesUsingEnds"]
}
