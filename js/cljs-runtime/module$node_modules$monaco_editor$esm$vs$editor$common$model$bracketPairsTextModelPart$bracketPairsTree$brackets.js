shadow$provide.module$node_modules$monaco_editor$esm$vs$editor$common$model$bracketPairsTextModelPart$bracketPairsTree$brackets = function(require, module, exports) {
  Object.defineProperties(exports, {__esModule:{enumerable:!0, value:!0}, BracketTokens:{enumerable:!0, get:function() {
    return BracketTokens;
  }}, LanguageAgnosticBracketTokens:{enumerable:!0, get:function() {
    return LanguageAgnosticBracketTokens;
  }}});
  var require$_DOT__DOT__SLASH__DOT__DOT__SLASH__DOT__DOT__SLASH__DOT__DOT__SLASH__DOT__DOT__SLASH_base_SLASH_common_SLASH_strings_DOT_js = require("module$node_modules$monaco_editor$esm$vs$base$common$strings"), require$_DOT__SLASH_ast_DOT_js = require("module$node_modules$monaco_editor$esm$vs$editor$common$model$bracketPairsTextModelPart$bracketPairsTree$ast"), require$_DOT__SLASH_length_DOT_js = require("module$node_modules$monaco_editor$esm$vs$editor$common$model$bracketPairsTextModelPart$bracketPairsTree$length"), 
  require$_DOT__SLASH_smallImmutableSet_DOT_js = require("module$node_modules$monaco_editor$esm$vs$editor$common$model$bracketPairsTextModelPart$bracketPairsTree$smallImmutableSet"), require$_DOT__SLASH_tokenizer_DOT_js = require("module$node_modules$monaco_editor$esm$vs$editor$common$model$bracketPairsTextModelPart$bracketPairsTree$tokenizer");
  class BracketTokens {
    static createFromLanguage(configuration, denseKeyProvider) {
      function getId(bracketInfo) {
        return denseKeyProvider.getKey(`${bracketInfo.languageId}:::${bracketInfo.bracketText}`);
      }
      const map = new Map();
      for (var openingBracket of configuration.bracketsNew.openingBrackets) {
        var length = (0,require$_DOT__SLASH_length_DOT_js.toLength)(0, openingBracket.bracketText.length);
        const openingTextId = getId(openingBracket), bracketIds = require$_DOT__SLASH_smallImmutableSet_DOT_js.SmallImmutableSet.getEmpty().add(openingTextId, require$_DOT__SLASH_smallImmutableSet_DOT_js.identityKeyProvider);
        map.set(openingBracket.bracketText, new require$_DOT__SLASH_tokenizer_DOT_js.Token(length, 1, openingTextId, bracketIds, require$_DOT__SLASH_ast_DOT_js.BracketAstNode.create(length, openingBracket, bracketIds)));
      }
      for (const closingBracket of configuration.bracketsNew.closingBrackets) {
        configuration = (0,require$_DOT__SLASH_length_DOT_js.toLength)(0, closingBracket.bracketText.length);
        openingBracket = require$_DOT__SLASH_smallImmutableSet_DOT_js.SmallImmutableSet.getEmpty();
        length = closingBracket.getOpeningBrackets();
        for (const bracket of length) {
          openingBracket = openingBracket.add(getId(bracket), require$_DOT__SLASH_smallImmutableSet_DOT_js.identityKeyProvider);
        }
        map.set(closingBracket.bracketText, new require$_DOT__SLASH_tokenizer_DOT_js.Token(configuration, 2, getId(length[0]), openingBracket, require$_DOT__SLASH_ast_DOT_js.BracketAstNode.create(configuration, closingBracket, openingBracket)));
      }
      return new BracketTokens(map);
    }
    constructor(map) {
      this.map = map;
      this.hasRegExp = !1;
      this._regExpGlobal = null;
    }
    getRegExpStr() {
      if (this.isEmpty) {
        return null;
      }
      const keys = [...this.map.keys()];
      keys.sort();
      keys.reverse();
      return keys.map(k => {
        let escaped = (0,require$_DOT__DOT__SLASH__DOT__DOT__SLASH__DOT__DOT__SLASH__DOT__DOT__SLASH__DOT__DOT__SLASH_base_SLASH_common_SLASH_strings_DOT_js.escapeRegExpCharacters)(k);
        /^[\w ]+/.test(k) && (escaped = `\\b${escaped}`);
        /[\w ]+$/.test(k) && (escaped = `${escaped}\\b`);
        return escaped;
      }).join("|");
    }
    get regExpGlobal() {
      if (!this.hasRegExp) {
        const regExpStr = this.getRegExpStr();
        this._regExpGlobal = regExpStr ? new RegExp(regExpStr, "gi") : null;
        this.hasRegExp = !0;
      }
      return this._regExpGlobal;
    }
    getToken(value) {
      return this.map.get(value.toLowerCase());
    }
    findClosingTokenText(openingBracketIds) {
      for (const [closingText, info] of this.map) {
        if (info.kind === 2 && info.bracketIds.intersects(openingBracketIds)) {
          return closingText;
        }
      }
    }
    get isEmpty() {
      return this.map.size === 0;
    }
  }
  class LanguageAgnosticBracketTokens {
    constructor(denseKeyProvider, getLanguageConfiguration) {
      this.denseKeyProvider = denseKeyProvider;
      this.getLanguageConfiguration = getLanguageConfiguration;
      this.languageIdToBracketTokens = new Map();
    }
    didLanguageChange(languageId) {
      return this.languageIdToBracketTokens.has(languageId);
    }
    getSingleLanguageBracketTokens(languageId) {
      let singleLanguageBracketTokens = this.languageIdToBracketTokens.get(languageId);
      singleLanguageBracketTokens || (singleLanguageBracketTokens = BracketTokens.createFromLanguage(this.getLanguageConfiguration(languageId), this.denseKeyProvider), this.languageIdToBracketTokens.set(languageId, singleLanguageBracketTokens));
      return singleLanguageBracketTokens;
    }
  }
};

//# sourceMappingURL=module$node_modules$monaco_editor$esm$vs$editor$common$model$bracketPairsTextModelPart$bracketPairsTree$brackets.js.map
