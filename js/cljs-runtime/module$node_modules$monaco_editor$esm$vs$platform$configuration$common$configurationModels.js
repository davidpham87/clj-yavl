shadow$provide.module$node_modules$monaco_editor$esm$vs$platform$configuration$common$configurationModels = function(require, module, exports) {
  function freeze(data) {
    return Object.isFrozen(data) ? data : objects.deepFreeze(data);
  }
  Object.defineProperties(exports, {__esModule:{enumerable:!0, value:!0}, Configuration:{enumerable:!0, get:function() {
    return Configuration;
  }}, ConfigurationChangeEvent:{enumerable:!0, get:function() {
    return ConfigurationChangeEvent;
  }}, ConfigurationModel:{enumerable:!0, get:function() {
    return ConfigurationModel;
  }}, ConfigurationModelParser:{enumerable:!0, get:function() {
    return ConfigurationModelParser;
  }}});
  var arrays = require("module$node_modules$monaco_editor$esm$vs$base$common$arrays"), require$_DOT__DOT__SLASH__DOT__DOT__SLASH__DOT__DOT__SLASH_base_SLASH_common_SLASH_map_DOT_js = require("module$node_modules$monaco_editor$esm$vs$base$common$map"), objects = require("module$node_modules$monaco_editor$esm$vs$base$common$objects"), types = require("module$node_modules$monaco_editor$esm$vs$base$common$types"), require$_DOT__DOT__SLASH__DOT__DOT__SLASH__DOT__DOT__SLASH_base_SLASH_common_SLASH_uri_DOT_js = 
  require("module$node_modules$monaco_editor$esm$vs$base$common$uri"), require$_DOT__SLASH_configuration_DOT_js = require("module$node_modules$monaco_editor$esm$vs$platform$configuration$common$configuration"), require$_DOT__SLASH_configurationRegistry_DOT_js = require("module$node_modules$monaco_editor$esm$vs$platform$configuration$common$configurationRegistry"), require$_DOT__DOT__SLASH__DOT__DOT__SLASH_registry_SLASH_common_SLASH_platform_DOT_js = require("module$node_modules$monaco_editor$esm$vs$platform$registry$common$platform");
  class ConfigurationModel {
    constructor(_contents = {}, _keys = [], _overrides = [], raw) {
      this._contents = _contents;
      this._keys = _keys;
      this._overrides = _overrides;
      this.raw = raw;
      this.overrideConfigurations = new Map();
    }
    get rawConfiguration() {
      var _a;
      this._rawConfiguration || (((_a = this.raw) === null || _a === void 0 ? 0 : _a.length) ? (_a = this.raw.map(raw => {
        if (raw instanceof ConfigurationModel) {
          return raw;
        }
        const parser = new ConfigurationModelParser("");
        parser.parseRaw(raw);
        return parser.configurationModel;
      }), this._rawConfiguration = _a.reduce((previous, current) => current === previous ? current : previous.merge(current), _a[0])) : this._rawConfiguration = this);
      return this._rawConfiguration;
    }
    get contents() {
      return this._contents;
    }
    get overrides() {
      return this._overrides;
    }
    get keys() {
      return this._keys;
    }
    isEmpty() {
      return this._keys.length === 0 && Object.keys(this._contents).length === 0 && this._overrides.length === 0;
    }
    getValue(section) {
      return section ? (0,require$_DOT__SLASH_configuration_DOT_js.getConfigurationValue)(this.contents, section) : this.contents;
    }
    inspect(section, overrideIdentifier) {
      const value = this.rawConfiguration.getValue(section), override = overrideIdentifier ? this.rawConfiguration.getOverrideValue(section, overrideIdentifier) : void 0;
      section = overrideIdentifier ? this.rawConfiguration.override(overrideIdentifier).getValue(section) : value;
      return {value, override, merged:section};
    }
    getOverrideValue(section, overrideIdentifier) {
      return (overrideIdentifier = this.getContentsForOverrideIdentifer(overrideIdentifier)) ? section ? (0,require$_DOT__SLASH_configuration_DOT_js.getConfigurationValue)(overrideIdentifier, section) : overrideIdentifier : void 0;
    }
    override(identifier) {
      let overrideConfigurationModel = this.overrideConfigurations.get(identifier);
      overrideConfigurationModel || (overrideConfigurationModel = this.createOverrideConfigurationModel(identifier), this.overrideConfigurations.set(identifier, overrideConfigurationModel));
      return overrideConfigurationModel;
    }
    merge(...others) {
      var _a, _b;
      const contents = objects.deepClone(this.contents), overrides = objects.deepClone(this.overrides), keys = [...this.keys], raws = ((_a = this.raw) === null || _a === void 0 ? 0 : _a.length) ? [...this.raw] : [this];
      for (const other of others) {
        if (raws.push(...(((_b = other.raw) === null || _b === void 0 ? 0 : _b.length) ? other.raw : [other])), !other.isEmpty()) {
          this.mergeContents(contents, other.contents);
          for (const otherOverride of other.overrides) {
            [others] = overrides.filter(o => arrays.equals(o.identifiers, otherOverride.identifiers)), others ? (this.mergeContents(others.contents, otherOverride.contents), others.keys.push(...otherOverride.keys), others.keys = arrays.distinct(others.keys)) : overrides.push(objects.deepClone(otherOverride));
          }
          for (const key of other.keys) {
            keys.indexOf(key) === -1 && keys.push(key);
          }
        }
      }
      return new ConfigurationModel(contents, keys, overrides, raws.every(raw => raw instanceof ConfigurationModel) ? void 0 : raws);
    }
    createOverrideConfigurationModel(identifier) {
      identifier = this.getContentsForOverrideIdentifer(identifier);
      if (!identifier || typeof identifier !== "object" || !Object.keys(identifier).length) {
        return this;
      }
      const contents = {};
      for (const key of arrays.distinct([...Object.keys(this.contents), ...Object.keys(identifier)])) {
        let contentsForKey = this.contents[key];
        const overrideContentsForKey = identifier[key];
        overrideContentsForKey && (typeof contentsForKey === "object" && typeof overrideContentsForKey === "object" ? (contentsForKey = objects.deepClone(contentsForKey), this.mergeContents(contentsForKey, overrideContentsForKey)) : contentsForKey = overrideContentsForKey);
        contents[key] = contentsForKey;
      }
      return new ConfigurationModel(contents, this.keys, this.overrides);
    }
    mergeContents(source, target) {
      for (const key of Object.keys(target)) {
        key in source && types.isObject(source[key]) && types.isObject(target[key]) ? this.mergeContents(source[key], target[key]) : source[key] = objects.deepClone(target[key]);
      }
    }
    getContentsForOverrideIdentifer(identifier) {
      let contentsForIdentifierOnly = null, contents = null;
      const mergeContents = contentsToMerge => {
        contentsToMerge && (contents ? this.mergeContents(contents, contentsToMerge) : contents = objects.deepClone(contentsToMerge));
      };
      for (const override of this.overrides) {
        override.identifiers.length === 1 && override.identifiers[0] === identifier ? contentsForIdentifierOnly = override.contents : override.identifiers.includes(identifier) && mergeContents(override.contents);
      }
      mergeContents(contentsForIdentifierOnly);
      return contents;
    }
    toJSON() {
      return {contents:this.contents, overrides:this.overrides, keys:this.keys};
    }
    addValue(key, value) {
      this.updateValue(key, value, !0);
    }
    setValue(key, value) {
      this.updateValue(key, value, !1);
    }
    removeValue(key) {
      const index = this.keys.indexOf(key);
      index !== -1 && (this.keys.splice(index, 1), (0,require$_DOT__SLASH_configuration_DOT_js.removeFromValueTree)(this.contents, key), require$_DOT__SLASH_configurationRegistry_DOT_js.OVERRIDE_PROPERTY_REGEX.test(key) && this.overrides.splice(this.overrides.findIndex(o => arrays.equals(o.identifiers, (0,require$_DOT__SLASH_configurationRegistry_DOT_js.overrideIdentifiersFromKey)(key))), 1));
    }
    updateValue(key, value, add) {
      (0,require$_DOT__SLASH_configuration_DOT_js.addToValueTree)(this.contents, key, value, e => console.error(e));
      (add = add || this.keys.indexOf(key) === -1) && this.keys.push(key);
      require$_DOT__SLASH_configurationRegistry_DOT_js.OVERRIDE_PROPERTY_REGEX.test(key) && this.overrides.push({identifiers:(0,require$_DOT__SLASH_configurationRegistry_DOT_js.overrideIdentifiersFromKey)(key), keys:Object.keys(this.contents[key]), contents:(0,require$_DOT__SLASH_configuration_DOT_js.toValuesTree)(this.contents[key], message => console.error(message))});
    }
  }
  class ConfigurationModelParser {
    constructor(_name) {
      this._name = _name;
      this._configurationModel = this._raw = null;
      this._restrictedConfigurations = [];
    }
    get configurationModel() {
      return this._configurationModel || new ConfigurationModel();
    }
    parseRaw(raw, options) {
      this._raw = raw;
      const {contents, keys, overrides, restricted, hasExcludedProperties} = this.doParseRaw(raw, options);
      this._configurationModel = new ConfigurationModel(contents, keys, overrides, hasExcludedProperties ? [raw] : void 0);
      this._restrictedConfigurations = restricted || [];
    }
    doParseRaw(raw, options) {
      var configurationProperties = require$_DOT__DOT__SLASH__DOT__DOT__SLASH_registry_SLASH_common_SLASH_platform_DOT_js.Registry.as(require$_DOT__SLASH_configurationRegistry_DOT_js.Extensions.Configuration).getConfigurationProperties();
      options = this.filter(raw, configurationProperties, !0, options);
      raw = options.raw;
      configurationProperties = (0,require$_DOT__SLASH_configuration_DOT_js.toValuesTree)(raw, message => console.error(`Conflict in settings file ${this._name}: ${message}`));
      const keys = Object.keys(raw);
      raw = this.toOverrides(raw, message => console.error(`Conflict in settings file ${this._name}: ${message}`));
      return {contents:configurationProperties, keys, overrides:raw, restricted:options.restricted, hasExcludedProperties:options.hasExcludedProperties};
    }
    filter(properties, configurationProperties, filterOverriddenProperties, options) {
      var _a, _b, _c;
      let hasExcludedProperties = !1;
      if (!((options === null || options === void 0 ? 0 : options.scopes) || (options === null || options === void 0 ? 0 : options.skipRestricted) || ((_a = options === null || options === void 0 ? void 0 : options.exclude) === null || _a === void 0 ? 0 : _a.length))) {
        return {raw:properties, restricted:[], hasExcludedProperties};
      }
      _a = {};
      const restricted = [];
      for (const key in properties) {
        if (require$_DOT__SLASH_configurationRegistry_DOT_js.OVERRIDE_PROPERTY_REGEX.test(key) && filterOverriddenProperties) {
          var result = this.filter(properties[key], configurationProperties, !1, options);
          _a[key] = result.raw;
          hasExcludedProperties = hasExcludedProperties || result.hasExcludedProperties;
          restricted.push(...result.restricted);
        } else {
          const scope = (result = configurationProperties[key]) ? typeof result.scope !== "undefined" ? result.scope : 3 : void 0;
          (result === null || result === void 0 ? 0 : result.restricted) && restricted.push(key);
          ((_b = options.exclude) === null || _b === void 0 ? 0 : _b.includes(key)) || ((_c = options.include) === null || _c === void 0 || !_c.includes(key)) && (scope !== void 0 && options.scopes !== void 0 && !options.scopes.includes(scope) || options.skipRestricted && (result === null || result === void 0 ? 0 : result.restricted)) ? hasExcludedProperties = !0 : _a[key] = properties[key];
        }
      }
      return {raw:_a, restricted, hasExcludedProperties};
    }
    toOverrides(raw, conflictReporter) {
      const overrides = [];
      for (const key of Object.keys(raw)) {
        if (require$_DOT__SLASH_configurationRegistry_DOT_js.OVERRIDE_PROPERTY_REGEX.test(key)) {
          const overrideRaw = {};
          for (const keyInOverrideRaw in raw[key]) {
            overrideRaw[keyInOverrideRaw] = raw[key][keyInOverrideRaw];
          }
          overrides.push({identifiers:(0,require$_DOT__SLASH_configurationRegistry_DOT_js.overrideIdentifiersFromKey)(key), keys:Object.keys(overrideRaw), contents:(0,require$_DOT__SLASH_configuration_DOT_js.toValuesTree)(overrideRaw, conflictReporter)});
        }
      }
      return overrides;
    }
  }
  class ConfigurationInspectValue {
    constructor(key, overrides, _value, overrideIdentifiers, defaultConfiguration, policyConfiguration, applicationConfiguration, userConfiguration, localUserConfiguration, remoteUserConfiguration, workspaceConfiguration, folderConfigurationModel, memoryConfigurationModel) {
      this.key = key;
      this.overrides = overrides;
      this._value = _value;
      this.overrideIdentifiers = overrideIdentifiers;
      this.defaultConfiguration = defaultConfiguration;
      this.policyConfiguration = policyConfiguration;
      this.applicationConfiguration = applicationConfiguration;
      this.userConfiguration = userConfiguration;
      this.localUserConfiguration = localUserConfiguration;
      this.remoteUserConfiguration = remoteUserConfiguration;
      this.workspaceConfiguration = workspaceConfiguration;
      this.folderConfigurationModel = folderConfigurationModel;
      this.memoryConfigurationModel = memoryConfigurationModel;
    }
    inspect(model, section, overrideIdentifier) {
      const inspectValue = model.inspect(section, overrideIdentifier);
      return {get value() {
        return freeze(inspectValue.value);
      }, get override() {
        return freeze(inspectValue.override);
      }, get merged() {
        return freeze(inspectValue.merged);
      }};
    }
    get userInspectValue() {
      this._userInspectValue || (this._userInspectValue = this.inspect(this.userConfiguration, this.key, this.overrides.overrideIdentifier));
      return this._userInspectValue;
    }
    get user() {
      return this.userInspectValue.value !== void 0 || this.userInspectValue.override !== void 0 ? {value:this.userInspectValue.value, override:this.userInspectValue.override} : void 0;
    }
  }
  class Configuration {
    constructor(_defaultConfiguration, _policyConfiguration, _applicationConfiguration, _localUserConfiguration, _remoteUserConfiguration = new ConfigurationModel(), _workspaceConfiguration = new ConfigurationModel(), _folderConfigurations = new require$_DOT__DOT__SLASH__DOT__DOT__SLASH__DOT__DOT__SLASH_base_SLASH_common_SLASH_map_DOT_js.ResourceMap(), _memoryConfiguration = new ConfigurationModel(), _memoryConfigurationByResource = new require$_DOT__DOT__SLASH__DOT__DOT__SLASH__DOT__DOT__SLASH_base_SLASH_common_SLASH_map_DOT_js.ResourceMap()) {
      this._defaultConfiguration = _defaultConfiguration;
      this._policyConfiguration = _policyConfiguration;
      this._applicationConfiguration = _applicationConfiguration;
      this._localUserConfiguration = _localUserConfiguration;
      this._remoteUserConfiguration = _remoteUserConfiguration;
      this._workspaceConfiguration = _workspaceConfiguration;
      this._folderConfigurations = _folderConfigurations;
      this._memoryConfiguration = _memoryConfiguration;
      this._memoryConfigurationByResource = _memoryConfigurationByResource;
      this._workspaceConsolidatedConfiguration = null;
      this._foldersConsolidatedConfigurations = new require$_DOT__DOT__SLASH__DOT__DOT__SLASH__DOT__DOT__SLASH_base_SLASH_common_SLASH_map_DOT_js.ResourceMap();
      this._userConfiguration = null;
    }
    getValue(section, overrides, workspace) {
      return this.getConsolidatedConfigurationModel(section, overrides, workspace).getValue(section);
    }
    updateValue(key, value, overrides = {}) {
      let memoryConfiguration;
      overrides.resource ? (memoryConfiguration = this._memoryConfigurationByResource.get(overrides.resource), memoryConfiguration || (memoryConfiguration = new ConfigurationModel(), this._memoryConfigurationByResource.set(overrides.resource, memoryConfiguration))) : memoryConfiguration = this._memoryConfiguration;
      value === void 0 ? memoryConfiguration.removeValue(key) : memoryConfiguration.setValue(key, value);
      overrides.resource || (this._workspaceConsolidatedConfiguration = null);
    }
    inspect(key, overrides, workspace) {
      const consolidateConfigurationModel = this.getConsolidatedConfigurationModel(key, overrides, workspace), folderConfigurationModel = this.getFolderConfigurationModelForResource(overrides.resource, workspace), memoryConfigurationModel = overrides.resource ? this._memoryConfigurationByResource.get(overrides.resource) || this._memoryConfiguration : this._memoryConfiguration, overrideIdentifiers = new Set();
      for (const override of consolidateConfigurationModel.overrides) {
        for (const overrideIdentifier of override.identifiers) {
          consolidateConfigurationModel.getOverrideValue(key, overrideIdentifier) !== void 0 && overrideIdentifiers.add(overrideIdentifier);
        }
      }
      return new ConfigurationInspectValue(key, overrides, consolidateConfigurationModel.getValue(key), overrideIdentifiers.size ? [...overrideIdentifiers] : void 0, this._defaultConfiguration, this._policyConfiguration.isEmpty() ? void 0 : this._policyConfiguration, this.applicationConfiguration.isEmpty() ? void 0 : this.applicationConfiguration, this.userConfiguration, this.localUserConfiguration, this.remoteUserConfiguration, workspace ? this._workspaceConfiguration : void 0, folderConfigurationModel ? 
      folderConfigurationModel : void 0, memoryConfigurationModel);
    }
    get applicationConfiguration() {
      return this._applicationConfiguration;
    }
    get userConfiguration() {
      this._userConfiguration || (this._userConfiguration = this._remoteUserConfiguration.isEmpty() ? this._localUserConfiguration : this._localUserConfiguration.merge(this._remoteUserConfiguration));
      return this._userConfiguration;
    }
    get localUserConfiguration() {
      return this._localUserConfiguration;
    }
    get remoteUserConfiguration() {
      return this._remoteUserConfiguration;
    }
    getConsolidatedConfigurationModel(section, overrides, workspace) {
      workspace = this.getConsolidatedConfigurationModelForResource(overrides, workspace);
      overrides.overrideIdentifier && (workspace = workspace.override(overrides.overrideIdentifier));
      this._policyConfiguration.isEmpty() || this._policyConfiguration.getValue(section) === void 0 || (workspace = workspace.merge(this._policyConfiguration));
      return workspace;
    }
    getConsolidatedConfigurationModelForResource({resource}, workspace) {
      let consolidateConfiguration = this.getWorkspaceConsolidatedConfiguration();
      workspace && resource && ((workspace = workspace.getFolder(resource)) && (consolidateConfiguration = this.getFolderConsolidatedConfiguration(workspace.uri) || consolidateConfiguration), (resource = this._memoryConfigurationByResource.get(resource)) && (consolidateConfiguration = consolidateConfiguration.merge(resource)));
      return consolidateConfiguration;
    }
    getWorkspaceConsolidatedConfiguration() {
      this._workspaceConsolidatedConfiguration || (this._workspaceConsolidatedConfiguration = this._defaultConfiguration.merge(this.applicationConfiguration, this.userConfiguration, this._workspaceConfiguration, this._memoryConfiguration));
      return this._workspaceConsolidatedConfiguration;
    }
    getFolderConsolidatedConfiguration(folder) {
      var folderConsolidatedConfiguration = this._foldersConsolidatedConfigurations.get(folder);
      if (!folderConsolidatedConfiguration) {
        folderConsolidatedConfiguration = this.getWorkspaceConsolidatedConfiguration();
        const folderConfiguration = this._folderConfigurations.get(folder);
        folderConfiguration && (folderConsolidatedConfiguration = folderConsolidatedConfiguration.merge(folderConfiguration), this._foldersConsolidatedConfigurations.set(folder, folderConsolidatedConfiguration));
      }
      return folderConsolidatedConfiguration;
    }
    getFolderConfigurationModelForResource(resource, workspace) {
      if (workspace && resource && (resource = workspace.getFolder(resource))) {
        return this._folderConfigurations.get(resource.uri);
      }
    }
    toData() {
      return {defaults:{contents:this._defaultConfiguration.contents, overrides:this._defaultConfiguration.overrides, keys:this._defaultConfiguration.keys}, policy:{contents:this._policyConfiguration.contents, overrides:this._policyConfiguration.overrides, keys:this._policyConfiguration.keys}, application:{contents:this.applicationConfiguration.contents, overrides:this.applicationConfiguration.overrides, keys:this.applicationConfiguration.keys}, user:{contents:this.userConfiguration.contents, overrides:this.userConfiguration.overrides, 
      keys:this.userConfiguration.keys}, workspace:{contents:this._workspaceConfiguration.contents, overrides:this._workspaceConfiguration.overrides, keys:this._workspaceConfiguration.keys}, folders:[...this._folderConfigurations.keys()].reduce((result, folder) => {
        const {contents, overrides, keys} = this._folderConfigurations.get(folder);
        result.push([folder, {contents, overrides, keys}]);
        return result;
      }, [])};
    }
    static parse(data) {
      const defaultConfiguration = this.parseConfigurationModel(data.defaults), policyConfiguration = this.parseConfigurationModel(data.policy), applicationConfiguration = this.parseConfigurationModel(data.application), userConfiguration = this.parseConfigurationModel(data.user), workspaceConfiguration = this.parseConfigurationModel(data.workspace);
      data = data.folders.reduce((result, value) => {
        result.set(require$_DOT__DOT__SLASH__DOT__DOT__SLASH__DOT__DOT__SLASH_base_SLASH_common_SLASH_uri_DOT_js.URI.revive(value[0]), this.parseConfigurationModel(value[1]));
        return result;
      }, new require$_DOT__DOT__SLASH__DOT__DOT__SLASH__DOT__DOT__SLASH_base_SLASH_common_SLASH_map_DOT_js.ResourceMap());
      return new Configuration(defaultConfiguration, policyConfiguration, applicationConfiguration, userConfiguration, new ConfigurationModel(), workspaceConfiguration, data, new ConfigurationModel(), new require$_DOT__DOT__SLASH__DOT__DOT__SLASH__DOT__DOT__SLASH_base_SLASH_common_SLASH_map_DOT_js.ResourceMap());
    }
    static parseConfigurationModel(model) {
      return new ConfigurationModel(model.contents, model.keys, model.overrides);
    }
  }
  class ConfigurationChangeEvent {
    constructor(change, previous, currentConfiguraiton, currentWorkspace) {
      this.change = change;
      this.previous = previous;
      this.currentConfiguraiton = currentConfiguraiton;
      this.currentWorkspace = currentWorkspace;
      this._marker = "\n";
      this._markerCode1 = this._marker.charCodeAt(0);
      this._markerCode2 = 46;
      this.affectedKeys = new Set();
      this._previousConfiguration = void 0;
      for (const key of change.keys) {
        this.affectedKeys.add(key);
      }
      for (const [, keys] of change.overrides) {
        for (const key of keys) {
          this.affectedKeys.add(key);
        }
      }
      this._affectsConfigStr = this._marker;
      for (const key of this.affectedKeys) {
        this._affectsConfigStr += key + this._marker;
      }
    }
    get previousConfiguration() {
      !this._previousConfiguration && this.previous && (this._previousConfiguration = Configuration.parse(this.previous.data));
      return this._previousConfiguration;
    }
    affectsConfiguration(section, overrides) {
      var _a, needle = this._marker + section;
      const idx = this._affectsConfigStr.indexOf(needle);
      if (idx < 0) {
        return !1;
      }
      needle = idx + needle.length;
      if (needle >= this._affectsConfigStr.length) {
        return !1;
      }
      needle = this._affectsConfigStr.charCodeAt(needle);
      return needle !== this._markerCode1 && needle !== this._markerCode2 ? !1 : overrides ? (needle = this.previousConfiguration ? this.previousConfiguration.getValue(section, overrides, (_a = this.previous) === null || _a === void 0 ? void 0 : _a.workspace) : void 0, section = this.currentConfiguraiton.getValue(section, overrides, this.currentWorkspace), !objects.equals(needle, section)) : !0;
    }
  }
};

//# sourceMappingURL=module$node_modules$monaco_editor$esm$vs$platform$configuration$common$configurationModels.js.map
