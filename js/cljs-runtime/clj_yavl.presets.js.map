{"version":3,"sources":["clj_yavl/presets.cljc"],"mappings":"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","names":["js/clj-yavl","js/clj-yavl.presets","js/clj-yavl.presets.unit-spec","method-table__5622__auto__","cljs.core.atom","prefer-table__5623__auto__","method-cache__5624__auto__","cached-hierarchy__5625__auto__","hierarchy__5626__auto__","cljs.core.get","fexpr__25375","cljs.core/MultiFn","cljs.core.symbol","clj-yavl.presets/unit-spec","clj-yavl.presets/with-title","spec","title","cljs.core.assoc","p__25376","map__25379","cljs.core/--destructure-map","x","y","mark","color","size","data-schema","width","height","config","opts","encodings","G__25380","cljs.core/Keyword","cljs.core/name","common-specs","G__25381","clj-yavl.api/base-plot","clj-yavl.api/add-transforms","clj-yavl.api/wrap-with-facet","clj-yavl.api/wrap-with-repeat","p__25384","map__25385","category","value","inner-radius","mark-def","G__25386","G__25387","p__25388","map__25389","group","grouped?","orientation","is-horizontal","cljs.core._EQ_","base-encodings","G__25390","and__5023__auto__","G__25391"],"sourcesContent":["(ns clj-yavl.presets\n  (:require [clj-yavl.api :as api]))\n\n(defmulti unit-spec\n  \"Generates a Vega-Lite spec based on the :type key in the options map.\"\n  :type)\n\n(defn- with-title [spec title]\n  (if title\n    (assoc spec :title title)\n    spec))\n\n(defmethod unit-spec :xyplot\n  [{:keys [x y mark color size title data-schema width height config] :as opts :or {mark :point}}]\n  (let [encodings (cond-> {:x x :y y}\n                    color (assoc :color color)\n                    size (assoc :size size))\n        mark (if (keyword? mark) (name mark) mark)\n        common-specs (cond-> {:mark mark}\n                       width (assoc :width width)\n                       height (assoc :height height)\n                       config (assoc :config config))]\n    (-> (api/base-plot encodings common-specs {:data-schema data-schema})\n        (api/add-transforms opts)\n        (api/wrap-with-facet opts)\n        (api/wrap-with-repeat opts)\n        (with-title title))))\n\n(defmethod unit-spec :pie\n  [{:keys [category value inner-radius title data-schema width height config] :as opts}]\n  (let [encodings {:theta {:field value :type \"quantitative\" :stack true}\n                   :color {:field category :type \"nominal\"}}\n        mark-def (cond-> {:type \"arc\"}\n                   inner-radius (assoc :innerRadius inner-radius))\n        common-specs (cond-> {:mark mark-def}\n                       width (assoc :width width)\n                       height (assoc :height height)\n                       config (assoc :config config))]\n    (-> (api/base-plot encodings common-specs {:data-schema data-schema})\n        (api/add-transforms opts)\n        (api/wrap-with-facet opts)\n        (api/wrap-with-repeat opts)\n        (with-title title))))\n\n(defmethod unit-spec :bar\n  [{:keys [x y color group grouped? orientation title data-schema width height config] :as opts :or {orientation :vertical}}]\n  (let [is-horizontal (= orientation :horizontal)\n        ;; For vertical bar: x is categorical usually, y is quantitative\n        ;; For grouped vertical: x is main group, xOffset is subgroup (group param)\n\n        base-encodings (cond-> {}\n                         x (assoc :x x)\n                         y (assoc :y y)\n                         color (assoc :color color))\n\n        encodings (if (and grouped? group)\n                    (if is-horizontal\n                      (assoc base-encodings :yOffset {:field group}) ;; Grouped horizontal bars use yOffset\n                      (assoc base-encodings :xOffset {:field group})) ;; Grouped vertical bars use xOffset\n                    base-encodings)\n\n        common-specs (cond-> {:mark \"bar\"}\n                       width (assoc :width width)\n                       height (assoc :height height)\n                       config (assoc :config config))]\n    (-> (api/base-plot encodings common-specs {:data-schema data-schema})\n        (api/add-transforms opts)\n        (api/wrap-with-facet opts)\n        (api/wrap-with-repeat opts)\n        (with-title title))))\n"]}