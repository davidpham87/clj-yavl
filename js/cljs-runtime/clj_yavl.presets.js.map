{"version":3,"sources":["clj_yavl/presets.cljc"],"mappings":"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","names":["js/clj-yavl","js/clj-yavl.presets","js/clj-yavl.presets.unit-spec","method-table__5622__auto__","cljs.core.atom","prefer-table__5623__auto__","method-cache__5624__auto__","cached-hierarchy__5625__auto__","hierarchy__5626__auto__","cljs.core.get","fexpr__26651","cljs.core/MultiFn","cljs.core.symbol","clj-yavl.presets/unit-spec","clj-yavl.presets/with-title","spec","title","cljs.core.assoc","p__26655","map__26656","cljs.core/--destructure-map","x","y","mark","color","size","data-schema","encodings","G__26658","common-specs","clj-yavl.api/base-plot","p__26673","map__26674","category","value","inner-radius","mark-def","G__26676","p__26678","map__26679","group","grouped?","orientation","is-horizontal","cljs.core._EQ_","base-encodings","G__26685","and__5023__auto__"],"sourcesContent":["(ns clj-yavl.presets\n  (:require [clj-yavl.api :as api]))\n\n(defmulti unit-spec\n  \"Generates a Vega-Lite spec based on the :type key in the options map.\"\n  :type)\n\n(defn- with-title [spec title]\n  (if title\n    (assoc spec :title title)\n    spec))\n\n(defmethod unit-spec :xyplot\n  [{:keys [x y mark color size title data-schema] :or {mark :point}}]\n  (let [encodings (cond-> {:x x :y y}\n                    color (assoc :color color)\n                    size (assoc :size size))\n        common-specs {:mark mark}]\n    (-> (api/base-plot encodings common-specs {:data-schema data-schema})\n        (with-title title))))\n\n(defmethod unit-spec :pie\n  [{:keys [category value inner-radius title data-schema]}]\n  (let [encodings {:theta {:field value :type \"quantitative\" :stack true}\n                   :color {:field category :type \"nominal\"}}\n        mark-def (cond-> {:type \"arc\"}\n                   inner-radius (assoc :innerRadius inner-radius))\n        common-specs {:mark mark-def}]\n    (-> (api/base-plot encodings common-specs {:data-schema data-schema})\n        (with-title title))))\n\n(defmethod unit-spec :bar\n  [{:keys [x y color group grouped? orientation title data-schema] :or {orientation :vertical}}]\n  (let [is-horizontal (= orientation :horizontal)\n        ;; For vertical bar: x is categorical usually, y is quantitative\n        ;; For grouped vertical: x is main group, xOffset is subgroup (group param)\n\n        base-encodings (cond-> {}\n                         x (assoc :x x)\n                         y (assoc :y y)\n                         color (assoc :color color))\n\n        encodings (if (and grouped? group)\n                    (if is-horizontal\n                      (assoc base-encodings :yOffset {:field group}) ;; Grouped horizontal bars use yOffset\n                      (assoc base-encodings :xOffset {:field group})) ;; Grouped vertical bars use xOffset\n                    base-encodings)\n\n        common-specs {:mark \"bar\"}]\n    (-> (api/base-plot encodings common-specs {:data-schema data-schema})\n        (with-title title))))\n"]}