{"version":3,"sources":["clj_yavl/presets.cljc"],"mappings":"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","names":["js/clj-yavl","js/clj-yavl.presets","js/clj-yavl.presets.unit-spec","method-table__5622__auto__","cljs.core.atom","prefer-table__5623__auto__","method-cache__5624__auto__","cached-hierarchy__5625__auto__","hierarchy__5626__auto__","cljs.core.get","fexpr__25231","cljs.core/MultiFn","cljs.core.symbol","clj-yavl.presets/unit-spec","clj-yavl.presets/with-title","spec","title","cljs.core.assoc","p__25232","map__25233","cljs.core/--destructure-map","x","y","mark","color","size","data-schema","width","height","config","encodings","G__25238","cljs.core/Keyword","cljs.core/name","common-specs","G__25239","clj-yavl.api/base-plot","p__25241","map__25242","category","value","inner-radius","mark-def","G__25243","G__25244","p__25245","map__25246","group","grouped?","orientation","is-horizontal","cljs.core._EQ_","base-encodings","G__25247","and__5023__auto__","G__25250"],"sourcesContent":["(ns clj-yavl.presets\n  (:require [clj-yavl.api :as api]))\n\n(defmulti unit-spec\n  \"Generates a Vega-Lite spec based on the :type key in the options map.\"\n  :type)\n\n(defn- with-title [spec title]\n  (if title\n    (assoc spec :title title)\n    spec))\n\n(defmethod unit-spec :xyplot\n  [{:keys [x y mark color size title data-schema width height config] :or {mark :point}}]\n  (let [encodings (cond-> {:x x :y y}\n                    color (assoc :color color)\n                    size (assoc :size size))\n        mark (if (keyword? mark) (name mark) mark)\n        common-specs (cond-> {:mark mark}\n                       width (assoc :width width)\n                       height (assoc :height height)\n                       config (assoc :config config))]\n    (-> (api/base-plot encodings common-specs {:data-schema data-schema})\n        (with-title title))))\n\n(defmethod unit-spec :pie\n  [{:keys [category value inner-radius title data-schema width height config]}]\n  (let [encodings {:theta {:field value :type \"quantitative\" :stack true}\n                   :color {:field category :type \"nominal\"}}\n        mark-def (cond-> {:type \"arc\"}\n                   inner-radius (assoc :innerRadius inner-radius))\n        common-specs (cond-> {:mark mark-def}\n                       width (assoc :width width)\n                       height (assoc :height height)\n                       config (assoc :config config))]\n    (-> (api/base-plot encodings common-specs {:data-schema data-schema})\n        (with-title title))))\n\n(defmethod unit-spec :bar\n  [{:keys [x y color group grouped? orientation title data-schema width height config] :or {orientation :vertical}}]\n  (let [is-horizontal (= orientation :horizontal)\n        ;; For vertical bar: x is categorical usually, y is quantitative\n        ;; For grouped vertical: x is main group, xOffset is subgroup (group param)\n\n        base-encodings (cond-> {}\n                         x (assoc :x x)\n                         y (assoc :y y)\n                         color (assoc :color color))\n\n        encodings (if (and grouped? group)\n                    (if is-horizontal\n                      (assoc base-encodings :yOffset {:field group}) ;; Grouped horizontal bars use yOffset\n                      (assoc base-encodings :xOffset {:field group})) ;; Grouped vertical bars use xOffset\n                    base-encodings)\n\n        common-specs (cond-> {:mark \"bar\"}\n                       width (assoc :width width)\n                       height (assoc :height height)\n                       config (assoc :config config))]\n    (-> (api/base-plot encodings common-specs {:data-schema data-schema})\n        (with-title title))))\n"]}