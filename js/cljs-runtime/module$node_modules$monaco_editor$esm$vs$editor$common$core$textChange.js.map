{
"version":3,
"file":"module$node_modules$monaco_editor$esm$vs$editor$common$core$textChange.js",
"lineCount":200,
"mappings":"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",
"sources":["node_modules/monaco-editor/esm/vs/editor/common/core/textChange.js"],
"sourcesContent":["shadow$provide[\"module$node_modules$monaco_editor$esm$vs$editor$common$core$textChange\"] = function(require,module,exports) {\nObject.defineProperties(exports, {__esModule:{enumerable:true, value:true}, TextChange:{enumerable:true, get:function() {\n  return TextChange;\n}}, compressConsecutiveTextChanges:{enumerable:true, get:function() {\n  return compressConsecutiveTextChanges;\n}}});\nvar buffer = require(\"../../../base/common/buffer.js\");\nvar require$_DOT__SLASH_stringBuilder_DOT_js = require(\"./stringBuilder.js\");\nfunction escapeNewLine(str) {\n  return str.replace(/\\n/g, \"\\\\n\").replace(/\\r/g, \"\\\\r\");\n}\nclass TextChange {\n  get oldLength() {\n    return this.oldText.length;\n  }\n  get oldEnd() {\n    return this.oldPosition + this.oldText.length;\n  }\n  get newLength() {\n    return this.newText.length;\n  }\n  get newEnd() {\n    return this.newPosition + this.newText.length;\n  }\n  constructor(oldPosition, oldText, newPosition, newText) {\n    this.oldPosition = oldPosition;\n    this.oldText = oldText;\n    this.newPosition = newPosition;\n    this.newText = newText;\n  }\n  toString() {\n    if (this.oldText.length === 0) {\n      return `(insert@${this.oldPosition} \"${escapeNewLine(this.newText)}\")`;\n    }\n    if (this.newText.length === 0) {\n      return `(delete@${this.oldPosition} \"${escapeNewLine(this.oldText)}\")`;\n    }\n    return `(replace@${this.oldPosition} \"${escapeNewLine(this.oldText)}\" with \"${escapeNewLine(this.newText)}\")`;\n  }\n  static _writeStringSize(str) {\n    return 4 + 2 * str.length;\n  }\n  static _writeString(b, str, offset) {\n    const len = str.length;\n    buffer.writeUInt32BE(b, len, offset);\n    offset += 4;\n    for (let i = 0; i < len; i++) {\n      buffer.writeUInt16LE(b, str.charCodeAt(i), offset);\n      offset += 2;\n    }\n    return offset;\n  }\n  static _readString(b, offset) {\n    const len = buffer.readUInt32BE(b, offset);\n    offset += 4;\n    return (0,require$_DOT__SLASH_stringBuilder_DOT_js.decodeUTF16LE)(b, offset, len);\n  }\n  writeSize() {\n    return +4 + 4 + TextChange._writeStringSize(this.oldText) + TextChange._writeStringSize(this.newText);\n  }\n  write(b, offset) {\n    buffer.writeUInt32BE(b, this.oldPosition, offset);\n    offset += 4;\n    buffer.writeUInt32BE(b, this.newPosition, offset);\n    offset += 4;\n    offset = TextChange._writeString(b, this.oldText, offset);\n    offset = TextChange._writeString(b, this.newText, offset);\n    return offset;\n  }\n  static read(b, offset, dest) {\n    const oldPosition = buffer.readUInt32BE(b, offset);\n    offset += 4;\n    const newPosition = buffer.readUInt32BE(b, offset);\n    offset += 4;\n    const oldText = TextChange._readString(b, offset);\n    offset += TextChange._writeStringSize(oldText);\n    const newText = TextChange._readString(b, offset);\n    offset += TextChange._writeStringSize(newText);\n    dest.push(new TextChange(oldPosition, oldText, newPosition, newText));\n    return offset;\n  }\n}\nfunction compressConsecutiveTextChanges(prevEdits, currEdits) {\n  if (prevEdits === null || prevEdits.length === 0) {\n    return currEdits;\n  }\n  const compressor = new TextChangeCompressor(prevEdits, currEdits);\n  return compressor.compress();\n}\nclass TextChangeCompressor {\n  constructor(prevEdits, currEdits) {\n    this._prevEdits = prevEdits;\n    this._currEdits = currEdits;\n    this._result = [];\n    this._resultLen = 0;\n    this._prevLen = this._prevEdits.length;\n    this._prevDeltaOffset = 0;\n    this._currLen = this._currEdits.length;\n    this._currDeltaOffset = 0;\n  }\n  compress() {\n    let prevIndex = 0;\n    let currIndex = 0;\n    let prevEdit = this._getPrev(prevIndex);\n    let currEdit = this._getCurr(currIndex);\n    while (prevIndex < this._prevLen || currIndex < this._currLen) {\n      if (prevEdit === null) {\n        this._acceptCurr(currEdit);\n        currEdit = this._getCurr(++currIndex);\n        continue;\n      }\n      if (currEdit === null) {\n        this._acceptPrev(prevEdit);\n        prevEdit = this._getPrev(++prevIndex);\n        continue;\n      }\n      if (currEdit.oldEnd <= prevEdit.newPosition) {\n        this._acceptCurr(currEdit);\n        currEdit = this._getCurr(++currIndex);\n        continue;\n      }\n      if (prevEdit.newEnd <= currEdit.oldPosition) {\n        this._acceptPrev(prevEdit);\n        prevEdit = this._getPrev(++prevIndex);\n        continue;\n      }\n      if (currEdit.oldPosition < prevEdit.newPosition) {\n        const [e1, e2] = TextChangeCompressor._splitCurr(currEdit, prevEdit.newPosition - currEdit.oldPosition);\n        this._acceptCurr(e1);\n        currEdit = e2;\n        continue;\n      }\n      if (prevEdit.newPosition < currEdit.oldPosition) {\n        const [e1, e2] = TextChangeCompressor._splitPrev(prevEdit, currEdit.oldPosition - prevEdit.newPosition);\n        this._acceptPrev(e1);\n        prevEdit = e2;\n        continue;\n      }\n      let mergePrev;\n      let mergeCurr;\n      if (currEdit.oldEnd === prevEdit.newEnd) {\n        mergePrev = prevEdit;\n        mergeCurr = currEdit;\n        prevEdit = this._getPrev(++prevIndex);\n        currEdit = this._getCurr(++currIndex);\n      } else if (currEdit.oldEnd < prevEdit.newEnd) {\n        const [e1, e2] = TextChangeCompressor._splitPrev(prevEdit, currEdit.oldLength);\n        mergePrev = e1;\n        mergeCurr = currEdit;\n        prevEdit = e2;\n        currEdit = this._getCurr(++currIndex);\n      } else {\n        const [e1, e2] = TextChangeCompressor._splitCurr(currEdit, prevEdit.newLength);\n        mergePrev = prevEdit;\n        mergeCurr = e1;\n        prevEdit = this._getPrev(++prevIndex);\n        currEdit = e2;\n      }\n      this._result[this._resultLen++] = new TextChange(mergePrev.oldPosition, mergePrev.oldText, mergeCurr.newPosition, mergeCurr.newText);\n      this._prevDeltaOffset += mergePrev.newLength - mergePrev.oldLength;\n      this._currDeltaOffset += mergeCurr.newLength - mergeCurr.oldLength;\n    }\n    const merged = TextChangeCompressor._merge(this._result);\n    const cleaned = TextChangeCompressor._removeNoOps(merged);\n    return cleaned;\n  }\n  _acceptCurr(currEdit) {\n    this._result[this._resultLen++] = TextChangeCompressor._rebaseCurr(this._prevDeltaOffset, currEdit);\n    this._currDeltaOffset += currEdit.newLength - currEdit.oldLength;\n  }\n  _getCurr(currIndex) {\n    return currIndex < this._currLen ? this._currEdits[currIndex] : null;\n  }\n  _acceptPrev(prevEdit) {\n    this._result[this._resultLen++] = TextChangeCompressor._rebasePrev(this._currDeltaOffset, prevEdit);\n    this._prevDeltaOffset += prevEdit.newLength - prevEdit.oldLength;\n  }\n  _getPrev(prevIndex) {\n    return prevIndex < this._prevLen ? this._prevEdits[prevIndex] : null;\n  }\n  static _rebaseCurr(prevDeltaOffset, currEdit) {\n    return new TextChange(currEdit.oldPosition - prevDeltaOffset, currEdit.oldText, currEdit.newPosition, currEdit.newText);\n  }\n  static _rebasePrev(currDeltaOffset, prevEdit) {\n    return new TextChange(prevEdit.oldPosition, prevEdit.oldText, prevEdit.newPosition + currDeltaOffset, prevEdit.newText);\n  }\n  static _splitPrev(edit, offset) {\n    const preText = edit.newText.substr(0, offset);\n    const postText = edit.newText.substr(offset);\n    return [new TextChange(edit.oldPosition, edit.oldText, edit.newPosition, preText), new TextChange(edit.oldEnd, \"\", edit.newPosition + offset, postText)];\n  }\n  static _splitCurr(edit, offset) {\n    const preText = edit.oldText.substr(0, offset);\n    const postText = edit.oldText.substr(offset);\n    return [new TextChange(edit.oldPosition, preText, edit.newPosition, edit.newText), new TextChange(edit.oldPosition + offset, postText, edit.newEnd, \"\")];\n  }\n  static _merge(edits) {\n    if (edits.length === 0) {\n      return edits;\n    }\n    const result = [];\n    let resultLen = 0;\n    let prev = edits[0];\n    for (let i = 1; i < edits.length; i++) {\n      const curr = edits[i];\n      if (prev.oldEnd === curr.oldPosition) {\n        prev = new TextChange(prev.oldPosition, prev.oldText + curr.oldText, prev.newPosition, prev.newText + curr.newText);\n      } else {\n        result[resultLen++] = prev;\n        prev = curr;\n      }\n    }\n    result[resultLen++] = prev;\n    return result;\n  }\n  static _removeNoOps(edits) {\n    if (edits.length === 0) {\n      return edits;\n    }\n    const result = [];\n    let resultLen = 0;\n    for (let i = 0; i < edits.length; i++) {\n      const edit = edits[i];\n      if (edit.oldText === edit.newText) {\n        continue;\n      }\n      result[resultLen++] = edit;\n    }\n    return result;\n  }\n}\n\n};"],
"names":["shadow$provide","require","module","exports","escapeNewLine","str","replace","compressConsecutiveTextChanges","prevEdits","currEdits","length","compress","compressor","TextChangeCompressor","Object","defineProperties","__esModule","enumerable","value","TextChange","get","buffer","require$_DOT__SLASH_stringBuilder_DOT_js","oldText","oldPosition","newText","newPosition","constructor","toString","_writeStringSize","_writeString","b","offset","len","writeUInt32BE","i","writeUInt16LE","charCodeAt","_readString","readUInt32BE","decodeUTF16LE","writeSize","write","read","dest","push","_prevEdits","_currEdits","_result","_resultLen","_prevLen","_prevDeltaOffset","_currLen","_currDeltaOffset","prevIndex","currIndex","prevEdit","_getPrev","currEdit","_getCurr","_acceptCurr","_acceptPrev","oldEnd","newEnd","e1","e2","_splitCurr","_splitPrev","mergePrev","mergeCurr","oldLength","newLength","merged","_merge","_removeNoOps","cleaned","_rebaseCurr","_rebasePrev","prevDeltaOffset","currDeltaOffset","edit","preText","substr","postText","edits","result","resultLen","prev","curr"]
}
