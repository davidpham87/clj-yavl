shadow$provide.module$node_modules$monaco_editor$esm$vs$editor$browser$view = function(require, module, exports) {
  function safeInvokeNoArg(func) {
    try {
      return func();
    } catch (e) {
      return (0,require$_DOT__DOT__SLASH__DOT__DOT__SLASH_base_SLASH_common_SLASH_errors_DOT_js.onUnexpectedError)(e), null;
    }
  }
  Object.defineProperties(exports, {__esModule:{enumerable:!0, value:!0}, View:{enumerable:!0, get:function() {
    return View;
  }}});
  var dom = require("module$node_modules$monaco_editor$esm$vs$base$browser$dom"), require$_DOT__DOT__SLASH_common_SLASH_core_SLASH_selection_DOT_js = require("module$node_modules$monaco_editor$esm$vs$editor$common$core$selection"), require$_DOT__DOT__SLASH_common_SLASH_core_SLASH_range_DOT_js = require("module$node_modules$monaco_editor$esm$vs$editor$common$core$range"), require$_DOT__DOT__SLASH__DOT__DOT__SLASH_base_SLASH_browser_SLASH_fastDomNode_DOT_js = require("module$node_modules$monaco_editor$esm$vs$base$browser$fastDomNode"), 
  require$_DOT__DOT__SLASH__DOT__DOT__SLASH_base_SLASH_common_SLASH_errors_DOT_js = require("module$node_modules$monaco_editor$esm$vs$base$common$errors"), require$_DOT__SLASH_controller_SLASH_pointerHandler_DOT_js = require("module$node_modules$monaco_editor$esm$vs$editor$browser$controller$pointerHandler"), require$_DOT__SLASH_controller_SLASH_textAreaHandler_DOT_js = require("module$node_modules$monaco_editor$esm$vs$editor$browser$controller$textAreaHandler"), require$_DOT__SLASH_view_SLASH_viewController_DOT_js = 
  require("module$node_modules$monaco_editor$esm$vs$editor$browser$view$viewController"), require$_DOT__SLASH_view_SLASH_viewUserInputEvents_DOT_js = require("module$node_modules$monaco_editor$esm$vs$editor$browser$view$viewUserInputEvents"), require$_DOT__SLASH_view_SLASH_viewOverlays_DOT_js = require("module$node_modules$monaco_editor$esm$vs$editor$browser$view$viewOverlays"), require$_DOT__SLASH_view_SLASH_viewPart_DOT_js = require("module$node_modules$monaco_editor$esm$vs$editor$browser$view$viewPart"), 
  require$_DOT__SLASH_viewParts_SLASH_contentWidgets_SLASH_contentWidgets_DOT_js = require("module$node_modules$monaco_editor$esm$vs$editor$browser$viewParts$contentWidgets$contentWidgets"), require$_DOT__SLASH_viewParts_SLASH_currentLineHighlight_SLASH_currentLineHighlight_DOT_js = require("module$node_modules$monaco_editor$esm$vs$editor$browser$viewParts$currentLineHighlight$currentLineHighlight"), require$_DOT__SLASH_viewParts_SLASH_decorations_SLASH_decorations_DOT_js = require("module$node_modules$monaco_editor$esm$vs$editor$browser$viewParts$decorations$decorations"), 
  require$_DOT__SLASH_viewParts_SLASH_editorScrollbar_SLASH_editorScrollbar_DOT_js = require("module$node_modules$monaco_editor$esm$vs$editor$browser$viewParts$editorScrollbar$editorScrollbar"), require$_DOT__SLASH_viewParts_SLASH_indentGuides_SLASH_indentGuides_DOT_js = require("module$node_modules$monaco_editor$esm$vs$editor$browser$viewParts$indentGuides$indentGuides"), require$_DOT__SLASH_viewParts_SLASH_lineNumbers_SLASH_lineNumbers_DOT_js = require("module$node_modules$monaco_editor$esm$vs$editor$browser$viewParts$lineNumbers$lineNumbers"), 
  require$_DOT__SLASH_viewParts_SLASH_lines_SLASH_viewLines_DOT_js = require("module$node_modules$monaco_editor$esm$vs$editor$browser$viewParts$lines$viewLines"), require$_DOT__SLASH_viewParts_SLASH_linesDecorations_SLASH_linesDecorations_DOT_js = require("module$node_modules$monaco_editor$esm$vs$editor$browser$viewParts$linesDecorations$linesDecorations"), require$_DOT__SLASH_viewParts_SLASH_margin_SLASH_margin_DOT_js = require("module$node_modules$monaco_editor$esm$vs$editor$browser$viewParts$margin$margin"), 
  require$_DOT__SLASH_viewParts_SLASH_marginDecorations_SLASH_marginDecorations_DOT_js = require("module$node_modules$monaco_editor$esm$vs$editor$browser$viewParts$marginDecorations$marginDecorations"), require$_DOT__SLASH_viewParts_SLASH_minimap_SLASH_minimap_DOT_js = require("module$node_modules$monaco_editor$esm$vs$editor$browser$viewParts$minimap$minimap"), require$_DOT__SLASH_viewParts_SLASH_overlayWidgets_SLASH_overlayWidgets_DOT_js = require("module$node_modules$monaco_editor$esm$vs$editor$browser$viewParts$overlayWidgets$overlayWidgets"), 
  require$_DOT__SLASH_viewParts_SLASH_overviewRuler_SLASH_decorationsOverviewRuler_DOT_js = require("module$node_modules$monaco_editor$esm$vs$editor$browser$viewParts$overviewRuler$decorationsOverviewRuler"), require$_DOT__SLASH_viewParts_SLASH_overviewRuler_SLASH_overviewRuler_DOT_js = require("module$node_modules$monaco_editor$esm$vs$editor$browser$viewParts$overviewRuler$overviewRuler"), require$_DOT__SLASH_viewParts_SLASH_rulers_SLASH_rulers_DOT_js = require("module$node_modules$monaco_editor$esm$vs$editor$browser$viewParts$rulers$rulers"), 
  require$_DOT__SLASH_viewParts_SLASH_scrollDecoration_SLASH_scrollDecoration_DOT_js = require("module$node_modules$monaco_editor$esm$vs$editor$browser$viewParts$scrollDecoration$scrollDecoration"), require$_DOT__SLASH_viewParts_SLASH_selections_SLASH_selections_DOT_js = require("module$node_modules$monaco_editor$esm$vs$editor$browser$viewParts$selections$selections"), require$_DOT__SLASH_viewParts_SLASH_viewCursors_SLASH_viewCursors_DOT_js = require("module$node_modules$monaco_editor$esm$vs$editor$browser$viewParts$viewCursors$viewCursors"), 
  require$_DOT__SLASH_viewParts_SLASH_viewZones_SLASH_viewZones_DOT_js = require("module$node_modules$monaco_editor$esm$vs$editor$browser$viewParts$viewZones$viewZones"), require$_DOT__DOT__SLASH_common_SLASH_core_SLASH_position_DOT_js = require("module$node_modules$monaco_editor$esm$vs$editor$common$core$position"), require$_DOT__SLASH_view_SLASH_renderingContext_DOT_js = require("module$node_modules$monaco_editor$esm$vs$editor$browser$view$renderingContext"), require$_DOT__DOT__SLASH_common_SLASH_viewModel_SLASH_viewContext_DOT_js = 
  require("module$node_modules$monaco_editor$esm$vs$editor$common$viewModel$viewContext"), require$_DOT__DOT__SLASH_common_SLASH_viewLayout_SLASH_viewLinesViewportData_DOT_js = require("module$node_modules$monaco_editor$esm$vs$editor$common$viewLayout$viewLinesViewportData");
  module = require("module$node_modules$monaco_editor$esm$vs$editor$common$viewEventHandler");
  var require$_DOT__DOT__SLASH__DOT__DOT__SLASH_platform_SLASH_theme_SLASH_common_SLASH_themeService_DOT_js = require("module$node_modules$monaco_editor$esm$vs$platform$theme$common$themeService"), require$_DOT__SLASH_controller_SLASH_mouseTarget_DOT_js = require("module$node_modules$monaco_editor$esm$vs$editor$browser$controller$mouseTarget"), require$_DOT__SLASH_viewParts_SLASH_blockDecorations_SLASH_blockDecorations_DOT_js = require("module$node_modules$monaco_editor$esm$vs$editor$browser$viewParts$blockDecorations$blockDecorations"), 
  require$_DOT__DOT__SLASH__DOT__DOT__SLASH_base_SLASH_browser_SLASH_performance_DOT_js = require("module$node_modules$monaco_editor$esm$vs$base$browser$performance"), require$_DOT__SLASH_viewParts_SLASH_whitespace_SLASH_whitespace_DOT_js = require("module$node_modules$monaco_editor$esm$vs$editor$browser$viewParts$whitespace$whitespace"), require$_DOT__SLASH_viewParts_SLASH_glyphMargin_SLASH_glyphMargin_DOT_js = require("module$node_modules$monaco_editor$esm$vs$editor$browser$viewParts$glyphMargin$glyphMargin"), 
  require$_DOT__DOT__SLASH_common_SLASH_model_DOT_js = require("module$node_modules$monaco_editor$esm$vs$editor$common$model");
  require = require("module$node_modules$monaco_editor$esm$vs$platform$instantiation$common$instantiation");
  let View = class extends module.ViewEventHandler {
    constructor(commandDelegate, configuration, colorTheme, model, userInputEvents, overflowWidgetsDomNode, _instantiationService) {
      super();
      this._instantiationService = _instantiationService;
      this._shouldRecomputeGlyphMarginLanes = !1;
      this._selections = [new require$_DOT__DOT__SLASH_common_SLASH_core_SLASH_selection_DOT_js.Selection(1, 1, 1, 1)];
      this._renderAnimationFrame = null;
      commandDelegate = new require$_DOT__SLASH_view_SLASH_viewController_DOT_js.ViewController(configuration, model, userInputEvents, commandDelegate);
      this._context = new require$_DOT__DOT__SLASH_common_SLASH_viewModel_SLASH_viewContext_DOT_js.ViewContext(configuration, colorTheme, model);
      this._context.addEventHandler(this);
      this._viewParts = [];
      this._textAreaHandler = this._instantiationService.createInstance(require$_DOT__SLASH_controller_SLASH_textAreaHandler_DOT_js.TextAreaHandler, this._context, commandDelegate, this._createTextAreaHandlerHelper());
      this._viewParts.push(this._textAreaHandler);
      this._linesContent = (0,require$_DOT__DOT__SLASH__DOT__DOT__SLASH_base_SLASH_browser_SLASH_fastDomNode_DOT_js.createFastDomNode)(document.createElement("div"));
      this._linesContent.setClassName("lines-content monaco-editor-background");
      this._linesContent.setPosition("absolute");
      this.domNode = (0,require$_DOT__DOT__SLASH__DOT__DOT__SLASH_base_SLASH_browser_SLASH_fastDomNode_DOT_js.createFastDomNode)(document.createElement("div"));
      this.domNode.setClassName(this._getEditorClassName());
      this.domNode.setAttribute("role", "code");
      this._overflowGuardContainer = (0,require$_DOT__DOT__SLASH__DOT__DOT__SLASH_base_SLASH_browser_SLASH_fastDomNode_DOT_js.createFastDomNode)(document.createElement("div"));
      require$_DOT__SLASH_view_SLASH_viewPart_DOT_js.PartFingerprints.write(this._overflowGuardContainer, 3);
      this._overflowGuardContainer.setClassName("overflow-guard");
      this._scrollbar = new require$_DOT__SLASH_viewParts_SLASH_editorScrollbar_SLASH_editorScrollbar_DOT_js.EditorScrollbar(this._context, this._linesContent, this.domNode, this._overflowGuardContainer);
      this._viewParts.push(this._scrollbar);
      this._viewLines = new require$_DOT__SLASH_viewParts_SLASH_lines_SLASH_viewLines_DOT_js.ViewLines(this._context, this._linesContent);
      this._viewZones = new require$_DOT__SLASH_viewParts_SLASH_viewZones_SLASH_viewZones_DOT_js.ViewZones(this._context);
      this._viewParts.push(this._viewZones);
      configuration = new require$_DOT__SLASH_viewParts_SLASH_overviewRuler_SLASH_decorationsOverviewRuler_DOT_js.DecorationsOverviewRuler(this._context);
      this._viewParts.push(configuration);
      colorTheme = new require$_DOT__SLASH_viewParts_SLASH_scrollDecoration_SLASH_scrollDecoration_DOT_js.ScrollDecorationViewPart(this._context);
      this._viewParts.push(colorTheme);
      model = new require$_DOT__SLASH_view_SLASH_viewOverlays_DOT_js.ContentViewOverlays(this._context);
      this._viewParts.push(model);
      model.addDynamicOverlay(new require$_DOT__SLASH_viewParts_SLASH_currentLineHighlight_SLASH_currentLineHighlight_DOT_js.CurrentLineHighlightOverlay(this._context));
      model.addDynamicOverlay(new require$_DOT__SLASH_viewParts_SLASH_selections_SLASH_selections_DOT_js.SelectionsOverlay(this._context));
      model.addDynamicOverlay(new require$_DOT__SLASH_viewParts_SLASH_indentGuides_SLASH_indentGuides_DOT_js.IndentGuidesOverlay(this._context));
      model.addDynamicOverlay(new require$_DOT__SLASH_viewParts_SLASH_decorations_SLASH_decorations_DOT_js.DecorationsOverlay(this._context));
      model.addDynamicOverlay(new require$_DOT__SLASH_viewParts_SLASH_whitespace_SLASH_whitespace_DOT_js.WhitespaceOverlay(this._context));
      _instantiationService = new require$_DOT__SLASH_view_SLASH_viewOverlays_DOT_js.MarginViewOverlays(this._context);
      this._viewParts.push(_instantiationService);
      _instantiationService.addDynamicOverlay(new require$_DOT__SLASH_viewParts_SLASH_currentLineHighlight_SLASH_currentLineHighlight_DOT_js.CurrentLineMarginHighlightOverlay(this._context));
      _instantiationService.addDynamicOverlay(new require$_DOT__SLASH_viewParts_SLASH_marginDecorations_SLASH_marginDecorations_DOT_js.MarginViewLineDecorationsOverlay(this._context));
      _instantiationService.addDynamicOverlay(new require$_DOT__SLASH_viewParts_SLASH_linesDecorations_SLASH_linesDecorations_DOT_js.LinesDecorationsOverlay(this._context));
      _instantiationService.addDynamicOverlay(new require$_DOT__SLASH_viewParts_SLASH_lineNumbers_SLASH_lineNumbers_DOT_js.LineNumbersOverlay(this._context));
      this._glyphMarginWidgets = new require$_DOT__SLASH_viewParts_SLASH_glyphMargin_SLASH_glyphMargin_DOT_js.GlyphMarginWidgets(this._context);
      this._viewParts.push(this._glyphMarginWidgets);
      userInputEvents = new require$_DOT__SLASH_viewParts_SLASH_margin_SLASH_margin_DOT_js.Margin(this._context);
      userInputEvents.getDomNode().appendChild(this._viewZones.marginDomNode);
      userInputEvents.getDomNode().appendChild(_instantiationService.getDomNode());
      userInputEvents.getDomNode().appendChild(this._glyphMarginWidgets.domNode);
      this._viewParts.push(userInputEvents);
      this._contentWidgets = new require$_DOT__SLASH_viewParts_SLASH_contentWidgets_SLASH_contentWidgets_DOT_js.ViewContentWidgets(this._context, this.domNode);
      this._viewParts.push(this._contentWidgets);
      this._viewCursors = new require$_DOT__SLASH_viewParts_SLASH_viewCursors_SLASH_viewCursors_DOT_js.ViewCursors(this._context);
      this._viewParts.push(this._viewCursors);
      this._overlayWidgets = new require$_DOT__SLASH_viewParts_SLASH_overlayWidgets_SLASH_overlayWidgets_DOT_js.ViewOverlayWidgets(this._context);
      this._viewParts.push(this._overlayWidgets);
      _instantiationService = new require$_DOT__SLASH_viewParts_SLASH_rulers_SLASH_rulers_DOT_js.Rulers(this._context);
      this._viewParts.push(_instantiationService);
      const blockOutline = new require$_DOT__SLASH_viewParts_SLASH_blockDecorations_SLASH_blockDecorations_DOT_js.BlockDecorations(this._context);
      this._viewParts.push(blockOutline);
      const minimap = new require$_DOT__SLASH_viewParts_SLASH_minimap_SLASH_minimap_DOT_js.Minimap(this._context);
      this._viewParts.push(minimap);
      if (configuration) {
        const overviewRulerData = this._scrollbar.getOverviewRulerLayoutInfo();
        overviewRulerData.parent.insertBefore(configuration.getDomNode(), overviewRulerData.insertBefore);
      }
      this._linesContent.appendChild(model.getDomNode());
      this._linesContent.appendChild(_instantiationService.domNode);
      this._linesContent.appendChild(this._viewZones.domNode);
      this._linesContent.appendChild(this._viewLines.getDomNode());
      this._linesContent.appendChild(this._contentWidgets.domNode);
      this._linesContent.appendChild(this._viewCursors.getDomNode());
      this._overflowGuardContainer.appendChild(userInputEvents.getDomNode());
      this._overflowGuardContainer.appendChild(this._scrollbar.getDomNode());
      this._overflowGuardContainer.appendChild(colorTheme.getDomNode());
      this._overflowGuardContainer.appendChild(this._textAreaHandler.textArea);
      this._overflowGuardContainer.appendChild(this._textAreaHandler.textAreaCover);
      this._overflowGuardContainer.appendChild(this._overlayWidgets.getDomNode());
      this._overflowGuardContainer.appendChild(minimap.getDomNode());
      this._overflowGuardContainer.appendChild(blockOutline.domNode);
      this.domNode.appendChild(this._overflowGuardContainer);
      overflowWidgetsDomNode ? overflowWidgetsDomNode.appendChild(this._contentWidgets.overflowingContentWidgetsDomNode.domNode) : this.domNode.appendChild(this._contentWidgets.overflowingContentWidgetsDomNode);
      this._applyLayout();
      this._pointerHandler = this._register(new require$_DOT__SLASH_controller_SLASH_pointerHandler_DOT_js.PointerHandler(this._context, commandDelegate, this._createPointerHandlerHelper()));
    }
    _computeGlyphMarginLaneCount() {
      const model = this._context.viewModel.model;
      let glyphs = [];
      glyphs = glyphs.concat(model.getAllMarginDecorations().map(decoration => {
        var _a, _b;
        const lane = (_b = (_a = decoration.options.glyphMargin) === null || _a === void 0 ? void 0 : _a.position) !== null && _b !== void 0 ? _b : require$_DOT__DOT__SLASH_common_SLASH_model_DOT_js.GlyphMarginLane.Left;
        return {range:decoration.range, lane};
      }));
      glyphs = glyphs.concat(this._glyphMarginWidgets.getWidgets().map(widget => ({range:model.validateRange(widget.preference.range), lane:widget.preference.lane})));
      glyphs.sort((a, b) => require$_DOT__DOT__SLASH_common_SLASH_core_SLASH_range_DOT_js.Range.compareRangesUsingStarts(a.range, b.range));
      let leftDecRange = null, rightDecRange = null;
      for (const decoration of glyphs) {
        if (decoration.lane === require$_DOT__DOT__SLASH_common_SLASH_model_DOT_js.GlyphMarginLane.Left && (!leftDecRange || require$_DOT__DOT__SLASH_common_SLASH_core_SLASH_range_DOT_js.Range.compareRangesUsingEnds(leftDecRange, decoration.range) < 0) && (leftDecRange = decoration.range), decoration.lane === require$_DOT__DOT__SLASH_common_SLASH_model_DOT_js.GlyphMarginLane.Right && (!rightDecRange || require$_DOT__DOT__SLASH_common_SLASH_core_SLASH_range_DOT_js.Range.compareRangesUsingEnds(rightDecRange, 
        decoration.range) < 0) && (rightDecRange = decoration.range), leftDecRange && rightDecRange) {
          if (leftDecRange.endLineNumber < rightDecRange.startLineNumber) {
            leftDecRange = null;
          } else {
            if (rightDecRange.endLineNumber < leftDecRange.startLineNumber) {
              rightDecRange = null;
            } else {
              return 2;
            }
          }
        }
      }
      return 1;
    }
    _createPointerHandlerHelper() {
      return {viewDomNode:this.domNode.domNode, linesContentDomNode:this._linesContent.domNode, viewLinesDomNode:this._viewLines.getDomNode().domNode, focusTextArea:() => {
        this.focus();
      }, dispatchTextAreaEvent:event => {
        this._textAreaHandler.textArea.domNode.dispatchEvent(event);
      }, getLastRenderData:() => {
        const lastViewCursorsRenderData = this._viewCursors.getLastRenderData() || [], lastTextareaPosition = this._textAreaHandler.getLastRenderData();
        return new require$_DOT__SLASH_controller_SLASH_mouseTarget_DOT_js.PointerHandlerLastRenderData(lastViewCursorsRenderData, lastTextareaPosition);
      }, renderNow:() => {
        this.render(!0, !1);
      }, shouldSuppressMouseDownOnViewZone:viewZoneId => this._viewZones.shouldSuppressMouseDownOnViewZone(viewZoneId), shouldSuppressMouseDownOnWidget:widgetId => this._contentWidgets.shouldSuppressMouseDownOnWidget(widgetId), getPositionFromDOMInfo:(spanNode, offset) => {
        this._flushAccumulatedAndRenderNow();
        return this._viewLines.getPositionFromDOMInfo(spanNode, offset);
      }, visibleRangeForPosition:(lineNumber, column) => {
        this._flushAccumulatedAndRenderNow();
        return this._viewLines.visibleRangeForPosition(new require$_DOT__DOT__SLASH_common_SLASH_core_SLASH_position_DOT_js.Position(lineNumber, column));
      }, getLineWidth:lineNumber => {
        this._flushAccumulatedAndRenderNow();
        return this._viewLines.getLineWidth(lineNumber);
      }};
    }
    _createTextAreaHandlerHelper() {
      return {visibleRangeForPosition:position => {
        this._flushAccumulatedAndRenderNow();
        return this._viewLines.visibleRangeForPosition(position);
      }};
    }
    _applyLayout() {
      const layoutInfo = this._context.configuration.options.get(143);
      this.domNode.setWidth(layoutInfo.width);
      this.domNode.setHeight(layoutInfo.height);
      this._overflowGuardContainer.setWidth(layoutInfo.width);
      this._overflowGuardContainer.setHeight(layoutInfo.height);
      this._linesContent.setWidth(1000000);
      this._linesContent.setHeight(1000000);
    }
    _getEditorClassName() {
      const focused = this._textAreaHandler.isFocused() ? " focused" : "";
      return this._context.configuration.options.get(140) + " " + (0,require$_DOT__DOT__SLASH__DOT__DOT__SLASH_platform_SLASH_theme_SLASH_common_SLASH_themeService_DOT_js.getThemeTypeSelector)(this._context.theme.type) + focused;
    }
    handleEvents(events) {
      super.handleEvents(events);
      this._scheduleRender();
    }
    onConfigurationChanged(e) {
      this.domNode.setClassName(this._getEditorClassName());
      this._applyLayout();
      return !1;
    }
    onCursorStateChanged(e) {
      this._selections = e.selections;
      return !1;
    }
    onDecorationsChanged(e) {
      e.affectsGlyphMargin && (this._shouldRecomputeGlyphMarginLanes = !0);
      return !1;
    }
    onFocusChanged(e) {
      this.domNode.setClassName(this._getEditorClassName());
      return !1;
    }
    onThemeChanged(e) {
      this._context.theme.update(e.theme);
      this.domNode.setClassName(this._getEditorClassName());
      return !1;
    }
    dispose() {
      this._renderAnimationFrame !== null && (this._renderAnimationFrame.dispose(), this._renderAnimationFrame = null);
      this._contentWidgets.overflowingContentWidgetsDomNode.domNode.remove();
      this._context.removeEventHandler(this);
      this._viewLines.dispose();
      for (const viewPart of this._viewParts) {
        viewPart.dispose();
      }
      super.dispose();
    }
    _scheduleRender() {
      if (this._store.isDisposed) {
        throw new require$_DOT__DOT__SLASH__DOT__DOT__SLASH_base_SLASH_common_SLASH_errors_DOT_js.BugIndicatingError();
      }
      if (this._renderAnimationFrame === null) {
        const rendering = this._createCoordinatedRendering();
        this._renderAnimationFrame = EditorRenderingCoordinator.INSTANCE.scheduleCoordinatedRendering({window:dom.getWindow(this.domNode.domNode), prepareRenderText:() => {
          if (this._store.isDisposed) {
            throw new require$_DOT__DOT__SLASH__DOT__DOT__SLASH_base_SLASH_common_SLASH_errors_DOT_js.BugIndicatingError();
          }
          try {
            return rendering.prepareRenderText();
          } finally {
            this._renderAnimationFrame = null;
          }
        }, renderText:() => {
          if (this._store.isDisposed) {
            throw new require$_DOT__DOT__SLASH__DOT__DOT__SLASH_base_SLASH_common_SLASH_errors_DOT_js.BugIndicatingError();
          }
          return rendering.renderText();
        }, prepareRender:(viewParts, ctx) => {
          if (this._store.isDisposed) {
            throw new require$_DOT__DOT__SLASH__DOT__DOT__SLASH_base_SLASH_common_SLASH_errors_DOT_js.BugIndicatingError();
          }
          return rendering.prepareRender(viewParts, ctx);
        }, render:(viewParts, ctx) => {
          if (this._store.isDisposed) {
            throw new require$_DOT__DOT__SLASH__DOT__DOT__SLASH_base_SLASH_common_SLASH_errors_DOT_js.BugIndicatingError();
          }
          return rendering.render(viewParts, ctx);
        }});
      }
    }
    _flushAccumulatedAndRenderNow() {
      const rendering = this._createCoordinatedRendering();
      safeInvokeNoArg(() => rendering.prepareRenderText());
      const data = safeInvokeNoArg(() => rendering.renderText());
      if (data) {
        const [viewParts, ctx] = data;
        safeInvokeNoArg(() => rendering.prepareRender(viewParts, ctx));
        safeInvokeNoArg(() => rendering.render(viewParts, ctx));
      }
    }
    _getViewPartsToRender() {
      const result = [];
      let resultLen = 0;
      for (const viewPart of this._viewParts) {
        viewPart.shouldRender() && (result[resultLen++] = viewPart);
      }
      return result;
    }
    _createCoordinatedRendering() {
      return {prepareRenderText:() => {
        this._shouldRecomputeGlyphMarginLanes && (this._shouldRecomputeGlyphMarginLanes = !1, this._context.configuration.setGlyphMarginDecorationLaneCount(this._computeGlyphMarginLaneCount()));
        require$_DOT__DOT__SLASH__DOT__DOT__SLASH_base_SLASH_browser_SLASH_performance_DOT_js.inputLatency.onRenderStart();
      }, renderText:() => {
        if (!this.domNode.domNode.isConnected) {
          return null;
        }
        let viewPartsToRender = this._getViewPartsToRender();
        if (!this._viewLines.shouldRender() && viewPartsToRender.length === 0) {
          return null;
        }
        var partialViewportData = this._context.viewLayout.getLinesViewportData();
        this._context.viewModel.setViewport(partialViewportData.startLineNumber, partialViewportData.endLineNumber, partialViewportData.centeredLineNumber);
        partialViewportData = new require$_DOT__DOT__SLASH_common_SLASH_viewLayout_SLASH_viewLinesViewportData_DOT_js.ViewportData(this._selections, partialViewportData, this._context.viewLayout.getWhitespaceViewportData(), this._context.viewModel);
        if (this._contentWidgets.shouldRender()) {
          this._contentWidgets.onBeforeRender(partialViewportData);
        }
        this._viewLines.shouldRender() && (this._viewLines.renderText(partialViewportData), this._viewLines.onDidRender(), viewPartsToRender = this._getViewPartsToRender());
        return [viewPartsToRender, new require$_DOT__SLASH_view_SLASH_renderingContext_DOT_js.RenderingContext(this._context.viewLayout, partialViewportData, this._viewLines)];
      }, prepareRender:(viewPartsToRender, ctx) => {
        for (const viewPart of viewPartsToRender) {
          viewPart.prepareRender(ctx);
        }
      }, render:(viewPartsToRender, ctx) => {
        for (const viewPart of viewPartsToRender) {
          viewPart.render(ctx), viewPart.onDidRender();
        }
      }};
    }
    delegateVerticalScrollbarPointerDown(browserEvent) {
      this._scrollbar.delegateVerticalScrollbarPointerDown(browserEvent);
    }
    delegateScrollFromMouseWheelEvent(browserEvent) {
      this._scrollbar.delegateScrollFromMouseWheelEvent(browserEvent);
    }
    restoreState(scrollPosition) {
      this._context.viewModel.viewLayout.setScrollPosition({scrollTop:scrollPosition.scrollTop, scrollLeft:scrollPosition.scrollLeft}, 1);
      this._context.viewModel.visibleLinesStabilized();
    }
    getOffsetForColumn(modelLineNumber, modelColumn) {
      modelLineNumber = this._context.viewModel.model.validatePosition({lineNumber:modelLineNumber, column:modelColumn});
      modelLineNumber = this._context.viewModel.coordinatesConverter.convertModelPositionToViewPosition(modelLineNumber);
      this._flushAccumulatedAndRenderNow();
      return (modelLineNumber = this._viewLines.visibleRangeForPosition(new require$_DOT__DOT__SLASH_common_SLASH_core_SLASH_position_DOT_js.Position(modelLineNumber.lineNumber, modelLineNumber.column))) ? modelLineNumber.left : -1;
    }
    getTargetAtClientPoint(clientX, clientY) {
      return (clientX = this._pointerHandler.getTargetAtClientPoint(clientX, clientY)) ? require$_DOT__SLASH_view_SLASH_viewUserInputEvents_DOT_js.ViewUserInputEvents.convertViewToModelMouseTarget(clientX, this._context.viewModel.coordinatesConverter) : null;
    }
    createOverviewRuler(cssClassName) {
      return new require$_DOT__SLASH_viewParts_SLASH_overviewRuler_SLASH_overviewRuler_DOT_js.OverviewRuler(this._context, cssClassName);
    }
    change(callback) {
      this._viewZones.changeViewZones(callback);
      this._scheduleRender();
    }
    render(now, everything) {
      if (everything) {
        this._viewLines.forceShouldRender();
        for (const viewPart of this._viewParts) {
          viewPart.forceShouldRender();
        }
      }
      now ? this._flushAccumulatedAndRenderNow() : this._scheduleRender();
    }
    writeScreenReaderContent(reason) {
      this._textAreaHandler.writeScreenReaderContent(reason);
    }
    focus() {
      this._textAreaHandler.focusTextArea();
    }
    isFocused() {
      return this._textAreaHandler.isFocused();
    }
    setAriaOptions(options) {
      this._textAreaHandler.setAriaOptions(options);
    }
    addContentWidget(widgetData) {
      this._contentWidgets.addWidget(widgetData.widget);
      this.layoutContentWidget(widgetData);
      this._scheduleRender();
    }
    layoutContentWidget(widgetData) {
      var _a, _b, _c, _d, _e, _f, _g, _h;
      this._contentWidgets.setWidgetPosition(widgetData.widget, (_b = (_a = widgetData.position) === null || _a === void 0 ? void 0 : _a.position) !== null && _b !== void 0 ? _b : null, (_d = (_c = widgetData.position) === null || _c === void 0 ? void 0 : _c.secondaryPosition) !== null && _d !== void 0 ? _d : null, (_f = (_e = widgetData.position) === null || _e === void 0 ? void 0 : _e.preference) !== null && _f !== void 0 ? _f : null, (_h = (_g = widgetData.position) === null || _g === void 0 ? 
      void 0 : _g.positionAffinity) !== null && _h !== void 0 ? _h : null);
      this._scheduleRender();
    }
    removeContentWidget(widgetData) {
      this._contentWidgets.removeWidget(widgetData.widget);
      this._scheduleRender();
    }
    addOverlayWidget(widgetData) {
      this._overlayWidgets.addWidget(widgetData.widget);
      this.layoutOverlayWidget(widgetData);
      this._scheduleRender();
    }
    layoutOverlayWidget(widgetData) {
      this._overlayWidgets.setWidgetPosition(widgetData.widget, widgetData.position ? widgetData.position.preference : null) && this._scheduleRender();
    }
    removeOverlayWidget(widgetData) {
      this._overlayWidgets.removeWidget(widgetData.widget);
      this._scheduleRender();
    }
    addGlyphMarginWidget(widgetData) {
      this._glyphMarginWidgets.addWidget(widgetData.widget);
      this._shouldRecomputeGlyphMarginLanes = !0;
      this._scheduleRender();
    }
    layoutGlyphMarginWidget(widgetData) {
      this._glyphMarginWidgets.setWidgetPosition(widgetData.widget, widgetData.position) && (this._shouldRecomputeGlyphMarginLanes = !0, this._scheduleRender());
    }
    removeGlyphMarginWidget(widgetData) {
      this._glyphMarginWidgets.removeWidget(widgetData.widget);
      this._shouldRecomputeGlyphMarginLanes = !0;
      this._scheduleRender();
    }
  };
  View = (this && this.__decorate || function(decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") {
      r = Reflect.decorate(decorators, target, key, desc);
    } else {
      for (var i = decorators.length - 1; i >= 0; i--) {
        if (d = decorators[i]) {
          r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
        }
      }
    }
    return c > 3 && r && Object.defineProperty(target, key, r), r;
  })([(this && this.__param || function(paramIndex, decorator) {
    return function(target, key) {
      decorator(target, key, paramIndex);
    };
  })(6, require.IInstantiationService)], View);
  class EditorRenderingCoordinator {
    constructor() {
      this._coordinatedRenderings = [];
      this._animationFrameRunners = new Map();
    }
    scheduleCoordinatedRendering(rendering) {
      this._coordinatedRenderings.push(rendering);
      this._scheduleRender(rendering.window);
      return {dispose:() => {
        const renderingIndex = this._coordinatedRenderings.indexOf(rendering);
        if (renderingIndex !== -1 && (this._coordinatedRenderings.splice(renderingIndex, 1), this._coordinatedRenderings.length === 0)) {
          for (const [, disposable] of this._animationFrameRunners) {
            disposable.dispose();
          }
          this._animationFrameRunners.clear();
        }
      }};
    }
    _scheduleRender(window) {
      this._animationFrameRunners.has(window) || this._animationFrameRunners.set(window, dom.runAtThisOrScheduleAtNextAnimationFrame(window, () => {
        this._animationFrameRunners.delete(window);
        this._onRenderScheduled();
      }, 100));
    }
    _onRenderScheduled() {
      const coordinatedRenderings = this._coordinatedRenderings.slice(0);
      this._coordinatedRenderings = [];
      for (const rendering of coordinatedRenderings) {
        safeInvokeNoArg(() => rendering.prepareRenderText());
      }
      const datas = [];
      for (let i = 0, len = coordinatedRenderings.length; i < len; i++) {
        const rendering = coordinatedRenderings[i];
        datas[i] = safeInvokeNoArg(() => rendering.renderText());
      }
      for (let i = 0, len = coordinatedRenderings.length; i < len; i++) {
        const rendering = coordinatedRenderings[i];
        var data = datas[i];
        if (!data) {
          continue;
        }
        const [viewParts, ctx] = data;
        safeInvokeNoArg(() => rendering.prepareRender(viewParts, ctx));
      }
      for (let i = 0, len = coordinatedRenderings.length; i < len; i++) {
        const rendering = coordinatedRenderings[i];
        data = datas[i];
        if (!data) {
          continue;
        }
        const [viewParts, ctx] = data;
        safeInvokeNoArg(() => rendering.render(viewParts, ctx));
      }
    }
  }
  EditorRenderingCoordinator.INSTANCE = new EditorRenderingCoordinator();
};

//# sourceMappingURL=module$node_modules$monaco_editor$esm$vs$editor$browser$view.js.map
