{
"version":3,
"file":"module$node_modules$vega_view$build$vega_view.js",
"lineCount":791,
"mappings":"AAAAA,cAAA,CAAA,6CAAA,GAAkE,QAAQ,CAACC,OAAD,EAASC,MAAT,EAAgBC,OAAhB,CAAyB;AAClG,WAAS,CAACC,MAAD,EAASC,OAAT,CAAkB;AAC1B,UAAOF,QAAP,KAAmB,QAAnB,IAA+B,MAAOD,OAAtC,KAAiD,WAAjD,GAA+DG,OAAA,CAAQF,OAAR,EAAiBF,OAAA,CAAQ,+CAAR,CAAjB,EAAuCA,OAAA,CAAQ,uDAAR,CAAvC,EAAiEA,OAAA,CAAQ,2DAAR,CAAjE,EAA6FA,OAAA,CAAQ,yDAAR,CAA7F,EAAwHA,OAAA,CAAQ,qDAAR,CAAxH,EAAiJA,OAAA,CAAQ,mDAAR,CAAjJ,CAA/D,GACA,MAAOK,OAAP,KAAkB,UAAlB;AAAgCA,UAAOC,CAAAA,GAAvC,GAA6CD,MAAA,CAAO,yFAAA,CAAA,KAAA,CAAA,GAAA,CAAP,EAAsHD,OAAtH,CAA7C,IACCD,MAAA,GAAS,MAAOI,WAAP,KAAsB,WAAtB,GAAoCA,UAApC,GAAiDJ,MAAjD,IAA2DK,IAApE,EAA0EJ,OAAA,CAAQD,MAAOM,CAAAA,IAAf,GAAsB,EAAtB,EAA0BN,MAAOM,CAAAA,IAAjC,EAAuCN,MAAOM,CAAAA,IAA9C,EAAoDN,MAAOM,CAAAA,IAA3D,EAAiEN,MAAOM,CAAAA,IAAxE,EAA8EN,MAAOM,CAAAA,IAArF,EAA2FN,MAAOM,CAAAA,IAAlG,CAD3E,CADA;AAD0B,GAA3B,CAAD,CAIG,IAJH,EAIU,QAAS,CAACP,OAAD,EAAUQ,QAAV,EAAoBC,YAApB,EAAkCC,cAAlC,EAAkDC,aAAlD,EAAiEC,WAAjE,EAA8EC,UAA9E,CAA0F;AAG3GC,YAASA,eAAc,CAACC,IAAD,CAAO;AAC5B,YAAMC,KAAKD,IAAKE,CAAAA,SAAL,EAAX;AACID,QAAJ,KACEA,EAAGE,CAAAA,YAAH,CAAgB,MAAhB,EAAwB,mBAAxB,CAEA,EADAF,EAAGE,CAAAA,YAAH,CAAgB,sBAAhB,EAAwC,eAAxC,CACA,EAAAC,SAAA,CAAUH,EAAV,EAAcD,IAAKK,CAAAA,WAAL,EAAd,CAHF;AAF4B;AAU9BD,YAASA,UAAS,CAACH,EAAD,EAAKK,IAAL,CAAW;AACvBL,QAAJ,KAAQK,IAAA,IAAQ,IAAR,GAAeL,EAAGM,CAAAA,eAAH,CAAmB,YAAnB,CAAf,GAAkDN,EAAGE,CAAAA,YAAH,CAAgB,YAAhB,EAA8BG,IAA9B,CAA1D;AAD2B;AAI7BE,YAASA,WAAW,CAACR,IAAD,CAAO;AAEzBA,UAAKS,CAAAA,GAAL,CAAS,IAAT,EAAeC,CAAA,IAAK;AAClBV,YAAKW,CAAAA,WAAL,GAAmBD,CAAEE,CAAAA,EAArB;AACAZ,YAAKa,CAAAA,OAAL,GAAe,CAAf;AACA,eAAOH,CAAEE,CAAAA,EAAT;AAHkB,OAApB,EAIG,CACDA,GAAIZ,IAAKc,CAAAA,QAASN,CAAAA,UADjB,CAJH,CAAA;AAFyB;AAY3BO,YAASA,OAAO,CAACf,IAAD,CAAO;AAErB,YAAMe,SAASf,IAAKc,CAAAA,QAASC,CAAAA,MAAvBA,KAAkCf,IAAKc,CAAAA,QAASC,CAAAA,MAAhDA,GAAyDf,IAAKS,CAAAA,GAAL,CAAS,CACtEO,KAJYC,SAG0D,EAEtEC,KAAM,IAFgE,CAAT,CAAzDH,CAAN;AAMAf,UAAKmB,CAAAA,EAAL,CAAQnB,IAAKoB,CAAAA,MAAL,CAAY,MAAZ,EAAoB,aAApB,CAAR,EAA4CL,MAA5C,EAAoD,CAACL,CAAD,EAAIW,KAAJ,CAAA,IAAc;AAAA,cAE9DL,OAAO,CADHM,CACG,GADKP,MAAOO,CAAAA,KACZ,IAAQ7B,QAAS8B,CAAAA,QAAT,CAAkBD,CAAlB,CAAA,GAA2BA,CAA3B,GAAmCA,CAAMN,CAAAA,IAAjD,GAXGC,SASoD;AAG9DC,aAAAA,GAAOG,KAAMH,CAAAA,IAAbA,IAAqBG,KAAMH,CAAAA,IAAKH,CAAAA,MAAhCG,IAA0C,IAA1CA;AACF,eAAOI,CAAA,IAASN,IAAT,KAAkBM,CAAMN,CAAAA,IAAxB,IAAgCE,KAAhC,IAAwCI,CAAMJ,CAAAA,IAA9C,GAAqDI,CAArD,GAA6D,CAC5DN,IAD4D,EAElEE,KAAMA,KAF4D,CAApE;AAJgE,OAAlE,CAAA;AAWAlB,UAAKS,CAAAA,GAAL,CAAS,IAAT,EAAe,QAAS,CAACC,CAAD,CAAI;AACtBM,SAAAA,GAAON,CAAEK,CAAAA,MAATC;AAAJ,YACEE,OAAO,IAAKI,CAAAA,KADd;AAEK7B,gBAAS8B,CAAAA,QAAT,CAAkBP,CAAlB,CAAL,KACEE,IACA,GADOF,CAAKE,CAAAA,IACZ,EAAAF,CAAA,GAAOA,CAAKA,CAAAA,IAFd;AAIAQ,iBAAA,CAAUxB,IAAV,EAAgBgB,CAAA,IAAQA,CAAR,KA3BJC,SA2BI,GAA2BD,CAA3B,GAAkCE,IAAlC,IAA0CF,CAA1D,CAAA;AACA,eAAOE,IAAP;AAR0B,OAA5B,EASG,CACOH,MADP,CATH,CAAA;AAnBqB;AAgCvBS,YAASA,UAAS,CAACxB,IAAD,EAAOe,MAAP,CAAe;AAE/B,UADMd,IACN,GADWD,IAAKyB,CAAAA,YAAL,EAAA,GAAsB,MAAOC,SAA7B,KAA0C,WAA1C,IAAyDA,QAASC,CAAAA,IAAlE,GAAyE3B,IAAKE,CAAAA,SAAL,EACpF;AACE,eAAOa,MAAA,IAAU,IAAV,GAAiBd,IAAG2B,CAAAA,KAAMC,CAAAA,cAAT,CAAwB,QAAxB,CAAjB,GAAqD5B,IAAG2B,CAAAA,KAAMb,CAAAA,MAA9D,GAAuEA,MAA9E;AADF;AAF+B;AAOjCe,YAASA,QAAO,CAAC9B,IAAD,EAAO+B,IAAP,CAAa;AACvBC,UAAAA,GAAOhC,IAAKiC,CAAAA,QAASD,CAAAA,IAArBA;AACCvC,cAASyC,CAAAA,cAAT,CAAwBF,IAAxB,EAA8BD,IAA9B,CAAL,IACEtC,QAAS0C,CAAAA,KAAT,CAAe,yBAAf,GAA2CJ,IAA3C,CADF;AAGA,aAAOC,IAAA,CAAKD,IAAL,CAAP;AAL2B;AAU7BK,YAASA,OAAM,CAACL,IAAD,EAAOM,OAAP,CAAgB;AACxB3C,kBAAa4C,CAAAA,WAAb,CAAyBD,OAAzB,CAAL,IACE5C,QAAS0C,CAAAA,KAAT,CAAe,iDAAf,CADF;AAGMI,UAAAA,GAAUT,OAAA,CAAQ,IAAR,EAAcC,IAAd,CAAVQ;AACNA,UAAQC,CAAAA,QAAR,GAAmB,CAAA,CAAnB;AACA,aAAO,IAAKC,CAAAA,KAAL,CAAWF,IAAQG,CAAAA,KAAnB,EAA0BL,OAA1B,CAAP;AAN6B;AAe/BM,YAASA,MAAK,CAAC3C,IAAD,CAAO;AACnB,UAAI4C,UAAU5C,IAAK4C,CAAAA,OAAL,EAAd;AACA,aAAOC,IAAKC,CAAAA,GAAL,CAAS,CAAT,EAAY9C,IAAK+C,CAAAA,UAAjB,GAA8BH,OAAQI,CAAAA,IAAtC,GAA6CJ,OAAQK,CAAAA,KAArD,CAAP;AAFmB;AAIrBC,YAASA,OAAM,CAAClD,IAAD,CAAO;AACpB,UAAI4C,UAAU5C,IAAK4C,CAAAA,OAAL,EAAd;AACA,aAAOC,IAAKC,CAAAA,GAAL,CAAS,CAAT,EAAY9C,IAAKmD,CAAAA,WAAjB,GAA+BP,OAAQQ,CAAAA,GAAvC,GAA6CR,OAAQS,CAAAA,MAArD,CAAP;AAFoB;AAItBC,YAASA,OAAM,CAACtD,IAAD,CAAO;AAAA,UAChB4C,UAAU5C,IAAK4C,CAAAA,OAAL,EADM;AAElBW,UAAAA,GAASvD,IAAKwD,CAAAA,OAAdD;AACF,aAAO,CAACX,OAAQI,CAAAA,IAAT,GAAgBO,IAAA,CAAO,CAAP,CAAhB,EAA2BX,OAAQQ,CAAAA,GAAnC,GAAyCG,IAAA,CAAO,CAAP,CAAzC,CAAP;AAHoB;AAKtBE,YAASA,eAAc,CAACzD,IAAD,CAAO;AAAA,UACxBuD,SAASD,MAAA,CAAOtD,IAAP,CADe,EAE1B0D,IAAIf,KAAA,CAAM3C,IAAN,CAFsB,EAG1B2D,IAAIT,MAAA,CAAOlD,IAAP,CAHsB;AAI5BA,UAAK4D,CAAAA,SAAUpD,CAAAA,UAAf,CAA0BR,IAAKQ,CAAAA,UAAL,EAA1B,CAAA;AACAR,UAAK4D,CAAAA,SAAUC,CAAAA,MAAf,CAAsBH,CAAtB,EAAyBC,CAAzB,EAA4BJ,MAA5B,CAAA;AACAvD,UAAK8D,CAAAA,QAASP,CAAAA,MAAd,CAAqBA,MAArB,CAAA;AACAvD,UAAK+D,CAAAA,gBAAiBC,CAAAA,OAAtB,CAA8BC,OAAA,IAAW;AACvC,WAAI;AACFA,iBAAA,CAAQP,CAAR,EAAWC,CAAX,CAAA;AADE,SAEF,QAAOxB,KAAP,CAAc;AACdnC,cAAKmC,CAAAA,KAAL,CAAWA,KAAX,CAAA;AADc;AAHuB,OAAzC,CAAA;AAP4B;AA4D9B+B,YAASA,UAAS,CAAClE,IAAD,EAAOkB,IAAP,EAAaiD,KAAb,CAAoB;AAEpCC,cAASA,MAAK,CAACrC,IAAD,CAAO;AAAA,YACfsC,IAAIC,SADW,EAEjBC,CAFiB;AAGnB,YAAIxC,IAAJ;AAAU,eAAKwC,CAAL,GAASrD,IAAT,EAAeqD,CAAf,EAAkBA,CAAlB,GAAsBA,CAAEC,CAAAA,IAAKJ,CAAAA,KAA7B;AACR,gBAAIG,CAAEC,CAAAA,IAAKzC,CAAAA,IAAX,KAAoBA,IAApB,CAA0B;AACxBsC,eAAA,GAAIE,CAAJ;AACA;AAFwB;AADlB;AAAV;AAMA,eAAOF,CAAA,IAAKA,CAAEG,CAAAA,IAAP,IAAeH,CAAEG,CAAAA,IAAKC,CAAAA,WAAtB,GAAoCJ,CAApC,GAAwC,EAA/C;AATmB;AAWrBK,cAASA,GAAE,CAACxD,IAAD,CAAO;AAChB,YAAI,CAACA,IAAL;AAAW,iBAAOiD,KAAP;AAAX;AACI1E,gBAAS8B,CAAAA,QAAT,CAAkBL,IAAlB,CAAJ,KAA6BA,IAA7B,GAAoCkD,KAAA,CAAMlD,IAAN,CAApC;AACA,cAAMyD,IAAIR,KAAMS,CAAAA,KAAN,EAAV;AACA,aAAA,EAAO1D,IAAP,CAAA;AACEyD,WAAA,CAAE,CAAF,CAEA,IAFQzD,IAAK2D,CAAAA,CAEb,IAFkB,CAElB,EADAF,CAAA,CAAE,CAAF,CACA,IADQzD,IAAK4D,CAAAA,CACb,IADkB,CAClB,EAAA5D,IAAA,GAAOA,IAAKsD,CAAAA,IAAZ,IAAoBtD,IAAKsD,CAAAA,IAAKJ,CAAAA,KAA9B;AAHF;AAKA,eAAOO,CAAP;AATgB;AAZlB,YAAML,YAAYpD,IAAA,GAAOA,IAAKsD,CAAAA,IAAKO,CAAAA,QAAV,KAAuB,OAAvB,GAAiC7D,IAAjC,GAAwCA,IAAKsD,CAAAA,IAAKJ,CAAAA,KAAzD,GAAiE,IAAnF;AAuBA,aAAO,CACLpE,KAAMP,QAASuF,CAAAA,QAAT,CAAkBhF,IAAlB,CADD,EAELkB,KAAMzB,QAASuF,CAAAA,QAAT,CAAkB9D,IAAlB,IAA0B,EAA1B,CAFD,EAGEkD,KAHF,EAIDM,EAJC,EAKLG,EAAG3D,IAAA2D,IAAQH,EAAA,CAAGxD,IAAH,CAAA,CAAS,CAAT,CALN,EAML4D,EAAG5D,IAAA4D,IAAQJ,EAAA,CAAGxD,IAAH,CAAA,CAAS,CAAT,CANN,CAAP;AAxBoC;AA8CtC+D,YAASA,sBAAqB,CAACC,MAAD,CAAS;AAC/B9D,YAAAA,GAAS3B,QAAS0F,CAAAA,MAAT,CAAgB,CAC7BC,SAAU,EADmB,CAAhB,EAEZF,MAFY,CAAT9D;AAGN,YAAMiE,SAAS,CAACC,GAAD,EAAMC,IAAN,CAAAF,IAAe;AAC5BE,YAAKvB,CAAAA,OAAL,CAAawB,CAAA,IAAK;AACZ/F,kBAASgG,CAAAA,OAAT,CAAiBH,GAAA,CAAIE,CAAJ,CAAjB,CAAJ,KAA8BF,GAAA,CAAIE,CAAJ,CAA9B,GAAuC/F,QAASiG,CAAAA,KAAT,CAAeJ,GAAA,CAAIE,CAAJ,CAAf,CAAvC;AADgB,SAAlB,CAAA;AAD4B,OAA9B;AAKAH,YAAA,CAAOjE,MAAOgE,CAAAA,QAAd,EAAwB,CAAC,SAAD,EAAY,OAAZ,CAAxB,CAAA;AACAC,YAAA,CAAOjE,MAAP,EAAe,CAAC,MAAD,EAAS,QAAT,EAAmB,UAAnB,CAAf,CAAA;AACA,aAAOA,MAAP;AAXqC;AAavCuE,YAASA,mBAAkB,CAAC3F,IAAD,EAAO4F,OAAP,EAAgBC,IAAhB,EAAsB5B,OAAtB,CAA+B;AACxDjE,UAAK8F,CAAAA,eAAgBC,CAAAA,IAArB,CAA0B,CAClBF,IADkB,EAExBD,QAASnG,QAASuG,CAAAA,KAAT,CAAeJ,OAAf,CAFe,EAGf3B,OAHe,CAA1B,CAAA;AADwD;AAa1DgC,YAASA,OAAM,CAACjG,IAAD,EAAOkG,GAAP,EAAYL,IAAZ,CAAkB;AAC/B,YAAMM,OAAOnG,IAAKoG,CAAAA,YAAZD,IAA4BnG,IAAKoG,CAAAA,YAAL,CAAkBF,GAAlB,CAAlC;AACA,aAAIC,IAAJ,KAAa,CAAA,CAAb,IAAsB1G,QAAS4G,CAAAA,QAAT,CAAkBF,IAAlB,CAAtB,IAAiD,CAACA,IAAA,CAAKN,IAAL,CAAlD,IACE7F,IAAKsG,CAAAA,IAAL,CAAW,WAAUJ,GAAV,IAAiBL,IAAjB,kBAAX,CACO,EAAA,CAAA,CAFT,IAIO,CAAA,CAJP;AAF+B;AA2DjCU,YAASA,WAAU,CAAClF,KAAD,CAAQ;AACzB,aAAOA,KAAMH,CAAAA,IAAb;AADyB;AAG3BsF,YAASA,WAAU,CAACnF,KAAD,CAAQ;AAEzB,aAAOA,KAAMH,CAAAA,IAAKsD,CAAAA,IAAKiC,CAAAA,MAAvB;AAFyB;AAI3BC,YAASA,OAAM,CAAC3E,IAAD,CAAO;AACpB,aAAO,QAAS,CAACrB,CAAD,EAAIW,KAAJ,CAAW;AACzB,eAAOA,KAAM7B,CAAAA,IAAKQ,CAAAA,IAAX,EAAkB2G,CAAAA,SAAlB,EAA8BC,CAAAA,MAA9B,CAAqCvF,KAAMH,CAAAA,IAA3C,EAAiDa,IAAjD,CAAP;AADyB,OAA3B;AADoB;AA2DtB8E,YAASA,QAAQ,CAACC,GAAD,EAAMC,IAAN,EAAYC,IAAZ,CAAkB;AAC3B/G,SAAAA,GAAKyB,QAASuF,CAAAA,aAAT,CAAuBH,GAAvB,CAAL7G;AACN,WAAK,MAAMiG,GAAX,GAAkBa,KAAlB;AAAwB9G,WAAGE,CAAAA,YAAH,CAAgB+F,GAAhB,EAAqBa,IAAA,CAAKb,GAAL,CAArB,CAAA;AAAxB;AACIc,UAAJ,IAAY,IAAZ,KAAkB/G,GAAGiH,CAAAA,WAArB,GAAmCF,IAAnC;AACA,aAAO/G,GAAP;AAJiC;AAUnCkH,YAASA,SAAQ,CAACC,KAAD,EAAQC,IAAR,EAAcC,KAAd,CAAqB;AAAA,UAC9BC,QAAQF,IAARE,GAAeH,KAAfG,IAAwB1E,IAAKC,CAAAA,GAAL,CAAS,CAAT,EAAYwE,KAAZ,CADM,EAElCE,QAAQ3E,IAAK4E,CAAAA,KAAL,CAAW5E,IAAK6E,CAAAA,KAAL,CAAWH,IAAX,CAAX,CAF0B;AAG1BA,UAARpF,IAAeU,IAAK8E,CAAAA,GAAL,CAAS,EAAT,EAAaH,KAAb,CAAfrF;AACAyF,UAAAA,GAASzF,IAAA,IAAS0F,GAAT,GAAe,EAAf,GAAoB1F,IAAA,IAAS2F,EAAT,GAAc,CAAd,GAAkB3F,IAAA,IAAS4F,EAAT,GAAc,CAAd,GAAkB,CAAjEH;AACF,UAAYI,GAAZ;AACIR,WAAJ,GAAY,CAAZ,IACEQ,GAKA,GALMnF,IAAK8E,CAAAA,GAAL,CAAS,EAAT,EAAa,CAACH,KAAd,CAKN,GAL6BI,IAK7B,EAJAK,KAIA,GAJKpF,IAAKqF,CAAAA,KAAL,CAAWd,KAAX,GAAmBY,GAAnB,CAIL,EAHAG,IAGA,GAHKtF,IAAKqF,CAAAA,KAAL,CAAWb,IAAX,GAAkBW,GAAlB,CAGL,EAFIC,KAEJ,GAFSD,GAET,GAFeZ,KAEf,IAFsB,EAAEa,KAExB,EADIE,IACJ,GADSH,GACT,GADeX,IACf,IADqB,EAAEc,IACvB,EAAAH,GAAA,GAAM,CAACA,GANT,KAQEA,GAIA,GAJMnF,IAAK8E,CAAAA,GAAL,CAAS,EAAT,EAAaH,KAAb,CAIN,GAJ4BI,IAI5B,EAHAK,KAGA,GAHKpF,IAAKqF,CAAAA,KAAL,CAAWd,KAAX,GAAmBY,GAAnB,CAGL,EAFAG,IAEA,GAFKtF,IAAKqF,CAAAA,KAAL,CAAWb,IAAX,GAAkBW,GAAlB,CAEL,EADIC,KACJ,GADSD,GACT,GADeZ,KACf,IADsB,EAAEa,KACxB,EAAIE,IAAJ,GAASH,GAAT,GAAeX,IAAf,IAAqB,EAAEc,IAZzB,CAAA;AAcA,aAAIA,IAAJ,GAASF,KAAT,IAAe,GAAf,IAAsBX,KAAtB,IAA+BA,KAA/B,GAAuC,CAAvC,GAAiDH,QAAA,CAASC,KAAT,EAAgBC,IAAhB,EAAsBC,KAAtB,GAA8B,CAA9B,CAAjD,GACO,CAACW,KAAD,EAAKE,IAAL,EAASH,GAAT,CADP;AApBoC;AAuBtCI,YAASA,cAAa,CAAChB,KAAD,EAAQC,IAAR,EAAcC,KAAd,CAAqB;AAEzC,aAAOH,QAAA,CADeC,CAACA,KAChB,EADAC,CAACA,IACD,EAD+BC,CAACA,KAChC,CAAA,CAA6B,CAA7B,CAAP;AAFyC;AAI3Ce,YAASA,SAAQ,CAACjB,KAAD,EAAQC,IAAR,EAAcC,KAAd,CAAqB;AACpCD,UAAA,GAAO,CAACA,IAAR;AAAcD,WAAA,GAAQ,CAACA,KAAT;AAAgBE,WAAA,GAAQ,CAACA,KAAT;AADM,YAE9BgB,UAAUjB,IAAViB,GAAiBlB,KAFa;AAGlCY,WAAAA,GAAMM,OAAA,GAAUF,aAAA,CAAcf,IAAd,EAAoBD,KAApB,EAA2BE,KAA3B,CAAV,GAA8Cc,aAAA,CAAchB,KAAd,EAAqBC,IAArB,EAA2BC,KAA3B,CAApDU;AACF,cAAQM,OAAA,GAAU,CAAC,CAAX,GAAe,CAAvB,KAA6BN,KAAA,GAAM,CAAN,GAAU,CAAV,GAAc,CAACA,KAAf,GAAqBA,KAAlD;AAJoC;AAwBtCO,YAASA,KAAK,CAACvI,IAAD,EAAOC,EAAP,EAAWuI,OAAX,CAAoB;AAChC,UAAKvI,EAAL,CAAA;AACA,YAAMwI,QAAQD,OAAQC,CAAAA,KAAtB,EACIF,OAAOC,OAAQE,CAAAA,KADnB;AAEKH,YAAL,KACEA,IAaA,GAbOC,OAAQE,CAAAA,KAaf,GAbuB,CACrBC,SAAU,IADW,EAErBC,OAAQ,CAAA,CAFa,EAGrBC,IAAK,IAHgB,EAIrBC,OAAQxH,KAAAwH,IAAS;AACXxH,eAAJ,IAAatB,IAAK+I,CAAAA,MAAL,CAAYN,KAAMM,CAAAA,MAAlB,CAAb,IACE/I,IAAKgJ,CAAAA,QAAL,CAAc,IAAd,EAAoB,EAAA,IAAM;AACxBT,gBAAK9B,CAAAA,MAAL,GAAc,CAAA,CAAd;AACAzG,gBAAK+I,CAAAA,MAAL,CAAYN,KAAMM,CAAAA,MAAlB,EAA0BzH,KAA1B,CAAA;AAFwB,WAA1B,CADF;AADe,SAJI,CAavB,EAAImH,KAAMQ,CAAAA,QAAV,KACEV,IAAKO,CAAAA,MADP,GACgBrJ,QAASwJ,CAAAA,QAAT,CAAkBR,KAAMQ,CAAAA,QAAxB,EAAkCV,IAAKO,CAAAA,MAAvC,CADhB,CAdF;AAmBA,SADeL,KAAM/F,CAAAA,KAANwG,IAAe,IAAfA,IAAuBT,KAAM5B,CAAAA,OAA7BqC,GAAuCC,MAAvCD,GAAgDE,QAC/D,EAAOb,IAAP,EAAatI,EAAb,EAAiBwI,KAAjB,EAAwBzI,IAAxB,CAAA;AACKuI,YAAKK,CAAAA,MAAV,KACE5I,IAAKmB,CAAAA,EAAL,CAAQnB,IAAKc,CAAAA,QAAL,CAAc2H,KAAMM,CAAAA,MAApB,CAAR,EAAqC,IAArC,EAA2C,EAAA,IAAM;AAC/CR,cAAK9B,CAAAA,MAAL,GAAc8B,IAAK9B,CAAAA,MAAnB,GAA4B,CAAA,CAA5B,GAAoC8B,IAAKM,CAAAA,GAAL,CAAS7I,IAAK+I,CAAAA,MAAL,CAAYN,KAAMM,CAAAA,MAAlB,CAAT,CAApC;AAD+C,SAAjD,CAGA,EAAAR,IAAKK,CAAAA,MAAL,GAAc,CAAA,CAJhB;AAMA,eAAOL,IAAP;AA7BA;AADgC;AAoClCY,YAASA,OAAM,CAACZ,IAAD,EAAOc,IAAP,EAAaZ,KAAb,EAAoBzI,IAApB,CAA0B;AACvC,YAAM6F,OAAO4C,KAAMpH,CAAAA,KAAbwE,IAAsB,OAA5B,EACM5B,UAAU,EAAAA,IAAMsE,IAAKO,CAAAA,MAAL,CAAYO,IAAK/H,CAAAA,KAAjB,CADtB;AAIAtB,UAAK+I,CAAAA,MAAL,CAAYN,KAAMM,CAAAA,MAAlB,EAA0BM,IAAK/H,CAAAA,KAA/B,CAAA;AAGA+H,UAAKC,CAAAA,gBAAL,CAAsBzD,IAAtB,EAA4B5B,OAA5B,CAAA;AAGA0B,wBAAA,CAAmB3F,IAAnB,EAAyBqJ,IAAzB,EAA+BxD,IAA/B,EAAqC5B,OAArC,CAAA;AAGAsE,UAAKM,CAAAA,GAAL,GAAWvH,KAAAiI,IAAS;AAClBF,YAAK/H,CAAAA,KAAL,GAAaA,KAAb;AACA+H,YAAKG,CAAAA,aAAL,CAIK,MAAOC,MAAP,KAAiB,WAAjB,GAA+B,IAAIA,KAAJ,CAJX5D,IAIW,CAA/B,GAAiD,CAJ7BA,IAI6B,CAJtD,CAAA;AAFkB,OAApB;AAduC;AA4BzCuD,YAASA,SAAQ,CAACb,IAAD,EAAOtI,EAAP,EAAWwI,KAAX,EAAkBzI,IAAlB,CAAwB;AACjCsB,UAAAA,GAAQtB,IAAK+I,CAAAA,MAAL,CAAYN,KAAMM,CAAAA,MAAlB,CAARzH;AACN,YAAMoI,MAAM7C,OAAA,CAAQ,KAAR,EAAe,CACzB,QApFc8C,WAmFW,CAAf,CAAZ,EAGMC,UAAUnB,KAAM/F,CAAAA,KAAN,KAAgB,OAAhB,GAA0BgH,GAA1B,GAAgCA,GAAIG,CAAAA,WAAJ,CAAgBhD,OAAA,CAAQ,OAAR,CAAhB,CAHhD;AAIA+C,aAAQC,CAAAA,WAAR,CAAoBhD,OAAA,CAAQ,MAAR,EAAgB,CAClC,QAvFUiD,gBAsFwB,CAAhB,EAEjBrB,KAAM1G,CAAAA,IAFW,IAEH0G,KAAMM,CAAAA,MAFH,CAApB,CAAA;AAGA9I,QAAG4J,CAAAA,WAAH,CAAeH,GAAf,CAAA;AACIhH,QAAAA,GAAQqH,IAARrH;AACJ,aAAQ+F,KAAM/F,CAAAA,KAAd,CAAA;AACE,aAAK,UAAL;AACEA,YAAA,GAAQsH,QAAR;AACA;AACF,aAAK,QAAL;AACEtH,YAAA,GAAQuH,MAAR;AACA;AACF,aAAK,OAAL;AACEvH,YAAA,GAAQwH,KAAR;AACA;AACF,aAAK,OAAL;AACExH,YAAA,GAAQyH,KAAR;AAXJ;AAcAzH,QAAA,CAAM6F,IAAN,EAAYqB,OAAZ,EAAqBnB,KAArB,EAA4BnH,IAA5B,CAAA;AAzBuC;AAgCzCyI,YAASA,KAAI,CAACxB,IAAD,EAAOtI,EAAP,EAAWwI,KAAX,EAAkBnH,KAAlB,CAAyB;AACpC,YAAM+H,OAAOxC,OAAA,CAAQ,OAAR,CAAb;AACA,WAAK,MAAMX,GAAX,GAAkBuC,MAAlB;AACMvC,WAAJ,KAAY,QAAZ,IAAwBA,GAAxB,KAAgC,SAAhC,IACEmD,IAAKlJ,CAAAA,YAAL,CAAkB+F,GAAA,KAAQ,OAAR,GAAkB,MAAlB,GAA2BA,GAA7C,EAAkDuC,KAAA,CAAMvC,GAAN,CAAlD,CADF;AADF;AAKAmD,UAAKlJ,CAAAA,YAAL,CAAkB,MAAlB,EAA0BsI,KAAMM,CAAAA,MAAhC,CAAA;AACAM,UAAK/H,CAAAA,KAAL,GAAaA,KAAb;AACArB,QAAG4J,CAAAA,WAAH,CAAeR,IAAf,CAAA;AACAA,UAAKC,CAAAA,gBAAL,CAAsB,OAAtB,EAA+B,EAAA,IAAMf,IAAKO,CAAAA,MAAL,CAAYO,IAAK/H,CAAAA,KAAjB,CAArC,CAAA;AACAiH,UAAKI,CAAAA,QAAL,GAAgB,CAACU,IAAD,CAAhB;AACAd,UAAKM,CAAAA,GAAL,GAAWvH,KAAAiI,IAASF,IAAK/H,CAAAA,KAAdiI,GAAsBjI,KAAjC;AAZoC;AAkBtC0I,YAASA,SAAQ,CAACzB,IAAD,EAAOtI,EAAP,EAAWwI,KAAX,EAAkBnH,KAAlB,CAAyB;AAClCyF,WAAAA,GAAO,CACXlB,KAAM,UADK,EAEX9D,KAAM0G,KAAMM,CAAAA,MAFD,CAAPhC;AAIFzF,WAAJ,KAAWyF,KAAKqD,CAAAA,OAAhB,GAA0B,CAAA,CAA1B;AACA,YAAMf,OAAOxC,OAAA,CAAQ,OAAR,EAAiBE,KAAjB,CAAb;AACA9G,QAAG4J,CAAAA,WAAH,CAAeR,IAAf,CAAA;AACAA,UAAKC,CAAAA,gBAAL,CAAsB,QAAtB,EAAgC,EAAA,IAAMf,IAAKO,CAAAA,MAAL,CAAYO,IAAKe,CAAAA,OAAjB,CAAtC,CAAA;AACA7B,UAAKI,CAAAA,QAAL,GAAgB,CAACU,IAAD,CAAhB;AACAd,UAAKM,CAAAA,GAAL,GAAWvH,KAAAiI,IAASF,IAAKe,CAAAA,OAAdb,GAAwB,CAAC,CAACjI,KAA1BiI,IAAmC,IAA9C;AAVwC;AAgB1CU,YAASA,OAAM,CAAC1B,IAAD,EAAOtI,EAAP,EAAWwI,KAAX,EAAkBnH,KAAlB,CAAyB;AAAA,YAChC+H,OAAOxC,OAAA,CAAQ,QAAR,EAAkB,CAC3B9E,KAAM0G,KAAMM,CAAAA,MADe,CAAlB,CADyB,EAIpCsB,SAAS5B,KAAM4B,CAAAA,MAAfA,IAAyB,EAJW;AAKtC5B,WAAM6B,CAAAA,OAAQtG,CAAAA,OAAd,CAAsB,CAACuG,MAAD,EAAShG,CAAT,CAAA,IAAe;AACnC,cAAMwC,OAAO,CACXzF,MAAOiJ,MADI,CAAb;AAGIC,mBAAA,CAAYD,MAAZ,EAAoBjJ,KAApB,CAAJ,KAAgCyF,IAAK0D,CAAAA,QAArC,GAAgD,CAAA,CAAhD;AACApB,YAAKQ,CAAAA,WAAL,CAAiBhD,OAAA,CAAQ,QAAR,EAAkBE,IAAlB,GAAyBsD,MAAA,CAAO9F,CAAP,CAAzB,IAAsCgG,MAAtC,IAAgD,EAAhD,CAAjB,CAAA;AALmC,OAArC,CAAA;AAOAtK,QAAG4J,CAAAA,WAAH,CAAeR,IAAf,CAAA;AACAA,UAAKC,CAAAA,gBAAL,CAAsB,QAAtB,EAAgC,EAAA,IAAM;AACpCf,YAAKO,CAAAA,MAAL,CAAYL,KAAM6B,CAAAA,OAAN,CAAcjB,IAAKqB,CAAAA,aAAnB,CAAZ,CAAA;AADoC,OAAtC,CAAA;AAGAnC,UAAKI,CAAAA,QAAL,GAAgB,CAACU,IAAD,CAAhB;AACAd,UAAKM,CAAAA,GAAL,GAAWvH,KAAAiI,IAAS;AAClB,aAAK,IAAIhF,IAAI,CAAR,EAAWoG,IAAIlC,KAAM6B,CAAAA,OAAQM,CAAAA,MAAlC,EAA0CrG,CAA1C,GAA8CoG,CAA9C,EAAiD,EAAEpG,CAAnD;AACE,cAAIiG,WAAA,CAAY/B,KAAM6B,CAAAA,OAAN,CAAc/F,CAAd,CAAZ,EAA8BjD,KAA9B,CAAJ,CAA0C;AACxC+H,gBAAKqB,CAAAA,aAAL,GAAqBnG,CAArB;AACA;AAFwC;AAD5C;AADkB,OAApB;AAjBsC;AA8BxC2F,YAASA,MAAK,CAAC3B,IAAD,EAAOtI,EAAP,EAAWwI,KAAX,EAAkBnH,KAAlB,CAAyB;AAAA,YAC/B8C,QAAQyC,OAAA,CAAQ,MAAR,EAAgB,CAC1B,QAjLSgE,iBAgLiB,CAAhB,CADuB,EAInCR,SAAS5B,KAAM4B,CAAAA,MAAfA,IAAyB,EAJU;AAKrCpK,QAAG4J,CAAAA,WAAH,CAAezF,KAAf,CAAA;AACAmE,UAAKI,CAAAA,QAAL,GAAgBF,KAAM6B,CAAAA,OAAQQ,CAAAA,GAAd,CAAkB,CAACP,MAAD,EAAShG,CAAT,CAAA,IAAe;AAC/C,YAAMwC,OAAO,CACXlB,KAAM,OADK,EAEX9D,KAAM0G,KAAMM,CAAAA,MAFD,EAGXzH,MAAOiJ,MAHI,CAAb;AAKIC,mBAAA,CAAYD,MAAZ,EAAoBjJ,KAApB,CAAJ,KAAgCyF,IAAKqD,CAAAA,OAArC,GAA+C,CAAA,CAA/C;AACM1H,YAAAA,GAAQmE,OAAA,CAAQ,OAAR,EAAiBE,IAAjB,CAARrE;AACNA,YAAM4G,CAAAA,gBAAN,CAAuB,QAAvB,EAAiC,EAAA,IAAMf,IAAKO,CAAAA,MAAL,CAAYyB,MAAZ,CAAvC,CAAA;AACMQ,SAAAA,GAAQlE,OAAA,CAAQ,OAAR,EAAiB,EAAjB,GAAsBwD,MAAA,CAAO9F,CAAP,CAAtB,IAAmCgG,MAAnC,IAA6C,EAA7C,CAARQ;AACNA,SAAMC,CAAAA,OAAN,CAActI,IAAd,CAAA;AACA0B,aAAMyF,CAAAA,WAAN,CAAkBkB,CAAlB,CAAA;AACA,eAAOrI,IAAP;AAZ+C,OAAjC,CAAhB;AAcA6F,UAAKM,CAAAA,GAAL,GAAWvH,KAAAiI,IAAS;AAAA,cACZ0B,QAAQ1C,IAAKI,CAAAA,QADD,EAEhBgC,IAAIM,KAAML,CAAAA,MAFM;AAGlB,aAAK,IAAIrG,IAAI,CAAb,EAAgBA,CAAhB,GAAoBoG,CAApB,EAAuB,EAAEpG,CAAzB;AACMiG,qBAAA,CAAYS,KAAA,CAAM1G,CAAN,CAASjD,CAAAA,KAArB,EAA4BA,KAA5B,CAAJ,KAAwC2J,KAAA,CAAM1G,CAAN,CAAS6F,CAAAA,OAAjD,GAA2D,CAAA,CAA3D;AADF;AAHkB,OAApB;AApBqC;AAgCvCD,YAASA,MAAK,CAAC5B,IAAD,EAAOtI,EAAP,EAAWwI,KAAX,EAAkBnH,KAAlB,CAAyB;AACrCA,WAAA,GAAQA,KAAA,KAAU4J,IAAAA,EAAV,GAAsB5J,KAAtB,IAA+B,CAACmH,KAAM3F,CAAAA,GAAtC,GAA4C,CAAC2F,KAAM0C,CAAAA,GAAnD,IAA0D,CAAlE;AADqC,YAE/BrI,MAAM2F,KAAM3F,CAAAA,GAAN,IAAa,IAAb,GAAoB2F,KAAM3F,CAAAA,GAA1B,GAAgCD,IAAKC,CAAAA,GAAL,CAAS,GAAT,EAAc,CAACxB,KAAf,CAAhC,IAAyD,GAFhC,EAGnC6J,MAAM1C,KAAM0C,CAAAA,GAAZA,IAAmBtI,IAAKsI,CAAAA,GAAL,CAAS,CAAT,EAAYrI,GAAZ,EAAiB,CAACxB,KAAlB,CAAnB6J,IAA+C,CAHZ,EAInC5D,OAAOkB,KAAMlB,CAAAA,IAAbA,IAAqBc,QAAA,CAAS8C,GAAT,EAAcrI,GAAd,EAAmB,GAAnB,CAJc,EAK/BuG,OAAOxC,OAAA,CAAQ,OAAR,EAAiB,CAC5BhB,KAAM,OADsB,EAE5B9D,KAAM0G,KAAMM,CAAAA,MAFgB,EAGvBoC,GAHuB,EAIvBrI,GAJuB,EAKtByE,IALsB,CAAjB,CALwB;AAYrC8B,UAAK/H,CAAAA,KAAL,GAAaA,KAAb;AACA,YAAM8J,OAAOvE,OAAA,CAAQ,MAAR,EAAgB,EAAhB,EAAoB,CAACvF,KAArB,CAAb;AACArB,QAAG4J,CAAAA,WAAH,CAAeR,IAAf,CAAA;AACApJ,QAAG4J,CAAAA,WAAH,CAAeuB,IAAf,CAAA;AACMtC,QAAAA,GAAS,EAAAA,IAAM;AACnBsC,YAAKlE,CAAAA,WAAL,GAAmBmC,IAAK/H,CAAAA,KAAxB;AACAiH,YAAKO,CAAAA,MAAL,CAAY,CAACO,IAAK/H,CAAAA,KAAlB,CAAA;AAFmB,OAAfwH;AAMNO,UAAKC,CAAAA,gBAAL,CAAsB,OAAtB,EAA+BR,EAA/B,CAAA;AACAO,UAAKC,CAAAA,gBAAL,CAAsB,QAAtB,EAAgCR,EAAhC,CAAA;AACAP,UAAKI,CAAAA,QAAL,GAAgB,CAACU,IAAD,CAAhB;AACAd,UAAKM,CAAAA,GAAL,GAAWvH,KAAAiI,IAAS;AAClBF,YAAK/H,CAAAA,KAAL,GAAaA,KAAb;AACA8J,YAAKlE,CAAAA,WAAL,GAAmB5F,KAAnB;AAFkB,OAApB;AAzBqC;AA8BvCkJ,YAASA,YAAW,CAACa,CAAD,EAAIC,CAAJ,CAAO;AACzB,aAAOD,CAAP,KAAaC,CAAb,IAAkBD,CAAlB,GAAsB,EAAtB,KAA6BC,CAA7B,GAAiC,EAAjC;AADyB;AAI3BC,YAASA,mBAAmB,CAACvL,IAAD,EAAOwL,CAAP,EAAUvL,EAAV,EAAcwL,WAAd,EAA2BC,WAA3B,EAAwCC,GAAxC,CAA6C;AACvEH,OAAA,GAAIA,CAAJ,IAAS,IAAIC,WAAJ,CAAgBzL,IAAK4L,CAAAA,MAAL,EAAhB,CAAT;AACA,aAAOJ,CAAEK,CAAAA,UAAF,CAAa5L,EAAb,EAAiB0C,KAAA,CAAM3C,IAAN,CAAjB,EAA8BkD,MAAA,CAAOlD,IAAP,CAA9B,EAA4CsD,MAAA,CAAOtD,IAAP,CAA5C,EAA0D0L,WAA1D,EAAuEC,GAAvE,CAA4EnL,CAAAA,UAA5E,CAAuFR,IAAKQ,CAAAA,UAAL,EAAvF,CAAP;AAFuE;AAKzEsL,YAASA,KAAK,CAAC9L,IAAD,EAAO+L,EAAP,CAAW;AACvB,aAAQA,EAAD,GAAa,QAAS,EAAG;AAC9B,WAAI;AACFA,YAAGC,CAAAA,KAAH,CAAS,IAAT,EAAeC,SAAf,CAAA;AADE,SAEF,QAAO9J,KAAP,CAAc;AACdnC,cAAKmC,CAAAA,KAAL,CAAWA,KAAX,CAAA;AADc;AAHc,OAAzB,GAAM,IAAb;AADuB;AAUzB+J,YAASA,kBAAkB,CAAClM,IAAD,EAAOmM,WAAP,EAAoBlM,EAApB,EAAwBwL,WAAxB,CAAqC;AAE9D,YAAMxH,UAAqEmI,CAA3D,IAAIX,WAAJ,CAAgBzL,IAAK4L,CAAAA,MAAL,EAAhB,EAA+BE,IAAA,CAAK9L,IAAL,EAAWA,IAAKqM,CAAAA,OAAL,EAAX,CAA/B,CAA2DD,EAAAA,KAA3D,CAAiEpM,IAAKsM,CAAAA,UAAL,EAAkBC,CAAAA,IAAnF,CAAyFV,CAAAA,UAAzF,CAAoG5L,EAApG,EAAwGqD,MAAA,CAAOtD,IAAP,CAAxG,EAAsHA,IAAtH,CAAhB;AAGImM,iBAAJ,IACEA,WAAYK,CAAAA,QAAZ,EAAuBxI,CAAAA,OAAvB,CAA+BL,CAAA,IAAK;AAClCM,eAAQ9C,CAAAA,EAAR,CAAWwC,CAAEkC,CAAAA,IAAb,EAAmBlC,CAAEM,CAAAA,OAArB,CAAA;AADkC,OAApC,CADF;AAKA,aAAOA,OAAP;AAV8D;AAmDhEwI,YAASA,OAAM,CAACzM,IAAD,EAAOC,EAAP,EAAWyM,KAAX,CAAkB;AAC/B,UAAI,MAAOzM,GAAX,KAAkB,QAAlB;AACE,YAAI,MAAOyB,SAAX,KAAwB,WAAxB;AAEE,cADAzB,EACI,GADCyB,QAASiL,CAAAA,aAAT,CAAuB1M,EAAvB,CACD,EAAA,CAACA,EAAL;AAEE,mBADAD,IAAKmC,CAAAA,KAAL,CAAW,iCAAX,GAA+ClC,EAA/C,CACO,EAAA,IAAP;AAFF;AAFF;AAQE,iBADAD,IAAKmC,CAAAA,KAAL,CAAW,kCAAX,CACO,EAAA,IAAP;AARF;AADF;AAYA,UAAIlC,EAAJ,IAAUyM,KAAV;AACE,WAAI;AACFzM,YAAGiH,CAAAA,WAAH,GAAiB,EAAjB;AADE,SAEF,QAAO0F,CAAP,CAAU;AACV3M,YACA,GADK,IACL,EAAAD,IAAKmC,CAAAA,KAAL,CAAWyK,CAAX,CAAA;AAFU;AAHd;AAQA,aAAO3M,EAAP;AArB+B;AA+BjC2C,YAASA,QAAQ,CAAClC,CAAD,CAAI;AACZjB,cAAS4G,CAAAA,QAAT,CAAkB3F,CAAlB,CAAA,GAAuB,CAAvB,GAAuB,CAAA,IARZ,CAQY,CAAAA,CAAAA,GAAA,IARN,CAQM,EAAA,OARZ,CAQY,CAAAA,CAAAA,MAAA,IARN,CAQM,EAAA,KARZ,CAQY,CAAAA,CAAAA,IAAA,IARN,CAQM,EAAA,MARZ,CAQY,CAAAA,CAAAA,KAAA,IARN,CAQM,CAAvB,IARW,CACQ,GADR,CAadA,CAZsB,IADF,CACE,EAAA,CAAA,GAAA,CAC1B0C,IAAK1C,CADqB,EAE1B2C,OAAQ3C,CAFkB,EAG1BsC,KAAMtC,CAHoB,EAI1BuC,MAAOvC,CAJmB,CAOnB,CAAA;AAAP,aAAO,CAAP;AADmB;AAcrBmM,kBAAeA,eAAe,CAAC7M,IAAD,EAAO6F,IAAP,EAAa6F,WAAb,EAA0BC,GAA1B,CAA+B;AAAA,UACrD3M,SAASW,cAAemN,CAAAA,YAAf,CAA4BjH,IAA5B,CAD4C;AAG3D,OADEkH,MACF,GADQ/N,MACR,IADkBA,MAAOgO,CAAAA,QACzB,KAAUvN,QAAS0C,CAAAA,KAAT,CAAe,8BAAf,GAAgD0D,IAAhD,CAAV;AACA,YAAM7F,IAAKgJ,CAAAA,QAAL,EAAN;AACA,aAAOuC,kBAAA,CAAmBvL,IAAnB,EAAyB,IAAzB,EAA+B,IAA/B,EAAqC+M,MAArC,EAA0CrB,WAA1C,EAAuDC,GAAvD,CAA4DsB,CAAAA,WAA5D,CAAwEjN,IAAKkN,CAAAA,WAAYX,CAAAA,IAAzF,CAAP;AAL2D;AAmD7DY,YAASA,QAAQ,CAACnN,IAAD,EAAOoN,IAAP,EAAaC,IAAb,CAAmB;AAClC,aAAOxN,WAAYyN,CAAAA,OAAZ,CAAoBtN,IAApB,EAA0BN,YAAa6N,CAAAA,UAAvC,EAAmD3N,aAAc4N,CAAAA,eAAjE,EAAkFH,IAAlF,CAAwFI,CAAAA,KAAxF,CAA8FL,IAA9F,CAAP;AADkC;AAkBpCM,YAASA,UAAS,CAAC1N,IAAD,EAAO2C,KAAP,CAAc;AAAA,UAC1B0I,IAAIrL,IAAK2N,CAAAA,QAAL,EADsB;AAE5BhJ,UAAAA,GAAI3E,IAAK4C,CAAAA,OAAL,EAAJ+B;AACF,aAAOhC,KAAP,IAAgB0I,CAAA,IAAKA,CAAEuC,CAAAA,QAAP,KAPNC,SAOM,GAA8BlJ,IAAE3B,CAAAA,IAAhC,GAAuC2B,IAAE1B,CAAAA,KAAzC,GAAiD,CAAjE;AAH8B;AAKhC6K,YAASA,WAAU,CAAC9N,IAAD,EAAOkD,MAAP,CAAe;AAAA,UAC5BmI,IAAIrL,IAAK2N,CAAAA,QAAL,EADwB;AAE9BhJ,UAAAA,GAAI3E,IAAK4C,CAAAA,OAAL,EAAJ+B;AACF,aAAOzB,MAAP,IAAiBmI,CAAA,IAAKA,CAAEuC,CAAAA,QAAP,KAZPC,SAYO,GAA8BlJ,IAAEvB,CAAAA,GAAhC,GAAsCuB,IAAEtB,CAAAA,MAAxC,GAAiD,CAAlE;AAHgC;AAKlC0K,YAASA,iBAAgB,CAAC/N,IAAD,CAAO;AAK9BgO,cAASA,UAAS,EAAG;AACnBhO,YAAKiO,CAAAA,SAAL,GAAiBjO,IAAKa,CAAAA,OAAtB,GAAgC,CAAhC;AADmB;AALS,UAC1BqN,IAAIlO,IAAKc,CAAAA,QADiB,EAE5B4C,IAAIwK,CAAA,CAAA,KAFwB,EAG5BvK,IAAIuK,CAAA,CAAA,MAHwB;AAI5BvJ,OAAAA,GAAIuJ,CAAA,CAAA,OAAJvJ;AAMF3E,UAAKmO,CAAAA,YAAL,GAAoBnO,IAAKS,CAAAA,GAAL,CAAS,IAAT,EAAeC,CAAA,IAAK;AACtCV,YAAKoO,CAAAA,MAAL,GAAc1N,CAAE2N,CAAAA,IAAhB;AACArO,YAAK+C,CAAAA,UAAL,GAAkB2K,SAAA,CAAU1N,IAAV,EAAgBU,CAAE2N,CAAAA,IAAlB,CAAlB;AACAL,iBAAA,EAAA;AAHsC,OAApB,EAIjB,CACDK,KAAM3K,CADL,CAJiB,CAApB;AASA1D,UAAKsO,CAAAA,aAAL,GAAqBtO,IAAKS,CAAAA,GAAL,CAAS,IAAT,EAAeC,CAAA,IAAK;AACvCV,YAAKuO,CAAAA,OAAL,GAAe7N,CAAE2N,CAAAA,IAAjB;AACArO,YAAKmD,CAAAA,WAAL,GAAmB2K,UAAA,CAAW9N,IAAX,EAAiBU,CAAE2N,CAAAA,IAAnB,CAAnB;AACAL,iBAAA,EAAA;AAHuC,OAApB,EAIlB,CACDK,KAAM1K,CADL,CAJkB,CAArB;AASA,YAAM6K,gBAAgBxO,IAAKS,CAAAA,GAAL,CAAS,IAAT,EAAeuN,SAAf,EAA0B,CAC9CS,IAAK9J,CADyC,CAA1B,CAAtB;AAKA3E,UAAKmO,CAAAA,YAAaO,CAAAA,IAAlB,GAAyBhL,CAAEgL,CAAAA,IAA3B,GAAkC,CAAlC;AACA1O,UAAKsO,CAAAA,aAAcI,CAAAA,IAAnB,GAA0B/K,CAAE+K,CAAAA,IAA5B,GAAmC,CAAnC;AACAF,mBAAcE,CAAAA,IAAd,GAAqB/J,CAAE+J,CAAAA,IAAvB,GAA8B,CAA9B;AAnC8B;AAyGhCC,YAASA,SAAQ,CAAC5M,IAAD,EAAOC,IAAP,CAAa;AAC5B,aAAOA,IAAKQ,CAAAA,QAAZ,IAAwB/C,QAASgG,CAAAA,OAAT,CAAiBzD,IAAKU,CAAAA,KAAMpB,CAAAA,KAA5B,CAAxB,IAA8D,CAACS,IAAK6M,CAAAA,UAAL,CAAgB,UAAhB,CAA/D;AAD4B;AAG9BC,YAASA,WAAU,CAAC9M,IAAD,EAAO+M,EAAP,CAAW;AAC5B,aAAO,EAAE/M,IAAF,KAAW,QAAX,IAAuB+M,EAAvB,YAAqCpP,YAAa6N,CAAAA,UAAWwB,CAAAA,KAA7D,CAAP;AAD4B;AAqC9BC,YAASA,IAAG,EAAG;AACb,aAAOC,QAAP,KAAoBC,QAAA,CAASC,QAAT,CAAA,EAAoBF,QAApB,GAA+BG,KAAMJ,CAAAA,GAAN,EAA/B,GAA6CK,SAAjE;AADa;AAGfF,YAASA,SAAQ,EAAG;AAClBF,cAAA,GAAW,CAAX;AADkB;AAGpBK,YAASA,MAAK,EAAG;AACf,UAAKC,CAAAA,KAAL,GAAa,IAAKC,CAAAA,KAAlB,GAA0B,IAAKC,CAAAA,KAA/B,GAAuC,IAAvC;AADe;AAmCjBC,YAASA,KAAI,EAAG;AACdT,cAAA,IAAYU,SAAZ,GAAwBP,KAAMJ,CAAAA,GAAN,EAAxB,IAAuCK,SAAvC;AACAO,WAAA,GAAQC,OAAR,GAAkB,CAAlB;AACA,SAAI;AAbJb,WAAA,EAAA;AACA,UAAEY,KAAF;AAGA,aALoB,IAGhBE,IAAIC,QAHY,EAIlBnD,CACF,EAAOkD,CAAP,CAAA;AAEE,WADKlD,CACL,GADSqC,QACT,GADoBa,CAAEN,CAAAA,KACtB,KADgC,CAChC,IADmCM,CAAEP,CAAAA,KAAMS,CAAAA,IAAR,CAAa9E,IAAAA,EAAb,EAAwB0B,CAAxB,CACnC,EAAAkD,CAAA,GAAIA,CAAEL,CAAAA,KAAN;AAFF;AAIA,UAAEG,KAAF;AAKI,OAAJ,QAEU;AACRA,aAAA,GAAQ,CAAR;AAYAK,SAAAA,GAAKF,QAALE;AAGF,aAJA,IAGEC,OAAOC,QACT,EAAOF,CAAP,CAAA;AACE,cAAIA,CAAGV,CAAAA,KAAP,CAAc;AACRW,gBAAJ,GAAWD,CAAGT,CAAAA,KAAd,KAAqBU,IAArB,GAA4BD,CAAGT,CAAAA,KAA/B;AACA,gBAAAY,KAAKH,CAAL;AAASA,aAAA,GAAKA,CAAGR,CAAAA,KAAR;AAFG,WAAd;AAIEY,aACA,GADKJ,CAAGR,CAAAA,KACR,EADeQ,CAAGR,CAAAA,KAClB,GAD0B,IAC1B,EAAAQ,CAAA,GAAKG,EAAA,GAAKA,EAAGX,CAAAA,KAAR,GAAgBY,CAAhB,GAAqBN,QAArB,GAAgCM,CAArC;AALF;AADF;AASAC,gBAAA,GAAWF,EAAX;AACAG,aAAA,CAAML,IAAN,CAAA;AAvBEjB,gBAAA,GAAW,CAAX;AAHQ;AALI;AAWhBuB,YAASA,KAAI,EAAG;AAAA,UACVxB,MAAMI,KAAMJ,CAAAA,GAAN,EADI,EAEZyB,QAAQzB,GAARyB,GAAcd,SAFF;AAGVc,WAAJ,GAlEYC,IAkEZ,KAAuBrB,SAAoB,IAAPoB,KAAO,EAAAd,SAAA,GAAYX,GAAvD;AAHc;AAsBhBuB,YAASA,MAAK,CAACL,IAAD,CAAO;AACfN,WAAJ,KACaC,OAEb,KAFuBc,YAAA,CAAad,OAAb,CAEvB,EADYK,IACZ,GADmBjB,QACnB,GAAY,EAAZ,IACMiB,IACY,GADLC,QACK,KADKN,OACL,GADee,UAAA,CAAWlB,IAAX,EAAiBQ,IAAjB,GAAwBd,KAAMJ,CAAAA,GAAN,EAAxB,GAAsCK,SAAtC,CACf,GAAAwB,UAAA,KAAaC,aAAA,CAAcD,UAAd,CAF/B,KAIOA,UACM,KADMlB,SAAyB,GAAbP,KAAMJ,CAAAA,GAAN,EAAa,EAAA6B,UAAA,GAAaE,WAAA,CAAYP,IAAZ,EA7F7CE,IA6F6C,CAC5C,GAAXd,KAAW,GAAH,CAAG,EAAAV,QAAA,CAASQ,IAAT,CALb,CAHA;AADmB;AAarBsB,YAASA,SAAS,CAACC,QAAD,EAAWR,KAAX,EAAkBP,IAAlB,CAAwB;AAAA,UACpCJ,IAAI,IAAIR,KAAJ,EADgC,EAEtC4B,QAAQT,KAF8B;AAGxC,UAAIA,KAAJ,IAAa,IAAb;AAAmB,eAAOX,CAAEqB,CAAAA,OAAF,CAAUF,QAAV,EAAoBR,KAApB,EAA2BP,IAA3B,CAAA,EAAkCJ,CAAzC;AAAnB;AACAA,OAAEsB,CAAAA,QAAF,GAAatB,CAAEqB,CAAAA,OAAf;AACArB,OAAEqB,CAAAA,OAAF,GAAYE,QAAS,CAACJ,QAAD,EAAWR,KAAX,EAAkBP,IAAlB,CAAwB;AAC3CO,aAAA,GAAQ,CAACA,KAAT;AAAgBP,YAAA,GAAOA,IAAA,IAAQ,IAAR,GAAelB,GAAA,EAAf,GAAuB,CAACkB,IAA/B;AAChBJ,SAAEsB,CAAAA,QAAF,CAAWE,QAASA,KAAI,CAACC,OAAD,CAAU;AAChCA,iBAAA,IAAWL,KAAX;AACApB,WAAEsB,CAAAA,QAAF,CAAWE,IAAX,EAAiBJ,KAAjB,IAA0BT,KAA1B,EAAiCP,IAAjC,CAAA;AACAe,kBAAA,CAASM,OAAT,CAAA;AAHgC,SAAlC,EAIGd,KAJH,EAIUP,IAJV,CAAA;AAF2C,OAA7C;AAQAJ,OAAEqB,CAAAA,OAAF,CAAUF,QAAV,EAAoBR,KAApB,EAA2BP,IAA3B,CAAA;AACA,aAAOJ,CAAP;AAdwC;AA2B1C0B,YAASA,eAAe,CAACvN,OAAD,EAAU5C,KAAV,EAAiBH,IAAjB,EAAuBI,KAAvB,CAA8B;AAEpD,UADMrB,OACN,GADWgE,OAAQ4C,CAAAA,OAAR,EACX;AAAW1G,aAAH,GAAAF,OAAGE,CAAAA,YAAH,EAGR,KAHQ,GAAuCmB,KAGxC,IAAS,IAAT,GAAgB,EAAhB,GAAqB7B,QAASgG,CAAAA,OAAT,CAHmBnE,KAGnB,CAAA,GASrB,GATqB,GAHmBA,KAY5BwJ,CAAAA,GAAN,CAAU2G,WAAV,CAAuBC,CAAAA,IAAvB,CAA4B,IAA5B,CATe,GASqB,GATrB,GAA+CjS,QAAS4G,CAAAA,QAAT,CAH5B/E,KAG4B,CAAA,IAA4B,CAAC7B,QAASkS,CAAAA,MAAT,CAHzDrQ,KAGyD,CAA7B,GAAsDsQ,YAAA,CAHlFtQ,KAGkF,CAAtD,GAH5BA,KAG4B,GAAoF,EAHvJ,EAAGnB,KAAH,CAAA,IAAA,CAAAF,OAAA,EAAgB,OAAhB,EAAyB,KAAzB,CAAA;AAAR;AAFoD;AAOtD2R,YAASA,aAAY,CAACtM,GAAD,CAAM;AACzB,aAAOuM,MAAOtM,CAAAA,IAAP,CAAYD,GAAZ,CAAiBwF,CAAAA,GAAjB,CAAqB5E,GAAA,IAAO;AACjC,cAAM4L,IAAIxM,GAAA,CAAIY,GAAJ,CAAV;AACA,eAAOA,GAAP,GAAa,IAAb,IAAqBzG,QAASgG,CAAAA,OAAT,CAAiBqM,CAAjB,CAAA,GAIhB,GAJgB,GAAkCA,CAItChH,CAAAA,GAAN,CAAU2G,WAAV,CAAuBC,CAAAA,IAAvB,CAA4B,IAA5B,CAJU,GAI0B,GAJ1B,GAAuCD,WAAA,CAAYK,CAAZ,CAA5D;AAFiC,OAA5B,CAGJJ,CAAAA,IAHI,CAGC,IAHD,CAAP;AADyB;AAS3BD,YAASA,YAAW,CAACnQ,KAAD,CAAQ;AAC1B,aAAO7B,QAASgG,CAAAA,OAAT,CAAiBnE,KAAjB,CAAA,GAA0B,KAA1B,GAAuC7B,QAAS4G,CAAAA,QAAT,CAAkB/E,KAAlB,CAAA,IAA4B,CAAC7B,QAASkS,CAAAA,MAAT,CAAgBrQ,KAAhB,CAA7B,GAAsD,KAAtD,GAAmEA,KAAjH;AAD0B;AAoC5ByQ,YAASA,KAAI,CAAC3E,IAAD,EAAO9C,OAAP,CAAgB;AAE3BA,aAAA,GAAUA,OAAV,IAAqB,EAArB;AACA5K,kBAAasS,CAAAA,QAAShC,CAAAA,IAAtB,CAFahQ,IAEb,CAAA;AACIsK,aAAQsB,CAAAA,MAAZ,IAHa5L,IAGY4L,CAAAA,MAAL,CAAYtB,OAAQsB,CAAAA,MAApB,CAApB;AACItB,aAAQ2H,CAAAA,MAAZ,IAJajS,IAIYiS,CAAAA,MAAL,CAAY3H,OAAQ2H,CAAAA,MAApB,CAApB;AACI3H,aAAQ4H,CAAAA,QAAZ,IAAwB,IAAxB,IALalS,IAKsBkS,CAAAA,QAAL,CAAc5H,OAAQ4H,CAAAA,QAAtB,CAA9B;AACA,UAAI5H,OAAQ6H,CAAAA,MAAZ,IAAsB/E,IAAK+E,CAAAA,MAA3B,CAAmC;AACjC,YAAMC,MAAM3S,QAAS0F,CAAAA,MAAT,CAAgB,EAAhB,EAAoBiI,IAAK+E,CAAAA,MAAzB,EAAiC7H,OAAQ6H,CAAAA,MAAzC,CAAZ;AAPWnS,YAQNmS,CAAAA,MAAL,CAAYrS,UAAWqS,CAAAA,MAAX,CAAkBC,GAAIC,CAAAA,MAAtB,EAA8BD,GAAIlC,CAAAA,IAAlC,CAAZ,CAAA;AAFiC;AANtBlQ,UAWRsS,CAAAA,OAAL,GAXatS,IAURuS,CAAAA,GACL,GADW,IACX;AAXavS,UAYRwS,CAAAA,WAAL,GAAmBlI,OAAQmI,CAAAA,QAA3B,IAAuC9S,cAAe+S,CAAAA,UAAWC,CAAAA,MAAjE;AAZa3S,UAaRkN,CAAAA,WAAL,GAAmB,IAAIvN,cAAeiT,CAAAA,UAAnB,EAAnB;AACMrG,SAAAA,GAdOvM,IAcKkN,CAAAA,WAAYX,CAAAA,IAAxBA;AAdOvM,UAiBR4D,CAAAA,SAAL,GAAiB,IAAjB;AAjBa5D,UAkBR6S,CAAAA,QAAL,GAAgBvI,OAAQ+B,CAAAA,OAAxB,IAAmCmF,cAAnC;AAlBaxR,UAkB2C8S,CAAAA,OAAL,GAAe,CAAA,CAAf;AAlBtC9S,UAmBR8D,CAAAA,QAAL,GAAmDsI,CAAnC,IAAIzM,cAAeoT,CAAAA,aAAnB,EAAmC3G,EAAAA,KAAnC,CAAyCG,GAAzC,CAAhB;AAnBavM,UAqBRgT,CAAAA,eAAL,GArBahT,IAoBRiT,CAAAA,aACL,GADqB,CAAA,CACrB;AArBajT,UAsBRkT,CAAAA,OAAL,GAAe,EAAf;AAtBalT,UAuBR8F,CAAAA,eAAL,GAAuB,EAAvB;AAvBa9F,UAwBR+D,CAAAA,gBAAL,GAAwB,EAAxB;AAxBa/D,UA2BRoG,CAAAA,YAAL,GAAoBnB,qBAAA,CAAsBmI,IAAK+F,CAAAA,WAA3B,CAApB;AA3BanT,UA4BRyB,CAAAA,YAAL,CA5BazB,IA4BUoG,CAAAA,YAAa3E,CAAAA,YAApC,CAAA;AAGA,YAAM2R,MAAMjG,OAAA,CA/BCnN,IA+BD,EAAcoN,IAAd,EAAoB9C,OAAQ+C,CAAAA,IAA5B,CAAZ;AA/BarN,UAgCRiC,CAAAA,QAAL,GAAgBmR,GAAhB;AAhCapT,UAiCRc,CAAAA,QAAL,GAAgBsS,GAAIC,CAAAA,OAApB;AAjCarT,UAkCRsT,CAAAA,KAAL,GAAmCxI,CAArBsC,IAAKmG,CAAAA,QAAgBzI,IAAJ,EAAIA,EAAAA,GAAtB,CAA0BpK,CAAA,IAAM,EAC3CgI,MAAO,IADoC,EAE3CD,MAAOhJ,QAAS0F,CAAAA,MAAT,CAAgB,EAAhB,EAAoBzE,CAApB,CAFoC,EAAhC,CAAb;AAMI0S,SAAI7G,CAAAA,IAAR,IAAc6G,GAAI7G,CAAAA,IAAK1D,CAAAA,GAAT,CAAa0D,GAAb,CAAd;AACAA,SAAK9F,CAAAA,MAAL,GAAc2M,GAAIpR,CAAAA,IAAKuK,CAAAA,IAAK7J,CAAAA,KAA5B;AAzCa1C,UA0CRyC,CAAAA,KAAL,CAAW2Q,GAAIpR,CAAAA,IAAKuK,CAAAA,IAAK7J,CAAAA,KAAzB,EA1Ca1C,IA0CwB2G,CAAAA,SAAL,EAAiB6M,CAAAA,MAAjB,CAAwBjH,GAAKkH,CAAAA,KAA7B,CAAhC,CAAA;AA1CazT,UA6CRoO,CAAAA,MAAL,GA7CapO,IA6CM2C,CAAAA,KAAL,EAAd;AA7Ca3C,UA8CRuO,CAAAA,OAAL,GA9CavO,IA8COkD,CAAAA,MAAL,EAAf;AA9CalD,UA+CR+C,CAAAA,UAAL,GAAkB2K,SAAA,CA/CL1N,IA+CK,EA/CLA,IA+C0BoO,CAAAA,MAArB,CAAlB;AA/CapO,UAgDRmD,CAAAA,WAAL,GAAmB2K,UAAA,CAhDN9N,IAgDM,EAhDNA,IAgD4BuO,CAAAA,OAAtB,CAAnB;AAhDavO,UAiDRwD,CAAAA,OAAL,GAAe,CAAC,CAAD,EAAI,CAAJ,CAAf;AAjDaxD,UAkDRa,CAAAA,OAAL,GAAe,CAAf;AAlDab,UAmDRiO,CAAAA,SAAL,GAAiB,CAAjB;AACAF,sBAAA,CApDa/N,IAoDb,CAAA;AAGAQ,gBAAA,CAvDaR,IAuDb,CAAA;AAGAe,YAAA,CA1Daf,IA0Db,CAAA;AA1DaA,UA6DRK,CAAAA,WAAL,CAAiB+M,IAAK/M,CAAAA,WAAtB,CAAA;AAGIiK,aAAQoJ,CAAAA,KAAZ,IAhEa1T,IAgEW0T,CAAAA,KAAL,EAAnB;AAGIpJ,aAAQpK,CAAAA,SAAZ,IAnEaF,IAmEe6L,CAAAA,UAAL,CAAgBvB,OAAQpK,CAAAA,SAAxB,EAAmCoK,OAAQ/B,CAAAA,IAA3C,CAAvB;AACI+B,aAAQqJ,CAAAA,eAAZ,IApEa3T,IAoEqB4T,CAAAA,gBAAL,EAA7B;AArE2B;AAuE7BC,YAASA,aAAY,CAAC7T,IAAD,EAAO+B,IAAP,CAAa;AAChC,aAAOtC,QAASyC,CAAAA,cAAT,CAAwBlC,IAAKc,CAAAA,QAA7B,EAAuCiB,IAAvC,CAAA,GAA+C/B,IAAKc,CAAAA,QAAL,CAAciB,IAAd,CAA/C,GAAqEtC,QAAS0C,CAAAA,KAAT,CAAe,4BAAf,GAA8C1C,QAASqU,CAAAA,WAAT,CAAqB/R,IAArB,CAA9C,CAA5E;AADgC;AAGlCgS,YAASA,oBAAmB,CAACjF,EAAD,EAAK7K,OAAL,CAAc;AAClCN,QAAAA,GAAwBqQ,CAAnBlF,EAAGmF,CAAAA,QAAgBD,IAAJ,EAAIA,EAAAA,MAApB,CAA2BlF,EAAA,IAAMA,EAAGoF,CAAAA,OAAT,IAAoBpF,EAAGoF,CAAAA,OAAQjQ,CAAAA,OAA/B,KAA2CA,OAAtE,CAAJN;AACN,aAAOA,EAAEiH,CAAAA,MAAF,GAAWjH,EAAA,CAAE,CAAF,CAAX,GAAkB,IAAzB;AAFwC;AAI1CwQ,YAASA,oBAAmB,CAACnU,IAAD,EAAO+B,IAAP,EAAa+M,EAAb,EAAiB7K,OAAjB,CAA0B;AACpD,UAAIN,IAAIoQ,mBAAA,CAAoBjF,EAApB,EAAwB7K,OAAxB,CAAR;AACKN,OAAL,KACEA,CAEA,GAFImI,IAAA,CAAK9L,IAAL,EAAW,EAAA,IAAMiE,OAAA,CAAQlC,IAAR,EAAc+M,EAAGxN,CAAAA,KAAjB,CAAjB,CAEJ,EADAqC,CAAEM,CAAAA,OACF,GADYA,OACZ,EAAAjE,IAAKmB,CAAAA,EAAL,CAAQ2N,EAAR,EAAY,IAAZ,EAAkBnL,CAAlB,CAHF;AAKA,aAAO3D,IAAP;AAPoD;AAStDoU,YAASA,uBAAsB,CAACpU,IAAD,EAAO8O,EAAP,EAAW7K,OAAX,CAAoB;AAEjD,OADMN,OACN,GADUoQ,mBAAA,CAAoBjF,EAApB,EAAwB7K,OAAxB,CACV,KAAO6K,EAAGmF,CAAAA,QAASI,CAAAA,MAAZ,CAAmB1Q,OAAnB,CAAP;AACA,aAAO3D,IAAP;AAHiD;AA9gCnD,UAGEsU,UAAU,CACRxI,KAAM,CAAA,CADE,CAHZ,EA0KMjE,MAAMhF,IAAK0R,CAAAA,IAAL,CAAU,EAAV,CA1KZ,EA2KEzM,KAAKjF,IAAK0R,CAAAA,IAAL,CAAU,EAAV,CA3KP,EA4KExM,KAAKlF,IAAK0R,CAAAA,IAAL,CAAU,CAAV,CA5KP;AAgnBA,QAGEC,OAAO,CACLC,KAAM,CAAA,CADD,CAHT,EAgJI7E,QAAQ,CAhJZ,EAkJEC,UAAU,CAlJZ,EAoJEgB,aAAa,CApJf,EAwJEd,QAxJF,EAyJEO,QAzJF,EA0JEX,YAAY,CA1Jd,EA2JEV,WAAW,CA3Jb,EA4JEI,YAAY,CA5Jd,EA6JED,QAAQ,MAAOsF,YAAP,KAAuB,QAAvB,IAAmCA,WAAY1F,CAAAA,GAA/C,GAAqD0F,WAArD,GAAmEC,IA7J7E,EA8JEzF,WAAW,MAAO0F,OAAP,KAAkB,QAAlB,IAA8BA,MAAOC,CAAAA,qBAArC,GAA6DD,MAAOC,CAAAA,qBAAsBtM,CAAAA,IAA7B,CAAkCqM,MAAlC,CAA7D,GAAyG,QAAS,CAACE,CAAD,CAAI;AAC/HlE,gBAAA,CAAWkE,CAAX,EAAc,EAAd,CAAA;AAD+H,KA9JnI;AA0KAxF,SAAMyF,CAAAA,SAAN,GAAkB,CAChBtJ,YAAa6D,KADG,EAEhB6B,QAASA,QAAS,CAACF,QAAD,EAAWR,KAAX,EAAkBP,IAAlB,CAAwB;AACxC,UAAI,MAAOe,SAAX,KAAwB,UAAxB;AAAoC,cAAM,IAAI+D,SAAJ,CAAc,4BAAd,CAAN;AAApC;AACA9E,UAAA,IAAQA,IAAA,IAAQ,IAAR,GAAelB,GAAA,EAAf,GAAuB,CAACkB,IAAhC,KAAyCO,KAAA,IAAS,IAAT,GAAgB,CAAhB,GAAoB,CAACA,KAA9D;AACK,UAAKhB,CAAAA,KAAV,IAAmBa,QAAnB,KAAgC,IAAhC,KACMA,QAAJ,GAAcA,QAASb,CAAAA,KAAvB,GAA+B,IAA/B,GAAyCM,QAAzC,GAAoD,IACpD,EAAAO,QAAA,GAAW,IAFb;AAIA,UAAKf,CAAAA,KAAL,GAAa0B,QAAb;AACA,UAAKzB,CAAAA,KAAL,GAAaU,IAAb;AACAK,WAAA,EAAA;AATwC,KAF1B,EAahBlJ,KAAMA,QAAS,EAAG;AACZ,UAAKkI,CAAAA,KAAT,KACE,IAAKA,CAAAA,KAEL,GAFa,IAEb,EADA,IAAKC,CAAAA,KACL,GADaW,QACb,EAAAI,KAAA,EAHF;AADgB,KAbF,CAAlB;AAyPA9Q,YAASwV,CAAAA,QAAT,CAAkBlD,IAAlB,EAAwBrS,YAAasS,CAAAA,QAArC,EAA+C,CAGvCkD,cAAQ,CAACtO,MAAD,EAASuO,MAAT,EAAiBC,OAAjB,CAA0B;AAEtC,YAAM1V,YAAasS,CAAAA,QAAS+C,CAAAA,SAAUG,CAAAA,QAASlF,CAAAA,IAAzC,CAA8C,IAA9C,EAAoDpJ,MAApD,EAA4DuO,MAA5D,CAAN;AAGA,UAAI,IAAKrC,CAAAA,OAAT,IAAoB,IAAKjS,CAAAA,OAAzB;AACE,WAAI;AACE,cAAK+C,CAAAA,SAOT,KANM,IAAK/C,CAAAA,OAIT,KAHE,IAAKA,CAAAA,OACL,GADe,CACf,EAAA4C,cAAA,CAAe,IAAf,CAEF,GAAA,MAAM,IAAKG,CAAAA,SAAUqJ,CAAAA,WAAf,CAA2B,IAAKC,CAAAA,WAAYX,CAAAA,IAA5C,CAER,GAAA,IAAKuG,CAAAA,OAAL,GAAe,CAAA,CAAf;AARE,SASF,QAAOlG,CAAP,CAAU;AACV,cAAKzK,CAAAA,KAAL,CAAWyK,CAAX,CAAA;AADU;AAVd;AAgBIwI,aAAJ,IAAa1V,YAAa2V,CAAAA,aAAb,CAA2B,IAA3B,EAAiCD,OAAjC,CAAb;AACA,aAAO,IAAP;AAtBsC,KAHK,EA2B7CE,KAAK,CAACpU,IAAD,CAAO;AACV,UAAK4R,CAAAA,OAAL,GAAe,CAAA,CAAf;AACA,UAAKlP,CAAAA,SAAL,IAAkB,IAAKA,CAAAA,SAAU0R,CAAAA,KAAf,CAAqBpU,IAArB,CAAlB;AAFU,KA3BiC,EAiC7Cb,WAAW,CAAC2G,IAAD,CAAO;AAChB,UAAIiF,SAAUrB,CAAAA,MAAd,CAAsB;AACpB,cAAMtK,OAAO0G,IAAA,IAAQ,IAAR,GAAeA,IAAf,GAAsB,EAAtB,GAA2B,IAAxC;AACI1G,YAAJ,KAAa,IAAKiV,CAAAA,KAAlB,IAAyBnV,SAAA,CAAU,IAAKmS,CAAAA,GAAf,EAAoB,IAAKgD,CAAAA,KAAzB,GAAiCjV,IAAjC,CAAzB;AACA,eAAO,IAAP;AAHoB;AAKtB,aAAO,IAAKiV,CAAAA,KAAZ;AANgB,KAjC2B,EAyC7CrV,SAAS,EAAG;AACV,aAAO,IAAKqS,CAAAA,GAAZ;AADU,KAzCiC,EA4C7CjG,UAAU,EAAG;AACX,aAAO,IAAKY,CAAAA,WAAZ;AADW,KA5CgC,EA+C7C3J,MAAM,EAAG;AACP,aAAO,IAAKC,CAAAA,OAAQoB,CAAAA,KAAb,EAAP;AADO,KA/CoC,EAkD7CmE,MAAM,CAAChH,IAAD,EAAOT,KAAP,EAAcgJ,OAAd,CAAuB;AAC3B,YAAMwE,KAAK+E,YAAA,CAAa,IAAb,EAAmB9R,IAAnB,CAAX;AACA,aAAOkK,SAAUrB,CAAAA,MAAV,KAAqB,CAArB,GAAyBkE,EAAGxN,CAAAA,KAA5B,GAAoC,IAAKwH,CAAAA,MAAL,CAAYgG,EAAZ,EAAgBxN,KAAhB,EAAuBgJ,OAAvB,CAA3C;AAF2B,KAlDgB,EAsD7C3H,KAAK,CAACjC,CAAD,CAAI;AACP,aAAOuL,SAAUrB,CAAAA,MAAV,GAAmB,IAAK7B,CAAAA,MAAL,CAAY,OAAZ,EAAqBrI,CAArB,CAAnB,GAA6C,IAAKqI,CAAAA,MAAL,CAAY,OAAZ,CAApD;AADO,KAtDoC,EAyD7C7F,MAAM,CAACxC,CAAD,CAAI;AACR,aAAOuL,SAAUrB,CAAAA,MAAV,GAAmB,IAAK7B,CAAAA,MAAL,CAAY,QAAZ,EAAsBrI,CAAtB,CAAnB,GAA8C,IAAKqI,CAAAA,MAAL,CAAY,QAAZ,CAArD;AADQ,KAzDmC,EA4D7CnG,OAAO,CAAClC,CAAD,CAAI;AACT,aAAOuL,SAAUrB,CAAAA,MAAV,GAAmB,IAAK7B,CAAAA,MAAL,CAAY,SAAZ,EAAuBnG,OAAA,CAAQlC,CAAR,CAAvB,CAAnB,GAAwDkC,OAAA,CAAQ,IAAKmG,CAAAA,MAAL,CAAY,SAAZ,CAAR,CAA/D;AADS,KA5DkC,EA+D7C4E,QAAQ,CAACjN,CAAD,CAAI;AACV,aAAOuL,SAAUrB,CAAAA,MAAV,GAAmB,IAAK7B,CAAAA,MAAL,CAAY,UAAZ,EAAwBrI,CAAxB,CAAnB,GAAgD,IAAKqI,CAAAA,MAAL,CAAY,UAAZ,CAAvD;AADU,KA/DiC,EAkE7CvI,UAAU,CAACE,CAAD,CAAI;AACZ,aAAOuL,SAAUrB,CAAAA,MAAV,GAAmB,IAAK7B,CAAAA,MAAL,CAAY,YAAZ,EAA0BrI,CAA1B,CAAnB,GAAkD,IAAKqI,CAAAA,MAAL,CAAY,YAAZ,CAAzD;AADY,KAlE+B,EAqE7C0J,QAAQ,CAAC5M,IAAD,CAAO;AACb,UAAI,CAACoG,SAAUrB,CAAAA,MAAf;AAAuB,eAAO,IAAK4H,CAAAA,WAAZ;AAAvB;AACK7S,oBAAemN,CAAAA,YAAf,CAA4BjH,IAA5B,CAAL,IAAwCpG,QAAS0C,CAAAA,KAAT,CAAe,8BAAf,GAAgD0D,IAAhD,CAAxC;AACIA,UAAJ,KAAa,IAAK2M,CAAAA,WAAlB,KACE,IAAKA,CAAAA,WACL,GADmB3M,IACnB,EAAA,IAAK2P,CAAAA,cAAL,EAFF;AAIA,aAAO,IAAP;AAPa,KArE8B,EA8E7CnJ,OAAO,CAACpI,OAAD,CAAU;AACf,UAAI,CAACgI,SAAUrB,CAAAA,MAAf;AAAuB,eAAO,IAAKiI,CAAAA,QAAZ;AAAvB;AACI5O,aAAJ,KAAgB,IAAK4O,CAAAA,QAArB,KACE,IAAKA,CAAAA,QACL,GADgB5O,OAChB,EAAA,IAAKuR,CAAAA,cAAL,EAFF;AAIA,aAAO,IAAP;AANe,KA9E4B,EAsF7C5J,MAAM,CAACA,MAAD,CAAS;AACb,UAAI,CAACK,SAAUrB,CAAAA,MAAf;AAAuB,eAAO,IAAK6K,CAAAA,OAAZ;AAAvB;AACI7J,YAAJ,KAAe,IAAK6J,CAAAA,OAApB,KACE/V,YAAasS,CAAAA,QAAS+C,CAAAA,SAAUnJ,CAAAA,MAAOoE,CAAAA,IAAvC,CAA4C,IAA5C,EAAkDpE,MAAlD,CACA,EAAA,IAAK4J,CAAAA,cAAL,EAFF;AAIA,aAAO,IAAP;AANa,KAtF8B,EA8F7C3R,MAAM,EAAG;AAEP,UAAKoK,CAAAA,SAAL,GAAiB,CAAjB;AAEA,aAAO,IAAKyH,CAAAA,KAAL,CAAW7B,YAAA,CAAa,IAAb,EAAmB,UAAnB,CAAX,CAAP;AAJO,KA9FoC,EAoG7C2B,cAAc,EAAG;AACX,UAAK5R,CAAAA,SAAT,KACE,IAAKA,CAAAA,SACL,GADiB,IACjB,EAAA,IAAKiI,CAAAA,UAAL,CAAgB,IAAK0G,CAAAA,GAArB,EAA0B,IAAKD,CAAAA,OAA/B,CAFF;AADe,KApG4B,EA2G7CqD,YAzdFC,QAAmB,CAAClI,SAAD,EAAYI,UAAZ,EAAwBnL,KAAxB,EAA+BO,MAA/B,EAAuCK,MAAvC,EAA+CsS,IAA/C,CAAqD;AACtE,UAAKC,CAAAA,QAAL,CAAc9V,IAAA,IAAQ;AACpB,YAAI+V,QAAQ,CAAZ;AAGA/V,YAAKiO,CAAAA,SAAL,GAAiB,CAAjB;AAGIjO,YAAK2C,CAAAA,KAAL,EAAJ,KAAqBA,KAArB,KACEoT,KAEA,GAFQ,CAER,EADA/V,IAAK+I,CAAAA,MAAL,CA/DMiN,OA+DN,EAAmBrT,KAAnB,EAA0B6R,IAA1B,CACA,EAAAxU,IAAKmO,CAAAA,YAAasG,CAAAA,IAAlB,CAAuB,CAAA,CAAvB,CAHF;AAOIzU,YAAKkD,CAAAA,MAAL,EAAJ,KAAsBA,MAAtB,KACE6S,KAEA,GAFQ,CAER,EADA/V,IAAK+I,CAAAA,MAAL,CArEKkN,QAqEL,EAAoB/S,MAApB,EAA4BsR,IAA5B,CACA,EAAAxU,IAAKsO,CAAAA,aAAcmG,CAAAA,IAAnB,CAAwB,CAAA,CAAxB,CAHF;AAOIzU,YAAK+C,CAAAA,UAAT,KAAwB2K,SAAxB,KACE1N,IAAKa,CAAAA,OACL,GADe,CACf,EAAAb,IAAK+C,CAAAA,UAAL,GAAkB2K,SAFpB;AAMI1N,YAAKmD,CAAAA,WAAT,KAAyB2K,UAAzB,KACE9N,IAAKa,CAAAA,OACL,GADe,CACf,EAAAb,IAAKmD,CAAAA,WAAL,GAAmB2K,UAFrB;AAMA,YAAI9N,IAAKwD,CAAAA,OAAL,CAAa,CAAb,CAAJ,KAAwBD,MAAA,CAAO,CAAP,CAAxB,IAAqCvD,IAAKwD,CAAAA,OAAL,CAAa,CAAb,CAArC,KAAyDD,MAAA,CAAO,CAAP,CAAzD;AACEvD,cAAKa,CAAAA,OACL,GADe,CACf,EAAAb,IAAKwD,CAAAA,OAAL,GAAeD,MAAf;AAFF;AAMIwS,aAAJ,IAAW/V,IAAKkW,CAAAA,GAAL,CAAS,OAAT,CAAX;AACIL,YAAJ,IAAU7V,IAAK8V,CAAAA,QAAL,CAAchE,CAAA,IAAKA,CAAEjO,CAAAA,MAAF,EAAnB,CAAV;AAxCoB,OAAtB,EAyCG,CAAA,CAzCH,EAyCU,CAzCV,CAAA;AADsE,KA8WzB,EA8G7CyF,gBAAgB,CAACzD,IAAD,EAAO5B,OAAP,EAAgBqG,OAAhB,CAAyB;AACvC,UAAI2G,WAAWhN,OAAf;AACMqG,aAAN,IAAiBA,OAAQwB,CAAAA,IAAzB,KAAkC,CAAA,CAAlC,KAEEmF,QACA,GADWnF,IAAA,CAAK,IAAL,EAAW7H,OAAX,CACX,EAAAgN,QAASkF,CAAAA,GAAT,GAAelS,OAHjB;AAKA,UAAKH,CAAAA,QAAS3C,CAAAA,EAAd,CAAiB0E,IAAjB,EAAuBoL,QAAvB,CAAA;AACA,aAAO,IAAP;AARuC,KA9GI,EAwH7CmF,mBAAmB,CAACvQ,IAAD,EAAO5B,OAAP,CAAgB;AAOjC,WAPiC,IAC7BuI,WAAW,IAAK1I,CAAAA,QAAS0I,CAAAA,QAAd,CAAuB3G,IAAvB,CADkB,EAE/BtB,IAAIiI,QAAS5B,CAAAA,MAFkB,EAG/BjH,CAH+B,EAI/BmM,CAGF,EAAO,EAAEvL,CAAT,IAAc,CAAd,CAAA;AAGE,YAFAuL,CAEI,GAFAtD,QAAA,CAASjI,CAAT,CAAYsB,CAAAA,IAEZ,EADJlC,CACI,GADA6I,QAAA,CAASjI,CAAT,CAAYN,CAAAA,OACZ,EAAA4B,IAAA,KAASiK,CAAT,KAAe7L,OAAf,KAA2BN,CAA3B,IAAgCM,OAAhC,KAA4CN,CAAEwS,CAAAA,GAA9C,CAAJ,CAAwD;AACtD,cAAKrS,CAAAA,QAASuS,CAAAA,GAAd,CAAkBvG,CAAlB,EAAqBnM,CAArB,CAAA;AACA;AAFsD;AAH1D;AAQA,aAAO,IAAP;AAfiC,KAxHU,EAyI7C2S,iBAAiB,CAACrS,OAAD,CAAU;AACzB,YAAMsS,IAAI,IAAKxS,CAAAA,gBAAf;AACKwS,OAAEC,CAAAA,QAAF,CAAWvS,OAAX,CAAL,IAIEsS,CAAExQ,CAAAA,IAAF,CAAO9B,OAAP,CAJF;AAMA,aAAO,IAAP;AARyB,KAzIkB,EAmJ7CwS,oBAAoB,CAACxS,OAAD,CAAU;AAAA,UACxBsS,IAAI,IAAKxS,CAAAA,gBADe;AAE1BQ,aAAAA,GAAIgS,CAAEG,CAAAA,OAAF,CAAUzS,OAAV,CAAJM;AACEA,aAAJ,IAAS,CAAT,IACEgS,CAAEI,CAAAA,MAAF,CAASpS,OAAT,EAAY,CAAZ,CADF;AAGA,aAAO,IAAP;AAN4B,KAnJe,EA2J7CqS,iBAAiB,CAAC7U,IAAD,EAAOkC,OAAP,CAAgB;AAC/B,aAAOkQ,mBAAA,CAAoB,IAApB,EAA0BpS,IAA1B,EAAgC8R,YAAA,CAAa,IAAb,EAAmB9R,IAAnB,CAAhC,EAA0DkC,OAA1D,CAAP;AAD+B,KA3JY,EA8J7C4S,oBAAoB,CAAC9U,IAAD,EAAOkC,OAAP,CAAgB;AAClC,aAAOmQ,sBAAA,CAAuB,IAAvB,EAA6BP,YAAA,CAAa,IAAb,EAAmB9R,IAAnB,CAA7B,EAAuDkC,OAAvD,CAAP;AADkC,KA9JS,EAiK7C6S,eAAe,CAAC/U,IAAD,EAAOkC,OAAP,CAAgB;AAC7B,aAAOkQ,mBAAA,CAAoB,IAApB,EAA0BpS,IAA1B,EAAgCD,OAAA,CAAQ,IAAR,EAAcC,IAAd,CAAoBgV,CAAAA,MAApD,EAA4D9S,OAA5D,CAAP;AAD6B,KAjKc,EAoK7C+S,kBAAkB,CAACjV,IAAD,EAAOkC,OAAP,CAAgB;AAChC,aAAOmQ,sBAAA,CAAuB,IAAvB,EAA6BtS,OAAA,CAAQ,IAAR,EAAcC,IAAd,CAAoBgV,CAAAA,MAAjD,EAAyD9S,OAAzD,CAAP;AADgC,KApKW,EAuK7CxC,YAAY,CAACf,CAAD,CAAI;AACd,UAAIuL,SAAUrB,CAAAA,MAAd,CAAsB;AACpB,YAAI,IAAKqI,CAAAA,aAAT,KAA2B,CAAC,CAACvS,CAA7B,CAAgC;AAC9B,gBAAMuW,OAAOzV,SAAA,CAAU,IAAV,EAAgB,IAAhB,CAAb;AACA,cAAKyR,CAAAA,aAAL,GAAqB,CAAC,CAACvS,CAAvB;AACIuW,cAAJ,IAAUzV,SAAA,CAAU,IAAV,EAAgByV,IAAhB,CAAV;AAH8B;AAKhC,eAAO,IAAP;AANoB;AAQpB,aAAO,IAAKhE,CAAAA,aAAZ;AATY,KAvK6B,EAmL7CiE,cAAc,CAACxW,CAAD,CAAI;AAChB,aAAIuL,SAAUrB,CAAAA,MAAd,IACE,IAAKoI,CAAAA,eACE,GADgBtS,CAChB,EAAA,IAFT,IAIS,IAAKsS,CAAAA,eAJd;AADgB,KAnL2B,EA2L7CmE,MArVFA,QAAe,CAAClG,QAAD,EAAWR,KAAX,CAAkB;AAO/B,UAAKyC,CAAAA,OAAQnN,CAAAA,IAAb,CAAkBiL,QAAA,CANlBM,QAAa,CAACC,OAAD,CAAU;AACrBN,gBAAA,CAAS,CACPmG,UAAWzC,IAAK3F,CAAAA,GAAL,EADJ,EAEEuC,OAFF,CAAT,CAAA;AADqB,OAML,EAAed,KAAf,CAAlB,CAAA;AAP+B,KA0Jc,EA4L7CrP,OAzpCFA,QAAe,CAACqF,MAAD,EAASZ,IAAT,EAAemO,MAAf,CAAuB;AAAA,UAChChU,OAAO,IADyB,EAElCkO,IAAI,IAAIxO,YAAa2X,CAAAA,WAAjB,CAA6BrD,MAA7B,CAF8B;AAGlCsD,YAAAA,GAAOA,QAAS,CAAC1K,CAAD,EAAI1L,IAAJ,CAAU;AACxBlB,YAAKgJ,CAAAA,QAAL,CAAc,IAAd,EAAoB,EAAA,IAAM;AACpB,cAAA,eAAA;AAAA,cAAA,eAAA,GAAA,MAAA,KA3DC,MA2DD,CAAA;AA3BiB,gBACvBuO,MA0ByBvX,IA1BdoG,CAAAA,YAAahB,CAAAA,QADD;AAEzBoS,2BAAAA,GAAUD,GAAIC,CAAAA,OAAdA;AACAC,eAAAA,GAAQF,GAAIE,CAAAA,KAAZA;AACF,2BAAA,GAAOD,eAAA,KAAY,CAAA,CAAZ,IAAqBC,GAArB,KAA+B,CAAA,CAA/B,GAAsC,CAAA,CAAtC,GAA8CD,eAAA,KAAY,CAAA,CAAZ,IAAoBC,GAApB,KAA8B,CAAA,CAA9B,GAAsC,CAAA,CAAtC,GAA6CD,eAAA,GAAUA,eAAA,CAuB/E3R,IAvB+E,CAAV,GAA0B4R,GAAA,GAAQ,CAACA,GAAA,CAuBxG5R,IAvBwG,CAAT,GAuB/F7F,IAvB2HkX,CAAAA,cAAL,EAAnJ;AAuBU;AAAA,yBAAJ,IACEtK,CAAEsK,CAAAA,cAAF,EADF;AAGEQ,yBAAAA,GAAFxJ,CAAEwJ,CAAAA,OAAAA;AAhHNzX,aAAAA,IADEuL,GACFvL,GAgH0BD,IAjHf4D,CAAAA,SACX3D,KAAUuL,GAAEmM,CAAAA,MAAF,EAAV1X;AAIF,cAAIA,GAAJ,CAAQ;AACN,gBAAA2X,YAAYtU,MAAA,CA2GctD,IA3Gd,CAAZ;AACA,gBAAA4M,IA0GgCA,CA1GtBiL,CAAAA,cAAN,GA0G4BjL,CA1GCiL,CAAAA,cAAN,CAAqB,CAArB,CAAvB,GA0G4BjL,CA1GhC;AACAjI,aAAA,GAAIhF,cAAewE,CAAAA,KAAf,CAAqByI,CAArB,EAAwB3M,GAAxB,CAAJ;AACA0E,aAAA,CAAE,CAAF,CAAA,IAAQiT,SAAA,CAAU,CAAV,CAAR;AACAjT,aAAA,CAAE,CAAF,CAAA,IAAQiT,SAAA,CAAU,CAAV,CAAR;AALM;AA4G0BhL,WArG5BkL,CAAAA,QAAN,GAqG4B9X,IArG5B;AAqGkC4M,WApG5B1L,CAAAA,IAAN,GAoGqCA,IApGrC;AAoGkC0L,WAnG5BpN,CAAAA,IAAN,GAAa0E,SAAA,CAmGelE,IAnGf,EAmGwBkB,IAnGxB,EAAsByD,CAAtB,CAAb;AAmGQ+S,yBAAF,CAAA,IAAA,CAAAxJ,CAAA,EAA4BtB,CAA5B,CAAA;AAJwB,SAA1B,CAAA;AADwB,OAA1B0K;AAFF,UAUE1R,OAVF;AAWA,UAAIa,MAAJ,KAjEQsR,OAiER;AACM9R,cAAA,CAAOjG,IAAP,EAAa,OAAb,EAAsB6F,IAAtB,CAAJ,IACE7F,IAAKmX,CAAAA,KAAL,CAAWG,MAAX,EAAiBzR,IAAjB,CADF;AADF,YAIO,KAAIY,MAAJ,KAtEIuR,MAsEJ;AACD/R,cAAA,CAAOjG,IAAP,EAAa,MAAb,EAAqB6F,IAArB,CAAJ,IAEE7F,IAAKsJ,CAAAA,gBAAL,CAAsBzD,IAAtB,EAA4ByR,MAA5B,EAAkChD,OAAlC,CAFF;AADK;AAeL,YATI7N,MAAJ,KA1EOwR,QA0EP,GACMhS,MAAA,CAAOjG,IAAP,EAAa,QAAb,EAAuB6F,IAAvB,CADN,IACsC,MAAO+O,OAD7C,KACwD,WADxD,KAEIhP,OAFJ,GAEc,CAACgP,MAAD,CAFd,IAIW,MAAOlT,SAJlB,KAI+B,WAJ/B,IAKMuE,MAAA,CAAOjG,IAAP,EAAa,UAAb,EAAyB6F,IAAzB,CALN,KAMID,OANJ,GAMcsS,KAAMC,CAAAA,IAAN,CAAWzW,QAAS0W,CAAAA,gBAAT,CAA0B3R,MAA1B,CAAX,CANd,CASKb,EAAAA,OAAL,CAEO;AACL,eADK,IACIrB,IAAI,CADR,EACWoG,IAAI/E,OAAQgF,CAAAA,MAA5B,EAAoCrG,CAApC,GAAwCoG,CAAxC,EAA2C,EAAEpG,CAA7C;AACEqB,mBAAA,CAAQrB,CAAR,CAAW+E,CAAAA,gBAAX,CAA4BzD,IAA5B,EAAkCyR,MAAlC,CAAA;AADF;AAGA3R,4BAAA,CAAmB3F,IAAnB,EAAyB4F,OAAzB,EAAkCC,IAAlC,EAAwCyR,MAAxC,CAAA;AAJK,SAFP;AACEtX,cAAKsG,CAAAA,IAAL,CAAU,gCAAV,GAA6CG,MAA7C,CAAA;AADF;AAfK;AAwBP,aAAOyH,CAAP;AAxCoC,KA69BS,EA6L7CmK,SAjlCFA,QAAkB,EAAG;AAAA,UACfhM,UAAU,IAAKwG,CAAAA,QADA,EAEjByF,SAAS,IAAKpF,CAAAA,OAFG,EAGjB1G,WAAW,IAAK1I,CAAAA,QAAS0I,CAAAA,QAAd,EAHM,EAIjB+L,YAAY,IAAKzS,CAAAA,eAJA,EAKjB6E,CALiB;AAWnB,WADAA,CACA,GADI2N,MAAO1N,CAAAA,MACX,EAAO,EAAED,CAAT,IAAc,CAAd,CAAA;AACE2N,cAAA,CAAO3N,CAAP,CAAUtD,CAAAA,IAAV,EAAA;AADF;AAIA,WADAsD,CACA,GADI4N,SAAU3N,CAAAA,MACd,EAAO,EAAED,CAAT,IAAc,CAAd,CAAA,CAAiB;AACf,YAAAiC,IAAI2L,SAAA,CAAU5N,CAAV,CAAJ;AAEA,aADA6N,MACA,GADI5L,CAAEhH,CAAAA,OAAQgF,CAAAA,MACd,EAAO,EAAE4N,MAAT,IAAc,CAAd,CAAA;AACE5L,WAAEhH,CAAAA,OAAF,CAAU4S,MAAV,CAAapC,CAAAA,mBAAb,CAAiCxJ,CAAE/G,CAAAA,IAAnC,EAAyC+G,CAAE3I,CAAAA,OAA3C,CAAA;AADF;AAHe;AAOboI,aAAJ,IACEA,OAAQ2D,CAAAA,IAAR,CAAa,IAAb,EAAmB,IAAKlM,CAAAA,QAAxB,EAAkC,IAAlC,EAAwC,IAAxC,EAA8C,IAA9C,CADF;AAMA,WADA6G,CACA,GADI6B,QAAS5B,CAAAA,MACb,EAAO,EAAED,CAAT,IAAc,CAAd,CAAA;AACEmF,iBAEA,GAFItD,QAAA,CAAS7B,CAAT,CAAY9E,CAAAA,IAEhB,EADAlC,OACA,GADI6I,QAAA,CAAS7B,CAAT,CAAY1G,CAAAA,OAChB,EAAA,IAAKH,CAAAA,QAASuS,CAAAA,GAAd,CAAkBvG,SAAlB,EAAqBnM,OAArB,CAAA;AAHF;AAKA,aAAO,IAAP;AAjCmB,KAo5B0B,EA8L7C+P,MApmCFA,QAAe,CAAC+E,QAAD,EAAWC,QAAX,CAAqB;AAClCD,cAAA,GAAW,CAACA,QAAD,IAAa,OAAb,CAAX;AACAC,cAAA,GAAW,CAACA,QAAD,IAAa,QAAb,EAAuBD,QAAA,CAAS,CAAT,CAAvB,CAAX;AAGA,UAAKtX,CAAAA,EAAL,CAAQ,IAAKC,CAAAA,MAAL,CAAY,MAAZ,EAAoB,aAApB,EAAmCmF,UAAnC,CAAR,EAAwDC,UAAxD,EAAoEE,MAAA,CAAO+R,QAAP,CAApE,CAAA;AAGA,UAAKtX,CAAAA,EAAL,CAAQ,IAAKC,CAAAA,MAAL,CAAY,MAAZ,EAAoB,YAApB,EAAkCmF,UAAlC,CAAR,EAAuDC,UAAvD,EAAmEE,MAAA,CAAOgS,QAAP,CAAnE,CAAA;AACA,aAAO,IAAP;AATkC,KAs6BW,EAgM7C1W,KAh1CFA,QAAa,CAACD,IAAD,EAAOgV,MAAP,CAAe;AAC1B,aAAO9K,SAAUrB,CAAAA,MAAV,GAAmB,CAAnB,GAAuB9I,OAAA,CAAQ,IAAR,EAAcC,IAAd,CAAoBgV,CAAAA,MAAOzV,CAAAA,KAAlD,GAA0Dc,MAAO4N,CAAAA,IAAP,CAAY,IAAZ,EAAkBjO,IAAlB,EAAwBrC,YAAaiH,CAAAA,SAAb,EAAyB0N,CAAAA,MAAzB,CAAgC5U,QAASkZ,CAAAA,MAAzC,CAAiDnF,CAAAA,MAAjD,CAAwDuD,MAAxD,CAAxB,CAAjE;AAD0B,KAgpCmB,EAiM7C3U,MAjM6C,EAkM7CoR,OAv0CFA,QAAe,CAACzR,IAAD,EAAOrB,CAAP,CAAU;AACvB,aAAO0B,MAAO4N,CAAAA,IAAP,CAAY,IAAZ,EAAkBjO,IAAlB,EAAwBrC,YAAaiH,CAAAA,SAAb,EAAyB6M,CAAAA,MAAzB,CAAgC9S,CAAhC,CAAxB,CAAP;AADuB,KAqoCsB,EAmM7C2T,OAr0CFA,QAAe,CAACtS,IAAD,EAAOrB,CAAP,CAAU;AACvB,aAAO0B,MAAO4N,CAAAA,IAAP,CAAY,IAAZ,EAAkBjO,IAAlB,EAAwBrC,YAAaiH,CAAAA,SAAb,EAAyB0N,CAAAA,MAAzB,CAAgC3T,CAAhC,CAAxB,CAAP;AADuB,KAkoCsB,EAqM7CkY,MAhnBFA,QAAc,CAAC7W,IAAD,CAAO;AACnB,UAAI8W,SAAS,IAAK5W,CAAAA,QAAS4W,CAAAA,MAA3B;AACKpZ,cAASyC,CAAAA,cAAT,CAAwB2W,MAAxB,EAAgC9W,IAAhC,CAAL,IACEtC,QAAS0C,CAAAA,KAAT,CAAe,oCAAf,GAAsDJ,IAAtD,CADF;AAGA,aAAO8W,MAAA,CAAO9W,IAAP,CAAaT,CAAAA,KAApB;AALmB,KA2a0B,EAuM7CuK,WA5vBFA,QAAoB,CAAC5L,EAAD,EAAK6Y,MAAL,CAAa;AAAA,YACzB9Y,OAAO,IADkB;AAAA,UAE7B6F,OAAO7F,IAAKwS,CAAAA,WAFiB;AAAA,YAG7BtN,SAASlF,IAAKoG,CAAAA,YAAamC,CAAAA,IAHE;AAC/B,UAGEvJ,SAASW,cAAemN,CAAAA,YAAf,CAA4BjH,IAA5B,CAHX;AAMA5F,QAAA,GAAKD,IAAKuS,CAAAA,GAAV,GAAgBtS,EAAA,GAAKwM,MAAA,CAAOzM,IAAP,EAAaC,EAAb,EAAiB,CAAA,CAAjB,CAAL,GAA8B,IAA9C;AAGAF,oBAAA,CAAeC,IAAf,CAAA;AAGKhB,YAAL,IAAagB,IAAKmC,CAAAA,KAAL,CAAW,8BAAX,GAA4C0D,IAA5C,CAAb;AACMkT,UAAAA,GAAU/Z,MAAOiF,CAAAA,OAAjB8U,IAA4BpZ,cAAeoT,CAAAA,aAA3CgG;AACJC,YAAAA,GAAW/Y,EAAA,GAAKjB,MAAOyT,CAAAA,QAAZ,GAAuBzT,MAAOgO,CAAAA,QAAzCgM;AAGFhZ,UAAK4D,CAAAA,SAAL,GAAkBoV,MAAD,GAAmBzN,kBAAA,CAAmBvL,IAAnB,EAAyBA,IAAK4D,CAAAA,SAA9B,EAAyC3D,EAAzC,EAA6C+Y,MAA7C,CAAnB,GAAY,IAA7B;AACAhZ,UAAK8D,CAAAA,QAAL,GAAgBoI,iBAAA,CAAkBlM,IAAlB,EAAwBA,IAAK8D,CAAAA,QAA7B,EAAuC7D,EAAvC,EAA2C8Y,IAA3C,CAAhB;AACA/Y,UAAK8S,CAAAA,OAAL,GAAe,CAAA,CAAf;AAGI7S,QAAJ,IAAUiF,MAAV,KAAqB,MAArB,KACE4T,MAQA,GARSA,MAAA,GAAS9Y,IAAKsS,CAAAA,OAAd,GAAwB7F,MAAA,CAAOzM,IAAP,EAAa8Y,MAAb,EAAqB,CAAA,CAArB,CAAxB,GAAqD7Y,EAAG4J,CAAAA,WAAH,CAAehD,OAAA,CAAQ,MAAR,EAAgB,CAC3F,QAAS,eADkF,CAAhB,CAAf,CAQ9D,EALA7G,IAAKsT,CAAAA,KAAMtP,CAAAA,OAAX,CAAmBtD,CAAA,IAAK;AAClBA,SAAE+H,CAAAA,KAAM5B,CAAAA,OAAZ,IAAuB3B,MAAvB,KAAkC,WAAlC,KACExE,CAAEmG,CAAAA,OADJ,GACc4F,MAAA,CAAOzM,IAAP,EAAaU,CAAE+H,CAAAA,KAAM5B,CAAAA,OAArB,EAA8B,CAAC,CAACnG,CAAE+H,CAAAA,KAAM/F,CAAAA,KAAxC,CADd;AADsB,OAAxB,CAKA,EAAA1C,IAAKsT,CAAAA,KAAMtP,CAAAA,OAAX,CAAmBtD,CAAA,IAAK;AACtB6H,YAAA,CAAKvI,IAAL,EAAWU,CAAEmG,CAAAA,OAAb,IAAwBiS,MAAxB,EAAgCpY,CAAhC,CAAA;AADsB,OAAxB,CATF;AAaA,aAAOV,IAAP;AApC+B,KAqjBc,EAyM7CiZ,WA1pBFC,cAAgC,CAACrT,IAAD,EAAO6F,WAAP,CAAoB;AAC9C7F,UAAJ,KAAalG,cAAe+S,CAAAA,UAAWC,CAAAA,MAAvC,IAAiD9M,IAAjD,KAA0DlG,cAAe+S,CAAAA,UAAWyG,CAAAA,GAApF,IAA2FtT,IAA3F,KAAoGlG,cAAe+S,CAAAA,UAAW0G,CAAAA,GAA9H,IACE3Z,QAAS0C,CAAAA,KAAT,CAAe,2BAAf,GAA6C0D,IAA7C,CADF;AAGM2F,iBAAAA,GAAI,MAAMqB,cAAA,CAAe,IAAf,EAAqBhH,IAArB,EAA2B6F,WAA3B,CAAVF;AACC3F,UAAA,KAASlG,cAAe+S,CAAAA,UAAWyG,CAAAA,GAAnC,IAAyC,IAMhD,GANgD,WAAA,CAAA,GAAA,EAMhD,EAHME,IAGN,GAHa,IAAIC,IAAJ,CAAS,CAACtX,IAAD,CAAT,EAAiB,CAC5B6D,KAJ8C0T,eAGlB,CAAjB,CAGb,EAAA,IAAA,GAAO3E,MAAO4E,CAAAA,GAAIC,CAAAA,eAAX,CAA2BJ,IAA3B,CANA,IAA+E,IAA/E,GAA+E,WAAA,CAAA,MAAA,EAAA,CAAA,SAAA,CAAA,WAAA,CAA/E;AAAP,aAAO,IAAP;AALkD,KAidL,EA0M7CK,SAxoBFC,cAA8B,CAACjO,WAAD,EAAcC,GAAd,CAAmB;AAE/C,aAASgM,CADCnM,MAAMqB,cAAA,CAAe,IAAf,EAAqBlN,cAAe+S,CAAAA,UAAWC,CAAAA,MAA/C,EAAuDjH,WAAvD,EAAoEC,GAApE,CACPgM,EAAAA,MAAF,EAAP;AAF+C,KA8bF,EA2M7CiC,MA/nBFC,cAA2B,CAACnO,WAAD,CAAc;AAEvC,aAASoO,CADCtO,MAAMqB,cAAA,CAAe,IAAf,EAAqBlN,cAAe+S,CAAAA,UAAWyG,CAAAA,GAA/C,EAAoDzN,WAApD,CACPoO,EAAAA,GAAF,EAAP;AAFuC,KAobM,EA6M7CC,SA9fFA,QAAiB,CAACzP,OAAD,CAAU;AACzB,aAAO,IAAKrI,CAAAA,QAAS8X,CAAAA,QAAd,CAAuBzP,OAAvB,IAAkC,CACvCtI,KAAM2M,QADiC,EAEvC0E,QAASxE,UAF8B,EAGvCmL,QAAS,CAAA,CAH8B,CAAlC,CAAP;AADyB,KAiToB,EA8M7CC,SA3eFA,QAAiB,CAACvR,KAAD,CAAQ;AACvB,UAAKM,CAAAA,QAAL,CAAc,IAAd,EAAoB8I,CAAA,IAAK;AACvBA,SAAEoI,CAAAA,QAAF,GAAa,CAAA,CAAb;AACApI,SAAE7P,CAAAA,QAASgY,CAAAA,QAAX,CAAoBvR,KAApB,CAAA;AAFuB,OAAzB,EAGGoJ,CAAA,IAAK;AACNA,SAAEoI,CAAAA,QAAF,GAAa,CAAA,CAAb;AADM,OAHR,CAAA;AAMA,aAAO,IAAP;AAPuB,KA6RsB,EAgN7CtG,iBA5UFD,QAAyB,EAAG;AAE1B,UAAI,IAAKlB,CAAAA,QAAL,EAAJ,KAAwB,QAAxB,IAAoC,IAAK7O,CAAAA,SAAUuW,CAAAA,OAAnD,CAA4D;AAC1D,YAAI9F,SAAS,IAAb;AACA,cAAM+F,mBAAmB,EAAAA,IAAM;AACzB/F,gBAAJ,IAAc,IAAd,IACEA,MAAA,EADF;AAGA,gBAAMgG,QAAQC,UAAA,CAAY,gBAAe1F,MAAO2F,CAAAA,gBAAtB,OAAZ,CAAd;AACAF,eAAM/Q,CAAAA,gBAAN,CAAuB,QAAvB,EAAiC8Q,gBAAjC,CAAA;AACA/F,gBAAA,GAAS,EAAAA,IAAM;AACbgG,iBAAMjE,CAAAA,mBAAN,CAA0B,QAA1B,EAAoCgE,gBAApC,CAAA;AADa,WAAf;AAGA,cAAKxW,CAAAA,SAAUuW,CAAAA,OAAQK,CAAAA,UAAvB,CAAkC,IAAlC,CAAwCC,CAAAA,UAAxC,GAAqD7F,MAAO2F,CAAAA,gBAA5D,IAAgF,CAAhF;AACA,cAAKzH,CAAAA,OAAL,GAAe,CAAA,CAAf;AACA,cAAKjS,CAAAA,OAAL,GAAe,CAAf;AACA,cAAKgD,CAAAA,MAAL,EAAcmF,CAAAA,QAAd,EAAA;AAZ6B,SAA/B;AAcAoR,wBAAA,EAAA;AAhB0D;AAFlC,KA4HmB,CAA/C,CAAA;AAmNAnb,WAAQ8S,CAAAA,IAAR,GAAeA,IAAf;AA96C2G,GAJ7G,CAAA;AADmG,CAAnG;;",
"sources":["node_modules/vega-view/build/vega-view.js"],
"sourcesContent":["shadow$provide[\"module$node_modules$vega_view$build$vega_view\"] = function(require,module,exports) {\n(function (global, factory) {\n  typeof exports === 'object' && typeof module !== 'undefined' ? factory(exports, require('vega-util'), require('vega-dataflow'), require('vega-scenegraph'), require('vega-functions'), require('vega-runtime'), require('vega-format')) :\n  typeof define === 'function' && define.amd ? define(['exports', 'vega-util', 'vega-dataflow', 'vega-scenegraph', 'vega-functions', 'vega-runtime', 'vega-format'], factory) :\n  (global = typeof globalThis !== 'undefined' ? globalThis : global || self, factory(global.vega = {}, global.vega, global.vega, global.vega, global.vega, global.vega, global.vega));\n})(this, (function (exports, vegaUtil, vegaDataflow, vegaScenegraph, vegaFunctions, vegaRuntime, vegaFormat) { 'use strict';\n\n  // initialize aria role and label attributes\n  function initializeAria(view) {\n    const el = view.container();\n    if (el) {\n      el.setAttribute('role', 'graphics-document');\n      el.setAttribute('aria-roleDescription', 'visualization');\n      ariaLabel(el, view.description());\n    }\n  }\n\n  // update aria-label if we have a DOM container element\n  function ariaLabel(el, desc) {\n    if (el) desc == null ? el.removeAttribute('aria-label') : el.setAttribute('aria-label', desc);\n  }\n\n  function background (view) {\n    // respond to background signal\n    view.add(null, _ => {\n      view._background = _.bg;\n      view._resize = 1;\n      return _.bg;\n    }, {\n      bg: view._signals.background\n    });\n  }\n\n  const Default = 'default';\n  function cursor (view) {\n    // get cursor signal, add to dataflow if needed\n    const cursor = view._signals.cursor || (view._signals.cursor = view.add({\n      user: Default,\n      item: null\n    }));\n\n    // evaluate cursor on each pointermove event\n    view.on(view.events('view', 'pointermove'), cursor, (_, event) => {\n      const value = cursor.value,\n        user = value ? vegaUtil.isString(value) ? value : value.user : Default,\n        item = event.item && event.item.cursor || null;\n      return value && user === value.user && item == value.item ? value : {\n        user: user,\n        item: item\n      };\n    });\n\n    // when cursor signal updates, set visible cursor\n    view.add(null, function (_) {\n      let user = _.cursor,\n        item = this.value;\n      if (!vegaUtil.isString(user)) {\n        item = user.item;\n        user = user.user;\n      }\n      setCursor(view, user && user !== Default ? user : item || user);\n      return item;\n    }, {\n      cursor: cursor\n    });\n  }\n  function setCursor(view, cursor) {\n    const el = view.globalCursor() ? typeof document !== 'undefined' && document.body : view.container();\n    if (el) {\n      return cursor == null ? el.style.removeProperty('cursor') : el.style.cursor = cursor;\n    }\n  }\n\n  function dataref(view, name) {\n    var data = view._runtime.data;\n    if (!vegaUtil.hasOwnProperty(data, name)) {\n      vegaUtil.error('Unrecognized data set: ' + name);\n    }\n    return data[name];\n  }\n  function data(name, values) {\n    return arguments.length < 2 ? dataref(this, name).values.value : change.call(this, name, vegaDataflow.changeset().remove(vegaUtil.truthy).insert(values));\n  }\n  function change(name, changes) {\n    if (!vegaDataflow.isChangeSet(changes)) {\n      vegaUtil.error('Second argument to changes must be a changeset.');\n    }\n    const dataset = dataref(this, name);\n    dataset.modified = true;\n    return this.pulse(dataset.input, changes);\n  }\n  function insert(name, _) {\n    return change.call(this, name, vegaDataflow.changeset().insert(_));\n  }\n  function remove(name, _) {\n    return change.call(this, name, vegaDataflow.changeset().remove(_));\n  }\n\n  function width(view) {\n    var padding = view.padding();\n    return Math.max(0, view._viewWidth + padding.left + padding.right);\n  }\n  function height(view) {\n    var padding = view.padding();\n    return Math.max(0, view._viewHeight + padding.top + padding.bottom);\n  }\n  function offset(view) {\n    var padding = view.padding(),\n      origin = view._origin;\n    return [padding.left + origin[0], padding.top + origin[1]];\n  }\n  function resizeRenderer(view) {\n    var origin = offset(view),\n      w = width(view),\n      h = height(view);\n    view._renderer.background(view.background());\n    view._renderer.resize(w, h, origin);\n    view._handler.origin(origin);\n    view._resizeListeners.forEach(handler => {\n      try {\n        handler(w, h);\n      } catch (error) {\n        view.error(error);\n      }\n    });\n  }\n\n  /**\n   * Extend an event with additional view-specific methods.\n   * Adds a new property ('vega') to an event that provides a number\n   * of methods for querying information about the current interaction.\n   * The vega object provides the following methods:\n   *   view - Returns the backing View instance.\n   *   item - Returns the currently active scenegraph item (if any).\n   *   group - Returns the currently active scenegraph group (if any).\n   *     This method accepts a single string-typed argument indicating the name\n   *     of the desired parent group. The scenegraph will be traversed from\n   *     the item up towards the root to search for a matching group. If no\n   *     argument is provided the enclosing group for the active item is\n   *     returned, unless the item it itself a group, in which case it is\n   *     returned directly.\n   *   xy - Returns a two-element array containing the x and y coordinates for\n   *     mouse or touch events. For touch events, this is based on the first\n   *     elements in the changedTouches array. This method accepts a single\n   *     argument: either an item instance or mark name that should serve as\n   *     the reference coordinate system. If no argument is provided the\n   *     top-level view coordinate system is assumed.\n   *   x - Returns the current x-coordinate, accepts the same arguments as xy.\n   *   y - Returns the current y-coordinate, accepts the same arguments as xy.\n   * @param {Event} event - The input event to extend.\n   * @param {Item} item - The currently active scenegraph item (if any).\n   * @return {Event} - The extended input event.\n   */\n  function eventExtend (view, event, item) {\n    var r = view._renderer,\n      el = r && r.canvas(),\n      p,\n      e,\n      translate;\n    if (el) {\n      translate = offset(view);\n      e = event.changedTouches ? event.changedTouches[0] : event;\n      p = vegaScenegraph.point(e, el);\n      p[0] -= translate[0];\n      p[1] -= translate[1];\n    }\n    event.dataflow = view;\n    event.item = item;\n    event.vega = extension(view, item, p);\n    return event;\n  }\n  function extension(view, item, point) {\n    const itemGroup = item ? item.mark.marktype === 'group' ? item : item.mark.group : null;\n    function group(name) {\n      var g = itemGroup,\n        i;\n      if (name) for (i = item; i; i = i.mark.group) {\n        if (i.mark.name === name) {\n          g = i;\n          break;\n        }\n      }\n      return g && g.mark && g.mark.interactive ? g : {};\n    }\n    function xy(item) {\n      if (!item) return point;\n      if (vegaUtil.isString(item)) item = group(item);\n      const p = point.slice();\n      while (item) {\n        p[0] -= item.x || 0;\n        p[1] -= item.y || 0;\n        item = item.mark && item.mark.group;\n      }\n      return p;\n    }\n    return {\n      view: vegaUtil.constant(view),\n      item: vegaUtil.constant(item || {}),\n      group: group,\n      xy: xy,\n      x: item => xy(item)[0],\n      y: item => xy(item)[1]\n    };\n  }\n\n  const VIEW = 'view',\n    TIMER = 'timer',\n    WINDOW = 'window',\n    NO_TRAP = {\n      trap: false\n    };\n\n  /**\n   * Initialize event handling configuration.\n   * @param {object} config - The configuration settings.\n   * @return {object}\n   */\n  function initializeEventConfig(config) {\n    const events = vegaUtil.extend({\n      defaults: {}\n    }, config);\n    const unpack = (obj, keys) => {\n      keys.forEach(k => {\n        if (vegaUtil.isArray(obj[k])) obj[k] = vegaUtil.toSet(obj[k]);\n      });\n    };\n    unpack(events.defaults, ['prevent', 'allow']);\n    unpack(events, ['view', 'window', 'selector']);\n    return events;\n  }\n  function trackEventListener(view, sources, type, handler) {\n    view._eventListeners.push({\n      type: type,\n      sources: vegaUtil.array(sources),\n      handler: handler\n    });\n  }\n  function prevent(view, type) {\n    var def = view._eventConfig.defaults,\n      prevent = def.prevent,\n      allow = def.allow;\n    return prevent === false || allow === true ? false : prevent === true || allow === false ? true : prevent ? prevent[type] : allow ? !allow[type] : view.preventDefault();\n  }\n  function permit(view, key, type) {\n    const rule = view._eventConfig && view._eventConfig[key];\n    if (rule === false || vegaUtil.isObject(rule) && !rule[type]) {\n      view.warn(`Blocked ${key} ${type} event listener.`);\n      return false;\n    }\n    return true;\n  }\n\n  /**\n   * Create a new event stream from an event source.\n   * @param {object} source - The event source to monitor.\n   * @param {string} type - The event type.\n   * @param {function(object): boolean} [filter] - Event filter function.\n   * @return {EventStream}\n   */\n  function events(source, type, filter) {\n    var view = this,\n      s = new vegaDataflow.EventStream(filter),\n      send = function (e, item) {\n        view.runAsync(null, () => {\n          if (source === VIEW && prevent(view, type)) {\n            e.preventDefault();\n          }\n          s.receive(eventExtend(view, e, item));\n        });\n      },\n      sources;\n    if (source === TIMER) {\n      if (permit(view, 'timer', type)) {\n        view.timer(send, type);\n      }\n    } else if (source === VIEW) {\n      if (permit(view, 'view', type)) {\n        // send traps errors, so use {trap: false} option\n        view.addEventListener(type, send, NO_TRAP);\n      }\n    } else {\n      if (source === WINDOW) {\n        if (permit(view, 'window', type) && typeof window !== 'undefined') {\n          sources = [window];\n        }\n      } else if (typeof document !== 'undefined') {\n        if (permit(view, 'selector', type)) {\n          sources = Array.from(document.querySelectorAll(source));\n        }\n      }\n      if (!sources) {\n        view.warn('Can not resolve event source: ' + source);\n      } else {\n        for (var i = 0, n = sources.length; i < n; ++i) {\n          sources[i].addEventListener(type, send);\n        }\n        trackEventListener(view, sources, type, send);\n      }\n    }\n    return s;\n  }\n\n  function itemFilter(event) {\n    return event.item;\n  }\n  function markTarget(event) {\n    // grab upstream collector feeding the mark operator\n    return event.item.mark.source;\n  }\n  function invoke(name) {\n    return function (_, event) {\n      return event.vega.view().changeset().encode(event.item, name);\n    };\n  }\n  function hover (hoverSet, leaveSet) {\n    hoverSet = [hoverSet || 'hover'];\n    leaveSet = [leaveSet || 'update', hoverSet[0]];\n\n    // invoke hover set upon pointerover\n    this.on(this.events('view', 'pointerover', itemFilter), markTarget, invoke(hoverSet));\n\n    // invoke leave set upon pointerout\n    this.on(this.events('view', 'pointerout', itemFilter), markTarget, invoke(leaveSet));\n    return this;\n  }\n\n  /**\n   * Finalize a View instance that is being removed.\n   * Cancel any running timers.\n   * Remove all external event listeners.\n   * Remove any currently displayed tooltip.\n   */\n  function finalize () {\n    var tooltip = this._tooltip,\n      timers = this._timers,\n      handlers = this._handler.handlers(),\n      listeners = this._eventListeners,\n      n,\n      m,\n      e,\n      h,\n      t;\n    n = timers.length;\n    while (--n >= 0) {\n      timers[n].stop();\n    }\n    n = listeners.length;\n    while (--n >= 0) {\n      e = listeners[n];\n      m = e.sources.length;\n      while (--m >= 0) {\n        e.sources[m].removeEventListener(e.type, e.handler);\n      }\n    }\n    if (tooltip) {\n      tooltip.call(this, this._handler, null, null, null);\n    }\n\n    // turn off all registered handlers\n    n = handlers.length;\n    while (--n >= 0) {\n      t = handlers[n].type;\n      h = handlers[n].handler;\n      this._handler.off(t, h);\n    }\n    return this;\n  }\n\n  function element (tag, attr, text) {\n    const el = document.createElement(tag);\n    for (const key in attr) el.setAttribute(key, attr[key]);\n    if (text != null) el.textContent = text;\n    return el;\n  }\n\n  const e10 = Math.sqrt(50),\n    e5 = Math.sqrt(10),\n    e2 = Math.sqrt(2);\n  function tickSpec(start, stop, count) {\n    const step = (stop - start) / Math.max(0, count),\n      power = Math.floor(Math.log10(step)),\n      error = step / Math.pow(10, power),\n      factor = error >= e10 ? 10 : error >= e5 ? 5 : error >= e2 ? 2 : 1;\n    let i1, i2, inc;\n    if (power < 0) {\n      inc = Math.pow(10, -power) / factor;\n      i1 = Math.round(start * inc);\n      i2 = Math.round(stop * inc);\n      if (i1 / inc < start) ++i1;\n      if (i2 / inc > stop) --i2;\n      inc = -inc;\n    } else {\n      inc = Math.pow(10, power) * factor;\n      i1 = Math.round(start / inc);\n      i2 = Math.round(stop / inc);\n      if (i1 * inc < start) ++i1;\n      if (i2 * inc > stop) --i2;\n    }\n    if (i2 < i1 && 0.5 <= count && count < 2) return tickSpec(start, stop, count * 2);\n    return [i1, i2, inc];\n  }\n  function tickIncrement(start, stop, count) {\n    stop = +stop, start = +start, count = +count;\n    return tickSpec(start, stop, count)[2];\n  }\n  function tickStep(start, stop, count) {\n    stop = +stop, start = +start, count = +count;\n    const reverse = stop < start,\n      inc = reverse ? tickIncrement(stop, start, count) : tickIncrement(start, stop, count);\n    return (reverse ? -1 : 1) * (inc < 0 ? 1 / -inc : inc);\n  }\n\n  const BindClass = 'vega-bind',\n    NameClass = 'vega-bind-name',\n    RadioClass = 'vega-bind-radio';\n\n  /**\n   * Bind a signal to an external HTML input element. The resulting two-way\n   * binding will propagate input changes to signals, and propagate signal\n   * changes to the input element state. If this view instance has no parent\n   * element, we assume the view is headless and no bindings are created.\n   * @param {Element|string} el - The parent DOM element to which the input\n   *   element should be appended as a child. If string-valued, this argument\n   *   will be treated as a CSS selector. If null or undefined, the parent\n   *   element of this view will be used as the element.\n   * @param {object} param - The binding parameters which specify the signal\n   *   to bind to, the input element type, and type-specific configuration.\n   * @return {View} - This view instance.\n   */\n  function bind (view, el, binding) {\n    if (!el) return;\n    const param = binding.param;\n    let bind = binding.state;\n    if (!bind) {\n      bind = binding.state = {\n        elements: null,\n        active: false,\n        set: null,\n        update: value => {\n          if (value != view.signal(param.signal)) {\n            view.runAsync(null, () => {\n              bind.source = true;\n              view.signal(param.signal, value);\n            });\n          }\n        }\n      };\n      if (param.debounce) {\n        bind.update = vegaUtil.debounce(param.debounce, bind.update);\n      }\n    }\n    const create = param.input == null && param.element ? target : generate;\n    create(bind, el, param, view);\n    if (!bind.active) {\n      view.on(view._signals[param.signal], null, () => {\n        bind.source ? bind.source = false : bind.set(view.signal(param.signal));\n      });\n      bind.active = true;\n    }\n    return bind;\n  }\n\n  /**\n   * Bind the signal to an external EventTarget.\n   */\n  function target(bind, node, param, view) {\n    const type = param.event || 'input';\n    const handler = () => bind.update(node.value);\n\n    // initialize signal value to external input value\n    view.signal(param.signal, node.value);\n\n    // listen for changes on the element\n    node.addEventListener(type, handler);\n\n    // register with view, so we can remove it upon finalization\n    trackEventListener(view, node, type, handler);\n\n    // propagate change to element\n    bind.set = value => {\n      node.value = value;\n      node.dispatchEvent(event(type));\n    };\n  }\n  function event(type) {\n    return typeof Event !== 'undefined' ? new Event(type) : {\n      type\n    };\n  }\n\n  /**\n   * Generate an HTML input form element and bind it to a signal.\n   */\n  function generate(bind, el, param, view) {\n    const value = view.signal(param.signal);\n    const div = element('div', {\n      'class': BindClass\n    });\n    const wrapper = param.input === 'radio' ? div : div.appendChild(element('label'));\n    wrapper.appendChild(element('span', {\n      'class': NameClass\n    }, param.name || param.signal));\n    el.appendChild(div);\n    let input = form;\n    switch (param.input) {\n      case 'checkbox':\n        input = checkbox;\n        break;\n      case 'select':\n        input = select;\n        break;\n      case 'radio':\n        input = radio;\n        break;\n      case 'range':\n        input = range;\n        break;\n    }\n    input(bind, wrapper, param, value);\n  }\n\n  /**\n   * Generates an arbitrary input form element.\n   * The input type is controlled via user-provided parameters.\n   */\n  function form(bind, el, param, value) {\n    const node = element('input');\n    for (const key in param) {\n      if (key !== 'signal' && key !== 'element') {\n        node.setAttribute(key === 'input' ? 'type' : key, param[key]);\n      }\n    }\n    node.setAttribute('name', param.signal);\n    node.value = value;\n    el.appendChild(node);\n    node.addEventListener('input', () => bind.update(node.value));\n    bind.elements = [node];\n    bind.set = value => node.value = value;\n  }\n\n  /**\n   * Generates a checkbox input element.\n   */\n  function checkbox(bind, el, param, value) {\n    const attr = {\n      type: 'checkbox',\n      name: param.signal\n    };\n    if (value) attr.checked = true;\n    const node = element('input', attr);\n    el.appendChild(node);\n    node.addEventListener('change', () => bind.update(node.checked));\n    bind.elements = [node];\n    bind.set = value => node.checked = !!value || null;\n  }\n\n  /**\n   * Generates a selection list input element.\n   */\n  function select(bind, el, param, value) {\n    const node = element('select', {\n        name: param.signal\n      }),\n      labels = param.labels || [];\n    param.options.forEach((option, i) => {\n      const attr = {\n        value: option\n      };\n      if (valuesEqual(option, value)) attr.selected = true;\n      node.appendChild(element('option', attr, (labels[i] || option) + ''));\n    });\n    el.appendChild(node);\n    node.addEventListener('change', () => {\n      bind.update(param.options[node.selectedIndex]);\n    });\n    bind.elements = [node];\n    bind.set = value => {\n      for (let i = 0, n = param.options.length; i < n; ++i) {\n        if (valuesEqual(param.options[i], value)) {\n          node.selectedIndex = i;\n          return;\n        }\n      }\n    };\n  }\n\n  /**\n   * Generates a radio button group.\n   */\n  function radio(bind, el, param, value) {\n    const group = element('span', {\n        'class': RadioClass\n      }),\n      labels = param.labels || [];\n    el.appendChild(group);\n    bind.elements = param.options.map((option, i) => {\n      const attr = {\n        type: 'radio',\n        name: param.signal,\n        value: option\n      };\n      if (valuesEqual(option, value)) attr.checked = true;\n      const input = element('input', attr);\n      input.addEventListener('change', () => bind.update(option));\n      const label = element('label', {}, (labels[i] || option) + '');\n      label.prepend(input);\n      group.appendChild(label);\n      return input;\n    });\n    bind.set = value => {\n      const nodes = bind.elements,\n        n = nodes.length;\n      for (let i = 0; i < n; ++i) {\n        if (valuesEqual(nodes[i].value, value)) nodes[i].checked = true;\n      }\n    };\n  }\n\n  /**\n   * Generates a slider input element.\n   */\n  function range(bind, el, param, value) {\n    value = value !== undefined ? value : (+param.max + +param.min) / 2;\n    const max = param.max != null ? param.max : Math.max(100, +value) || 100,\n      min = param.min || Math.min(0, max, +value) || 0,\n      step = param.step || tickStep(min, max, 100);\n    const node = element('input', {\n      type: 'range',\n      name: param.signal,\n      min: min,\n      max: max,\n      step: step\n    });\n    node.value = value;\n    const span = element('span', {}, +value);\n    el.appendChild(node);\n    el.appendChild(span);\n    const update = () => {\n      span.textContent = node.value;\n      bind.update(+node.value);\n    };\n\n    // subscribe to both input and change\n    node.addEventListener('input', update);\n    node.addEventListener('change', update);\n    bind.elements = [node];\n    bind.set = value => {\n      node.value = value;\n      span.textContent = value;\n    };\n  }\n  function valuesEqual(a, b) {\n    return a === b || a + '' === b + '';\n  }\n\n  function initializeRenderer (view, r, el, constructor, scaleFactor, opt) {\n    r = r || new constructor(view.loader());\n    return r.initialize(el, width(view), height(view), offset(view), scaleFactor, opt).background(view.background());\n  }\n\n  function trap (view, fn) {\n    return !fn ? null : function () {\n      try {\n        fn.apply(this, arguments);\n      } catch (error) {\n        view.error(error);\n      }\n    };\n  }\n\n  function initializeHandler (view, prevHandler, el, constructor) {\n    // instantiate scenegraph handler\n    const handler = new constructor(view.loader(), trap(view, view.tooltip())).scene(view.scenegraph().root).initialize(el, offset(view), view);\n\n    // transfer event handlers\n    if (prevHandler) {\n      prevHandler.handlers().forEach(h => {\n        handler.on(h.type, h.handler);\n      });\n    }\n    return handler;\n  }\n\n  function initialize (el, elBind) {\n    const view = this,\n      type = view._renderType,\n      config = view._eventConfig.bind,\n      module = vegaScenegraph.renderModule(type);\n\n    // containing dom element\n    el = view._el = el ? lookup(view, el, true) : null;\n\n    // initialize aria attributes\n    initializeAria(view);\n\n    // select appropriate renderer & handler\n    if (!module) view.error('Unrecognized renderer type: ' + type);\n    const Handler = module.handler || vegaScenegraph.CanvasHandler,\n      Renderer = el ? module.renderer : module.headless;\n\n    // initialize renderer and input handler\n    view._renderer = !Renderer ? null : initializeRenderer(view, view._renderer, el, Renderer);\n    view._handler = initializeHandler(view, view._handler, el, Handler);\n    view._redraw = true;\n\n    // initialize signal bindings\n    if (el && config !== 'none') {\n      elBind = elBind ? view._elBind = lookup(view, elBind, true) : el.appendChild(element('form', {\n        'class': 'vega-bindings'\n      }));\n      view._bind.forEach(_ => {\n        if (_.param.element && config !== 'container') {\n          _.element = lookup(view, _.param.element, !!_.param.input);\n        }\n      });\n      view._bind.forEach(_ => {\n        bind(view, _.element || elBind, _);\n      });\n    }\n    return view;\n  }\n  function lookup(view, el, clear) {\n    if (typeof el === 'string') {\n      if (typeof document !== 'undefined') {\n        el = document.querySelector(el);\n        if (!el) {\n          view.error('Signal bind element not found: ' + el);\n          return null;\n        }\n      } else {\n        view.error('DOM document instance not found.');\n        return null;\n      }\n    }\n    if (el && clear) {\n      try {\n        el.textContent = '';\n      } catch (e) {\n        el = null;\n        view.error(e);\n      }\n    }\n    return el;\n  }\n\n  const number = _ => +_ || 0;\n  const paddingObject = _ => ({\n    top: _,\n    bottom: _,\n    left: _,\n    right: _\n  });\n  function padding (_) {\n    return vegaUtil.isObject(_) ? {\n      top: number(_.top),\n      bottom: number(_.bottom),\n      left: number(_.left),\n      right: number(_.right)\n    } : paddingObject(number(_));\n  }\n\n  /**\n   * Render the current scene in a headless fashion.\n   * This method is asynchronous, returning a Promise instance.\n   * @return {Promise} - A Promise that resolves to a renderer.\n   */\n  async function renderHeadless (view, type, scaleFactor, opt) {\n    const module = vegaScenegraph.renderModule(type),\n      ctr = module && module.headless;\n    if (!ctr) vegaUtil.error('Unrecognized renderer type: ' + type);\n    await view.runAsync();\n    return initializeRenderer(view, null, null, ctr, scaleFactor, opt).renderAsync(view._scenegraph.root);\n  }\n\n  /**\n   * Produce an image URL for the visualization. Depending on the type\n   * parameter, the generated URL contains data for either a PNG or SVG image.\n   * The URL can be used (for example) to download images of the visualization.\n   * This method is asynchronous, returning a Promise instance.\n   * @param {string} type - The image type. One of 'svg', 'png' or 'canvas'.\n   *   The 'canvas' and 'png' types are synonyms for a PNG image.\n   * @return {Promise} - A promise that resolves to an image URL.\n   */\n  async function renderToImageURL (type, scaleFactor) {\n    if (type !== vegaScenegraph.RenderType.Canvas && type !== vegaScenegraph.RenderType.SVG && type !== vegaScenegraph.RenderType.PNG) {\n      vegaUtil.error('Unrecognized image type: ' + type);\n    }\n    const r = await renderHeadless(this, type, scaleFactor);\n    return type === vegaScenegraph.RenderType.SVG ? toBlobURL(r.svg(), 'image/svg+xml') : r.canvas().toDataURL('image/png');\n  }\n  function toBlobURL(data, mime) {\n    const blob = new Blob([data], {\n      type: mime\n    });\n    return window.URL.createObjectURL(blob);\n  }\n\n  /**\n   * Produce a Canvas instance containing a rendered visualization.\n   * This method is asynchronous, returning a Promise instance.\n   * @return {Promise} - A promise that resolves to a Canvas instance.\n   */\n  async function renderToCanvas (scaleFactor, opt) {\n    const r = await renderHeadless(this, vegaScenegraph.RenderType.Canvas, scaleFactor, opt);\n    return r.canvas();\n  }\n\n  /**\n   * Produce a rendered SVG string of the visualization.\n   * This method is asynchronous, returning a Promise instance.\n   * @return {Promise} - A promise that resolves to an SVG string.\n   */\n  async function renderToSVG (scaleFactor) {\n    const r = await renderHeadless(this, vegaScenegraph.RenderType.SVG, scaleFactor);\n    return r.svg();\n  }\n\n  function runtime (view, spec, expr) {\n    return vegaRuntime.context(view, vegaDataflow.transforms, vegaFunctions.functionContext, expr).parse(spec);\n  }\n\n  function scale(name) {\n    var scales = this._runtime.scales;\n    if (!vegaUtil.hasOwnProperty(scales, name)) {\n      vegaUtil.error('Unrecognized scale or projection: ' + name);\n    }\n    return scales[name].value;\n  }\n\n  var Width = 'width',\n    Height = 'height',\n    Padding = 'padding',\n    Skip = {\n      skip: true\n    };\n  function viewWidth(view, width) {\n    var a = view.autosize(),\n      p = view.padding();\n    return width - (a && a.contains === Padding ? p.left + p.right : 0);\n  }\n  function viewHeight(view, height) {\n    var a = view.autosize(),\n      p = view.padding();\n    return height - (a && a.contains === Padding ? p.top + p.bottom : 0);\n  }\n  function initializeResize(view) {\n    var s = view._signals,\n      w = s[Width],\n      h = s[Height],\n      p = s[Padding];\n    function resetSize() {\n      view._autosize = view._resize = 1;\n    }\n\n    // respond to width signal\n    view._resizeWidth = view.add(null, _ => {\n      view._width = _.size;\n      view._viewWidth = viewWidth(view, _.size);\n      resetSize();\n    }, {\n      size: w\n    });\n\n    // respond to height signal\n    view._resizeHeight = view.add(null, _ => {\n      view._height = _.size;\n      view._viewHeight = viewHeight(view, _.size);\n      resetSize();\n    }, {\n      size: h\n    });\n\n    // respond to padding signal\n    const resizePadding = view.add(null, resetSize, {\n      pad: p\n    });\n\n    // set rank to run immediately after source signal\n    view._resizeWidth.rank = w.rank + 1;\n    view._resizeHeight.rank = h.rank + 1;\n    resizePadding.rank = p.rank + 1;\n  }\n  function resizeView(viewWidth, viewHeight, width, height, origin, auto) {\n    this.runAfter(view => {\n      let rerun = 0;\n\n      // reset autosize flag\n      view._autosize = 0;\n\n      // width value changed: update signal, skip resize op\n      if (view.width() !== width) {\n        rerun = 1;\n        view.signal(Width, width, Skip); // set width, skip update calc\n        view._resizeWidth.skip(true); // skip width resize handler\n      }\n\n      // height value changed: update signal, skip resize op\n      if (view.height() !== height) {\n        rerun = 1;\n        view.signal(Height, height, Skip); // set height, skip update calc\n        view._resizeHeight.skip(true); // skip height resize handler\n      }\n\n      // view width changed: update view property, set resize flag\n      if (view._viewWidth !== viewWidth) {\n        view._resize = 1;\n        view._viewWidth = viewWidth;\n      }\n\n      // view height changed: update view property, set resize flag\n      if (view._viewHeight !== viewHeight) {\n        view._resize = 1;\n        view._viewHeight = viewHeight;\n      }\n\n      // origin changed: update view property, set resize flag\n      if (view._origin[0] !== origin[0] || view._origin[1] !== origin[1]) {\n        view._resize = 1;\n        view._origin = origin;\n      }\n\n      // run dataflow on width/height signal change\n      if (rerun) view.run('enter');\n      if (auto) view.runAfter(v => v.resize());\n    }, false, 1);\n  }\n\n  /**\n   * Get the current view state, consisting of signal values and/or data sets.\n   * @param {object} [options] - Options flags indicating which state to export.\n   *   If unspecified, all signals and data sets will be exported.\n   * @param {function(string, Operator):boolean} [options.signals] - Optional\n   *   predicate function for testing if a signal should be included in the\n   *   exported state. If unspecified, all signals will be included, except for\n   *   those named 'parent' or those which refer to a Transform value.\n   * @param {function(string, object):boolean} [options.data] - Optional\n   *   predicate function for testing if a data set's input should be included\n   *   in the exported state. If unspecified, all data sets that have been\n   *   explicitly modified will be included.\n   * @param {boolean} [options.recurse=true] - Flag indicating if the exported\n   *   state should recursively include state from group mark sub-contexts.\n   * @return {object} - An object containing the exported state values.\n   */\n  function getState(options) {\n    return this._runtime.getState(options || {\n      data: dataTest,\n      signals: signalTest,\n      recurse: true\n    });\n  }\n  function dataTest(name, data) {\n    return data.modified && vegaUtil.isArray(data.input.value) && !name.startsWith('_:vega:_');\n  }\n  function signalTest(name, op) {\n    return !(name === 'parent' || op instanceof vegaDataflow.transforms.proxy);\n  }\n\n  /**\n   * Sets the current view state and updates the view by invoking run.\n   * @param {object} state - A state object containing signal and/or\n   *   data set values, following the format used by the getState method.\n   * @return {View} - This view instance.\n   */\n  function setState(state) {\n    this.runAsync(null, v => {\n      v._trigger = false;\n      v._runtime.setState(state);\n    }, v => {\n      v._trigger = true;\n    });\n    return this;\n  }\n\n  var frame = 0,\n    // is an animation frame pending?\n    timeout = 0,\n    // is a timeout pending?\n    interval$1 = 0,\n    // are any timers active?\n    pokeDelay = 1000,\n    // how frequently we check for clock skew\n    taskHead,\n    taskTail,\n    clockLast = 0,\n    clockNow = 0,\n    clockSkew = 0,\n    clock = typeof performance === \"object\" && performance.now ? performance : Date,\n    setFrame = typeof window === \"object\" && window.requestAnimationFrame ? window.requestAnimationFrame.bind(window) : function (f) {\n      setTimeout(f, 17);\n    };\n  function now() {\n    return clockNow || (setFrame(clearNow), clockNow = clock.now() + clockSkew);\n  }\n  function clearNow() {\n    clockNow = 0;\n  }\n  function Timer() {\n    this._call = this._time = this._next = null;\n  }\n  Timer.prototype = {\n    constructor: Timer,\n    restart: function (callback, delay, time) {\n      if (typeof callback !== \"function\") throw new TypeError(\"callback is not a function\");\n      time = (time == null ? now() : +time) + (delay == null ? 0 : +delay);\n      if (!this._next && taskTail !== this) {\n        if (taskTail) taskTail._next = this;else taskHead = this;\n        taskTail = this;\n      }\n      this._call = callback;\n      this._time = time;\n      sleep();\n    },\n    stop: function () {\n      if (this._call) {\n        this._call = null;\n        this._time = Infinity;\n        sleep();\n      }\n    }\n  };\n  function timerFlush() {\n    now(); // Get the current time, if not already set.\n    ++frame; // Pretend we\u2019ve set an alarm, if we haven\u2019t already.\n    var t = taskHead,\n      e;\n    while (t) {\n      if ((e = clockNow - t._time) >= 0) t._call.call(undefined, e);\n      t = t._next;\n    }\n    --frame;\n  }\n  function wake() {\n    clockNow = (clockLast = clock.now()) + clockSkew;\n    frame = timeout = 0;\n    try {\n      timerFlush();\n    } finally {\n      frame = 0;\n      nap();\n      clockNow = 0;\n    }\n  }\n  function poke() {\n    var now = clock.now(),\n      delay = now - clockLast;\n    if (delay > pokeDelay) clockSkew -= delay, clockLast = now;\n  }\n  function nap() {\n    var t0,\n      t1 = taskHead,\n      t2,\n      time = Infinity;\n    while (t1) {\n      if (t1._call) {\n        if (time > t1._time) time = t1._time;\n        t0 = t1, t1 = t1._next;\n      } else {\n        t2 = t1._next, t1._next = null;\n        t1 = t0 ? t0._next = t2 : taskHead = t2;\n      }\n    }\n    taskTail = t0;\n    sleep(time);\n  }\n  function sleep(time) {\n    if (frame) return; // Soonest alarm already set, or will be.\n    if (timeout) timeout = clearTimeout(timeout);\n    var delay = time - clockNow; // Strictly less than if we recomputed clockNow.\n    if (delay > 24) {\n      if (time < Infinity) timeout = setTimeout(wake, time - clock.now() - clockSkew);\n      if (interval$1) interval$1 = clearInterval(interval$1);\n    } else {\n      if (!interval$1) clockLast = clock.now(), interval$1 = setInterval(poke, pokeDelay);\n      frame = 1, setFrame(wake);\n    }\n  }\n\n  function interval (callback, delay, time) {\n    var t = new Timer(),\n      total = delay;\n    if (delay == null) return t.restart(callback, delay, time), t;\n    t._restart = t.restart;\n    t.restart = function (callback, delay, time) {\n      delay = +delay, time = time == null ? now() : +time;\n      t._restart(function tick(elapsed) {\n        elapsed += total;\n        t._restart(tick, total += delay, time);\n        callback(elapsed);\n      }, delay, time);\n    };\n    t.restart(callback, delay, time);\n    return t;\n  }\n\n  function timer (callback, delay) {\n    function tick(elapsed) {\n      callback({\n        timestamp: Date.now(),\n        elapsed: elapsed\n      });\n    }\n    this._timers.push(interval(tick, delay));\n  }\n\n  function defaultTooltip (handler, event, item, value) {\n    const el = handler.element();\n    if (el) el.setAttribute('title', formatTooltip(value));\n  }\n  function formatTooltip(value) {\n    return value == null ? '' : vegaUtil.isArray(value) ? formatArray(value) : vegaUtil.isObject(value) && !vegaUtil.isDate(value) ? formatObject(value) : value + '';\n  }\n  function formatObject(obj) {\n    return Object.keys(obj).map(key => {\n      const v = obj[key];\n      return key + ': ' + (vegaUtil.isArray(v) ? formatArray(v) : formatValue(v));\n    }).join('\\n');\n  }\n  function formatArray(value) {\n    return '[' + value.map(formatValue).join(', ') + ']';\n  }\n  function formatValue(value) {\n    return vegaUtil.isArray(value) ? '[\\u2026]' : vegaUtil.isObject(value) && !vegaUtil.isDate(value) ? '{\\u2026}' : value;\n  }\n\n  function watchPixelRatio () {\n    // based on https://developer.mozilla.org/en-US/docs/Web/API/Window/devicePixelRatio#monitoring_screen_resolution_or_zoom_level_changes\n    if (this.renderer() === 'canvas' && this._renderer._canvas) {\n      let remove = null;\n      const updatePixelRatio = () => {\n        if (remove != null) {\n          remove();\n        }\n        const media = matchMedia(`(resolution: ${window.devicePixelRatio}dppx)`);\n        media.addEventListener('change', updatePixelRatio);\n        remove = () => {\n          media.removeEventListener('change', updatePixelRatio);\n        };\n        this._renderer._canvas.getContext('2d').pixelRatio = window.devicePixelRatio || 1;\n        this._redraw = true;\n        this._resize = 1;\n        this.resize().runAsync();\n      };\n      updatePixelRatio();\n    }\n  }\n\n  /**\n   * Create a new View instance from a Vega dataflow runtime specification.\n   * The generated View will not immediately be ready for display. Callers\n   * should also invoke the initialize method (e.g., to set the parent\n   * DOM element in browser-based deployment) and then invoke the run\n   * method to evaluate the dataflow graph. Rendering will automatically\n   * be performed upon dataflow runs.\n   * @constructor\n   * @param {object} spec - The Vega dataflow runtime specification.\n   */\n  function View(spec, options) {\n    const view = this;\n    options = options || {};\n    vegaDataflow.Dataflow.call(view);\n    if (options.loader) view.loader(options.loader);\n    if (options.logger) view.logger(options.logger);\n    if (options.logLevel != null) view.logLevel(options.logLevel);\n    if (options.locale || spec.locale) {\n      const loc = vegaUtil.extend({}, spec.locale, options.locale);\n      view.locale(vegaFormat.locale(loc.number, loc.time));\n    }\n    view._el = null;\n    view._elBind = null;\n    view._renderType = options.renderer || vegaScenegraph.RenderType.Canvas;\n    view._scenegraph = new vegaScenegraph.Scenegraph();\n    const root = view._scenegraph.root;\n\n    // initialize renderer, handler and event management\n    view._renderer = null;\n    view._tooltip = options.tooltip || defaultTooltip, view._redraw = true;\n    view._handler = new vegaScenegraph.CanvasHandler().scene(root);\n    view._globalCursor = false;\n    view._preventDefault = false;\n    view._timers = [];\n    view._eventListeners = [];\n    view._resizeListeners = [];\n\n    // initialize event configuration\n    view._eventConfig = initializeEventConfig(spec.eventConfig);\n    view.globalCursor(view._eventConfig.globalCursor);\n\n    // initialize dataflow graph\n    const ctx = runtime(view, spec, options.expr);\n    view._runtime = ctx;\n    view._signals = ctx.signals;\n    view._bind = (spec.bindings || []).map(_ => ({\n      state: null,\n      param: vegaUtil.extend({}, _)\n    }));\n\n    // initialize scenegraph\n    if (ctx.root) ctx.root.set(root);\n    root.source = ctx.data.root.input;\n    view.pulse(ctx.data.root.input, view.changeset().insert(root.items));\n\n    // initialize view size\n    view._width = view.width();\n    view._height = view.height();\n    view._viewWidth = viewWidth(view, view._width);\n    view._viewHeight = viewHeight(view, view._height);\n    view._origin = [0, 0];\n    view._resize = 0;\n    view._autosize = 1;\n    initializeResize(view);\n\n    // initialize background color\n    background(view);\n\n    // initialize cursor\n    cursor(view);\n\n    // initialize view description\n    view.description(spec.description);\n\n    // initialize hover proessing, if requested\n    if (options.hover) view.hover();\n\n    // initialize DOM container(s) and renderer\n    if (options.container) view.initialize(options.container, options.bind);\n    if (options.watchPixelRatio) view._watchPixelRatio();\n  }\n  function lookupSignal(view, name) {\n    return vegaUtil.hasOwnProperty(view._signals, name) ? view._signals[name] : vegaUtil.error('Unrecognized signal name: ' + vegaUtil.stringValue(name));\n  }\n  function findOperatorHandler(op, handler) {\n    const h = (op._targets || []).filter(op => op._update && op._update.handler === handler);\n    return h.length ? h[0] : null;\n  }\n  function addOperatorListener(view, name, op, handler) {\n    let h = findOperatorHandler(op, handler);\n    if (!h) {\n      h = trap(view, () => handler(name, op.value));\n      h.handler = handler;\n      view.on(op, null, h);\n    }\n    return view;\n  }\n  function removeOperatorListener(view, op, handler) {\n    const h = findOperatorHandler(op, handler);\n    if (h) op._targets.remove(h);\n    return view;\n  }\n  vegaUtil.inherits(View, vegaDataflow.Dataflow, {\n    // -- DATAFLOW / RENDERING ----\n\n    async evaluate(encode, prerun, postrun) {\n      // evaluate dataflow and prerun\n      await vegaDataflow.Dataflow.prototype.evaluate.call(this, encode, prerun);\n\n      // render as needed\n      if (this._redraw || this._resize) {\n        try {\n          if (this._renderer) {\n            if (this._resize) {\n              this._resize = 0;\n              resizeRenderer(this);\n            }\n            await this._renderer.renderAsync(this._scenegraph.root);\n          }\n          this._redraw = false;\n        } catch (e) {\n          this.error(e);\n        }\n      }\n\n      // evaluate postrun\n      if (postrun) vegaDataflow.asyncCallback(this, postrun);\n      return this;\n    },\n    dirty(item) {\n      this._redraw = true;\n      this._renderer && this._renderer.dirty(item);\n    },\n    // -- GET / SET ----\n\n    description(text) {\n      if (arguments.length) {\n        const desc = text != null ? text + '' : null;\n        if (desc !== this._desc) ariaLabel(this._el, this._desc = desc);\n        return this;\n      }\n      return this._desc;\n    },\n    container() {\n      return this._el;\n    },\n    scenegraph() {\n      return this._scenegraph;\n    },\n    origin() {\n      return this._origin.slice();\n    },\n    signal(name, value, options) {\n      const op = lookupSignal(this, name);\n      return arguments.length === 1 ? op.value : this.update(op, value, options);\n    },\n    width(_) {\n      return arguments.length ? this.signal('width', _) : this.signal('width');\n    },\n    height(_) {\n      return arguments.length ? this.signal('height', _) : this.signal('height');\n    },\n    padding(_) {\n      return arguments.length ? this.signal('padding', padding(_)) : padding(this.signal('padding'));\n    },\n    autosize(_) {\n      return arguments.length ? this.signal('autosize', _) : this.signal('autosize');\n    },\n    background(_) {\n      return arguments.length ? this.signal('background', _) : this.signal('background');\n    },\n    renderer(type) {\n      if (!arguments.length) return this._renderType;\n      if (!vegaScenegraph.renderModule(type)) vegaUtil.error('Unrecognized renderer type: ' + type);\n      if (type !== this._renderType) {\n        this._renderType = type;\n        this._resetRenderer();\n      }\n      return this;\n    },\n    tooltip(handler) {\n      if (!arguments.length) return this._tooltip;\n      if (handler !== this._tooltip) {\n        this._tooltip = handler;\n        this._resetRenderer();\n      }\n      return this;\n    },\n    loader(loader) {\n      if (!arguments.length) return this._loader;\n      if (loader !== this._loader) {\n        vegaDataflow.Dataflow.prototype.loader.call(this, loader);\n        this._resetRenderer();\n      }\n      return this;\n    },\n    resize() {\n      // set flag to perform autosize\n      this._autosize = 1;\n      // touch autosize signal to ensure top-level ViewLayout runs\n      return this.touch(lookupSignal(this, 'autosize'));\n    },\n    _resetRenderer() {\n      if (this._renderer) {\n        this._renderer = null;\n        this.initialize(this._el, this._elBind);\n      }\n    },\n    // -- SIZING ----\n    _resizeView: resizeView,\n    // -- EVENT HANDLING ----\n\n    addEventListener(type, handler, options) {\n      let callback = handler;\n      if (!(options && options.trap === false)) {\n        // wrap callback in error handler\n        callback = trap(this, handler);\n        callback.raw = handler;\n      }\n      this._handler.on(type, callback);\n      return this;\n    },\n    removeEventListener(type, handler) {\n      var handlers = this._handler.handlers(type),\n        i = handlers.length,\n        h,\n        t;\n\n      // search registered handlers, remove if match found\n      while (--i >= 0) {\n        t = handlers[i].type;\n        h = handlers[i].handler;\n        if (type === t && (handler === h || handler === h.raw)) {\n          this._handler.off(t, h);\n          break;\n        }\n      }\n      return this;\n    },\n    addResizeListener(handler) {\n      const l = this._resizeListeners;\n      if (!l.includes(handler)) {\n        // add handler if it isn't already registered\n        // note: error trapping handled elsewhere, so\n        // no need to wrap handlers here\n        l.push(handler);\n      }\n      return this;\n    },\n    removeResizeListener(handler) {\n      var l = this._resizeListeners,\n        i = l.indexOf(handler);\n      if (i >= 0) {\n        l.splice(i, 1);\n      }\n      return this;\n    },\n    addSignalListener(name, handler) {\n      return addOperatorListener(this, name, lookupSignal(this, name), handler);\n    },\n    removeSignalListener(name, handler) {\n      return removeOperatorListener(this, lookupSignal(this, name), handler);\n    },\n    addDataListener(name, handler) {\n      return addOperatorListener(this, name, dataref(this, name).values, handler);\n    },\n    removeDataListener(name, handler) {\n      return removeOperatorListener(this, dataref(this, name).values, handler);\n    },\n    globalCursor(_) {\n      if (arguments.length) {\n        if (this._globalCursor !== !!_) {\n          const prev = setCursor(this, null); // clear previous cursor\n          this._globalCursor = !!_;\n          if (prev) setCursor(this, prev); // swap cursor\n        }\n        return this;\n      } else {\n        return this._globalCursor;\n      }\n    },\n    preventDefault(_) {\n      if (arguments.length) {\n        this._preventDefault = _;\n        return this;\n      } else {\n        return this._preventDefault;\n      }\n    },\n    timer,\n    events,\n    finalize,\n    hover,\n    // -- DATA ----\n    data,\n    change,\n    insert,\n    remove,\n    // -- SCALES --\n    scale,\n    // -- INITIALIZATION ----\n    initialize,\n    // -- HEADLESS RENDERING ----\n    toImageURL: renderToImageURL,\n    toCanvas: renderToCanvas,\n    toSVG: renderToSVG,\n    // -- SAVE / RESTORE STATE ----\n    getState,\n    setState,\n    // RE-RENDER ON ZOOM\n    _watchPixelRatio: watchPixelRatio\n  });\n\n  exports.View = View;\n\n}));\n\n};"],
"names":["shadow$provide","require","module","exports","global","factory","define","amd","globalThis","self","vega","vegaUtil","vegaDataflow","vegaScenegraph","vegaFunctions","vegaRuntime","vegaFormat","initializeAria","view","el","container","setAttribute","ariaLabel","description","desc","removeAttribute","background","add","_","_background","bg","_resize","_signals","cursor","user","Default","item","on","events","event","value","isString","setCursor","globalCursor","document","body","style","removeProperty","dataref","name","data","_runtime","hasOwnProperty","error","change","changes","isChangeSet","dataset","modified","pulse","input","width","padding","Math","max","_viewWidth","left","right","height","_viewHeight","top","bottom","offset","origin","_origin","resizeRenderer","w","h","_renderer","resize","_handler","_resizeListeners","forEach","handler","extension","point","group","g","itemGroup","i","mark","interactive","xy","p","slice","x","y","marktype","constant","initializeEventConfig","config","extend","defaults","unpack","obj","keys","k","isArray","toSet","trackEventListener","sources","type","_eventListeners","push","array","permit","key","rule","_eventConfig","isObject","warn","itemFilter","markTarget","source","invoke","changeset","encode","element","tag","attr","text","createElement","textContent","tickSpec","start","stop","count","step","power","floor","log10","pow","factor","e10","e5","e2","inc","i1","round","i2","tickIncrement","tickStep","reverse","bind","binding","param","state","elements","active","set","update","signal","runAsync","debounce","create","target","generate","node","addEventListener","bind.set","dispatchEvent","Event","div","BindClass","wrapper","appendChild","NameClass","form","checkbox","select","radio","range","checked","labels","options","option","valuesEqual","selected","selectedIndex","n","length","RadioClass","map","label","prepend","nodes","undefined","min","span","a","b","initializeRenderer","r","constructor","scaleFactor","opt","loader","initialize","trap","fn","apply","arguments","initializeHandler","prevHandler","scene","tooltip","scenegraph","root","handlers","lookup","clear","querySelector","e","renderHeadless","renderModule","ctr","headless","renderAsync","_scenegraph","runtime","spec","expr","context","transforms","functionContext","parse","viewWidth","autosize","contains","Padding","viewHeight","initializeResize","resetSize","_autosize","s","_resizeWidth","_width","size","_resizeHeight","_height","resizePadding","pad","rank","dataTest","startsWith","signalTest","op","proxy","now","clockNow","setFrame","clearNow","clock","clockSkew","Timer","_call","_time","_next","wake","clockLast","frame","timeout","t","taskHead","call","t1","time","Infinity","t0","t2","taskTail","sleep","poke","delay","pokeDelay","clearTimeout","setTimeout","interval$1","clearInterval","setInterval","interval","callback","total","restart","_restart","t.restart","tick","elapsed","defaultTooltip","formatValue","join","isDate","formatObject","Object","v","View","Dataflow","logger","logLevel","locale","loc","number","_elBind","_el","_renderType","renderer","RenderType","Canvas","Scenegraph","_tooltip","_redraw","CanvasHandler","_preventDefault","_globalCursor","_timers","eventConfig","ctx","signals","_bind","bindings","insert","items","hover","watchPixelRatio","_watchPixelRatio","lookupSignal","stringValue","findOperatorHandler","filter","_targets","_update","addOperatorListener","removeOperatorListener","remove","NO_TRAP","sqrt","Skip","skip","performance","Date","window","requestAnimationFrame","f","prototype","TypeError","inherits","evaluate","prerun","postrun","asyncCallback","dirty","_desc","_resetRenderer","_loader","touch","_resizeView","resizeView","auto","runAfter","rerun","Width","Height","run","raw","removeEventListener","off","addResizeListener","l","includes","removeResizeListener","indexOf","splice","addSignalListener","removeSignalListener","addDataListener","values","removeDataListener","prev","preventDefault","timer","timestamp","EventStream","send","def","prevent","allow","receive","canvas","translate","changedTouches","dataflow","TIMER","VIEW","WINDOW","Array","from","querySelectorAll","finalize","timers","listeners","m","hoverSet","leaveSet","truthy","scale","scales","elBind","Handler","Renderer","toImageURL","renderToImageURL","SVG","PNG","blob","Blob","mime","URL","createObjectURL","toCanvas","renderToCanvas","toSVG","renderToSVG","svg","getState","recurse","setState","_trigger","_canvas","updatePixelRatio","media","matchMedia","devicePixelRatio","getContext","pixelRatio"]
}
