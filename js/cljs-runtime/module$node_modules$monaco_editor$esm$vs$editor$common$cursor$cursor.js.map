{
"version":3,
"file":"module$node_modules$monaco_editor$esm$vs$editor$common$cursor$cursor.js",
"lineCount":560,
"mappings":"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",
"sources":["node_modules/monaco-editor/esm/vs/editor/common/cursor/cursor.js"],
"sourcesContent":["shadow$provide[\"module$node_modules$monaco_editor$esm$vs$editor$common$cursor$cursor\"] = function(require,module,exports) {\nObject.defineProperties(exports, {__esModule:{enumerable:true, value:true}, CursorsController:{enumerable:true, get:function() {\n  return CursorsController;\n}}});\nvar require$_DOT__DOT__SLASH__DOT__DOT__SLASH__DOT__DOT__SLASH_base_SLASH_common_SLASH_errors_DOT_js = require(\"../../../base/common/errors.js\");\nvar strings = require(\"../../../base/common/strings.js\");\nvar require$_DOT__SLASH_cursorCollection_DOT_js = require(\"./cursorCollection.js\");\nvar require$_DOT__DOT__SLASH_cursorCommon_DOT_js = require(\"../cursorCommon.js\");\nvar require$_DOT__SLASH_cursorContext_DOT_js = require(\"./cursorContext.js\");\nvar require$_DOT__SLASH_cursorDeleteOperations_DOT_js = require(\"./cursorDeleteOperations.js\");\nvar require$_DOT__SLASH_cursorTypeOperations_DOT_js = require(\"./cursorTypeOperations.js\");\nvar require$_DOT__DOT__SLASH_core_SLASH_range_DOT_js = require(\"../core/range.js\");\nvar require$_DOT__DOT__SLASH_core_SLASH_selection_DOT_js = require(\"../core/selection.js\");\nvar require$_DOT__DOT__SLASH_textModelEvents_DOT_js = require(\"../textModelEvents.js\");\nvar require$_DOT__DOT__SLASH_viewEvents_DOT_js = require(\"../viewEvents.js\");\nvar require$_DOT__DOT__SLASH__DOT__DOT__SLASH__DOT__DOT__SLASH_base_SLASH_common_SLASH_lifecycle_DOT_js = require(\"../../../base/common/lifecycle.js\");\nvar require$_DOT__DOT__SLASH_viewModelEventDispatcher_DOT_js = require(\"../viewModelEventDispatcher.js\");\nclass CursorsController extends require$_DOT__DOT__SLASH__DOT__DOT__SLASH__DOT__DOT__SLASH_base_SLASH_common_SLASH_lifecycle_DOT_js.Disposable {\n  constructor(model, viewModel, coordinatesConverter, cursorConfig) {\n    super();\n    this._model = model;\n    this._knownModelVersionId = this._model.getVersionId();\n    this._viewModel = viewModel;\n    this._coordinatesConverter = coordinatesConverter;\n    this.context = new require$_DOT__SLASH_cursorContext_DOT_js.CursorContext(this._model, this._viewModel, this._coordinatesConverter, cursorConfig);\n    this._cursors = new require$_DOT__SLASH_cursorCollection_DOT_js.CursorCollection(this.context);\n    this._hasFocus = false;\n    this._isHandling = false;\n    this._compositionState = null;\n    this._columnSelectData = null;\n    this._autoClosedActions = [];\n    this._prevEditOperationType = 0;\n  }\n  dispose() {\n    this._cursors.dispose();\n    this._autoClosedActions = (0,require$_DOT__DOT__SLASH__DOT__DOT__SLASH__DOT__DOT__SLASH_base_SLASH_common_SLASH_lifecycle_DOT_js.dispose)(this._autoClosedActions);\n    super.dispose();\n  }\n  updateConfiguration(cursorConfig) {\n    this.context = new require$_DOT__SLASH_cursorContext_DOT_js.CursorContext(this._model, this._viewModel, this._coordinatesConverter, cursorConfig);\n    this._cursors.updateContext(this.context);\n  }\n  onLineMappingChanged(eventsCollector) {\n    if (this._knownModelVersionId !== this._model.getVersionId()) {\n      return;\n    }\n    this.setStates(eventsCollector, \"viewModel\", 0, this.getCursorStates());\n  }\n  setHasFocus(hasFocus) {\n    this._hasFocus = hasFocus;\n  }\n  _validateAutoClosedActions() {\n    if (this._autoClosedActions.length > 0) {\n      const selections = this._cursors.getSelections();\n      for (let i = 0; i < this._autoClosedActions.length; i++) {\n        const autoClosedAction = this._autoClosedActions[i];\n        if (!autoClosedAction.isValid(selections)) {\n          autoClosedAction.dispose();\n          this._autoClosedActions.splice(i, 1);\n          i--;\n        }\n      }\n    }\n  }\n  getPrimaryCursorState() {\n    return this._cursors.getPrimaryCursor();\n  }\n  getLastAddedCursorIndex() {\n    return this._cursors.getLastAddedCursorIndex();\n  }\n  getCursorStates() {\n    return this._cursors.getAll();\n  }\n  setStates(eventsCollector, source, reason, states) {\n    let reachedMaxCursorCount = false;\n    const multiCursorLimit = this.context.cursorConfig.multiCursorLimit;\n    if (states !== null && states.length > multiCursorLimit) {\n      states = states.slice(0, multiCursorLimit);\n      reachedMaxCursorCount = true;\n    }\n    const oldState = CursorModelState.from(this._model, this);\n    this._cursors.setStates(states);\n    this._cursors.normalize();\n    this._columnSelectData = null;\n    this._validateAutoClosedActions();\n    return this._emitStateChangedIfNecessary(eventsCollector, source, reason, oldState, reachedMaxCursorCount);\n  }\n  setCursorColumnSelectData(columnSelectData) {\n    this._columnSelectData = columnSelectData;\n  }\n  revealPrimary(eventsCollector, source, minimalReveal, verticalType, revealHorizontal, scrollType) {\n    const viewPositions = this._cursors.getViewPositions();\n    let revealViewRange = null;\n    let revealViewSelections = null;\n    if (viewPositions.length > 1) {\n      revealViewSelections = this._cursors.getViewSelections();\n    } else {\n      revealViewRange = require$_DOT__DOT__SLASH_core_SLASH_range_DOT_js.Range.fromPositions(viewPositions[0], viewPositions[0]);\n    }\n    eventsCollector.emitViewEvent(new require$_DOT__DOT__SLASH_viewEvents_DOT_js.ViewRevealRangeRequestEvent(source, minimalReveal, revealViewRange, revealViewSelections, verticalType, revealHorizontal, scrollType));\n  }\n  saveState() {\n    const result = [];\n    const selections = this._cursors.getSelections();\n    for (let i = 0, len = selections.length; i < len; i++) {\n      const selection = selections[i];\n      result.push({inSelectionMode:!selection.isEmpty(), selectionStart:{lineNumber:selection.selectionStartLineNumber, column:selection.selectionStartColumn,}, position:{lineNumber:selection.positionLineNumber, column:selection.positionColumn,}});\n    }\n    return result;\n  }\n  restoreState(eventsCollector, states) {\n    const desiredSelections = [];\n    for (let i = 0, len = states.length; i < len; i++) {\n      const state = states[i];\n      let positionLineNumber = 1;\n      let positionColumn = 1;\n      if (state.position && state.position.lineNumber) {\n        positionLineNumber = state.position.lineNumber;\n      }\n      if (state.position && state.position.column) {\n        positionColumn = state.position.column;\n      }\n      let selectionStartLineNumber = positionLineNumber;\n      let selectionStartColumn = positionColumn;\n      if (state.selectionStart && state.selectionStart.lineNumber) {\n        selectionStartLineNumber = state.selectionStart.lineNumber;\n      }\n      if (state.selectionStart && state.selectionStart.column) {\n        selectionStartColumn = state.selectionStart.column;\n      }\n      desiredSelections.push({selectionStartLineNumber:selectionStartLineNumber, selectionStartColumn:selectionStartColumn, positionLineNumber:positionLineNumber, positionColumn:positionColumn});\n    }\n    this.setStates(eventsCollector, \"restoreState\", 0, require$_DOT__DOT__SLASH_cursorCommon_DOT_js.CursorState.fromModelSelections(desiredSelections));\n    this.revealPrimary(eventsCollector, \"restoreState\", false, 0, true, 1);\n  }\n  onModelContentChanged(eventsCollector, event) {\n    if (event instanceof require$_DOT__DOT__SLASH_textModelEvents_DOT_js.ModelInjectedTextChangedEvent) {\n      if (this._isHandling) {\n        return;\n      }\n      this._isHandling = true;\n      try {\n        this.setStates(eventsCollector, \"modelChange\", 0, this.getCursorStates());\n      } finally {\n        this._isHandling = false;\n      }\n    } else {\n      const e = event.rawContentChangedEvent;\n      this._knownModelVersionId = e.versionId;\n      if (this._isHandling) {\n        return;\n      }\n      const hadFlushEvent = e.containsEvent(1);\n      this._prevEditOperationType = 0;\n      if (hadFlushEvent) {\n        this._cursors.dispose();\n        this._cursors = new require$_DOT__SLASH_cursorCollection_DOT_js.CursorCollection(this.context);\n        this._validateAutoClosedActions();\n        this._emitStateChangedIfNecessary(eventsCollector, \"model\", 1, null, false);\n      } else {\n        if (this._hasFocus && e.resultingSelection && e.resultingSelection.length > 0) {\n          const cursorState = require$_DOT__DOT__SLASH_cursorCommon_DOT_js.CursorState.fromModelSelections(e.resultingSelection);\n          if (this.setStates(eventsCollector, \"modelChange\", e.isUndoing ? 5 : e.isRedoing ? 6 : 2, cursorState)) {\n            this.revealPrimary(eventsCollector, \"modelChange\", false, 0, true, 0);\n          }\n        } else {\n          const selectionsFromMarkers = this._cursors.readSelectionFromMarkers();\n          this.setStates(eventsCollector, \"modelChange\", 2, require$_DOT__DOT__SLASH_cursorCommon_DOT_js.CursorState.fromModelSelections(selectionsFromMarkers));\n        }\n      }\n    }\n  }\n  getSelection() {\n    return this._cursors.getPrimaryCursor().modelState.selection;\n  }\n  getTopMostViewPosition() {\n    return this._cursors.getTopMostViewPosition();\n  }\n  getBottomMostViewPosition() {\n    return this._cursors.getBottomMostViewPosition();\n  }\n  getCursorColumnSelectData() {\n    if (this._columnSelectData) {\n      return this._columnSelectData;\n    }\n    const primaryCursor = this._cursors.getPrimaryCursor();\n    const viewSelectionStart = primaryCursor.viewState.selectionStart.getStartPosition();\n    const viewPosition = primaryCursor.viewState.position;\n    return {isReal:false, fromViewLineNumber:viewSelectionStart.lineNumber, fromViewVisualColumn:this.context.cursorConfig.visibleColumnFromColumn(this._viewModel, viewSelectionStart), toViewLineNumber:viewPosition.lineNumber, toViewVisualColumn:this.context.cursorConfig.visibleColumnFromColumn(this._viewModel, viewPosition),};\n  }\n  getSelections() {\n    return this._cursors.getSelections();\n  }\n  setSelections(eventsCollector, source, selections, reason) {\n    this.setStates(eventsCollector, source, reason, require$_DOT__DOT__SLASH_cursorCommon_DOT_js.CursorState.fromModelSelections(selections));\n  }\n  getPrevEditOperationType() {\n    return this._prevEditOperationType;\n  }\n  setPrevEditOperationType(type) {\n    this._prevEditOperationType = type;\n  }\n  _pushAutoClosedAction(autoClosedCharactersRanges, autoClosedEnclosingRanges) {\n    const autoClosedCharactersDeltaDecorations = [];\n    const autoClosedEnclosingDeltaDecorations = [];\n    for (let i = 0, len = autoClosedCharactersRanges.length; i < len; i++) {\n      autoClosedCharactersDeltaDecorations.push({range:autoClosedCharactersRanges[i], options:{description:\"auto-closed-character\", inlineClassName:\"auto-closed-character\", stickiness:1}});\n      autoClosedEnclosingDeltaDecorations.push({range:autoClosedEnclosingRanges[i], options:{description:\"auto-closed-enclosing\", stickiness:1}});\n    }\n    const autoClosedCharactersDecorations = this._model.deltaDecorations([], autoClosedCharactersDeltaDecorations);\n    const autoClosedEnclosingDecorations = this._model.deltaDecorations([], autoClosedEnclosingDeltaDecorations);\n    this._autoClosedActions.push(new AutoClosedAction(this._model, autoClosedCharactersDecorations, autoClosedEnclosingDecorations));\n  }\n  _executeEditOperation(opResult) {\n    if (!opResult) {\n      return;\n    }\n    if (opResult.shouldPushStackElementBefore) {\n      this._model.pushStackElement();\n    }\n    const result = CommandExecutor.executeCommands(this._model, this._cursors.getSelections(), opResult.commands);\n    if (result) {\n      this._interpretCommandResult(result);\n      const autoClosedCharactersRanges = [];\n      const autoClosedEnclosingRanges = [];\n      for (let i = 0; i < opResult.commands.length; i++) {\n        const command = opResult.commands[i];\n        if (command instanceof require$_DOT__SLASH_cursorTypeOperations_DOT_js.TypeWithAutoClosingCommand && command.enclosingRange && command.closeCharacterRange) {\n          autoClosedCharactersRanges.push(command.closeCharacterRange);\n          autoClosedEnclosingRanges.push(command.enclosingRange);\n        }\n      }\n      if (autoClosedCharactersRanges.length > 0) {\n        this._pushAutoClosedAction(autoClosedCharactersRanges, autoClosedEnclosingRanges);\n      }\n      this._prevEditOperationType = opResult.type;\n    }\n    if (opResult.shouldPushStackElementAfter) {\n      this._model.pushStackElement();\n    }\n  }\n  _interpretCommandResult(cursorState) {\n    if (!cursorState || cursorState.length === 0) {\n      cursorState = this._cursors.readSelectionFromMarkers();\n    }\n    this._columnSelectData = null;\n    this._cursors.setSelections(cursorState);\n    this._cursors.normalize();\n  }\n  _emitStateChangedIfNecessary(eventsCollector, source, reason, oldState, reachedMaxCursorCount) {\n    const newState = CursorModelState.from(this._model, this);\n    if (newState.equals(oldState)) {\n      return false;\n    }\n    const selections = this._cursors.getSelections();\n    const viewSelections = this._cursors.getViewSelections();\n    eventsCollector.emitViewEvent(new require$_DOT__DOT__SLASH_viewEvents_DOT_js.ViewCursorStateChangedEvent(viewSelections, selections, reason));\n    if (!oldState || oldState.cursorState.length !== newState.cursorState.length || newState.cursorState.some((newCursorState, i) => !newCursorState.modelState.equals(oldState.cursorState[i].modelState))) {\n      const oldSelections = oldState ? oldState.cursorState.map(s => s.modelState.selection) : null;\n      const oldModelVersionId = oldState ? oldState.modelVersionId : 0;\n      eventsCollector.emitOutgoingEvent(new require$_DOT__DOT__SLASH_viewModelEventDispatcher_DOT_js.CursorStateChangedEvent(oldSelections, selections, oldModelVersionId, newState.modelVersionId, source || \"keyboard\", reason, reachedMaxCursorCount));\n    }\n    return true;\n  }\n  _findAutoClosingPairs(edits) {\n    if (!edits.length) {\n      return null;\n    }\n    const indices = [];\n    for (let i = 0, len = edits.length; i < len; i++) {\n      const edit = edits[i];\n      if (!edit.text || edit.text.indexOf(\"\\n\") >= 0) {\n        return null;\n      }\n      const m = edit.text.match(/([)\\]}>'\"`])([^)\\]}>'\"`]*)$/);\n      if (!m) {\n        return null;\n      }\n      const closeChar = m[1];\n      const autoClosingPairsCandidates = this.context.cursorConfig.autoClosingPairs.autoClosingPairsCloseSingleChar.get(closeChar);\n      if (!autoClosingPairsCandidates || autoClosingPairsCandidates.length !== 1) {\n        return null;\n      }\n      const openChar = autoClosingPairsCandidates[0].open;\n      const closeCharIndex = edit.text.length - m[2].length - 1;\n      const openCharIndex = edit.text.lastIndexOf(openChar, closeCharIndex - 1);\n      if (openCharIndex === -1) {\n        return null;\n      }\n      indices.push([openCharIndex, closeCharIndex]);\n    }\n    return indices;\n  }\n  executeEdits(eventsCollector, source, edits, cursorStateComputer) {\n    let autoClosingIndices = null;\n    if (source === \"snippet\") {\n      autoClosingIndices = this._findAutoClosingPairs(edits);\n    }\n    if (autoClosingIndices) {\n      edits[0]._isTracked = true;\n    }\n    const autoClosedCharactersRanges = [];\n    const autoClosedEnclosingRanges = [];\n    const selections = this._model.pushEditOperations(this.getSelections(), edits, undoEdits => {\n      if (autoClosingIndices) {\n        for (let i = 0, len = autoClosingIndices.length; i < len; i++) {\n          const [openCharInnerIndex, closeCharInnerIndex] = autoClosingIndices[i];\n          const undoEdit = undoEdits[i];\n          const lineNumber = undoEdit.range.startLineNumber;\n          const openCharIndex = undoEdit.range.startColumn - 1 + openCharInnerIndex;\n          const closeCharIndex = undoEdit.range.startColumn - 1 + closeCharInnerIndex;\n          autoClosedCharactersRanges.push(new require$_DOT__DOT__SLASH_core_SLASH_range_DOT_js.Range(lineNumber, closeCharIndex + 1, lineNumber, closeCharIndex + 2));\n          autoClosedEnclosingRanges.push(new require$_DOT__DOT__SLASH_core_SLASH_range_DOT_js.Range(lineNumber, openCharIndex + 1, lineNumber, closeCharIndex + 2));\n        }\n      }\n      const selections = cursorStateComputer(undoEdits);\n      if (selections) {\n        this._isHandling = true;\n      }\n      return selections;\n    });\n    if (selections) {\n      this._isHandling = false;\n      this.setSelections(eventsCollector, source, selections, 0);\n    }\n    if (autoClosedCharactersRanges.length > 0) {\n      this._pushAutoClosedAction(autoClosedCharactersRanges, autoClosedEnclosingRanges);\n    }\n  }\n  _executeEdit(callback, eventsCollector, source, cursorChangeReason = 0) {\n    if (this.context.cursorConfig.readOnly) {\n      return;\n    }\n    const oldState = CursorModelState.from(this._model, this);\n    this._cursors.stopTrackingSelections();\n    this._isHandling = true;\n    try {\n      this._cursors.ensureValidState();\n      callback();\n    } catch (err) {\n      (0,require$_DOT__DOT__SLASH__DOT__DOT__SLASH__DOT__DOT__SLASH_base_SLASH_common_SLASH_errors_DOT_js.onUnexpectedError)(err);\n    }\n    this._isHandling = false;\n    this._cursors.startTrackingSelections();\n    this._validateAutoClosedActions();\n    if (this._emitStateChangedIfNecessary(eventsCollector, source, cursorChangeReason, oldState, false)) {\n      this.revealPrimary(eventsCollector, source, false, 0, true, 0);\n    }\n  }\n  getAutoClosedCharacters() {\n    return AutoClosedAction.getAllAutoClosedCharacters(this._autoClosedActions);\n  }\n  startComposition(eventsCollector) {\n    this._compositionState = new CompositionState(this._model, this.getSelections());\n  }\n  endComposition(eventsCollector, source) {\n    const compositionOutcome = this._compositionState ? this._compositionState.deduceOutcome(this._model, this.getSelections()) : null;\n    this._compositionState = null;\n    this._executeEdit(() => {\n      if (source === \"keyboard\") {\n        this._executeEditOperation(require$_DOT__SLASH_cursorTypeOperations_DOT_js.TypeOperations.compositionEndWithInterceptors(this._prevEditOperationType, this.context.cursorConfig, this._model, compositionOutcome, this.getSelections(), this.getAutoClosedCharacters()));\n      }\n    }, eventsCollector, source);\n  }\n  type(eventsCollector, text, source) {\n    this._executeEdit(() => {\n      if (source === \"keyboard\") {\n        const len = text.length;\n        let offset = 0;\n        while (offset < len) {\n          const charLength = strings.nextCharLength(text, offset);\n          const chr = text.substr(offset, charLength);\n          this._executeEditOperation(require$_DOT__SLASH_cursorTypeOperations_DOT_js.TypeOperations.typeWithInterceptors(!!this._compositionState, this._prevEditOperationType, this.context.cursorConfig, this._model, this.getSelections(), this.getAutoClosedCharacters(), chr));\n          offset += charLength;\n        }\n      } else {\n        this._executeEditOperation(require$_DOT__SLASH_cursorTypeOperations_DOT_js.TypeOperations.typeWithoutInterceptors(this._prevEditOperationType, this.context.cursorConfig, this._model, this.getSelections(), text));\n      }\n    }, eventsCollector, source);\n  }\n  compositionType(eventsCollector, text, replacePrevCharCnt, replaceNextCharCnt, positionDelta, source) {\n    if (text.length === 0 && replacePrevCharCnt === 0 && replaceNextCharCnt === 0) {\n      if (positionDelta !== 0) {\n        const newSelections = this.getSelections().map(selection => {\n          const position = selection.getPosition();\n          return new require$_DOT__DOT__SLASH_core_SLASH_selection_DOT_js.Selection(position.lineNumber, position.column + positionDelta, position.lineNumber, position.column + positionDelta);\n        });\n        this.setSelections(eventsCollector, source, newSelections, 0);\n      }\n      return;\n    }\n    this._executeEdit(() => {\n      this._executeEditOperation(require$_DOT__SLASH_cursorTypeOperations_DOT_js.TypeOperations.compositionType(this._prevEditOperationType, this.context.cursorConfig, this._model, this.getSelections(), text, replacePrevCharCnt, replaceNextCharCnt, positionDelta));\n    }, eventsCollector, source);\n  }\n  paste(eventsCollector, text, pasteOnNewLine, multicursorText, source) {\n    this._executeEdit(() => {\n      this._executeEditOperation(require$_DOT__SLASH_cursorTypeOperations_DOT_js.TypeOperations.paste(this.context.cursorConfig, this._model, this.getSelections(), text, pasteOnNewLine, multicursorText || []));\n    }, eventsCollector, source, 4);\n  }\n  cut(eventsCollector, source) {\n    this._executeEdit(() => {\n      this._executeEditOperation(require$_DOT__SLASH_cursorDeleteOperations_DOT_js.DeleteOperations.cut(this.context.cursorConfig, this._model, this.getSelections()));\n    }, eventsCollector, source);\n  }\n  executeCommand(eventsCollector, command, source) {\n    this._executeEdit(() => {\n      this._cursors.killSecondaryCursors();\n      this._executeEditOperation(new require$_DOT__DOT__SLASH_cursorCommon_DOT_js.EditOperationResult(0, [command], {shouldPushStackElementBefore:false, shouldPushStackElementAfter:false}));\n    }, eventsCollector, source);\n  }\n  executeCommands(eventsCollector, commands, source) {\n    this._executeEdit(() => {\n      this._executeEditOperation(new require$_DOT__DOT__SLASH_cursorCommon_DOT_js.EditOperationResult(0, commands, {shouldPushStackElementBefore:false, shouldPushStackElementAfter:false}));\n    }, eventsCollector, source);\n  }\n}\nclass CursorModelState {\n  static from(model, cursor) {\n    return new CursorModelState(model.getVersionId(), cursor.getCursorStates());\n  }\n  constructor(modelVersionId, cursorState) {\n    this.modelVersionId = modelVersionId;\n    this.cursorState = cursorState;\n  }\n  equals(other) {\n    if (!other) {\n      return false;\n    }\n    if (this.modelVersionId !== other.modelVersionId) {\n      return false;\n    }\n    if (this.cursorState.length !== other.cursorState.length) {\n      return false;\n    }\n    for (let i = 0, len = this.cursorState.length; i < len; i++) {\n      if (!this.cursorState[i].equals(other.cursorState[i])) {\n        return false;\n      }\n    }\n    return true;\n  }\n}\nclass AutoClosedAction {\n  static getAllAutoClosedCharacters(autoClosedActions) {\n    let autoClosedCharacters = [];\n    for (const autoClosedAction of autoClosedActions) {\n      autoClosedCharacters = autoClosedCharacters.concat(autoClosedAction.getAutoClosedCharactersRanges());\n    }\n    return autoClosedCharacters;\n  }\n  constructor(model, autoClosedCharactersDecorations, autoClosedEnclosingDecorations) {\n    this._model = model;\n    this._autoClosedCharactersDecorations = autoClosedCharactersDecorations;\n    this._autoClosedEnclosingDecorations = autoClosedEnclosingDecorations;\n  }\n  dispose() {\n    this._autoClosedCharactersDecorations = this._model.deltaDecorations(this._autoClosedCharactersDecorations, []);\n    this._autoClosedEnclosingDecorations = this._model.deltaDecorations(this._autoClosedEnclosingDecorations, []);\n  }\n  getAutoClosedCharactersRanges() {\n    const result = [];\n    for (let i = 0; i < this._autoClosedCharactersDecorations.length; i++) {\n      const decorationRange = this._model.getDecorationRange(this._autoClosedCharactersDecorations[i]);\n      if (decorationRange) {\n        result.push(decorationRange);\n      }\n    }\n    return result;\n  }\n  isValid(selections) {\n    const enclosingRanges = [];\n    for (let i = 0; i < this._autoClosedEnclosingDecorations.length; i++) {\n      const decorationRange = this._model.getDecorationRange(this._autoClosedEnclosingDecorations[i]);\n      if (decorationRange) {\n        enclosingRanges.push(decorationRange);\n        if (decorationRange.startLineNumber !== decorationRange.endLineNumber) {\n          return false;\n        }\n      }\n    }\n    enclosingRanges.sort(require$_DOT__DOT__SLASH_core_SLASH_range_DOT_js.Range.compareRangesUsingStarts);\n    selections.sort(require$_DOT__DOT__SLASH_core_SLASH_range_DOT_js.Range.compareRangesUsingStarts);\n    for (let i = 0; i < selections.length; i++) {\n      if (i >= enclosingRanges.length) {\n        return false;\n      }\n      if (!enclosingRanges[i].strictContainsRange(selections[i])) {\n        return false;\n      }\n    }\n    return true;\n  }\n}\nclass CommandExecutor {\n  static executeCommands(model, selectionsBefore, commands) {\n    const ctx = {model:model, selectionsBefore:selectionsBefore, trackedRanges:[], trackedRangesDirection:[]};\n    const result = this._innerExecuteCommands(ctx, commands);\n    for (let i = 0, len = ctx.trackedRanges.length; i < len; i++) {\n      ctx.model._setTrackedRange(ctx.trackedRanges[i], null, 0);\n    }\n    return result;\n  }\n  static _innerExecuteCommands(ctx, commands) {\n    if (this._arrayIsEmpty(commands)) {\n      return null;\n    }\n    const commandsData = this._getEditOperations(ctx, commands);\n    if (commandsData.operations.length === 0) {\n      return null;\n    }\n    const rawOperations = commandsData.operations;\n    const loserCursorsMap = this._getLoserCursorMap(rawOperations);\n    if (loserCursorsMap.hasOwnProperty(\"0\")) {\n      console.warn(\"Ignoring commands\");\n      return null;\n    }\n    const filteredOperations = [];\n    for (let i = 0, len = rawOperations.length; i < len; i++) {\n      if (!loserCursorsMap.hasOwnProperty(rawOperations[i].identifier.major.toString())) {\n        filteredOperations.push(rawOperations[i]);\n      }\n    }\n    if (commandsData.hadTrackedEditOperation && filteredOperations.length > 0) {\n      filteredOperations[0]._isTracked = true;\n    }\n    let selectionsAfter = ctx.model.pushEditOperations(ctx.selectionsBefore, filteredOperations, inverseEditOperations => {\n      const groupedInverseEditOperations = [];\n      for (let i = 0; i < ctx.selectionsBefore.length; i++) {\n        groupedInverseEditOperations[i] = [];\n      }\n      for (const op of inverseEditOperations) {\n        if (!op.identifier) {\n          continue;\n        }\n        groupedInverseEditOperations[op.identifier.major].push(op);\n      }\n      const minorBasedSorter = (a, b) => {\n        return a.identifier.minor - b.identifier.minor;\n      };\n      const cursorSelections = [];\n      for (let i = 0; i < ctx.selectionsBefore.length; i++) {\n        if (groupedInverseEditOperations[i].length > 0) {\n          groupedInverseEditOperations[i].sort(minorBasedSorter);\n          cursorSelections[i] = commands[i].computeCursorState(ctx.model, {getInverseEditOperations:() => {\n            return groupedInverseEditOperations[i];\n          }, getTrackedSelection:id => {\n            const idx = parseInt(id, 10);\n            const range = ctx.model._getTrackedRange(ctx.trackedRanges[idx]);\n            if (ctx.trackedRangesDirection[idx] === 0) {\n              return new require$_DOT__DOT__SLASH_core_SLASH_selection_DOT_js.Selection(range.startLineNumber, range.startColumn, range.endLineNumber, range.endColumn);\n            }\n            return new require$_DOT__DOT__SLASH_core_SLASH_selection_DOT_js.Selection(range.endLineNumber, range.endColumn, range.startLineNumber, range.startColumn);\n          }});\n        } else {\n          cursorSelections[i] = ctx.selectionsBefore[i];\n        }\n      }\n      return cursorSelections;\n    });\n    if (!selectionsAfter) {\n      selectionsAfter = ctx.selectionsBefore;\n    }\n    const losingCursors = [];\n    for (const losingCursorIndex in loserCursorsMap) {\n      if (loserCursorsMap.hasOwnProperty(losingCursorIndex)) {\n        losingCursors.push(parseInt(losingCursorIndex, 10));\n      }\n    }\n    losingCursors.sort((a, b) => {\n      return b - a;\n    });\n    for (const losingCursor of losingCursors) {\n      selectionsAfter.splice(losingCursor, 1);\n    }\n    return selectionsAfter;\n  }\n  static _arrayIsEmpty(commands) {\n    for (let i = 0, len = commands.length; i < len; i++) {\n      if (commands[i]) {\n        return false;\n      }\n    }\n    return true;\n  }\n  static _getEditOperations(ctx, commands) {\n    let operations = [];\n    let hadTrackedEditOperation = false;\n    for (let i = 0, len = commands.length; i < len; i++) {\n      const command = commands[i];\n      if (command) {\n        const r = this._getEditOperationsFromCommand(ctx, i, command);\n        operations = operations.concat(r.operations);\n        hadTrackedEditOperation = hadTrackedEditOperation || r.hadTrackedEditOperation;\n      }\n    }\n    return {operations:operations, hadTrackedEditOperation:hadTrackedEditOperation};\n  }\n  static _getEditOperationsFromCommand(ctx, majorIdentifier, command) {\n    const operations = [];\n    let operationMinor = 0;\n    const addEditOperation = (range, text, forceMoveMarkers = false) => {\n      if (require$_DOT__DOT__SLASH_core_SLASH_range_DOT_js.Range.isEmpty(range) && text === \"\") {\n        return;\n      }\n      operations.push({identifier:{major:majorIdentifier, minor:operationMinor++}, range:range, text:text, forceMoveMarkers:forceMoveMarkers, isAutoWhitespaceEdit:command.insertsAutoWhitespace});\n    };\n    let hadTrackedEditOperation = false;\n    const addTrackedEditOperation = (selection, text, forceMoveMarkers) => {\n      hadTrackedEditOperation = true;\n      addEditOperation(selection, text, forceMoveMarkers);\n    };\n    const trackSelection = (_selection, trackPreviousOnEmpty) => {\n      const selection = require$_DOT__DOT__SLASH_core_SLASH_selection_DOT_js.Selection.liftSelection(_selection);\n      let stickiness;\n      if (selection.isEmpty()) {\n        if (typeof trackPreviousOnEmpty === \"boolean\") {\n          if (trackPreviousOnEmpty) {\n            stickiness = 2;\n          } else {\n            stickiness = 3;\n          }\n        } else {\n          const maxLineColumn = ctx.model.getLineMaxColumn(selection.startLineNumber);\n          if (selection.startColumn === maxLineColumn) {\n            stickiness = 2;\n          } else {\n            stickiness = 3;\n          }\n        }\n      } else {\n        stickiness = 1;\n      }\n      const l = ctx.trackedRanges.length;\n      const id = ctx.model._setTrackedRange(null, selection, stickiness);\n      ctx.trackedRanges[l] = id;\n      ctx.trackedRangesDirection[l] = selection.getDirection();\n      return l.toString();\n    };\n    const editOperationBuilder = {addEditOperation:addEditOperation, addTrackedEditOperation:addTrackedEditOperation, trackSelection:trackSelection};\n    try {\n      command.getEditOperations(ctx.model, editOperationBuilder);\n    } catch (e) {\n      (0,require$_DOT__DOT__SLASH__DOT__DOT__SLASH__DOT__DOT__SLASH_base_SLASH_common_SLASH_errors_DOT_js.onUnexpectedError)(e);\n      return {operations:[], hadTrackedEditOperation:false};\n    }\n    return {operations:operations, hadTrackedEditOperation:hadTrackedEditOperation};\n  }\n  static _getLoserCursorMap(operations) {\n    operations = operations.slice(0);\n    operations.sort((a, b) => {\n      return -require$_DOT__DOT__SLASH_core_SLASH_range_DOT_js.Range.compareRangesUsingEnds(a.range, b.range);\n    });\n    const loserCursorsMap = {};\n    for (let i = 1; i < operations.length; i++) {\n      const previousOp = operations[i - 1];\n      const currentOp = operations[i];\n      if (require$_DOT__DOT__SLASH_core_SLASH_range_DOT_js.Range.getStartPosition(previousOp.range).isBefore(require$_DOT__DOT__SLASH_core_SLASH_range_DOT_js.Range.getEndPosition(currentOp.range))) {\n        let loserMajor;\n        if (previousOp.identifier.major > currentOp.identifier.major) {\n          loserMajor = previousOp.identifier.major;\n        } else {\n          loserMajor = currentOp.identifier.major;\n        }\n        loserCursorsMap[loserMajor.toString()] = true;\n        for (let j = 0; j < operations.length; j++) {\n          if (operations[j].identifier.major === loserMajor) {\n            operations.splice(j, 1);\n            if (j < i) {\n              i--;\n            }\n            j--;\n          }\n        }\n        if (i > 0) {\n          i--;\n        }\n      }\n    }\n    return loserCursorsMap;\n  }\n}\nclass CompositionLineState {\n  constructor(text, startSelection, endSelection) {\n    this.text = text;\n    this.startSelection = startSelection;\n    this.endSelection = endSelection;\n  }\n}\nclass CompositionState {\n  static _capture(textModel, selections) {\n    const result = [];\n    for (const selection of selections) {\n      if (selection.startLineNumber !== selection.endLineNumber) {\n        return null;\n      }\n      result.push(new CompositionLineState(textModel.getLineContent(selection.startLineNumber), selection.startColumn - 1, selection.endColumn - 1));\n    }\n    return result;\n  }\n  constructor(textModel, selections) {\n    this._original = CompositionState._capture(textModel, selections);\n  }\n  deduceOutcome(textModel, selections) {\n    if (!this._original) {\n      return null;\n    }\n    const current = CompositionState._capture(textModel, selections);\n    if (!current) {\n      return null;\n    }\n    if (this._original.length !== current.length) {\n      return null;\n    }\n    const result = [];\n    for (let i = 0, len = this._original.length; i < len; i++) {\n      result.push(CompositionState._deduceOutcome(this._original[i], current[i]));\n    }\n    return result;\n  }\n  static _deduceOutcome(original, current) {\n    const commonPrefix = Math.min(original.startSelection, current.startSelection, strings.commonPrefixLength(original.text, current.text));\n    const commonSuffix = Math.min(original.text.length - original.endSelection, current.text.length - current.endSelection, strings.commonSuffixLength(original.text, current.text));\n    const deletedText = original.text.substring(commonPrefix, original.text.length - commonSuffix);\n    const insertedText = current.text.substring(commonPrefix, current.text.length - commonSuffix);\n    return new require$_DOT__SLASH_cursorTypeOperations_DOT_js.CompositionOutcome(deletedText, original.startSelection - commonPrefix, original.endSelection - commonPrefix, insertedText, current.startSelection - commonPrefix, current.endSelection - commonPrefix);\n  }\n}\n\n};"],
"names":["shadow$provide","require","module","exports","Object","defineProperties","__esModule","enumerable","value","CursorsController","get","require$_DOT__DOT__SLASH__DOT__DOT__SLASH__DOT__DOT__SLASH_base_SLASH_common_SLASH_errors_DOT_js","strings","require$_DOT__SLASH_cursorCollection_DOT_js","require$_DOT__DOT__SLASH_cursorCommon_DOT_js","require$_DOT__SLASH_cursorContext_DOT_js","require$_DOT__SLASH_cursorDeleteOperations_DOT_js","require$_DOT__SLASH_cursorTypeOperations_DOT_js","require$_DOT__DOT__SLASH_core_SLASH_range_DOT_js","require$_DOT__DOT__SLASH_core_SLASH_selection_DOT_js","require$_DOT__DOT__SLASH_textModelEvents_DOT_js","require$_DOT__DOT__SLASH_viewEvents_DOT_js","require$_DOT__DOT__SLASH__DOT__DOT__SLASH__DOT__DOT__SLASH_base_SLASH_common_SLASH_lifecycle_DOT_js","require$_DOT__DOT__SLASH_viewModelEventDispatcher_DOT_js","Disposable","constructor","model","viewModel","coordinatesConverter","cursorConfig","_model","_knownModelVersionId","getVersionId","_viewModel","_coordinatesConverter","context","CursorContext","_cursors","CursorCollection","_isHandling","_hasFocus","_columnSelectData","_compositionState","_autoClosedActions","_prevEditOperationType","dispose","updateConfiguration","updateContext","onLineMappingChanged","eventsCollector","setStates","getCursorStates","setHasFocus","hasFocus","_validateAutoClosedActions","length","selections","getSelections","i","autoClosedAction","isValid","splice","getPrimaryCursorState","getPrimaryCursor","getLastAddedCursorIndex","getAll","source","reason","states","reachedMaxCursorCount","multiCursorLimit","slice","oldState","CursorModelState","from","normalize","_emitStateChangedIfNecessary","setCursorColumnSelectData","columnSelectData","revealPrimary","minimalReveal","verticalType","revealHorizontal","scrollType","viewPositions","getViewPositions","revealViewRange","revealViewSelections","getViewSelections","Range","fromPositions","emitViewEvent","ViewRevealRangeRequestEvent","saveState","result","len","selection","push","inSelectionMode","isEmpty","selectionStart","lineNumber","selectionStartLineNumber","column","selectionStartColumn","position","positionLineNumber","positionColumn","restoreState","desiredSelections","state","CursorState","fromModelSelections","onModelContentChanged","event","ModelInjectedTextChangedEvent","e","rawContentChangedEvent","versionId","hadFlushEvent","containsEvent","resultingSelection","cursorState","isUndoing","isRedoing","selectionsFromMarkers","readSelectionFromMarkers","getSelection","modelState","getTopMostViewPosition","getBottomMostViewPosition","getCursorColumnSelectData","primaryCursor","viewSelectionStart","viewState","getStartPosition","viewPosition","isReal","fromViewLineNumber","fromViewVisualColumn","visibleColumnFromColumn","toViewLineNumber","toViewVisualColumn","setSelections","getPrevEditOperationType","setPrevEditOperationType","type","_pushAutoClosedAction","autoClosedCharactersRanges","autoClosedEnclosingRanges","autoClosedCharactersDeltaDecorations","autoClosedEnclosingDeltaDecorations","range","options","description","inlineClassName","stickiness","autoClosedCharactersDecorations","deltaDecorations","autoClosedEnclosingDecorations","AutoClosedAction","_executeEditOperation","opResult","shouldPushStackElementBefore","pushStackElement","CommandExecutor","executeCommands","commands","_interpretCommandResult","command","TypeWithAutoClosingCommand","enclosingRange","closeCharacterRange","shouldPushStackElementAfter","newState","equals","viewSelections","ViewCursorStateChangedEvent","some","newCursorState","oldSelections","map","s","emitOutgoingEvent","CursorStateChangedEvent","oldModelVersionId","modelVersionId","_findAutoClosingPairs","edits","indices","edit","text","indexOf","m","match","autoClosingPairsCandidates","autoClosingPairs","autoClosingPairsCloseSingleChar","closeChar","closeCharIndex","openCharIndex","lastIndexOf","open","executeEdits","cursorStateComputer","autoClosingIndices","_isTracked","pushEditOperations","undoEdits","openCharInnerIndex","closeCharInnerIndex","undoEdit","startLineNumber","startColumn","_executeEdit","callback","cursorChangeReason","readOnly","stopTrackingSelections","ensureValidState","err","onUnexpectedError","startTrackingSelections","getAutoClosedCharacters","getAllAutoClosedCharacters","startComposition","CompositionState","endComposition","compositionOutcome","deduceOutcome","TypeOperations","compositionEndWithInterceptors","offset","charLength","nextCharLength","chr","substr","typeWithInterceptors","typeWithoutInterceptors","compositionType","replacePrevCharCnt","replaceNextCharCnt","positionDelta","newSelections","getPosition","Selection","paste","pasteOnNewLine","multicursorText","cut","DeleteOperations","executeCommand","killSecondaryCursors","EditOperationResult","cursor","other","autoClosedActions","autoClosedCharacters","concat","getAutoClosedCharactersRanges","_autoClosedCharactersDecorations","_autoClosedEnclosingDecorations","decorationRange","getDecorationRange","enclosingRanges","endLineNumber","sort","compareRangesUsingStarts","strictContainsRange","selectionsBefore","ctx","trackedRanges","trackedRangesDirection","_innerExecuteCommands","_setTrackedRange","_arrayIsEmpty","commandsData","_getEditOperations","operations","rawOperations","loserCursorsMap","_getLoserCursorMap","hasOwnProperty","console","warn","filteredOperations","identifier","major","toString","hadTrackedEditOperation","selectionsAfter","inverseEditOperations","groupedInverseEditOperations","op","minorBasedSorter","a","b","minor","cursorSelections","computeCursorState","getInverseEditOperations","getTrackedSelection","id","idx","parseInt","_getTrackedRange","endColumn","losingCursors","losingCursorIndex","losingCursor","r","_getEditOperationsFromCommand","majorIdentifier","operationMinor","addEditOperation","forceMoveMarkers","isAutoWhitespaceEdit","insertsAutoWhitespace","editOperationBuilder","addTrackedEditOperation","trackSelection","_selection","trackPreviousOnEmpty","liftSelection","maxLineColumn","getLineMaxColumn","l","getDirection","getEditOperations","compareRangesUsingEnds","previousOp","currentOp","isBefore","getEndPosition","loserMajor","j","CompositionLineState","startSelection","endSelection","_capture","textModel","getLineContent","_original","current","_deduceOutcome","original","commonPrefix","Math","min","commonPrefixLength","commonSuffix","commonSuffixLength","deletedText","substring","insertedText","CompositionOutcome"]
}
