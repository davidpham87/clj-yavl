{
"version":3,
"file":"module$node_modules$monaco_editor$esm$vs$editor$common$services$unicodeTextModelHighlighter.js",
"lineCount":115,
"mappings":"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",
"sources":["node_modules/monaco-editor/esm/vs/editor/common/services/unicodeTextModelHighlighter.js"],
"sourcesContent":["shadow$provide[\"module$node_modules$monaco_editor$esm$vs$editor$common$services$unicodeTextModelHighlighter\"] = function(require,module,exports) {\nObject.defineProperties(exports, {__esModule:{enumerable:true, value:true}, UnicodeTextModelHighlighter:{enumerable:true, get:function() {\n  return UnicodeTextModelHighlighter;\n}}});\nvar require$_DOT__DOT__SLASH_core_SLASH_range_DOT_js = require(\"../core/range.js\");\nvar require$_DOT__DOT__SLASH_model_SLASH_textModelSearch_DOT_js = require(\"../model/textModelSearch.js\");\nvar strings = require(\"../../../base/common/strings.js\");\nvar require$_DOT__DOT__SLASH__DOT__DOT__SLASH__DOT__DOT__SLASH_base_SLASH_common_SLASH_assert_DOT_js = require(\"../../../base/common/assert.js\");\nvar require$_DOT__DOT__SLASH_core_SLASH_wordHelper_DOT_js = require(\"../core/wordHelper.js\");\nclass UnicodeTextModelHighlighter {\n  static computeUnicodeHighlights(model, options, range) {\n    const startLine = range ? range.startLineNumber : 1;\n    const endLine = range ? range.endLineNumber : model.getLineCount();\n    const codePointHighlighter = new CodePointHighlighter(options);\n    const candidates = codePointHighlighter.getCandidateCodePoints();\n    let regex;\n    if (candidates === \"allNonBasicAscii\") {\n      regex = new RegExp(\"[^\\\\t\\\\n\\\\r\\\\x20-\\\\x7E]\", \"g\");\n    } else {\n      regex = new RegExp(`${buildRegExpCharClassExpr(Array.from(candidates))}`, \"g\");\n    }\n    const searcher = new require$_DOT__DOT__SLASH_model_SLASH_textModelSearch_DOT_js.Searcher(null, regex);\n    const ranges = [];\n    let hasMore = false;\n    let m;\n    let ambiguousCharacterCount = 0;\n    let invisibleCharacterCount = 0;\n    let nonBasicAsciiCharacterCount = 0;\n    forLoop: for (let lineNumber = startLine, lineCount = endLine; lineNumber <= lineCount; lineNumber++) {\n      const lineContent = model.getLineContent(lineNumber);\n      const lineLength = lineContent.length;\n      searcher.reset(0);\n      do {\n        m = searcher.next(lineContent);\n        if (m) {\n          let startIndex = m.index;\n          let endIndex = m.index + m[0].length;\n          if (startIndex > 0) {\n            const charCodeBefore = lineContent.charCodeAt(startIndex - 1);\n            if (strings.isHighSurrogate(charCodeBefore)) {\n              startIndex--;\n            }\n          }\n          if (endIndex + 1 < lineLength) {\n            const charCodeBefore = lineContent.charCodeAt(endIndex - 1);\n            if (strings.isHighSurrogate(charCodeBefore)) {\n              endIndex++;\n            }\n          }\n          const str = lineContent.substring(startIndex, endIndex);\n          let word = (0,require$_DOT__DOT__SLASH_core_SLASH_wordHelper_DOT_js.getWordAtText)(startIndex + 1, require$_DOT__DOT__SLASH_core_SLASH_wordHelper_DOT_js.DEFAULT_WORD_REGEXP, lineContent, 0);\n          if (word && word.endColumn <= startIndex + 1) {\n            word = null;\n          }\n          const highlightReason = codePointHighlighter.shouldHighlightNonBasicASCII(str, word ? word.word : null);\n          if (highlightReason !== 0) {\n            if (highlightReason === 3) {\n              ambiguousCharacterCount++;\n            } else if (highlightReason === 2) {\n              invisibleCharacterCount++;\n            } else if (highlightReason === 1) {\n              nonBasicAsciiCharacterCount++;\n            } else {\n              (0,require$_DOT__DOT__SLASH__DOT__DOT__SLASH__DOT__DOT__SLASH_base_SLASH_common_SLASH_assert_DOT_js.assertNever)(highlightReason);\n            }\n            const MAX_RESULT_LENGTH = 1000;\n            if (ranges.length >= MAX_RESULT_LENGTH) {\n              hasMore = true;\n              break forLoop;\n            }\n            ranges.push(new require$_DOT__DOT__SLASH_core_SLASH_range_DOT_js.Range(lineNumber, startIndex + 1, lineNumber, endIndex + 1));\n          }\n        }\n      } while (m);\n    }\n    return {ranges, hasMore, ambiguousCharacterCount, invisibleCharacterCount, nonBasicAsciiCharacterCount};\n  }\n  static computeUnicodeHighlightReason(char, options) {\n    const codePointHighlighter = new CodePointHighlighter(options);\n    const reason = codePointHighlighter.shouldHighlightNonBasicASCII(char, null);\n    switch(reason) {\n      case 0:\n        return null;\n      case 2:\n        return {kind:1};\n      case 3:\n        {\n          const codePoint = char.codePointAt(0);\n          const primaryConfusable = codePointHighlighter.ambiguousCharacters.getPrimaryConfusable(codePoint);\n          const notAmbiguousInLocales = strings.AmbiguousCharacters.getLocales().filter(l => !strings.AmbiguousCharacters.getInstance(new Set([...options.allowedLocales, l])).isAmbiguous(codePoint));\n          return {kind:0, confusableWith:String.fromCodePoint(primaryConfusable), notAmbiguousInLocales};\n        }\n      case 1:\n        return {kind:2};\n    }\n  }\n}\nfunction buildRegExpCharClassExpr(codePoints, flags) {\n  const src = `[${strings.escapeRegExpCharacters(codePoints.map(i => String.fromCodePoint(i)).join(\"\"))}]`;\n  return src;\n}\nclass CodePointHighlighter {\n  constructor(options) {\n    this.options = options;\n    this.allowedCodePoints = new Set(options.allowedCodePoints);\n    this.ambiguousCharacters = strings.AmbiguousCharacters.getInstance(new Set(options.allowedLocales));\n  }\n  getCandidateCodePoints() {\n    if (this.options.nonBasicASCII) {\n      return \"allNonBasicAscii\";\n    }\n    const set = new Set();\n    if (this.options.invisibleCharacters) {\n      for (const cp of strings.InvisibleCharacters.codePoints) {\n        if (!isAllowedInvisibleCharacter(String.fromCodePoint(cp))) {\n          set.add(cp);\n        }\n      }\n    }\n    if (this.options.ambiguousCharacters) {\n      for (const cp of this.ambiguousCharacters.getConfusableCodePoints()) {\n        set.add(cp);\n      }\n    }\n    for (const cp of this.allowedCodePoints) {\n      set.delete(cp);\n    }\n    return set;\n  }\n  shouldHighlightNonBasicASCII(character, wordContext) {\n    const codePoint = character.codePointAt(0);\n    if (this.allowedCodePoints.has(codePoint)) {\n      return 0;\n    }\n    if (this.options.nonBasicASCII) {\n      return 1;\n    }\n    let hasBasicASCIICharacters = false;\n    let hasNonConfusableNonBasicAsciiCharacter = false;\n    if (wordContext) {\n      for (const char of wordContext) {\n        const codePoint = char.codePointAt(0);\n        const isBasicASCII = strings.isBasicASCII(char);\n        hasBasicASCIICharacters = hasBasicASCIICharacters || isBasicASCII;\n        if (!isBasicASCII && !this.ambiguousCharacters.isAmbiguous(codePoint) && !strings.InvisibleCharacters.isInvisibleCharacter(codePoint)) {\n          hasNonConfusableNonBasicAsciiCharacter = true;\n        }\n      }\n    }\n    if (!hasBasicASCIICharacters && hasNonConfusableNonBasicAsciiCharacter) {\n      return 0;\n    }\n    if (this.options.invisibleCharacters) {\n      if (!isAllowedInvisibleCharacter(character) && strings.InvisibleCharacters.isInvisibleCharacter(codePoint)) {\n        return 2;\n      }\n    }\n    if (this.options.ambiguousCharacters) {\n      if (this.ambiguousCharacters.isAmbiguous(codePoint)) {\n        return 3;\n      }\n    }\n    return 0;\n  }\n}\nfunction isAllowedInvisibleCharacter(character) {\n  return character === \" \" || character === \"\\n\" || character === \"\\t\";\n}\n\n};"],
"names":["shadow$provide","require","module","exports","buildRegExpCharClassExpr","codePoints","flags","src","strings","escapeRegExpCharacters","map","i","String","fromCodePoint","join","isAllowedInvisibleCharacter","character","Object","defineProperties","__esModule","enumerable","value","UnicodeTextModelHighlighter","get","require$_DOT__DOT__SLASH_core_SLASH_range_DOT_js","require$_DOT__DOT__SLASH_model_SLASH_textModelSearch_DOT_js","require$_DOT__DOT__SLASH__DOT__DOT__SLASH__DOT__DOT__SLASH_base_SLASH_common_SLASH_assert_DOT_js","require$_DOT__DOT__SLASH_core_SLASH_wordHelper_DOT_js","computeUnicodeHighlights","model","options","range","startLine","startLineNumber","endLine","endLineNumber","getLineCount","codePointHighlighter","CodePointHighlighter","candidates","getCandidateCodePoints","regex","RegExp","Array","from","searcher","Searcher","ranges","hasMore","ambiguousCharacterCount","invisibleCharacterCount","nonBasicAsciiCharacterCount","lineNumber","lineCount","lineContent","getLineContent","lineLength","length","reset","m","next","startIndex","index","endIndex","charCodeBefore","charCodeAt","isHighSurrogate","str","substring","word","getWordAtText","DEFAULT_WORD_REGEXP","endColumn","highlightReason","shouldHighlightNonBasicASCII","assertNever","MAX_RESULT_LENGTH","push","Range","computeUnicodeHighlightReason","char","reason","kind","codePoint","codePointAt","primaryConfusable","ambiguousCharacters","getPrimaryConfusable","notAmbiguousInLocales","AmbiguousCharacters","getLocales","filter","l","getInstance","Set","allowedLocales","isAmbiguous","confusableWith","constructor","allowedCodePoints","nonBasicASCII","set","invisibleCharacters","cp","InvisibleCharacters","add","getConfusableCodePoints","delete","wordContext","has","hasBasicASCIICharacters","hasNonConfusableNonBasicAsciiCharacter","isBasicASCII","isInvisibleCharacter"]
}
