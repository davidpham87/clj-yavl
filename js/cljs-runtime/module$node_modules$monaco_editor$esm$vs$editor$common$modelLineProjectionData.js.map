{
"version":3,
"file":"module$node_modules$monaco_editor$esm$vs$editor$common$modelLineProjectionData.js",
"lineCount":186,
"mappings":"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",
"sources":["node_modules/monaco-editor/esm/vs/editor/common/modelLineProjectionData.js"],
"sourcesContent":["shadow$provide[\"module$node_modules$monaco_editor$esm$vs$editor$common$modelLineProjectionData\"] = function(require,module,exports) {\nObject.defineProperties(exports, {__esModule:{enumerable:true, value:true}, InjectedText:{enumerable:true, get:function() {\n  return InjectedText;\n}}, ModelLineProjectionData:{enumerable:true, get:function() {\n  return ModelLineProjectionData;\n}}, OutputPosition:{enumerable:true, get:function() {\n  return OutputPosition;\n}}});\nvar require$_DOT__DOT__SLASH__DOT__DOT__SLASH_base_SLASH_common_SLASH_assert_DOT_js = require(\"../../base/common/assert.js\");\nvar require$_DOT__SLASH_core_SLASH_position_DOT_js = require(\"./core/position.js\");\nvar require$_DOT__SLASH_model_DOT_js = require(\"./model.js\");\nclass ModelLineProjectionData {\n  constructor(injectionOffsets, injectionOptions, breakOffsets, breakOffsetsVisibleColumn, wrappedTextIndentLength) {\n    this.injectionOffsets = injectionOffsets;\n    this.injectionOptions = injectionOptions;\n    this.breakOffsets = breakOffsets;\n    this.breakOffsetsVisibleColumn = breakOffsetsVisibleColumn;\n    this.wrappedTextIndentLength = wrappedTextIndentLength;\n  }\n  getOutputLineCount() {\n    return this.breakOffsets.length;\n  }\n  getMinOutputOffset(outputLineIndex) {\n    if (outputLineIndex > 0) {\n      return this.wrappedTextIndentLength;\n    }\n    return 0;\n  }\n  getLineLength(outputLineIndex) {\n    const startOffset = outputLineIndex > 0 ? this.breakOffsets[outputLineIndex - 1] : 0;\n    const endOffset = this.breakOffsets[outputLineIndex];\n    let lineLength = endOffset - startOffset;\n    if (outputLineIndex > 0) {\n      lineLength += this.wrappedTextIndentLength;\n    }\n    return lineLength;\n  }\n  getMaxOutputOffset(outputLineIndex) {\n    return this.getLineLength(outputLineIndex);\n  }\n  translateToInputOffset(outputLineIndex, outputOffset) {\n    if (outputLineIndex > 0) {\n      outputOffset = Math.max(0, outputOffset - this.wrappedTextIndentLength);\n    }\n    const offsetInInputWithInjection = outputLineIndex === 0 ? outputOffset : this.breakOffsets[outputLineIndex - 1] + outputOffset;\n    let offsetInInput = offsetInInputWithInjection;\n    if (this.injectionOffsets !== null) {\n      for (let i = 0; i < this.injectionOffsets.length; i++) {\n        if (offsetInInput > this.injectionOffsets[i]) {\n          if (offsetInInput < this.injectionOffsets[i] + this.injectionOptions[i].content.length) {\n            offsetInInput = this.injectionOffsets[i];\n          } else {\n            offsetInInput -= this.injectionOptions[i].content.length;\n          }\n        } else {\n          break;\n        }\n      }\n    }\n    return offsetInInput;\n  }\n  translateToOutputPosition(inputOffset, affinity = 2) {\n    let inputOffsetInInputWithInjection = inputOffset;\n    if (this.injectionOffsets !== null) {\n      for (let i = 0; i < this.injectionOffsets.length; i++) {\n        if (inputOffset < this.injectionOffsets[i]) {\n          break;\n        }\n        if (affinity !== 1 && inputOffset === this.injectionOffsets[i]) {\n          break;\n        }\n        inputOffsetInInputWithInjection += this.injectionOptions[i].content.length;\n      }\n    }\n    return this.offsetInInputWithInjectionsToOutputPosition(inputOffsetInInputWithInjection, affinity);\n  }\n  offsetInInputWithInjectionsToOutputPosition(offsetInInputWithInjections, affinity = 2) {\n    let low = 0;\n    let high = this.breakOffsets.length - 1;\n    let mid = 0;\n    let midStart = 0;\n    while (low <= high) {\n      mid = low + (high - low) / 2 | 0;\n      const midStop = this.breakOffsets[mid];\n      midStart = mid > 0 ? this.breakOffsets[mid - 1] : 0;\n      if (affinity === 0) {\n        if (offsetInInputWithInjections <= midStart) {\n          high = mid - 1;\n        } else if (offsetInInputWithInjections > midStop) {\n          low = mid + 1;\n        } else {\n          break;\n        }\n      } else {\n        if (offsetInInputWithInjections < midStart) {\n          high = mid - 1;\n        } else if (offsetInInputWithInjections >= midStop) {\n          low = mid + 1;\n        } else {\n          break;\n        }\n      }\n    }\n    let outputOffset = offsetInInputWithInjections - midStart;\n    if (mid > 0) {\n      outputOffset += this.wrappedTextIndentLength;\n    }\n    return new OutputPosition(mid, outputOffset);\n  }\n  normalizeOutputPosition(outputLineIndex, outputOffset, affinity) {\n    if (this.injectionOffsets !== null) {\n      const offsetInInputWithInjections = this.outputPositionToOffsetInInputWithInjections(outputLineIndex, outputOffset);\n      const normalizedOffsetInUnwrappedLine = this.normalizeOffsetInInputWithInjectionsAroundInjections(offsetInInputWithInjections, affinity);\n      if (normalizedOffsetInUnwrappedLine !== offsetInInputWithInjections) {\n        return this.offsetInInputWithInjectionsToOutputPosition(normalizedOffsetInUnwrappedLine, affinity);\n      }\n    }\n    if (affinity === 0) {\n      if (outputLineIndex > 0 && outputOffset === this.getMinOutputOffset(outputLineIndex)) {\n        return new OutputPosition(outputLineIndex - 1, this.getMaxOutputOffset(outputLineIndex - 1));\n      }\n    } else if (affinity === 1) {\n      const maxOutputLineIndex = this.getOutputLineCount() - 1;\n      if (outputLineIndex < maxOutputLineIndex && outputOffset === this.getMaxOutputOffset(outputLineIndex)) {\n        return new OutputPosition(outputLineIndex + 1, this.getMinOutputOffset(outputLineIndex + 1));\n      }\n    }\n    return new OutputPosition(outputLineIndex, outputOffset);\n  }\n  outputPositionToOffsetInInputWithInjections(outputLineIndex, outputOffset) {\n    if (outputLineIndex > 0) {\n      outputOffset = Math.max(0, outputOffset - this.wrappedTextIndentLength);\n    }\n    const result = (outputLineIndex > 0 ? this.breakOffsets[outputLineIndex - 1] : 0) + outputOffset;\n    return result;\n  }\n  normalizeOffsetInInputWithInjectionsAroundInjections(offsetInInputWithInjections, affinity) {\n    const injectedText = this.getInjectedTextAtOffset(offsetInInputWithInjections);\n    if (!injectedText) {\n      return offsetInInputWithInjections;\n    }\n    if (affinity === 2) {\n      if (offsetInInputWithInjections === injectedText.offsetInInputWithInjections + injectedText.length && hasRightCursorStop(this.injectionOptions[injectedText.injectedTextIndex].cursorStops)) {\n        return injectedText.offsetInInputWithInjections + injectedText.length;\n      } else {\n        let result = injectedText.offsetInInputWithInjections;\n        if (hasLeftCursorStop(this.injectionOptions[injectedText.injectedTextIndex].cursorStops)) {\n          return result;\n        }\n        let index = injectedText.injectedTextIndex - 1;\n        while (index >= 0 && this.injectionOffsets[index] === this.injectionOffsets[injectedText.injectedTextIndex]) {\n          if (hasRightCursorStop(this.injectionOptions[index].cursorStops)) {\n            break;\n          }\n          result -= this.injectionOptions[index].content.length;\n          if (hasLeftCursorStop(this.injectionOptions[index].cursorStops)) {\n            break;\n          }\n          index--;\n        }\n        return result;\n      }\n    } else if (affinity === 1 || affinity === 4) {\n      let result = injectedText.offsetInInputWithInjections + injectedText.length;\n      let index = injectedText.injectedTextIndex;\n      while (index + 1 < this.injectionOffsets.length && this.injectionOffsets[index + 1] === this.injectionOffsets[index]) {\n        result += this.injectionOptions[index + 1].content.length;\n        index++;\n      }\n      return result;\n    } else if (affinity === 0 || affinity === 3) {\n      let result = injectedText.offsetInInputWithInjections;\n      let index = injectedText.injectedTextIndex;\n      while (index - 1 >= 0 && this.injectionOffsets[index - 1] === this.injectionOffsets[index]) {\n        result -= this.injectionOptions[index - 1].content.length;\n        index--;\n      }\n      return result;\n    }\n    (0,require$_DOT__DOT__SLASH__DOT__DOT__SLASH_base_SLASH_common_SLASH_assert_DOT_js.assertNever)(affinity);\n  }\n  getInjectedText(outputLineIndex, outputOffset) {\n    const offset = this.outputPositionToOffsetInInputWithInjections(outputLineIndex, outputOffset);\n    const injectedText = this.getInjectedTextAtOffset(offset);\n    if (!injectedText) {\n      return null;\n    }\n    return {options:this.injectionOptions[injectedText.injectedTextIndex]};\n  }\n  getInjectedTextAtOffset(offsetInInputWithInjections) {\n    const injectionOffsets = this.injectionOffsets;\n    const injectionOptions = this.injectionOptions;\n    if (injectionOffsets !== null) {\n      let totalInjectedTextLengthBefore = 0;\n      for (let i = 0; i < injectionOffsets.length; i++) {\n        const length = injectionOptions[i].content.length;\n        const injectedTextStartOffsetInInputWithInjections = injectionOffsets[i] + totalInjectedTextLengthBefore;\n        const injectedTextEndOffsetInInputWithInjections = injectionOffsets[i] + totalInjectedTextLengthBefore + length;\n        if (injectedTextStartOffsetInInputWithInjections > offsetInInputWithInjections) {\n          break;\n        }\n        if (offsetInInputWithInjections <= injectedTextEndOffsetInInputWithInjections) {\n          return {injectedTextIndex:i, offsetInInputWithInjections:injectedTextStartOffsetInInputWithInjections, length};\n        }\n        totalInjectedTextLengthBefore += length;\n      }\n    }\n    return undefined;\n  }\n}\nfunction hasRightCursorStop(cursorStop) {\n  if (cursorStop === null || cursorStop === undefined) {\n    return true;\n  }\n  return cursorStop === require$_DOT__SLASH_model_DOT_js.InjectedTextCursorStops.Right || cursorStop === require$_DOT__SLASH_model_DOT_js.InjectedTextCursorStops.Both;\n}\nfunction hasLeftCursorStop(cursorStop) {\n  if (cursorStop === null || cursorStop === undefined) {\n    return true;\n  }\n  return cursorStop === require$_DOT__SLASH_model_DOT_js.InjectedTextCursorStops.Left || cursorStop === require$_DOT__SLASH_model_DOT_js.InjectedTextCursorStops.Both;\n}\nclass InjectedText {\n  constructor(options) {\n    this.options = options;\n  }\n}\nclass OutputPosition {\n  constructor(outputLineIndex, outputOffset) {\n    this.outputLineIndex = outputLineIndex;\n    this.outputOffset = outputOffset;\n  }\n  toString() {\n    return `${this.outputLineIndex}:${this.outputOffset}`;\n  }\n  toPosition(baseLineNumber) {\n    return new require$_DOT__SLASH_core_SLASH_position_DOT_js.Position(baseLineNumber + this.outputLineIndex, this.outputOffset + 1);\n  }\n}\n\n};"],
"names":["shadow$provide","require","module","exports","hasRightCursorStop","cursorStop","undefined","require$_DOT__SLASH_model_DOT_js","InjectedTextCursorStops","Right","Both","hasLeftCursorStop","Left","Object","defineProperties","__esModule","enumerable","value","InjectedText","get","ModelLineProjectionData","OutputPosition","require$_DOT__DOT__SLASH__DOT__DOT__SLASH_base_SLASH_common_SLASH_assert_DOT_js","require$_DOT__SLASH_core_SLASH_position_DOT_js","constructor","injectionOffsets","injectionOptions","breakOffsets","breakOffsetsVisibleColumn","wrappedTextIndentLength","getOutputLineCount","length","getMinOutputOffset","outputLineIndex","getLineLength","lineLength","endOffset","startOffset","getMaxOutputOffset","translateToInputOffset","outputOffset","Math","max","offsetInInput","offsetInInputWithInjection","i","content","translateToOutputPosition","inputOffset","affinity","inputOffsetInInputWithInjection","offsetInInputWithInjectionsToOutputPosition","offsetInInputWithInjections","low","high","mid","midStart","midStop","normalizeOutputPosition","outputPositionToOffsetInInputWithInjections","normalizedOffsetInUnwrappedLine","normalizeOffsetInInputWithInjectionsAroundInjections","maxOutputLineIndex","injectedText","getInjectedTextAtOffset","injectedTextIndex","cursorStops","result","index","assertNever","getInjectedText","offset","options","totalInjectedTextLengthBefore","injectedTextStartOffsetInInputWithInjections","toString","toPosition","baseLineNumber","Position"]
}
