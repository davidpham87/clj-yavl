{
"version":3,
"file":"module$node_modules$monaco_editor$esm$vs$base$common$observableInternal$derived.js",
"lineCount":203,
"mappings":"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",
"sources":["node_modules/monaco-editor/esm/vs/base/common/observableInternal/derived.js"],
"sourcesContent":["shadow$provide[\"module$node_modules$monaco_editor$esm$vs$base$common$observableInternal$derived\"] = function(require,module,exports) {\nObject.defineProperties(exports, {__esModule:{enumerable:true, value:true}, Derived:{enumerable:true, get:function() {\n  return Derived;\n}}, derived:{enumerable:true, get:function() {\n  return derived;\n}}, derivedDisposable:{enumerable:true, get:function() {\n  return derivedDisposable;\n}}, derivedHandleChanges:{enumerable:true, get:function() {\n  return derivedHandleChanges;\n}}, derivedOpts:{enumerable:true, get:function() {\n  return derivedOpts;\n}}, derivedWithStore:{enumerable:true, get:function() {\n  return derivedWithStore;\n}}});\nvar require$_DOT__DOT__SLASH_errors_DOT_js = require(\"../errors.js\");\nvar require$_DOT__DOT__SLASH_lifecycle_DOT_js = require(\"../lifecycle.js\");\nvar require$_DOT__SLASH_base_DOT_js = require(\"./base.js\");\nvar require$_DOT__SLASH_logging_DOT_js = require(\"./logging.js\");\nconst defaultEqualityComparer = (a, b) => a === b;\nfunction derived(computeFnOrOwner, computeFn) {\n  if (computeFn !== undefined) {\n    return new Derived(computeFnOrOwner, undefined, computeFn, undefined, undefined, undefined, defaultEqualityComparer);\n  }\n  return new Derived(undefined, undefined, computeFnOrOwner, undefined, undefined, undefined, defaultEqualityComparer);\n}\nfunction derivedOpts(options, computeFn) {\n  var _a;\n  return new Derived(options.owner, options.debugName, computeFn, undefined, undefined, undefined, (_a = options.equalityComparer) !== null && _a !== void 0 ? _a : defaultEqualityComparer);\n}\nfunction derivedHandleChanges(options, computeFn) {\n  var _a;\n  return new Derived(options.owner, options.debugName, computeFn, options.createEmptyChangeSummary, options.handleChange, undefined, (_a = options.equalityComparer) !== null && _a !== void 0 ? _a : defaultEqualityComparer);\n}\nfunction derivedWithStore(computeFnOrOwner, computeFnOrUndefined) {\n  let computeFn;\n  let owner;\n  if (computeFnOrUndefined === undefined) {\n    computeFn = computeFnOrOwner;\n    owner = undefined;\n  } else {\n    owner = computeFnOrOwner;\n    computeFn = computeFnOrUndefined;\n  }\n  const store = new require$_DOT__DOT__SLASH_lifecycle_DOT_js.DisposableStore();\n  return new Derived(owner, () => {\n    var _a;\n    return (_a = (0,require$_DOT__SLASH_base_DOT_js.getFunctionName)(computeFn)) !== null && _a !== void 0 ? _a : \"(anonymous)\";\n  }, r => {\n    store.clear();\n    return computeFn(r, store);\n  }, undefined, undefined, () => store.dispose(), defaultEqualityComparer);\n}\nfunction derivedDisposable(computeFnOrOwner, computeFnOrUndefined) {\n  let computeFn;\n  let owner;\n  if (computeFnOrUndefined === undefined) {\n    computeFn = computeFnOrOwner;\n    owner = undefined;\n  } else {\n    owner = computeFnOrOwner;\n    computeFn = computeFnOrUndefined;\n  }\n  const store = new require$_DOT__DOT__SLASH_lifecycle_DOT_js.DisposableStore();\n  return new Derived(owner, () => {\n    var _a;\n    return (_a = (0,require$_DOT__SLASH_base_DOT_js.getFunctionName)(computeFn)) !== null && _a !== void 0 ? _a : \"(anonymous)\";\n  }, r => {\n    store.clear();\n    const result = computeFn(r);\n    if (result) {\n      store.add(result);\n    }\n    return result;\n  }, undefined, undefined, () => store.dispose(), defaultEqualityComparer);\n}\n(0,require$_DOT__SLASH_base_DOT_js._setDerivedOpts)(derivedOpts);\nclass Derived extends require$_DOT__SLASH_base_DOT_js.BaseObservable {\n  get debugName() {\n    var _a;\n    return (_a = (0,require$_DOT__SLASH_base_DOT_js.getDebugName)(this, this._debugName, this._computeFn, this._owner, this)) !== null && _a !== void 0 ? _a : \"(anonymous)\";\n  }\n  constructor(_owner, _debugName, _computeFn, createChangeSummary, _handleChange, _handleLastObserverRemoved = undefined, _equalityComparator) {\n    var _a, _b;\n    super();\n    this._owner = _owner;\n    this._debugName = _debugName;\n    this._computeFn = _computeFn;\n    this.createChangeSummary = createChangeSummary;\n    this._handleChange = _handleChange;\n    this._handleLastObserverRemoved = _handleLastObserverRemoved;\n    this._equalityComparator = _equalityComparator;\n    this.state = 0;\n    this.value = undefined;\n    this.updateCount = 0;\n    this.dependencies = new Set();\n    this.dependenciesToBeRemoved = new Set();\n    this.changeSummary = undefined;\n    this.changeSummary = (_a = this.createChangeSummary) === null || _a === void 0 ? void 0 : _a.call(this);\n    (_b = (0,require$_DOT__SLASH_logging_DOT_js.getLogger)()) === null || _b === void 0 ? void 0 : _b.handleDerivedCreated(this);\n  }\n  onLastObserverRemoved() {\n    var _a;\n    this.state = 0;\n    this.value = undefined;\n    for (const d of this.dependencies) {\n      d.removeObserver(this);\n    }\n    this.dependencies.clear();\n    (_a = this._handleLastObserverRemoved) === null || _a === void 0 ? void 0 : _a.call(this);\n  }\n  get() {\n    var _a;\n    if (this.observers.size === 0) {\n      const result = this._computeFn(this, (_a = this.createChangeSummary) === null || _a === void 0 ? void 0 : _a.call(this));\n      this.onLastObserverRemoved();\n      return result;\n    } else {\n      do {\n        if (this.state === 1) {\n          for (const d of this.dependencies) {\n            d.reportChanges();\n            if (this.state === 2) {\n              break;\n            }\n          }\n        }\n        if (this.state === 1) {\n          this.state = 3;\n        }\n        this._recomputeIfNeeded();\n      } while (this.state !== 3);\n      return this.value;\n    }\n  }\n  _recomputeIfNeeded() {\n    var _a, _b;\n    if (this.state === 3) {\n      return;\n    }\n    const emptySet = this.dependenciesToBeRemoved;\n    this.dependenciesToBeRemoved = this.dependencies;\n    this.dependencies = emptySet;\n    const hadValue = this.state !== 0;\n    const oldValue = this.value;\n    this.state = 3;\n    const changeSummary = this.changeSummary;\n    this.changeSummary = (_a = this.createChangeSummary) === null || _a === void 0 ? void 0 : _a.call(this);\n    try {\n      this.value = this._computeFn(this, changeSummary);\n    } finally {\n      for (const o of this.dependenciesToBeRemoved) {\n        o.removeObserver(this);\n      }\n      this.dependenciesToBeRemoved.clear();\n    }\n    const didChange = hadValue && !this._equalityComparator(oldValue, this.value);\n    (_b = (0,require$_DOT__SLASH_logging_DOT_js.getLogger)()) === null || _b === void 0 ? void 0 : _b.handleDerivedRecomputed(this, {oldValue, newValue:this.value, change:undefined, didChange, hadValue,});\n    if (didChange) {\n      for (const r of this.observers) {\n        r.handleChange(this, undefined);\n      }\n    }\n  }\n  toString() {\n    return `LazyDerived<${this.debugName}>`;\n  }\n  beginUpdate(_observable) {\n    this.updateCount++;\n    const propagateBeginUpdate = this.updateCount === 1;\n    if (this.state === 3) {\n      this.state = 1;\n      if (!propagateBeginUpdate) {\n        for (const r of this.observers) {\n          r.handlePossibleChange(this);\n        }\n      }\n    }\n    if (propagateBeginUpdate) {\n      for (const r of this.observers) {\n        r.beginUpdate(this);\n      }\n    }\n  }\n  endUpdate(_observable) {\n    this.updateCount--;\n    if (this.updateCount === 0) {\n      const observers = [...this.observers];\n      for (const r of observers) {\n        r.endUpdate(this);\n      }\n    }\n    if (this.updateCount < 0) {\n      throw new require$_DOT__DOT__SLASH_errors_DOT_js.BugIndicatingError();\n    }\n  }\n  handlePossibleChange(observable) {\n    if (this.state === 3 && this.dependencies.has(observable) && !this.dependenciesToBeRemoved.has(observable)) {\n      this.state = 1;\n      for (const r of this.observers) {\n        r.handlePossibleChange(this);\n      }\n    }\n  }\n  handleChange(observable, change) {\n    if (this.dependencies.has(observable) && !this.dependenciesToBeRemoved.has(observable)) {\n      const shouldReact = this._handleChange ? this._handleChange({changedObservable:observable, change, didChange:o => o === observable,}, this.changeSummary) : true;\n      const wasUpToDate = this.state === 3;\n      if (shouldReact && (this.state === 1 || wasUpToDate)) {\n        this.state = 2;\n        if (wasUpToDate) {\n          for (const r of this.observers) {\n            r.handlePossibleChange(this);\n          }\n        }\n      }\n    }\n  }\n  readObservable(observable) {\n    observable.addObserver(this);\n    const value = observable.get();\n    this.dependencies.add(observable);\n    this.dependenciesToBeRemoved.delete(observable);\n    return value;\n  }\n  addObserver(observer) {\n    const shouldCallBeginUpdate = !this.observers.has(observer) && this.updateCount > 0;\n    super.addObserver(observer);\n    if (shouldCallBeginUpdate) {\n      observer.beginUpdate(this);\n    }\n  }\n  removeObserver(observer) {\n    const shouldCallEndUpdate = this.observers.has(observer) && this.updateCount > 0;\n    super.removeObserver(observer);\n    if (shouldCallEndUpdate) {\n      observer.endUpdate(this);\n    }\n  }\n}\n\n};"],
"names":["shadow$provide","require","module","exports","derived","computeFnOrOwner","computeFn","undefined","Derived","defaultEqualityComparer","derivedOpts","options","_a","owner","debugName","equalityComparer","derivedHandleChanges","createEmptyChangeSummary","handleChange","derivedWithStore","computeFnOrUndefined","store","require$_DOT__DOT__SLASH_lifecycle_DOT_js","DisposableStore","require$_DOT__SLASH_base_DOT_js","getFunctionName","r","clear","dispose","derivedDisposable","result","add","Object","defineProperties","__esModule","enumerable","value","get","require$_DOT__DOT__SLASH_errors_DOT_js","require$_DOT__SLASH_logging_DOT_js","a","b","_setDerivedOpts","BaseObservable","getDebugName","_debugName","_computeFn","_owner","constructor","createChangeSummary","_handleChange","_handleLastObserverRemoved","_equalityComparator","_b","state","updateCount","dependencies","Set","dependenciesToBeRemoved","changeSummary","call","getLogger","handleDerivedCreated","onLastObserverRemoved","d","removeObserver","observers","size","reportChanges","_recomputeIfNeeded","emptySet","hadValue","oldValue","o","didChange","handleDerivedRecomputed","newValue","change","toString","beginUpdate","_observable","propagateBeginUpdate","handlePossibleChange","endUpdate","BugIndicatingError","observable","has","shouldReact","changedObservable","wasUpToDate","readObservable","addObserver","delete","observer","shouldCallBeginUpdate","shouldCallEndUpdate"]
}
