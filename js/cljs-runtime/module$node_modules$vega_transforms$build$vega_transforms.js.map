{
"version":3,
"file":"module$node_modules$vega_transforms$build$vega_transforms.js",
"lineCount":1707,
"mappings":"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",
"sources":["node_modules/vega-transforms/build/vega-transforms.js"],
"sourcesContent":["shadow$provide[\"module$node_modules$vega_transforms$build$vega_transforms\"] = function(require,module,exports) {\n(function (global, factory) {\n  typeof exports === 'object' && typeof module !== 'undefined' ? factory(exports, require('vega-util'), require('vega-dataflow'), require('vega-statistics'), require('vega-time')) :\n  typeof define === 'function' && define.amd ? define(['exports', 'vega-util', 'vega-dataflow', 'vega-statistics', 'vega-time'], factory) :\n  (global = typeof globalThis !== 'undefined' ? globalThis : global || self, factory(global.vega = {}, global.vega, global.vega, global.vega, global.vega));\n})(this, (function (exports, vegaUtil, vegaDataflow, vegaStatistics, vegaTime) { 'use strict';\n\n  function multikey(f) {\n    return x => {\n      const n = f.length;\n      let i = 1,\n        k = String(f[0](x));\n      for (; i < n; ++i) {\n        k += '|' + f[i](x);\n      }\n      return k;\n    };\n  }\n  function groupkey(fields) {\n    return !fields || !fields.length ? function () {\n      return '';\n    } : fields.length === 1 ? fields[0] : multikey(fields);\n  }\n\n  function measureName(op, field, as) {\n    return as || op + (!field ? '' : '_' + field);\n  }\n  const noop = () => {};\n  const base_op = {\n    init: noop,\n    add: noop,\n    rem: noop,\n    idx: 0\n  };\n  const AggregateOps = {\n    values: {\n      init: m => m.cell.store = true,\n      value: m => m.cell.data.values(),\n      idx: -1\n    },\n    count: {\n      value: m => m.cell.num\n    },\n    __count__: {\n      value: m => m.missing + m.valid\n    },\n    missing: {\n      value: m => m.missing\n    },\n    valid: {\n      value: m => m.valid\n    },\n    sum: {\n      init: m => m.sum = 0,\n      value: m => m.valid ? m.sum : undefined,\n      add: (m, v) => m.sum += +v,\n      rem: (m, v) => m.sum -= v\n    },\n    product: {\n      init: m => m.product = 1,\n      value: m => m.valid ? m.product : undefined,\n      add: (m, v) => m.product *= v,\n      rem: (m, v) => m.product /= v\n    },\n    mean: {\n      init: m => m.mean = 0,\n      value: m => m.valid ? m.mean : undefined,\n      add: (m, v) => (m.mean_d = v - m.mean, m.mean += m.mean_d / m.valid),\n      rem: (m, v) => (m.mean_d = v - m.mean, m.mean -= m.valid ? m.mean_d / m.valid : m.mean)\n    },\n    average: {\n      value: m => m.valid ? m.mean : undefined,\n      req: ['mean'],\n      idx: 1\n    },\n    variance: {\n      init: m => m.dev = 0,\n      value: m => m.valid > 1 ? m.dev / (m.valid - 1) : undefined,\n      add: (m, v) => m.dev += m.mean_d * (v - m.mean),\n      rem: (m, v) => m.dev -= m.mean_d * (v - m.mean),\n      req: ['mean'],\n      idx: 1\n    },\n    variancep: {\n      value: m => m.valid > 1 ? m.dev / m.valid : undefined,\n      req: ['variance'],\n      idx: 2\n    },\n    stdev: {\n      value: m => m.valid > 1 ? Math.sqrt(m.dev / (m.valid - 1)) : undefined,\n      req: ['variance'],\n      idx: 2\n    },\n    stdevp: {\n      value: m => m.valid > 1 ? Math.sqrt(m.dev / m.valid) : undefined,\n      req: ['variance'],\n      idx: 2\n    },\n    stderr: {\n      value: m => m.valid > 1 ? Math.sqrt(m.dev / (m.valid * (m.valid - 1))) : undefined,\n      req: ['variance'],\n      idx: 2\n    },\n    distinct: {\n      value: m => m.cell.data.distinct(m.get),\n      req: ['values'],\n      idx: 3\n    },\n    ci0: {\n      value: m => m.cell.data.ci0(m.get),\n      req: ['values'],\n      idx: 3\n    },\n    ci1: {\n      value: m => m.cell.data.ci1(m.get),\n      req: ['values'],\n      idx: 3\n    },\n    median: {\n      value: m => m.cell.data.q2(m.get),\n      req: ['values'],\n      idx: 3\n    },\n    q1: {\n      value: m => m.cell.data.q1(m.get),\n      req: ['values'],\n      idx: 3\n    },\n    q3: {\n      value: m => m.cell.data.q3(m.get),\n      req: ['values'],\n      idx: 3\n    },\n    min: {\n      init: m => m.min = undefined,\n      value: m => m.min = Number.isNaN(m.min) ? m.cell.data.min(m.get) : m.min,\n      add: (m, v) => {\n        if (v < m.min || m.min === undefined) m.min = v;\n      },\n      rem: (m, v) => {\n        if (v <= m.min) m.min = NaN;\n      },\n      req: ['values'],\n      idx: 4\n    },\n    max: {\n      init: m => m.max = undefined,\n      value: m => m.max = Number.isNaN(m.max) ? m.cell.data.max(m.get) : m.max,\n      add: (m, v) => {\n        if (v > m.max || m.max === undefined) m.max = v;\n      },\n      rem: (m, v) => {\n        if (v >= m.max) m.max = NaN;\n      },\n      req: ['values'],\n      idx: 4\n    },\n    argmin: {\n      init: m => m.argmin = undefined,\n      value: m => m.argmin || m.cell.data.argmin(m.get),\n      add: (m, v, t) => {\n        if (v < m.min) m.argmin = t;\n      },\n      rem: (m, v) => {\n        if (v <= m.min) m.argmin = undefined;\n      },\n      req: ['min', 'values'],\n      idx: 3\n    },\n    argmax: {\n      init: m => m.argmax = undefined,\n      value: m => m.argmax || m.cell.data.argmax(m.get),\n      add: (m, v, t) => {\n        if (v > m.max) m.argmax = t;\n      },\n      rem: (m, v) => {\n        if (v >= m.max) m.argmax = undefined;\n      },\n      req: ['max', 'values'],\n      idx: 3\n    },\n    exponential: {\n      init: (m, r) => {\n        m.exp = 0;\n        m.exp_r = r;\n      },\n      value: m => m.valid ? m.exp * (1 - m.exp_r) / (1 - m.exp_r ** m.valid) : undefined,\n      add: (m, v) => m.exp = m.exp_r * m.exp + v,\n      rem: (m, v) => m.exp = (m.exp - v / m.exp_r ** (m.valid - 1)) / m.exp_r\n    },\n    exponentialb: {\n      value: m => m.valid ? m.exp * (1 - m.exp_r) : undefined,\n      req: ['exponential'],\n      idx: 1\n    }\n  };\n  const ValidAggregateOps = Object.keys(AggregateOps).filter(d => d !== '__count__');\n  function measure(key, value) {\n    return (out, aggregate_param) => vegaUtil.extend({\n      name: key,\n      aggregate_param: aggregate_param,\n      out: out || key\n    }, base_op, value);\n  }\n  [...ValidAggregateOps, '__count__'].forEach(key => {\n    AggregateOps[key] = measure(key, AggregateOps[key]);\n  });\n  function createMeasure(op, param, name) {\n    return AggregateOps[op](name, param);\n  }\n  function compareIndex(a, b) {\n    return a.idx - b.idx;\n  }\n  function resolve(agg) {\n    const map = {};\n    agg.forEach(a => map[a.name] = a);\n    const getreqs = a => {\n      if (!a.req) return;\n      a.req.forEach(key => {\n        if (!map[key]) getreqs(map[key] = AggregateOps[key]());\n      });\n    };\n    agg.forEach(getreqs);\n    return Object.values(map).sort(compareIndex);\n  }\n  function init() {\n    this.valid = 0;\n    this.missing = 0;\n    this._ops.forEach(op => op.aggregate_param == null ? op.init(this) : op.init(this, op.aggregate_param));\n  }\n  function add(v, t) {\n    if (v == null || v === '') {\n      ++this.missing;\n      return;\n    }\n    if (v !== v) return;\n    ++this.valid;\n    this._ops.forEach(op => op.add(this, v, t));\n  }\n  function rem(v, t) {\n    if (v == null || v === '') {\n      --this.missing;\n      return;\n    }\n    if (v !== v) return;\n    --this.valid;\n    this._ops.forEach(op => op.rem(this, v, t));\n  }\n  function set(t) {\n    this._out.forEach(op => t[op.out] = op.value(this));\n    return t;\n  }\n  function compileMeasures(agg, field) {\n    const get = field || vegaUtil.identity,\n      ops = resolve(agg),\n      out = agg.slice().sort(compareIndex);\n    function ctr(cell) {\n      this._ops = ops;\n      this._out = out;\n      this.cell = cell;\n      this.init();\n    }\n    ctr.prototype.init = init;\n    ctr.prototype.add = add;\n    ctr.prototype.rem = rem;\n    ctr.prototype.set = set;\n    ctr.prototype.get = get;\n    ctr.fields = agg.map(op => op.out);\n    return ctr;\n  }\n\n  function TupleStore(key) {\n    this._key = key ? vegaUtil.field(key) : vegaDataflow.tupleid;\n    this.reset();\n  }\n  const prototype$1 = TupleStore.prototype;\n  prototype$1.reset = function () {\n    this._add = [];\n    this._rem = [];\n    this._ext = null;\n    this._get = null;\n    this._q = null;\n  };\n  prototype$1.add = function (v) {\n    this._add.push(v);\n  };\n  prototype$1.rem = function (v) {\n    this._rem.push(v);\n  };\n  prototype$1.values = function () {\n    this._get = null;\n    if (this._rem.length === 0) return this._add;\n    const a = this._add,\n      r = this._rem,\n      k = this._key,\n      n = a.length,\n      m = r.length,\n      x = Array(n - m),\n      map = {};\n    let i, j, v;\n\n    // use unique key field to clear removed values\n    for (i = 0; i < m; ++i) {\n      map[k(r[i])] = 1;\n    }\n    for (i = 0, j = 0; i < n; ++i) {\n      if (map[k(v = a[i])]) {\n        map[k(v)] = 0;\n      } else {\n        x[j++] = v;\n      }\n    }\n    this._rem = [];\n    return this._add = x;\n  };\n\n  // memoizing statistics methods\n\n  prototype$1.distinct = function (get) {\n    const v = this.values(),\n      map = {};\n    let n = v.length,\n      count = 0,\n      s;\n    while (--n >= 0) {\n      s = get(v[n]) + '';\n      if (!vegaUtil.hasOwnProperty(map, s)) {\n        map[s] = 1;\n        ++count;\n      }\n    }\n    return count;\n  };\n  prototype$1.extent = function (get) {\n    if (this._get !== get || !this._ext) {\n      const v = this.values(),\n        i = vegaUtil.extentIndex(v, get);\n      this._ext = [v[i[0]], v[i[1]]];\n      this._get = get;\n    }\n    return this._ext;\n  };\n  prototype$1.argmin = function (get) {\n    return this.extent(get)[0] || {};\n  };\n  prototype$1.argmax = function (get) {\n    return this.extent(get)[1] || {};\n  };\n  prototype$1.min = function (get) {\n    const m = this.extent(get)[0];\n    return m != null ? get(m) : undefined;\n  };\n  prototype$1.max = function (get) {\n    const m = this.extent(get)[1];\n    return m != null ? get(m) : undefined;\n  };\n  prototype$1.quartile = function (get) {\n    if (this._get !== get || !this._q) {\n      this._q = vegaStatistics.quartiles(this.values(), get);\n      this._get = get;\n    }\n    return this._q;\n  };\n  prototype$1.q1 = function (get) {\n    return this.quartile(get)[0];\n  };\n  prototype$1.q2 = function (get) {\n    return this.quartile(get)[1];\n  };\n  prototype$1.q3 = function (get) {\n    return this.quartile(get)[2];\n  };\n  prototype$1.ci = function (get) {\n    if (this._get !== get || !this._ci) {\n      this._ci = vegaStatistics.bootstrapCI(this.values(), 1000, 0.05, get);\n      this._get = get;\n    }\n    return this._ci;\n  };\n  prototype$1.ci0 = function (get) {\n    return this.ci(get)[0];\n  };\n  prototype$1.ci1 = function (get) {\n    return this.ci(get)[1];\n  };\n\n  /**\n   * Group-by aggregation operator.\n   * @constructor\n   * @param {object} params - The parameters for this operator.\n   * @param {Array<function(object): *>} [params.groupby] - An array of accessors to groupby.\n   * @param {Array<function(object): *>} [params.fields] - An array of accessors to aggregate.\n   * @param {Array<string>} [params.ops] - An array of strings indicating aggregation operations.\n   * @param {Array<number>} [params.aggregate_params] - An optional array of parameters for aggregation operations.\n   * @param {Array<string>} [params.as] - An array of output field names for aggregated values.\n   * @param {boolean} [params.cross=false] - A flag indicating that the full\n   *   cross-product of groupby values should be generated, including empty cells.\n   *   If true, the drop parameter is ignored and empty cells are retained.\n   * @param {boolean} [params.drop=true] - A flag indicating if empty cells should be removed.\n   */\n  function Aggregate(params) {\n    vegaDataflow.Transform.call(this, null, params);\n    this._adds = []; // array of added output tuples\n    this._mods = []; // array of modified output tuples\n    this._alen = 0; // number of active added tuples\n    this._mlen = 0; // number of active modified tuples\n    this._drop = true; // should empty aggregation cells be removed\n    this._cross = false; // produce full cross-product of group-by values\n\n    this._dims = []; // group-by dimension accessors\n    this._dnames = []; // group-by dimension names\n\n    this._measures = []; // collection of aggregation monoids\n    this._countOnly = false; // flag indicating only count aggregation\n    this._counts = null; // collection of count fields\n    this._prev = null; // previous aggregation cells\n\n    this._inputs = null; // array of dependent input tuple field names\n    this._outputs = null; // array of output tuple field names\n  }\n  Aggregate.Definition = {\n    'type': 'Aggregate',\n    'metadata': {\n      'generates': true,\n      'changes': true\n    },\n    'params': [{\n      'name': 'groupby',\n      'type': 'field',\n      'array': true\n    }, {\n      'name': 'ops',\n      'type': 'enum',\n      'array': true,\n      'values': ValidAggregateOps\n    }, {\n      'name': 'aggregate_params',\n      'type': 'number',\n      'null': true,\n      'array': true\n    }, {\n      'name': 'fields',\n      'type': 'field',\n      'null': true,\n      'array': true\n    }, {\n      'name': 'as',\n      'type': 'string',\n      'null': true,\n      'array': true\n    }, {\n      'name': 'drop',\n      'type': 'boolean',\n      'default': true\n    }, {\n      'name': 'cross',\n      'type': 'boolean',\n      'default': false\n    }, {\n      'name': 'key',\n      'type': 'field'\n    }]\n  };\n  vegaUtil.inherits(Aggregate, vegaDataflow.Transform, {\n    transform(_, pulse) {\n      const aggr = this,\n        out = pulse.fork(pulse.NO_SOURCE | pulse.NO_FIELDS),\n        mod = _.modified();\n      aggr.stamp = out.stamp;\n      if (aggr.value && (mod || pulse.modified(aggr._inputs, true))) {\n        aggr._prev = aggr.value;\n        aggr.value = mod ? aggr.init(_) : Object.create(null);\n        pulse.visit(pulse.SOURCE, t => aggr.add(t));\n      } else {\n        aggr.value = aggr.value || aggr.init(_);\n        pulse.visit(pulse.REM, t => aggr.rem(t));\n        pulse.visit(pulse.ADD, t => aggr.add(t));\n      }\n\n      // Indicate output fields and return aggregate tuples.\n      out.modifies(aggr._outputs);\n\n      // Should empty cells be dropped?\n      aggr._drop = _.drop !== false;\n\n      // If domain cross-product requested, generate empty cells as needed\n      // and ensure that empty cells are not dropped\n      if (_.cross && aggr._dims.length > 1) {\n        aggr._drop = false;\n        aggr.cross();\n      }\n      if (pulse.clean() && aggr._drop) {\n        out.clean(true).runAfter(() => this.clean());\n      }\n      return aggr.changes(out);\n    },\n    cross() {\n      const aggr = this,\n        curr = aggr.value,\n        dims = aggr._dnames,\n        vals = dims.map(() => ({})),\n        n = dims.length;\n\n      // collect all group-by domain values\n      function collect(cells) {\n        let key, i, t, v;\n        for (key in cells) {\n          t = cells[key].tuple;\n          for (i = 0; i < n; ++i) {\n            vals[i][v = t[dims[i]]] = v;\n          }\n        }\n      }\n      collect(aggr._prev);\n      collect(curr);\n\n      // iterate over key cross-product, create cells as needed\n      function generate(base, tuple, index) {\n        const name = dims[index],\n          v = vals[index++];\n        for (const k in v) {\n          const key = base ? base + '|' + k : k;\n          tuple[name] = v[k];\n          if (index < n) generate(key, tuple, index);else if (!curr[key]) aggr.cell(key, tuple);\n        }\n      }\n      generate('', {}, 0);\n    },\n    init(_) {\n      // initialize input and output fields\n      const inputs = this._inputs = [],\n        outputs = this._outputs = [],\n        inputMap = {};\n      function inputVisit(get) {\n        const fields = vegaUtil.array(vegaUtil.accessorFields(get)),\n          n = fields.length;\n        let i = 0,\n          f;\n        for (; i < n; ++i) {\n          if (!inputMap[f = fields[i]]) {\n            inputMap[f] = 1;\n            inputs.push(f);\n          }\n        }\n      }\n\n      // initialize group-by dimensions\n      this._dims = vegaUtil.array(_.groupby);\n      this._dnames = this._dims.map(d => {\n        const dname = vegaUtil.accessorName(d);\n        inputVisit(d);\n        outputs.push(dname);\n        return dname;\n      });\n      this.cellkey = _.key ? _.key : groupkey(this._dims);\n\n      // initialize aggregate measures\n      this._countOnly = true;\n      this._counts = [];\n      this._measures = [];\n      const fields = _.fields || [null],\n        ops = _.ops || ['count'],\n        aggregate_params = _.aggregate_params || [null],\n        as = _.as || [],\n        n = fields.length,\n        map = {};\n      let field, op, aggregate_param, m, mname, outname, i;\n      if (n !== ops.length) {\n        vegaUtil.error('Unmatched number of fields and aggregate ops.');\n      }\n      for (i = 0; i < n; ++i) {\n        field = fields[i];\n        op = ops[i];\n        aggregate_param = aggregate_params[i] || null;\n        if (field == null && op !== 'count') {\n          vegaUtil.error('Null aggregate field specified.');\n        }\n        mname = vegaUtil.accessorName(field);\n        outname = measureName(op, mname, as[i]);\n        outputs.push(outname);\n        if (op === 'count') {\n          this._counts.push(outname);\n          continue;\n        }\n        m = map[mname];\n        if (!m) {\n          inputVisit(field);\n          m = map[mname] = [];\n          m.field = field;\n          this._measures.push(m);\n        }\n        if (op !== 'count') this._countOnly = false;\n        m.push(createMeasure(op, aggregate_param, outname));\n      }\n      this._measures = this._measures.map(m => compileMeasures(m, m.field));\n      return Object.create(null); // aggregation cells (this.value)\n    },\n    // -- Cell Management -----\n\n    cellkey: groupkey(),\n    cell(key, t) {\n      let cell = this.value[key];\n      if (!cell) {\n        cell = this.value[key] = this.newcell(key, t);\n        this._adds[this._alen++] = cell;\n      } else if (cell.num === 0 && this._drop && cell.stamp < this.stamp) {\n        cell.stamp = this.stamp;\n        this._adds[this._alen++] = cell;\n      } else if (cell.stamp < this.stamp) {\n        cell.stamp = this.stamp;\n        this._mods[this._mlen++] = cell;\n      }\n      return cell;\n    },\n    newcell(key, t) {\n      const cell = {\n        key: key,\n        num: 0,\n        agg: null,\n        tuple: this.newtuple(t, this._prev && this._prev[key]),\n        stamp: this.stamp,\n        store: false\n      };\n      if (!this._countOnly) {\n        const measures = this._measures,\n          n = measures.length;\n        cell.agg = Array(n);\n        for (let i = 0; i < n; ++i) {\n          cell.agg[i] = new measures[i](cell);\n        }\n      }\n      if (cell.store) {\n        cell.data = new TupleStore();\n      }\n      return cell;\n    },\n    newtuple(t, p) {\n      const names = this._dnames,\n        dims = this._dims,\n        n = dims.length,\n        x = {};\n      for (let i = 0; i < n; ++i) {\n        x[names[i]] = dims[i](t);\n      }\n      return p ? vegaDataflow.replace(p.tuple, x) : vegaDataflow.ingest(x);\n    },\n    clean() {\n      const cells = this.value;\n      for (const key in cells) {\n        if (cells[key].num === 0) {\n          delete cells[key];\n        }\n      }\n    },\n    // -- Process Tuples -----\n\n    add(t) {\n      const key = this.cellkey(t),\n        cell = this.cell(key, t);\n      cell.num += 1;\n      if (this._countOnly) return;\n      if (cell.store) cell.data.add(t);\n      const agg = cell.agg;\n      for (let i = 0, n = agg.length; i < n; ++i) {\n        agg[i].add(agg[i].get(t), t);\n      }\n    },\n    rem(t) {\n      const key = this.cellkey(t),\n        cell = this.cell(key, t);\n      cell.num -= 1;\n      if (this._countOnly) return;\n      if (cell.store) cell.data.rem(t);\n      const agg = cell.agg;\n      for (let i = 0, n = agg.length; i < n; ++i) {\n        agg[i].rem(agg[i].get(t), t);\n      }\n    },\n    celltuple(cell) {\n      const tuple = cell.tuple,\n        counts = this._counts;\n\n      // consolidate stored values\n      if (cell.store) {\n        cell.data.values();\n      }\n\n      // update tuple properties\n      for (let i = 0, n = counts.length; i < n; ++i) {\n        tuple[counts[i]] = cell.num;\n      }\n      if (!this._countOnly) {\n        const agg = cell.agg;\n        for (let i = 0, n = agg.length; i < n; ++i) {\n          agg[i].set(tuple);\n        }\n      }\n      return tuple;\n    },\n    changes(out) {\n      const adds = this._adds,\n        mods = this._mods,\n        prev = this._prev,\n        drop = this._drop,\n        add = out.add,\n        rem = out.rem,\n        mod = out.mod;\n      let cell, key, i, n;\n      if (prev) for (key in prev) {\n        cell = prev[key];\n        if (!drop || cell.num) rem.push(cell.tuple);\n      }\n      for (i = 0, n = this._alen; i < n; ++i) {\n        add.push(this.celltuple(adds[i]));\n        adds[i] = null; // for garbage collection\n      }\n      for (i = 0, n = this._mlen; i < n; ++i) {\n        cell = mods[i];\n        (cell.num === 0 && drop ? rem : mod).push(this.celltuple(cell));\n        mods[i] = null; // for garbage collection\n      }\n      this._alen = this._mlen = 0; // reset list of active cells\n      this._prev = null;\n      return out;\n    }\n  });\n\n  // epsilon bias to offset floating point error (#1737)\n  const EPSILON$1 = 1e-14;\n\n  /**\n   * Generates a binning function for discretizing data.\n   * @constructor\n   * @param {object} params - The parameters for this operator. The\n   *   provided values should be valid options for the {@link bin} function.\n   * @param {function(object): *} params.field - The data field to bin.\n   */\n  function Bin(params) {\n    vegaDataflow.Transform.call(this, null, params);\n  }\n  Bin.Definition = {\n    'type': 'Bin',\n    'metadata': {\n      'modifies': true\n    },\n    'params': [{\n      'name': 'field',\n      'type': 'field',\n      'required': true\n    }, {\n      'name': 'interval',\n      'type': 'boolean',\n      'default': true\n    }, {\n      'name': 'anchor',\n      'type': 'number'\n    }, {\n      'name': 'maxbins',\n      'type': 'number',\n      'default': 20\n    }, {\n      'name': 'base',\n      'type': 'number',\n      'default': 10\n    }, {\n      'name': 'divide',\n      'type': 'number',\n      'array': true,\n      'default': [5, 2]\n    }, {\n      'name': 'extent',\n      'type': 'number',\n      'array': true,\n      'length': 2,\n      'required': true\n    }, {\n      'name': 'span',\n      'type': 'number'\n    }, {\n      'name': 'step',\n      'type': 'number'\n    }, {\n      'name': 'steps',\n      'type': 'number',\n      'array': true\n    }, {\n      'name': 'minstep',\n      'type': 'number',\n      'default': 0\n    }, {\n      'name': 'nice',\n      'type': 'boolean',\n      'default': true\n    }, {\n      'name': 'name',\n      'type': 'string'\n    }, {\n      'name': 'as',\n      'type': 'string',\n      'array': true,\n      'length': 2,\n      'default': ['bin0', 'bin1']\n    }]\n  };\n  vegaUtil.inherits(Bin, vegaDataflow.Transform, {\n    transform(_, pulse) {\n      const band = _.interval !== false,\n        bins = this._bins(_),\n        start = bins.start,\n        step = bins.step,\n        as = _.as || ['bin0', 'bin1'],\n        b0 = as[0],\n        b1 = as[1];\n      let flag;\n      if (_.modified()) {\n        pulse = pulse.reflow(true);\n        flag = pulse.SOURCE;\n      } else {\n        flag = pulse.modified(vegaUtil.accessorFields(_.field)) ? pulse.ADD_MOD : pulse.ADD;\n      }\n      pulse.visit(flag, band ? t => {\n        const v = bins(t);\n        // minimum bin value (inclusive)\n        t[b0] = v;\n        // maximum bin value (exclusive)\n        // use convoluted math for better floating point agreement\n        // see https://github.com/vega/vega/issues/830\n        // infinite values propagate through this formula! #2227\n        t[b1] = v == null ? null : start + step * (1 + (v - start) / step);\n      } : t => t[b0] = bins(t));\n      return pulse.modifies(band ? as : b0);\n    },\n    _bins(_) {\n      if (this.value && !_.modified()) {\n        return this.value;\n      }\n      const field = _.field,\n        bins = vegaStatistics.bin(_),\n        step = bins.step;\n      let start = bins.start,\n        stop = start + Math.ceil((bins.stop - start) / step) * step,\n        a,\n        d;\n      if ((a = _.anchor) != null) {\n        d = a - (start + step * Math.floor((a - start) / step));\n        start += d;\n        stop += d;\n      }\n      const f = function (t) {\n        let v = vegaUtil.toNumber(field(t));\n        return v == null ? null : v < start ? -Infinity : v > stop ? +Infinity : (v = Math.max(start, Math.min(v, stop - step)), start + step * Math.floor(EPSILON$1 + (v - start) / step));\n      };\n      f.start = start;\n      f.stop = bins.stop;\n      f.step = step;\n      return this.value = vegaUtil.accessor(f, vegaUtil.accessorFields(field), _.name || 'bin_' + vegaUtil.accessorName(field));\n    }\n  });\n\n  function SortedList (idFunc, source, input) {\n    const $ = idFunc;\n    let data = source || [],\n      add = input || [],\n      rem = {},\n      cnt = 0;\n    return {\n      add: t => add.push(t),\n      remove: t => rem[$(t)] = ++cnt,\n      size: () => data.length,\n      data: (compare, resort) => {\n        if (cnt) {\n          data = data.filter(t => !rem[$(t)]);\n          rem = {};\n          cnt = 0;\n        }\n        if (resort && compare) {\n          data.sort(compare);\n        }\n        if (add.length) {\n          data = compare ? vegaUtil.merge(compare, data, add.sort(compare)) : data.concat(add);\n          add = [];\n        }\n        return data;\n      }\n    };\n  }\n\n  /**\n   * Collects all data tuples that pass through this operator.\n   * @constructor\n   * @param {object} params - The parameters for this operator.\n   * @param {function(*,*): number} [params.sort] - An optional\n   *   comparator function for additionally sorting the collected tuples.\n   */\n  function Collect(params) {\n    vegaDataflow.Transform.call(this, [], params);\n  }\n  Collect.Definition = {\n    'type': 'Collect',\n    'metadata': {\n      'source': true\n    },\n    'params': [{\n      'name': 'sort',\n      'type': 'compare'\n    }]\n  };\n  vegaUtil.inherits(Collect, vegaDataflow.Transform, {\n    transform(_, pulse) {\n      const out = pulse.fork(pulse.ALL),\n        list = SortedList(vegaDataflow.tupleid, this.value, out.materialize(out.ADD).add),\n        sort = _.sort,\n        mod = pulse.changed() || sort && (_.modified('sort') || pulse.modified(sort.fields));\n      out.visit(out.REM, list.remove);\n      this.modified(mod);\n      this.value = out.source = list.data(vegaDataflow.stableCompare(sort), mod);\n\n      // propagate tree root if defined\n      if (pulse.source && pulse.source.root) {\n        this.value.root = pulse.source.root;\n      }\n      return out;\n    }\n  });\n\n  /**\n   * Generates a comparator function.\n   * @constructor\n   * @param {object} params - The parameters for this operator.\n   * @param {Array<string|function>} params.fields - The fields to compare.\n   * @param {Array<string>} [params.orders] - The sort orders.\n   *   Each entry should be one of \"ascending\" (default) or \"descending\".\n   */\n  function Compare(params) {\n    vegaDataflow.Operator.call(this, null, update$5, params);\n  }\n  vegaUtil.inherits(Compare, vegaDataflow.Operator);\n  function update$5(_) {\n    return this.value && !_.modified() ? this.value : vegaUtil.compare(_.fields, _.orders);\n  }\n\n  /**\n   * Count regexp-defined pattern occurrences in a text field.\n   * @constructor\n   * @param {object} params - The parameters for this operator.\n   * @param {function(object): *} params.field - An accessor for the text field.\n   * @param {string} [params.pattern] - RegExp string defining the text pattern.\n   * @param {string} [params.case] - One of 'lower', 'upper' or null (mixed) case.\n   * @param {string} [params.stopwords] - RegExp string of words to ignore.\n   */\n  function CountPattern(params) {\n    vegaDataflow.Transform.call(this, null, params);\n  }\n  CountPattern.Definition = {\n    'type': 'CountPattern',\n    'metadata': {\n      'generates': true,\n      'changes': true\n    },\n    'params': [{\n      'name': 'field',\n      'type': 'field',\n      'required': true\n    }, {\n      'name': 'case',\n      'type': 'enum',\n      'values': ['upper', 'lower', 'mixed'],\n      'default': 'mixed'\n    }, {\n      'name': 'pattern',\n      'type': 'string',\n      'default': '[\\\\w\"]+'\n    }, {\n      'name': 'stopwords',\n      'type': 'string',\n      'default': ''\n    }, {\n      'name': 'as',\n      'type': 'string',\n      'array': true,\n      'length': 2,\n      'default': ['text', 'count']\n    }]\n  };\n  function tokenize(text, tcase, match) {\n    switch (tcase) {\n      case 'upper':\n        text = text.toUpperCase();\n        break;\n      case 'lower':\n        text = text.toLowerCase();\n        break;\n    }\n    return text.match(match);\n  }\n  vegaUtil.inherits(CountPattern, vegaDataflow.Transform, {\n    transform(_, pulse) {\n      const process = update => tuple => {\n        var tokens = tokenize(get(tuple), _.case, match) || [],\n          t;\n        for (var i = 0, n = tokens.length; i < n; ++i) {\n          if (!stop.test(t = tokens[i])) update(t);\n        }\n      };\n      const init = this._parameterCheck(_, pulse),\n        counts = this._counts,\n        match = this._match,\n        stop = this._stop,\n        get = _.field,\n        as = _.as || ['text', 'count'],\n        add = process(t => counts[t] = 1 + (counts[t] || 0)),\n        rem = process(t => counts[t] -= 1);\n      if (init) {\n        pulse.visit(pulse.SOURCE, add);\n      } else {\n        pulse.visit(pulse.ADD, add);\n        pulse.visit(pulse.REM, rem);\n      }\n      return this._finish(pulse, as); // generate output tuples\n    },\n    _parameterCheck(_, pulse) {\n      let init = false;\n      if (_.modified('stopwords') || !this._stop) {\n        this._stop = new RegExp('^' + (_.stopwords || '') + '$', 'i');\n        init = true;\n      }\n      if (_.modified('pattern') || !this._match) {\n        this._match = new RegExp(_.pattern || '[\\\\w\\']+', 'g');\n        init = true;\n      }\n      if (_.modified('field') || pulse.modified(_.field.fields)) {\n        init = true;\n      }\n      if (init) this._counts = {};\n      return init;\n    },\n    _finish(pulse, as) {\n      const counts = this._counts,\n        tuples = this._tuples || (this._tuples = {}),\n        text = as[0],\n        count = as[1],\n        out = pulse.fork(pulse.NO_SOURCE | pulse.NO_FIELDS);\n      let w, t, c;\n      for (w in counts) {\n        t = tuples[w];\n        c = counts[w] || 0;\n        if (!t && c) {\n          tuples[w] = t = vegaDataflow.ingest({});\n          t[text] = w;\n          t[count] = c;\n          out.add.push(t);\n        } else if (c === 0) {\n          if (t) out.rem.push(t);\n          counts[w] = null;\n          tuples[w] = null;\n        } else if (t[count] !== c) {\n          t[count] = c;\n          out.mod.push(t);\n        }\n      }\n      return out.modifies(as);\n    }\n  });\n\n  /**\n   * Perform a cross-product of a tuple stream with itself.\n   * @constructor\n   * @param {object} params - The parameters for this operator.\n   * @param {function(object):boolean} [params.filter] - An optional filter\n   *   function for selectively including tuples in the cross product.\n   * @param {Array<string>} [params.as] - The names of the output fields.\n   */\n  function Cross(params) {\n    vegaDataflow.Transform.call(this, null, params);\n  }\n  Cross.Definition = {\n    'type': 'Cross',\n    'metadata': {\n      'generates': true\n    },\n    'params': [{\n      'name': 'filter',\n      'type': 'expr'\n    }, {\n      'name': 'as',\n      'type': 'string',\n      'array': true,\n      'length': 2,\n      'default': ['a', 'b']\n    }]\n  };\n  vegaUtil.inherits(Cross, vegaDataflow.Transform, {\n    transform(_, pulse) {\n      const out = pulse.fork(pulse.NO_SOURCE),\n        as = _.as || ['a', 'b'],\n        a = as[0],\n        b = as[1],\n        reset = !this.value || pulse.changed(pulse.ADD_REM) || _.modified('as') || _.modified('filter');\n      let data = this.value;\n      if (reset) {\n        if (data) out.rem = data;\n        data = pulse.materialize(pulse.SOURCE).source;\n        out.add = this.value = cross(data, a, b, _.filter || vegaUtil.truthy);\n      } else {\n        out.mod = data;\n      }\n      out.source = this.value;\n      return out.modifies(as);\n    }\n  });\n  function cross(input, a, b, filter) {\n    var data = [],\n      t = {},\n      n = input.length,\n      i = 0,\n      j,\n      left;\n    for (; i < n; ++i) {\n      t[a] = left = input[i];\n      for (j = 0; j < n; ++j) {\n        t[b] = input[j];\n        if (filter(t)) {\n          data.push(vegaDataflow.ingest(t));\n          t = {};\n          t[a] = left;\n        }\n      }\n    }\n    return data;\n  }\n\n  const Distributions = {\n    kde: vegaStatistics.randomKDE,\n    mixture: vegaStatistics.randomMixture,\n    normal: vegaStatistics.randomNormal,\n    lognormal: vegaStatistics.randomLogNormal,\n    uniform: vegaStatistics.randomUniform\n  };\n  const DISTRIBUTIONS = 'distributions',\n    FUNCTION = 'function',\n    FIELD = 'field';\n\n  /**\n   * Parse a parameter object for a probability distribution.\n   * @param {object} def - The distribution parameter object.\n   * @param {function():Array<object>} - A method for requesting\n   *   source data. Used for distributions (such as KDE) that\n   *   require sample data points. This method will only be\n   *   invoked if the 'from' parameter for a target data source\n   *   is not provided. Typically this method returns backing\n   *   source data for a Pulse object.\n   * @return {object} - The output distribution object.\n   */\n  function parse(def, data) {\n    const func = def[FUNCTION];\n    if (!vegaUtil.hasOwnProperty(Distributions, func)) {\n      vegaUtil.error('Unknown distribution function: ' + func);\n    }\n    const d = Distributions[func]();\n    for (const name in def) {\n      // if data field, extract values\n      if (name === FIELD) {\n        d.data((def.from || data()).map(def[name]));\n      }\n\n      // if distribution mixture, recurse to parse each definition\n      else if (name === DISTRIBUTIONS) {\n        d[name](def[name].map(_ => parse(_, data)));\n      }\n\n      // otherwise, simply set the parameter\n      else if (typeof d[name] === FUNCTION) {\n        d[name](def[name]);\n      }\n    }\n    return d;\n  }\n\n  /**\n   * Grid sample points for a probability density. Given a distribution and\n   * a sampling extent, will generate points suitable for plotting either\n   * PDF (probability density function) or CDF (cumulative distribution\n   * function) curves.\n   * @constructor\n   * @param {object} params - The parameters for this operator.\n   * @param {object} params.distribution - The probability distribution. This\n   *   is an object parameter dependent on the distribution type.\n   * @param {string} [params.method='pdf'] - The distribution method to sample.\n   *   One of 'pdf' or 'cdf'.\n   * @param {Array<number>} [params.extent] - The [min, max] extent over which\n   *   to sample the distribution. This argument is required in most cases, but\n   *   can be omitted if the distribution (e.g., 'kde') supports a 'data' method\n   *   that returns numerical sample points from which the extent can be deduced.\n   * @param {number} [params.minsteps=25] - The minimum number of curve samples\n   *   for plotting the density.\n   * @param {number} [params.maxsteps=200] - The maximum number of curve samples\n   *   for plotting the density.\n   * @param {number} [params.steps] - The exact number of curve samples for\n   *   plotting the density. If specified, overrides both minsteps and maxsteps\n   *   to set an exact number of uniform samples. Useful in conjunction with\n   *   a fixed extent to ensure consistent sample points for stacked densities.\n   */\n  function Density(params) {\n    vegaDataflow.Transform.call(this, null, params);\n  }\n  const distributions = [{\n    'key': {\n      'function': 'normal'\n    },\n    'params': [{\n      'name': 'mean',\n      'type': 'number',\n      'default': 0\n    }, {\n      'name': 'stdev',\n      'type': 'number',\n      'default': 1\n    }]\n  }, {\n    'key': {\n      'function': 'lognormal'\n    },\n    'params': [{\n      'name': 'mean',\n      'type': 'number',\n      'default': 0\n    }, {\n      'name': 'stdev',\n      'type': 'number',\n      'default': 1\n    }]\n  }, {\n    'key': {\n      'function': 'uniform'\n    },\n    'params': [{\n      'name': 'min',\n      'type': 'number',\n      'default': 0\n    }, {\n      'name': 'max',\n      'type': 'number',\n      'default': 1\n    }]\n  }, {\n    'key': {\n      'function': 'kde'\n    },\n    'params': [{\n      'name': 'field',\n      'type': 'field',\n      'required': true\n    }, {\n      'name': 'from',\n      'type': 'data'\n    }, {\n      'name': 'bandwidth',\n      'type': 'number',\n      'default': 0\n    }]\n  }];\n  const mixture = {\n    'key': {\n      'function': 'mixture'\n    },\n    'params': [{\n      'name': 'distributions',\n      'type': 'param',\n      'array': true,\n      'params': distributions\n    }, {\n      'name': 'weights',\n      'type': 'number',\n      'array': true\n    }]\n  };\n  Density.Definition = {\n    'type': 'Density',\n    'metadata': {\n      'generates': true\n    },\n    'params': [{\n      'name': 'extent',\n      'type': 'number',\n      'array': true,\n      'length': 2\n    }, {\n      'name': 'steps',\n      'type': 'number'\n    }, {\n      'name': 'minsteps',\n      'type': 'number',\n      'default': 25\n    }, {\n      'name': 'maxsteps',\n      'type': 'number',\n      'default': 200\n    }, {\n      'name': 'method',\n      'type': 'string',\n      'default': 'pdf',\n      'values': ['pdf', 'cdf']\n    }, {\n      'name': 'distribution',\n      'type': 'param',\n      'params': distributions.concat(mixture)\n    }, {\n      'name': 'as',\n      'type': 'string',\n      'array': true,\n      'default': ['value', 'density']\n    }]\n  };\n  vegaUtil.inherits(Density, vegaDataflow.Transform, {\n    transform(_, pulse) {\n      const out = pulse.fork(pulse.NO_SOURCE | pulse.NO_FIELDS);\n      if (!this.value || pulse.changed() || _.modified()) {\n        const dist = parse(_.distribution, source(pulse)),\n          minsteps = _.steps || _.minsteps || 25,\n          maxsteps = _.steps || _.maxsteps || 200;\n        let method = _.method || 'pdf';\n        if (method !== 'pdf' && method !== 'cdf') {\n          vegaUtil.error('Invalid density method: ' + method);\n        }\n        if (!_.extent && !dist.data) {\n          vegaUtil.error('Missing density extent parameter.');\n        }\n        method = dist[method];\n        const as = _.as || ['value', 'density'],\n          domain = _.extent || vegaUtil.extent(dist.data()),\n          values = vegaStatistics.sampleCurve(method, domain, minsteps, maxsteps).map(v => {\n            const tuple = {};\n            tuple[as[0]] = v[0];\n            tuple[as[1]] = v[1];\n            return vegaDataflow.ingest(tuple);\n          });\n        if (this.value) out.rem = this.value;\n        this.value = out.add = out.source = values;\n      }\n      return out;\n    }\n  });\n  function source(pulse) {\n    return () => pulse.materialize(pulse.SOURCE).source;\n  }\n\n  // use either provided alias or accessor field name\n  function fieldNames(fields, as) {\n    if (!fields) return null;\n    return fields.map((f, i) => as[i] || vegaUtil.accessorName(f));\n  }\n  function partition$1(data, groupby, field) {\n    const groups = [],\n      get = f => f(t);\n    let map, i, n, t, k, g;\n\n    // partition data points into groups\n    if (groupby == null) {\n      groups.push(data.map(field));\n    } else {\n      for (map = {}, i = 0, n = data.length; i < n; ++i) {\n        t = data[i];\n        k = groupby.map(get);\n        g = map[k];\n        if (!g) {\n          map[k] = g = [];\n          g.dims = k;\n          groups.push(g);\n        }\n        g.push(field(t));\n      }\n    }\n    return groups;\n  }\n\n  const Output = 'bin';\n\n  /**\n   * Dot density binning for dot plot construction.\n   * Based on Leland Wilkinson, Dot Plots, The American Statistician, 1999.\n   * https://www.cs.uic.edu/~wilkinson/Publications/dotplots.pdf\n   * @constructor\n   * @param {object} params - The parameters for this operator.\n   * @param {function(object): *} params.field - The value field to bin.\n   * @param {Array<function(object): *>} [params.groupby] - An array of accessors to groupby.\n   * @param {number} [params.step] - The step size (bin width) within which dots should be\n   *   stacked. Defaults to 1/30 of the extent of the data *field*.\n   * @param {boolean} [params.smooth=false] - A boolean flag indicating if dot density\n   *   stacks should be smoothed to reduce variance.\n   */\n  function DotBin(params) {\n    vegaDataflow.Transform.call(this, null, params);\n  }\n  DotBin.Definition = {\n    'type': 'DotBin',\n    'metadata': {\n      'modifies': true\n    },\n    'params': [{\n      'name': 'field',\n      'type': 'field',\n      'required': true\n    }, {\n      'name': 'groupby',\n      'type': 'field',\n      'array': true\n    }, {\n      'name': 'step',\n      'type': 'number'\n    }, {\n      'name': 'smooth',\n      'type': 'boolean',\n      'default': false\n    }, {\n      'name': 'as',\n      'type': 'string',\n      'default': Output\n    }]\n  };\n  const autostep = (data, field) => vegaUtil.span(vegaUtil.extent(data, field)) / 30;\n  vegaUtil.inherits(DotBin, vegaDataflow.Transform, {\n    transform(_, pulse) {\n      if (this.value && !(_.modified() || pulse.changed())) {\n        return pulse; // early exit\n      }\n      const source = pulse.materialize(pulse.SOURCE).source,\n        groups = partition$1(pulse.source, _.groupby, vegaUtil.identity),\n        smooth = _.smooth || false,\n        field = _.field,\n        step = _.step || autostep(source, field),\n        sort = vegaDataflow.stableCompare((a, b) => field(a) - field(b)),\n        as = _.as || Output,\n        n = groups.length;\n\n      // compute dotplot bins per group\n      let min = Infinity,\n        max = -Infinity,\n        i = 0,\n        j;\n      for (; i < n; ++i) {\n        const g = groups[i].sort(sort);\n        j = -1;\n        for (const v of vegaStatistics.dotbin(g, step, smooth, field)) {\n          if (v < min) min = v;\n          if (v > max) max = v;\n          g[++j][as] = v;\n        }\n      }\n      this.value = {\n        start: min,\n        stop: max,\n        step: step\n      };\n      return pulse.reflow(true).modifies(as);\n    }\n  });\n\n  /**\n   * Wraps an expression function with access to external parameters.\n   * @constructor\n   * @param {object} params - The parameters for this operator.\n   * @param {function} params.expr - The expression function. The\n   *  function should accept both a datum and a parameter object.\n   *  This operator's value will be a new function that wraps the\n   *  expression function with access to this operator's parameters.\n   */\n  function Expression(params) {\n    vegaDataflow.Operator.call(this, null, update$4, params);\n    this.modified(true);\n  }\n  vegaUtil.inherits(Expression, vegaDataflow.Operator);\n  function update$4(_) {\n    const expr = _.expr;\n    return this.value && !_.modified('expr') ? this.value : vegaUtil.accessor(datum => expr(datum, _), vegaUtil.accessorFields(expr), vegaUtil.accessorName(expr));\n  }\n\n  /**\n   * Computes extents (min/max) for a data field.\n   * @constructor\n   * @param {object} params - The parameters for this operator.\n   * @param {function(object): *} params.field - The field over which to compute extends.\n   */\n  function Extent(params) {\n    vegaDataflow.Transform.call(this, [undefined, undefined], params);\n  }\n  Extent.Definition = {\n    'type': 'Extent',\n    'metadata': {},\n    'params': [{\n      'name': 'field',\n      'type': 'field',\n      'required': true\n    }]\n  };\n  vegaUtil.inherits(Extent, vegaDataflow.Transform, {\n    transform(_, pulse) {\n      const extent = this.value,\n        field = _.field,\n        mod = pulse.changed() || pulse.modified(field.fields) || _.modified('field');\n      let min = extent[0],\n        max = extent[1];\n      if (mod || min == null) {\n        min = +Infinity;\n        max = -Infinity;\n      }\n      pulse.visit(mod ? pulse.SOURCE : pulse.ADD, t => {\n        const v = vegaUtil.toNumber(field(t));\n        if (v != null) {\n          // NaNs will fail all comparisons!\n          if (v < min) min = v;\n          if (v > max) max = v;\n        }\n      });\n      if (!Number.isFinite(min) || !Number.isFinite(max)) {\n        let name = vegaUtil.accessorName(field);\n        if (name) name = ` for field \"${name}\"`;\n        pulse.dataflow.warn(`Infinite extent${name}: [${min}, ${max}]`);\n        min = max = undefined;\n      }\n      this.value = [min, max];\n    }\n  });\n\n  /**\n   * Provides a bridge between a parent transform and a target subflow that\n   * consumes only a subset of the tuples that pass through the parent.\n   * @constructor\n   * @param {Pulse} pulse - A pulse to use as the value of this operator.\n   * @param {Transform} parent - The parent transform (typically a Facet instance).\n   */\n  function Subflow(pulse, parent) {\n    vegaDataflow.Operator.call(this, pulse);\n    this.parent = parent;\n    this.count = 0;\n  }\n  vegaUtil.inherits(Subflow, vegaDataflow.Operator, {\n    /**\n     * Routes pulses from this subflow to a target transform.\n     * @param {Transform} target - A transform that receives the subflow of tuples.\n     */\n    connect(target) {\n      this.detachSubflow = target.detachSubflow;\n      this.targets().add(target);\n      return target.source = this;\n    },\n    /**\n     * Add an 'add' tuple to the subflow pulse.\n     * @param {Tuple} t - The tuple being added.\n     */\n    add(t) {\n      this.count += 1;\n      this.value.add.push(t);\n    },\n    /**\n     * Add a 'rem' tuple to the subflow pulse.\n     * @param {Tuple} t - The tuple being removed.\n     */\n    rem(t) {\n      this.count -= 1;\n      this.value.rem.push(t);\n    },\n    /**\n     * Add a 'mod' tuple to the subflow pulse.\n     * @param {Tuple} t - The tuple being modified.\n     */\n    mod(t) {\n      this.value.mod.push(t);\n    },\n    /**\n     * Re-initialize this operator's pulse value.\n     * @param {Pulse} pulse - The pulse to copy from.\n     * @see Pulse.init\n     */\n    init(pulse) {\n      this.value.init(pulse, pulse.NO_SOURCE);\n    },\n    /**\n     * Evaluate this operator. This method overrides the\n     * default behavior to simply return the contained pulse value.\n     * @return {Pulse}\n     */\n    evaluate() {\n      // assert: this.value.stamp === pulse.stamp\n      return this.value;\n    }\n  });\n\n  /**\n   * Facets a dataflow into a set of subflows based on a key.\n   * @constructor\n   * @param {object} params - The parameters for this operator.\n   * @param {function(Dataflow, string): Operator} params.subflow - A function\n   *   that generates a subflow of operators and returns its root operator.\n   * @param {function(object): *} params.key - The key field to facet by.\n   */\n  function Facet(params) {\n    vegaDataflow.Transform.call(this, {}, params);\n    this._keys = vegaUtil.fastmap(); // cache previously calculated key values\n\n    // keep track of active subflows, use as targets array for listeners\n    // this allows us to limit propagation to only updated subflows\n    const a = this._targets = [];\n    a.active = 0;\n    a.forEach = f => {\n      for (let i = 0, n = a.active; i < n; ++i) {\n        f(a[i], i, a);\n      }\n    };\n  }\n  vegaUtil.inherits(Facet, vegaDataflow.Transform, {\n    activate(flow) {\n      this._targets[this._targets.active++] = flow;\n    },\n    // parent argument provided by PreFacet subclass\n    subflow(key, flow, pulse, parent) {\n      const flows = this.value;\n      let sf = vegaUtil.hasOwnProperty(flows, key) && flows[key],\n        df,\n        p;\n      if (!sf) {\n        p = parent || (p = this._group[key]) && p.tuple;\n        df = pulse.dataflow;\n        sf = new Subflow(pulse.fork(pulse.NO_SOURCE), this);\n        df.add(sf).connect(flow(df, key, p));\n        flows[key] = sf;\n        this.activate(sf);\n      } else if (sf.value.stamp < pulse.stamp) {\n        sf.init(pulse);\n        this.activate(sf);\n      }\n      return sf;\n    },\n    clean() {\n      const flows = this.value;\n      let detached = 0;\n      for (const key in flows) {\n        if (flows[key].count === 0) {\n          const detach = flows[key].detachSubflow;\n          if (detach) detach();\n          delete flows[key];\n          ++detached;\n        }\n      }\n\n      // remove inactive targets from the active targets array\n      if (detached) {\n        const active = this._targets.filter(sf => sf && sf.count > 0);\n        this.initTargets(active);\n      }\n    },\n    initTargets(act) {\n      const a = this._targets,\n        n = a.length,\n        m = act ? act.length : 0;\n      let i = 0;\n      for (; i < m; ++i) {\n        a[i] = act[i];\n      }\n      for (; i < n && a[i] != null; ++i) {\n        a[i] = null; // ensure old flows can be garbage collected\n      }\n      a.active = m;\n    },\n    transform(_, pulse) {\n      const df = pulse.dataflow,\n        key = _.key,\n        flow = _.subflow,\n        cache = this._keys,\n        rekey = _.modified('key'),\n        subflow = key => this.subflow(key, flow, pulse);\n      this._group = _.group || {};\n      this.initTargets(); // reset list of active subflows\n\n      pulse.visit(pulse.REM, t => {\n        const id = vegaDataflow.tupleid(t),\n          k = cache.get(id);\n        if (k !== undefined) {\n          cache.delete(id);\n          subflow(k).rem(t);\n        }\n      });\n      pulse.visit(pulse.ADD, t => {\n        const k = key(t);\n        cache.set(vegaDataflow.tupleid(t), k);\n        subflow(k).add(t);\n      });\n      if (rekey || pulse.modified(key.fields)) {\n        pulse.visit(pulse.MOD, t => {\n          const id = vegaDataflow.tupleid(t),\n            k0 = cache.get(id),\n            k1 = key(t);\n          if (k0 === k1) {\n            subflow(k1).mod(t);\n          } else {\n            cache.set(id, k1);\n            subflow(k0).rem(t);\n            subflow(k1).add(t);\n          }\n        });\n      } else if (pulse.changed(pulse.MOD)) {\n        pulse.visit(pulse.MOD, t => {\n          subflow(cache.get(vegaDataflow.tupleid(t))).mod(t);\n        });\n      }\n      if (rekey) {\n        pulse.visit(pulse.REFLOW, t => {\n          const id = vegaDataflow.tupleid(t),\n            k0 = cache.get(id),\n            k1 = key(t);\n          if (k0 !== k1) {\n            cache.set(id, k1);\n            subflow(k0).rem(t);\n            subflow(k1).add(t);\n          }\n        });\n      }\n      if (pulse.clean()) {\n        df.runAfter(() => {\n          this.clean();\n          cache.clean();\n        });\n      } else if (cache.empty > df.cleanThreshold) {\n        df.runAfter(cache.clean);\n      }\n      return pulse;\n    }\n  });\n\n  /**\n   * Generates one or more field accessor functions.\n   * If the 'name' parameter is an array, an array of field accessors\n   * will be created and the 'as' parameter will be ignored.\n   * @constructor\n   * @param {object} params - The parameters for this operator.\n   * @param {string} params.name - The field name(s) to access.\n   * @param {string} params.as - The accessor function name.\n   */\n  function Field(params) {\n    vegaDataflow.Operator.call(this, null, update$3, params);\n  }\n  vegaUtil.inherits(Field, vegaDataflow.Operator);\n  function update$3(_) {\n    return this.value && !_.modified() ? this.value : vegaUtil.isArray(_.name) ? vegaUtil.array(_.name).map(f => vegaUtil.field(f)) : vegaUtil.field(_.name, _.as);\n  }\n\n  /**\n   * Filters data tuples according to a predicate function.\n   * @constructor\n   * @param {object} params - The parameters for this operator.\n   * @param {function(object): *} params.expr - The predicate expression function\n   *   that determines a tuple's filter status. Truthy values pass the filter.\n   */\n  function Filter(params) {\n    vegaDataflow.Transform.call(this, vegaUtil.fastmap(), params);\n  }\n  Filter.Definition = {\n    'type': 'Filter',\n    'metadata': {\n      'changes': true\n    },\n    'params': [{\n      'name': 'expr',\n      'type': 'expr',\n      'required': true\n    }]\n  };\n  vegaUtil.inherits(Filter, vegaDataflow.Transform, {\n    transform(_, pulse) {\n      const df = pulse.dataflow,\n        cache = this.value,\n        // cache ids of filtered tuples\n        output = pulse.fork(),\n        add = output.add,\n        rem = output.rem,\n        mod = output.mod,\n        test = _.expr;\n      let isMod = true;\n      pulse.visit(pulse.REM, t => {\n        const id = vegaDataflow.tupleid(t);\n        if (!cache.has(id)) rem.push(t);else cache.delete(id);\n      });\n      pulse.visit(pulse.ADD, t => {\n        if (test(t, _)) add.push(t);else cache.set(vegaDataflow.tupleid(t), 1);\n      });\n      function revisit(t) {\n        const id = vegaDataflow.tupleid(t),\n          b = test(t, _),\n          s = cache.get(id);\n        if (b && s) {\n          cache.delete(id);\n          add.push(t);\n        } else if (!b && !s) {\n          cache.set(id, 1);\n          rem.push(t);\n        } else if (isMod && b && !s) {\n          mod.push(t);\n        }\n      }\n      pulse.visit(pulse.MOD, revisit);\n      if (_.modified()) {\n        isMod = false;\n        pulse.visit(pulse.REFLOW, revisit);\n      }\n      if (cache.empty > df.cleanThreshold) df.runAfter(cache.clean);\n      return output;\n    }\n  });\n\n  /**\n   * Flattens array-typed field values into new data objects.\n   * If multiple fields are specified, they are treated as parallel arrays,\n   * with output values included for each matching index (or null if missing).\n   * @constructor\n   * @param {object} params - The parameters for this operator.\n   * @param {Array<function(object): *>} params.fields - An array of field\n   *   accessors for the tuple fields that should be flattened.\n   * @param {string} [params.index] - Optional output field name for index\n   *   value. If unspecified, no index field is included in the output.\n   * @param {Array<string>} [params.as] - Output field names for flattened\n   *   array fields. Any unspecified fields will use the field name provided\n   *   by the fields accessors.\n   */\n  function Flatten(params) {\n    vegaDataflow.Transform.call(this, [], params);\n  }\n  Flatten.Definition = {\n    'type': 'Flatten',\n    'metadata': {\n      'generates': true\n    },\n    'params': [{\n      'name': 'fields',\n      'type': 'field',\n      'array': true,\n      'required': true\n    }, {\n      'name': 'index',\n      'type': 'string'\n    }, {\n      'name': 'as',\n      'type': 'string',\n      'array': true\n    }]\n  };\n  vegaUtil.inherits(Flatten, vegaDataflow.Transform, {\n    transform(_, pulse) {\n      const out = pulse.fork(pulse.NO_SOURCE),\n        fields = _.fields,\n        as = fieldNames(fields, _.as || []),\n        index = _.index || null,\n        m = as.length;\n\n      // remove any previous results\n      out.rem = this.value;\n\n      // generate flattened tuples\n      pulse.visit(pulse.SOURCE, t => {\n        const arrays = fields.map(f => f(t)),\n          maxlen = arrays.reduce((l, a) => Math.max(l, a.length), 0);\n        let i = 0,\n          j,\n          d,\n          v;\n        for (; i < maxlen; ++i) {\n          d = vegaDataflow.derive(t);\n          for (j = 0; j < m; ++j) {\n            d[as[j]] = (v = arrays[j][i]) == null ? null : v;\n          }\n          if (index) {\n            d[index] = i;\n          }\n          out.add.push(d);\n        }\n      });\n      this.value = out.source = out.add;\n      if (index) out.modifies(index);\n      return out.modifies(as);\n    }\n  });\n\n  /**\n   * Folds one more tuple fields into multiple tuples in which the field\n   * name and values are available under new 'key' and 'value' fields.\n   * @constructor\n   * @param {object} params - The parameters for this operator.\n   * @param {function(object): *} params.fields - An array of field accessors\n   *   for the tuple fields that should be folded.\n   * @param {Array<string>} [params.as] - Output field names for folded key\n   *   and value fields, defaults to ['key', 'value'].\n   */\n  function Fold(params) {\n    vegaDataflow.Transform.call(this, [], params);\n  }\n  Fold.Definition = {\n    'type': 'Fold',\n    'metadata': {\n      'generates': true\n    },\n    'params': [{\n      'name': 'fields',\n      'type': 'field',\n      'array': true,\n      'required': true\n    }, {\n      'name': 'as',\n      'type': 'string',\n      'array': true,\n      'length': 2,\n      'default': ['key', 'value']\n    }]\n  };\n  vegaUtil.inherits(Fold, vegaDataflow.Transform, {\n    transform(_, pulse) {\n      const out = pulse.fork(pulse.NO_SOURCE),\n        fields = _.fields,\n        fnames = fields.map(vegaUtil.accessorName),\n        as = _.as || ['key', 'value'],\n        k = as[0],\n        v = as[1],\n        n = fields.length;\n      out.rem = this.value;\n      pulse.visit(pulse.SOURCE, t => {\n        for (let i = 0, d; i < n; ++i) {\n          d = vegaDataflow.derive(t);\n          d[k] = fnames[i];\n          d[v] = fields[i](t);\n          out.add.push(d);\n        }\n      });\n      this.value = out.source = out.add;\n      return out.modifies(as);\n    }\n  });\n\n  /**\n   * Invokes a function for each data tuple and saves the results as a new field.\n   * @constructor\n   * @param {object} params - The parameters for this operator.\n   * @param {function(object): *} params.expr - The formula function to invoke for each tuple.\n   * @param {string} params.as - The field name under which to save the result.\n   * @param {boolean} [params.initonly=false] - If true, the formula is applied to\n   *   added tuples only, and does not update in response to modifications.\n   */\n  function Formula(params) {\n    vegaDataflow.Transform.call(this, null, params);\n  }\n  Formula.Definition = {\n    'type': 'Formula',\n    'metadata': {\n      'modifies': true\n    },\n    'params': [{\n      'name': 'expr',\n      'type': 'expr',\n      'required': true\n    }, {\n      'name': 'as',\n      'type': 'string',\n      'required': true\n    }, {\n      'name': 'initonly',\n      'type': 'boolean'\n    }]\n  };\n  vegaUtil.inherits(Formula, vegaDataflow.Transform, {\n    transform(_, pulse) {\n      const func = _.expr,\n        as = _.as,\n        mod = _.modified(),\n        flag = _.initonly ? pulse.ADD : mod ? pulse.SOURCE : pulse.modified(func.fields) || pulse.modified(as) ? pulse.ADD_MOD : pulse.ADD;\n      if (mod) {\n        // parameters updated, need to reflow\n        pulse = pulse.materialize().reflow(true);\n      }\n      if (!_.initonly) {\n        pulse.modifies(as);\n      }\n      return pulse.visit(flag, t => t[as] = func(t, _));\n    }\n  });\n\n  /**\n   * Generates data tuples using a provided generator function.\n   * @constructor\n   * @param {object} params - The parameters for this operator.\n   * @param {function(Parameters): object} params.generator - A tuple generator\n   *   function. This function is given the operator parameters as input.\n   *   Changes to any additional parameters will not trigger re-calculation\n   *   of previously generated tuples. Only future tuples are affected.\n   * @param {number} params.size - The number of tuples to produce.\n   */\n  function Generate(params) {\n    vegaDataflow.Transform.call(this, [], params);\n  }\n  vegaUtil.inherits(Generate, vegaDataflow.Transform, {\n    transform(_, pulse) {\n      const out = pulse.fork(pulse.ALL),\n        gen = _.generator;\n      let data = this.value,\n        num = _.size - data.length,\n        add,\n        rem,\n        t;\n      if (num > 0) {\n        // need more tuples, generate and add\n        for (add = []; --num >= 0;) {\n          add.push(t = vegaDataflow.ingest(gen(_)));\n          data.push(t);\n        }\n        out.add = out.add.length ? out.materialize(out.ADD).add.concat(add) : add;\n      } else {\n        // need fewer tuples, remove\n        rem = data.slice(0, -num);\n        out.rem = out.rem.length ? out.materialize(out.REM).rem.concat(rem) : rem;\n        data = data.slice(-num);\n      }\n      out.source = this.value = data;\n      return out;\n    }\n  });\n\n  function ascending(a, b) {\n    return a == null || b == null ? NaN : a < b ? -1 : a > b ? 1 : a >= b ? 0 : NaN;\n  }\n\n  function descending(a, b) {\n    return a == null || b == null ? NaN : b < a ? -1 : b > a ? 1 : b >= a ? 0 : NaN;\n  }\n\n  function bisector(f) {\n    let compare1, compare2, delta;\n\n    // If an accessor is specified, promote it to a comparator. In this case we\n    // can test whether the search value is (self-) comparable. We can\u2019t do this\n    // for a comparator (except for specific, known comparators) because we can\u2019t\n    // tell if the comparator is symmetric, and an asymmetric comparator can\u2019t be\n    // used to test whether a single value is comparable.\n    if (f.length !== 2) {\n      compare1 = ascending;\n      compare2 = (d, x) => ascending(f(d), x);\n      delta = (d, x) => f(d) - x;\n    } else {\n      compare1 = f === ascending || f === descending ? f : zero;\n      compare2 = f;\n      delta = f;\n    }\n    function left(a, x, lo = 0, hi = a.length) {\n      if (lo < hi) {\n        if (compare1(x, x) !== 0) return hi;\n        do {\n          const mid = lo + hi >>> 1;\n          if (compare2(a[mid], x) < 0) lo = mid + 1;else hi = mid;\n        } while (lo < hi);\n      }\n      return lo;\n    }\n    function right(a, x, lo = 0, hi = a.length) {\n      if (lo < hi) {\n        if (compare1(x, x) !== 0) return hi;\n        do {\n          const mid = lo + hi >>> 1;\n          if (compare2(a[mid], x) <= 0) lo = mid + 1;else hi = mid;\n        } while (lo < hi);\n      }\n      return lo;\n    }\n    function center(a, x, lo = 0, hi = a.length) {\n      const i = left(a, x, lo, hi - 1);\n      return i > lo && delta(a[i - 1], x) > -delta(a[i], x) ? i - 1 : i;\n    }\n    return {\n      left,\n      center,\n      right\n    };\n  }\n  function zero() {\n    return 0;\n  }\n\n  function* numbers(values, valueof) {\n    if (valueof === undefined) {\n      for (let value of values) {\n        if (value != null && (value = +value) >= value) {\n          yield value;\n        }\n      }\n    } else {\n      let index = -1;\n      for (let value of values) {\n        if ((value = valueof(value, ++index, values)) != null && (value = +value) >= value) {\n          yield value;\n        }\n      }\n    }\n  }\n\n  function compareDefined(compare = ascending) {\n    if (compare === ascending) return ascendingDefined;\n    if (typeof compare !== \"function\") throw new TypeError(\"compare is not a function\");\n    return (a, b) => {\n      const x = compare(a, b);\n      if (x || x === 0) return x;\n      return (compare(b, b) === 0) - (compare(a, a) === 0);\n    };\n  }\n  function ascendingDefined(a, b) {\n    return (a == null || !(a >= a)) - (b == null || !(b >= b)) || (a < b ? -1 : a > b ? 1 : 0);\n  }\n\n  function max(values, valueof) {\n    let max;\n    if (valueof === undefined) {\n      for (const value of values) {\n        if (value != null && (max < value || max === undefined && value >= value)) {\n          max = value;\n        }\n      }\n    } else {\n      let index = -1;\n      for (let value of values) {\n        if ((value = valueof(value, ++index, values)) != null && (max < value || max === undefined && value >= value)) {\n          max = value;\n        }\n      }\n    }\n    return max;\n  }\n\n  function min(values, valueof) {\n    let min;\n    if (valueof === undefined) {\n      for (const value of values) {\n        if (value != null && (min > value || min === undefined && value >= value)) {\n          min = value;\n        }\n      }\n    } else {\n      let index = -1;\n      for (let value of values) {\n        if ((value = valueof(value, ++index, values)) != null && (min > value || min === undefined && value >= value)) {\n          min = value;\n        }\n      }\n    }\n    return min;\n  }\n\n  // Based on https://github.com/mourner/quickselect\n  // ISC license, Copyright 2018 Vladimir Agafonkin.\n  function quickselect(array, k, left = 0, right = Infinity, compare) {\n    k = Math.floor(k);\n    left = Math.floor(Math.max(0, left));\n    right = Math.floor(Math.min(array.length - 1, right));\n    if (!(left <= k && k <= right)) return array;\n    compare = compare === undefined ? ascendingDefined : compareDefined(compare);\n    while (right > left) {\n      if (right - left > 600) {\n        const n = right - left + 1;\n        const m = k - left + 1;\n        const z = Math.log(n);\n        const s = 0.5 * Math.exp(2 * z / 3);\n        const sd = 0.5 * Math.sqrt(z * s * (n - s) / n) * (m - n / 2 < 0 ? -1 : 1);\n        const newLeft = Math.max(left, Math.floor(k - m * s / n + sd));\n        const newRight = Math.min(right, Math.floor(k + (n - m) * s / n + sd));\n        quickselect(array, k, newLeft, newRight, compare);\n      }\n      const t = array[k];\n      let i = left;\n      let j = right;\n      swap(array, left, k);\n      if (compare(array[right], t) > 0) swap(array, left, right);\n      while (i < j) {\n        swap(array, i, j), ++i, --j;\n        while (compare(array[i], t) < 0) ++i;\n        while (compare(array[j], t) > 0) --j;\n      }\n      if (compare(array[left], t) === 0) swap(array, left, j);else ++j, swap(array, j, right);\n      if (j <= k) left = j + 1;\n      if (k <= j) right = j - 1;\n    }\n    return array;\n  }\n  function swap(array, i, j) {\n    const t = array[i];\n    array[i] = array[j];\n    array[j] = t;\n  }\n\n  function quantile(values, p, valueof) {\n    values = Float64Array.from(numbers(values, valueof));\n    if (!(n = values.length) || isNaN(p = +p)) return;\n    if (p <= 0 || n < 2) return min(values);\n    if (p >= 1) return max(values);\n    var n,\n      i = (n - 1) * p,\n      i0 = Math.floor(i),\n      value0 = max(quickselect(values, i0).subarray(0, i0 + 1)),\n      value1 = min(values.subarray(i0 + 1));\n    return value0 + (value1 - value0) * (i - i0);\n  }\n\n  function mean(values, valueof) {\n    let count = 0;\n    let sum = 0;\n    if (valueof === undefined) {\n      for (let value of values) {\n        if (value != null && (value = +value) >= value) {\n          ++count, sum += value;\n        }\n      }\n    } else {\n      let index = -1;\n      for (let value of values) {\n        if ((value = valueof(value, ++index, values)) != null && (value = +value) >= value) {\n          ++count, sum += value;\n        }\n      }\n    }\n    if (count) return sum / count;\n  }\n\n  function median(values, valueof) {\n    return quantile(values, 0.5, valueof);\n  }\n\n  function range(start, stop, step) {\n    start = +start, stop = +stop, step = (n = arguments.length) < 2 ? (stop = start, start = 0, 1) : n < 3 ? 1 : +step;\n    var i = -1,\n      n = Math.max(0, Math.ceil((stop - start) / step)) | 0,\n      range = new Array(n);\n    while (++i < n) {\n      range[i] = start + i * step;\n    }\n    return range;\n  }\n\n  const Methods = {\n    value: 'value',\n    median: median,\n    mean: mean,\n    min: min,\n    max: max\n  };\n  const Empty = [];\n\n  /**\n   * Impute missing values.\n   * @constructor\n   * @param {object} params - The parameters for this operator.\n   * @param {function(object): *} params.field - The value field to impute.\n   * @param {Array<function(object): *>} [params.groupby] - An array of\n   *   accessors to determine series within which to perform imputation.\n   * @param {function(object): *} params.key - An accessor for a key value.\n   *   Each key value should be unique within a group. New tuples will be\n   *   imputed for any key values that are not found within a group.\n   * @param {Array<*>} [params.keyvals] - Optional array of required key\n   *   values. New tuples will be imputed for any key values that are not\n   *   found within a group. In addition, these values will be automatically\n   *   augmented with the key values observed in the input data.\n   * @param {string} [method='value'] - The imputation method to use. One of\n   *   'value', 'mean', 'median', 'max', 'min'.\n   * @param {*} [value=0] - The constant value to use for imputation\n   *   when using method 'value'.\n   */\n  function Impute(params) {\n    vegaDataflow.Transform.call(this, [], params);\n  }\n  Impute.Definition = {\n    'type': 'Impute',\n    'metadata': {\n      'changes': true\n    },\n    'params': [{\n      'name': 'field',\n      'type': 'field',\n      'required': true\n    }, {\n      'name': 'key',\n      'type': 'field',\n      'required': true\n    }, {\n      'name': 'keyvals',\n      'array': true\n    }, {\n      'name': 'groupby',\n      'type': 'field',\n      'array': true\n    }, {\n      'name': 'method',\n      'type': 'enum',\n      'default': 'value',\n      'values': ['value', 'mean', 'median', 'max', 'min']\n    }, {\n      'name': 'value',\n      'default': 0\n    }]\n  };\n  function getValue(_) {\n    var m = _.method || Methods.value,\n      v;\n    if (Methods[m] == null) {\n      vegaUtil.error('Unrecognized imputation method: ' + m);\n    } else if (m === Methods.value) {\n      v = _.value !== undefined ? _.value : 0;\n      return () => v;\n    } else {\n      return Methods[m];\n    }\n  }\n  function getField(_) {\n    const f = _.field;\n    return t => t ? f(t) : NaN;\n  }\n  vegaUtil.inherits(Impute, vegaDataflow.Transform, {\n    transform(_, pulse) {\n      var out = pulse.fork(pulse.ALL),\n        impute = getValue(_),\n        field = getField(_),\n        fName = vegaUtil.accessorName(_.field),\n        kName = vegaUtil.accessorName(_.key),\n        gNames = (_.groupby || []).map(vegaUtil.accessorName),\n        groups = partition(pulse.source, _.groupby, _.key, _.keyvals),\n        curr = [],\n        prev = this.value,\n        m = groups.domain.length,\n        group,\n        value,\n        gVals,\n        kVal,\n        g,\n        i,\n        j,\n        l,\n        n,\n        t;\n      for (g = 0, l = groups.length; g < l; ++g) {\n        group = groups[g];\n        gVals = group.values;\n        value = NaN;\n\n        // add tuples for missing values\n        for (j = 0; j < m; ++j) {\n          if (group[j] != null) continue;\n          kVal = groups.domain[j];\n          t = {\n            _impute: true\n          };\n          for (i = 0, n = gVals.length; i < n; ++i) t[gNames[i]] = gVals[i];\n          t[kName] = kVal;\n          t[fName] = Number.isNaN(value) ? value = impute(group, field) : value;\n          curr.push(vegaDataflow.ingest(t));\n        }\n      }\n\n      // update pulse with imputed tuples\n      if (curr.length) out.add = out.materialize(out.ADD).add.concat(curr);\n      if (prev.length) out.rem = out.materialize(out.REM).rem.concat(prev);\n      this.value = curr;\n      return out;\n    }\n  });\n  function partition(data, groupby, key, keyvals) {\n    var get = f => f(t),\n      groups = [],\n      domain = keyvals ? keyvals.slice() : [],\n      kMap = {},\n      gMap = {},\n      gVals,\n      gKey,\n      group,\n      i,\n      j,\n      k,\n      n,\n      t;\n    domain.forEach((k, i) => kMap[k] = i + 1);\n    for (i = 0, n = data.length; i < n; ++i) {\n      t = data[i];\n      k = key(t);\n      j = kMap[k] || (kMap[k] = domain.push(k));\n      gKey = (gVals = groupby ? groupby.map(get) : Empty) + '';\n      if (!(group = gMap[gKey])) {\n        group = gMap[gKey] = [];\n        groups.push(group);\n        group.values = gVals;\n      }\n      group[j - 1] = t;\n    }\n    groups.domain = domain;\n    return groups;\n  }\n\n  /**\n   * Extend input tuples with aggregate values.\n   * Calcuates aggregate values and joins them with the input stream.\n   * @constructor\n   */\n  function JoinAggregate(params) {\n    Aggregate.call(this, params);\n  }\n  JoinAggregate.Definition = {\n    'type': 'JoinAggregate',\n    'metadata': {\n      'modifies': true\n    },\n    'params': [{\n      'name': 'groupby',\n      'type': 'field',\n      'array': true\n    }, {\n      'name': 'fields',\n      'type': 'field',\n      'null': true,\n      'array': true\n    }, {\n      'name': 'ops',\n      'type': 'enum',\n      'array': true,\n      'values': ValidAggregateOps\n    }, {\n      'name': 'as',\n      'type': 'string',\n      'null': true,\n      'array': true\n    }, {\n      'name': 'key',\n      'type': 'field'\n    }]\n  };\n  vegaUtil.inherits(JoinAggregate, Aggregate, {\n    transform(_, pulse) {\n      const aggr = this,\n        mod = _.modified();\n      let cells;\n\n      // process all input tuples to calculate aggregates\n      if (aggr.value && (mod || pulse.modified(aggr._inputs, true))) {\n        cells = aggr.value = mod ? aggr.init(_) : {};\n        pulse.visit(pulse.SOURCE, t => aggr.add(t));\n      } else {\n        cells = aggr.value = aggr.value || this.init(_);\n        pulse.visit(pulse.REM, t => aggr.rem(t));\n        pulse.visit(pulse.ADD, t => aggr.add(t));\n      }\n\n      // update aggregation cells\n      aggr.changes();\n\n      // write aggregate values to input tuples\n      pulse.visit(pulse.SOURCE, t => {\n        vegaUtil.extend(t, cells[aggr.cellkey(t)].tuple);\n      });\n      return pulse.reflow(mod).modifies(this._outputs);\n    },\n    changes() {\n      const adds = this._adds,\n        mods = this._mods;\n      let i, n;\n      for (i = 0, n = this._alen; i < n; ++i) {\n        this.celltuple(adds[i]);\n        adds[i] = null; // for garbage collection\n      }\n      for (i = 0, n = this._mlen; i < n; ++i) {\n        this.celltuple(mods[i]);\n        mods[i] = null; // for garbage collection\n      }\n      this._alen = this._mlen = 0; // reset list of active cells\n    }\n  });\n\n  /**\n   * Compute kernel density estimates (KDE) for one or more data groups.\n   * @constructor\n   * @param {object} params - The parameters for this operator.\n   * @param {Array<function(object): *>} [params.groupby] - An array of accessors\n   *   to groupby.\n   * @param {function(object): *} params.field - An accessor for the data field\n   *   to estimate.\n   * @param {number} [params.bandwidth=0] - The KDE kernel bandwidth.\n   *   If zero or unspecified, the bandwidth is automatically determined.\n   * @param {boolean} [params.counts=false] - A boolean flag indicating if the\n   *   output values should be probability estimates (false, default) or\n   *   smoothed counts (true).\n   * @param {string} [params.cumulative=false] - A boolean flag indicating if a\n   *   density (false) or cumulative distribution (true) should be generated.\n   * @param {Array<number>} [params.extent] - The domain extent over which to\n   *   plot the density. If unspecified, the [min, max] data extent is used.\n   * @param {string} [params.resolve='independent'] - Indicates how parameters for\n   *   multiple densities should be resolved. If \"independent\" (the default), each\n   *   density may have its own domain extent and dynamic number of curve sample\n   *   steps. If \"shared\", the KDE transform will ensure that all densities are\n   *   defined over a shared domain and curve steps, enabling stacking.\n   * @param {number} [params.minsteps=25] - The minimum number of curve samples\n   *   for plotting the density.\n   * @param {number} [params.maxsteps=200] - The maximum number of curve samples\n   *   for plotting the density.\n   * @param {number} [params.steps] - The exact number of curve samples for\n   *   plotting the density. If specified, overrides both minsteps and maxsteps\n   *   to set an exact number of uniform samples. Useful in conjunction with\n   *   a fixed extent to ensure consistent sample points for stacked densities.\n   */\n  function KDE(params) {\n    vegaDataflow.Transform.call(this, null, params);\n  }\n  KDE.Definition = {\n    'type': 'KDE',\n    'metadata': {\n      'generates': true\n    },\n    'params': [{\n      'name': 'groupby',\n      'type': 'field',\n      'array': true\n    }, {\n      'name': 'field',\n      'type': 'field',\n      'required': true\n    }, {\n      'name': 'cumulative',\n      'type': 'boolean',\n      'default': false\n    }, {\n      'name': 'counts',\n      'type': 'boolean',\n      'default': false\n    }, {\n      'name': 'bandwidth',\n      'type': 'number',\n      'default': 0\n    }, {\n      'name': 'extent',\n      'type': 'number',\n      'array': true,\n      'length': 2\n    }, {\n      'name': 'resolve',\n      'type': 'enum',\n      'values': ['shared', 'independent'],\n      'default': 'independent'\n    }, {\n      'name': 'steps',\n      'type': 'number'\n    }, {\n      'name': 'minsteps',\n      'type': 'number',\n      'default': 25\n    }, {\n      'name': 'maxsteps',\n      'type': 'number',\n      'default': 200\n    }, {\n      'name': 'as',\n      'type': 'string',\n      'array': true,\n      'default': ['value', 'density']\n    }]\n  };\n  vegaUtil.inherits(KDE, vegaDataflow.Transform, {\n    transform(_, pulse) {\n      const out = pulse.fork(pulse.NO_SOURCE | pulse.NO_FIELDS);\n      if (!this.value || pulse.changed() || _.modified()) {\n        const source = pulse.materialize(pulse.SOURCE).source,\n          groups = partition$1(source, _.groupby, _.field),\n          names = (_.groupby || []).map(vegaUtil.accessorName),\n          bandwidth = _.bandwidth,\n          method = _.cumulative ? 'cdf' : 'pdf',\n          as = _.as || ['value', 'density'],\n          values = [];\n        let domain = _.extent,\n          minsteps = _.steps || _.minsteps || 25,\n          maxsteps = _.steps || _.maxsteps || 200;\n        if (method !== 'pdf' && method !== 'cdf') {\n          vegaUtil.error('Invalid density method: ' + method);\n        }\n        if (_.resolve === 'shared') {\n          if (!domain) domain = vegaUtil.extent(source, _.field);\n          minsteps = maxsteps = _.steps || maxsteps;\n        }\n        groups.forEach(g => {\n          const density = vegaStatistics.randomKDE(g, bandwidth)[method],\n            scale = _.counts ? g.length : 1,\n            local = domain || vegaUtil.extent(g);\n          vegaStatistics.sampleCurve(density, local, minsteps, maxsteps).forEach(v => {\n            const t = {};\n            for (let i = 0; i < names.length; ++i) {\n              t[names[i]] = g.dims[i];\n            }\n            t[as[0]] = v[0];\n            t[as[1]] = v[1] * scale;\n            values.push(vegaDataflow.ingest(t));\n          });\n        });\n        if (this.value) out.rem = this.value;\n        this.value = out.add = out.source = values;\n      }\n      return out;\n    }\n  });\n\n  /**\n   * Generates a key function.\n   * @constructor\n   * @param {object} params - The parameters for this operator.\n   * @param {Array<string>} params.fields - The field name(s) for the key function.\n   * @param {boolean} params.flat - A boolean flag indicating if the field names\n   *  should be treated as flat property names, side-stepping nested field\n   *  lookups normally indicated by dot or bracket notation.\n   */\n  function Key(params) {\n    vegaDataflow.Operator.call(this, null, update$2, params);\n  }\n  vegaUtil.inherits(Key, vegaDataflow.Operator);\n  function update$2(_) {\n    return this.value && !_.modified() ? this.value : vegaUtil.key(_.fields, _.flat);\n  }\n\n  /**\n   * Load and parse data from an external source. Marshalls parameter\n   * values and then invokes the Dataflow request method.\n   * @constructor\n   * @param {object} params - The parameters for this operator.\n   * @param {string} params.url - The URL to load from.\n   * @param {object} params.format - The data format options.\n   */\n  function Load(params) {\n    vegaDataflow.Transform.call(this, [], params);\n    this._pending = null;\n  }\n  vegaUtil.inherits(Load, vegaDataflow.Transform, {\n    transform(_, pulse) {\n      const df = pulse.dataflow;\n      if (this._pending) {\n        // update state and return pulse\n        return output(this, pulse, this._pending);\n      }\n      if (stop(_)) return pulse.StopPropagation;\n      if (_.values) {\n        // parse and ingest values, return output pulse\n        return output(this, pulse, df.parse(_.values, _.format));\n      } else if (_.async) {\n        // return promise for non-blocking async loading\n        const p = df.request(_.url, _.format).then(res => {\n          this._pending = vegaUtil.array(res.data);\n          return df => df.touch(this);\n        });\n        return {\n          async: p\n        };\n      } else {\n        // return promise for synchronous loading\n        return df.request(_.url, _.format).then(res => output(this, pulse, vegaUtil.array(res.data)));\n      }\n    }\n  });\n  function stop(_) {\n    return _.modified('async') && !(_.modified('values') || _.modified('url') || _.modified('format'));\n  }\n  function output(op, pulse, data) {\n    data.forEach(vegaDataflow.ingest);\n    const out = pulse.fork(pulse.NO_FIELDS & pulse.NO_SOURCE);\n    out.rem = op.value;\n    op.value = out.source = out.add = data;\n    op._pending = null;\n    if (out.rem.length) out.clean(true);\n    return out;\n  }\n\n  /**\n   * Extend tuples by joining them with values from a lookup table.\n   * @constructor\n   * @param {object} params - The parameters for this operator.\n   * @param {Map} params.index - The lookup table map.\n   * @param {Array<function(object): *} params.fields - The fields to lookup.\n   * @param {Array<string>} params.as - Output field names for each lookup value.\n   * @param {*} [params.default] - A default value to use if lookup fails.\n   */\n  function Lookup(params) {\n    vegaDataflow.Transform.call(this, {}, params);\n  }\n  Lookup.Definition = {\n    'type': 'Lookup',\n    'metadata': {\n      'modifies': true\n    },\n    'params': [{\n      'name': 'index',\n      'type': 'index',\n      'params': [{\n        'name': 'from',\n        'type': 'data',\n        'required': true\n      }, {\n        'name': 'key',\n        'type': 'field',\n        'required': true\n      }]\n    }, {\n      'name': 'values',\n      'type': 'field',\n      'array': true\n    }, {\n      'name': 'fields',\n      'type': 'field',\n      'array': true,\n      'required': true\n    }, {\n      'name': 'as',\n      'type': 'string',\n      'array': true\n    }, {\n      'name': 'default',\n      'default': null\n    }]\n  };\n  vegaUtil.inherits(Lookup, vegaDataflow.Transform, {\n    transform(_, pulse) {\n      const keys = _.fields,\n        index = _.index,\n        values = _.values,\n        defaultValue = _.default == null ? null : _.default,\n        reset = _.modified(),\n        n = keys.length;\n      let flag = reset ? pulse.SOURCE : pulse.ADD,\n        out = pulse,\n        as = _.as,\n        set,\n        m,\n        mods;\n      if (values) {\n        m = values.length;\n        if (n > 1 && !as) {\n          vegaUtil.error('Multi-field lookup requires explicit \"as\" parameter.');\n        }\n        if (as && as.length !== n * m) {\n          vegaUtil.error('The \"as\" parameter has too few output field names.');\n        }\n        as = as || values.map(vegaUtil.accessorName);\n        set = function (t) {\n          for (var i = 0, k = 0, j, v; i < n; ++i) {\n            v = index.get(keys[i](t));\n            if (v == null) for (j = 0; j < m; ++j, ++k) t[as[k]] = defaultValue;else for (j = 0; j < m; ++j, ++k) t[as[k]] = values[j](v);\n          }\n        };\n      } else {\n        if (!as) {\n          vegaUtil.error('Missing output field names.');\n        }\n        set = function (t) {\n          for (var i = 0, v; i < n; ++i) {\n            v = index.get(keys[i](t));\n            t[as[i]] = v == null ? defaultValue : v;\n          }\n        };\n      }\n      if (reset) {\n        out = pulse.reflow(true);\n      } else {\n        mods = keys.some(k => pulse.modified(k.fields));\n        flag |= mods ? pulse.MOD : 0;\n      }\n      pulse.visit(flag, set);\n      return out.modifies(as);\n    }\n  });\n\n  /**\n   * Computes global min/max extents over a collection of extents.\n   * @constructor\n   * @param {object} params - The parameters for this operator.\n   * @param {Array<Array<number>>} params.extents - The input extents.\n   */\n  function MultiExtent(params) {\n    vegaDataflow.Operator.call(this, null, update$1, params);\n  }\n  vegaUtil.inherits(MultiExtent, vegaDataflow.Operator);\n  function update$1(_) {\n    if (this.value && !_.modified()) {\n      return this.value;\n    }\n    const ext = _.extents,\n      n = ext.length;\n    let min = +Infinity,\n      max = -Infinity,\n      i,\n      e;\n    for (i = 0; i < n; ++i) {\n      e = ext[i];\n      if (e[0] < min) min = e[0];\n      if (e[1] > max) max = e[1];\n    }\n    return [min, max];\n  }\n\n  /**\n   * Merge a collection of value arrays.\n   * @constructor\n   * @param {object} params - The parameters for this operator.\n   * @param {Array<Array<*>>} params.values - The input value arrrays.\n   */\n  function MultiValues(params) {\n    vegaDataflow.Operator.call(this, null, update, params);\n  }\n  vegaUtil.inherits(MultiValues, vegaDataflow.Operator);\n  function update(_) {\n    return this.value && !_.modified() ? this.value : _.values.reduce((data, _) => data.concat(_), []);\n  }\n\n  /**\n   * Operator whose value is simply its parameter hash. This operator is\n   * useful for enabling reactive updates to values of nested objects.\n   * @constructor\n   * @param {object} params - The parameters for this operator.\n   */\n  function Params(params) {\n    vegaDataflow.Transform.call(this, null, params);\n  }\n  vegaUtil.inherits(Params, vegaDataflow.Transform, {\n    transform(_, pulse) {\n      this.modified(_.modified());\n      this.value = _;\n      return pulse.fork(pulse.NO_SOURCE | pulse.NO_FIELDS); // do not pass tuples\n    }\n  });\n\n  /**\n   * Aggregate and pivot selected field values to become new fields.\n   * This operator is useful to construction cross-tabulations.\n   * @constructor\n   * @param {Array<function(object): *>} [params.groupby] - An array of accessors\n   *  to groupby. These fields act just like groupby fields of an Aggregate transform.\n   * @param {function(object): *} params.field - The field to pivot on. The unique\n   *  values of this field become new field names in the output stream.\n   * @param {function(object): *} params.value - The field to populate pivoted fields.\n   *  The aggregate values of this field become the values of the new pivoted fields.\n   * @param {string} [params.op] - The aggregation operation for the value field,\n   *  applied per cell in the output stream. The default is \"sum\".\n   * @param {number} [params.limit] - An optional parameter indicating the maximum\n   *  number of pivoted fields to generate. The pivoted field names are sorted in\n   *  ascending order prior to enforcing the limit.\n   */\n  function Pivot(params) {\n    Aggregate.call(this, params);\n  }\n  Pivot.Definition = {\n    'type': 'Pivot',\n    'metadata': {\n      'generates': true,\n      'changes': true\n    },\n    'params': [{\n      'name': 'groupby',\n      'type': 'field',\n      'array': true\n    }, {\n      'name': 'field',\n      'type': 'field',\n      'required': true\n    }, {\n      'name': 'value',\n      'type': 'field',\n      'required': true\n    }, {\n      'name': 'op',\n      'type': 'enum',\n      'values': ValidAggregateOps,\n      'default': 'sum'\n    }, {\n      'name': 'limit',\n      'type': 'number',\n      'default': 0\n    }, {\n      'name': 'key',\n      'type': 'field'\n    }]\n  };\n  vegaUtil.inherits(Pivot, Aggregate, {\n    _transform: Aggregate.prototype.transform,\n    transform(_, pulse) {\n      return this._transform(aggregateParams(_, pulse), pulse);\n    }\n  });\n\n  // Shoehorn a pivot transform into an aggregate transform!\n  // First collect all unique pivot field values.\n  // Then generate aggregate fields for each output pivot field.\n  function aggregateParams(_, pulse) {\n    const key = _.field,\n      value = _.value,\n      op = (_.op === 'count' ? '__count__' : _.op) || 'sum',\n      fields = vegaUtil.accessorFields(key).concat(vegaUtil.accessorFields(value)),\n      keys = pivotKeys(key, _.limit || 0, pulse);\n\n    // if data stream content changes, pivot fields may change\n    // flag parameter modification to ensure re-initialization\n    if (pulse.changed()) _.set('__pivot__', null, null, true);\n    return {\n      key: _.key,\n      groupby: _.groupby,\n      ops: keys.map(() => op),\n      fields: keys.map(k => get(k, key, value, fields)),\n      as: keys.map(k => k + ''),\n      modified: _.modified.bind(_)\n    };\n  }\n\n  // Generate aggregate field accessor.\n  // Output NaN for non-existent values; aggregator will ignore!\n  function get(k, key, value, fields) {\n    return vegaUtil.accessor(d => key(d) === k ? value(d) : NaN, fields, k + '');\n  }\n\n  // Collect (and optionally limit) all unique pivot values.\n  function pivotKeys(key, limit, pulse) {\n    const map = {},\n      list = [];\n    pulse.visit(pulse.SOURCE, t => {\n      const k = key(t);\n      if (!map[k]) {\n        map[k] = 1;\n        list.push(k);\n      }\n    });\n    list.sort(vegaUtil.ascending);\n    return limit ? list.slice(0, limit) : list;\n  }\n\n  /**\n   * Partitions pre-faceted data into tuple subflows.\n   * @constructor\n   * @param {object} params - The parameters for this operator.\n   * @param {function(Dataflow, string): Operator} params.subflow - A function\n   *   that generates a subflow of operators and returns its root operator.\n   * @param {function(object): Array<object>} params.field - The field\n   *   accessor for an array of subflow tuple objects.\n   */\n  function PreFacet(params) {\n    Facet.call(this, params);\n  }\n  vegaUtil.inherits(PreFacet, Facet, {\n    transform(_, pulse) {\n      const flow = _.subflow,\n        field = _.field,\n        subflow = t => this.subflow(vegaDataflow.tupleid(t), flow, pulse, t);\n      if (_.modified('field') || field && pulse.modified(vegaUtil.accessorFields(field))) {\n        vegaUtil.error('PreFacet does not support field modification.');\n      }\n      this.initTargets(); // reset list of active subflows\n\n      if (field) {\n        pulse.visit(pulse.MOD, t => {\n          const sf = subflow(t);\n          field(t).forEach(_ => sf.mod(_));\n        });\n        pulse.visit(pulse.ADD, t => {\n          const sf = subflow(t);\n          field(t).forEach(_ => sf.add(vegaDataflow.ingest(_)));\n        });\n        pulse.visit(pulse.REM, t => {\n          const sf = subflow(t);\n          field(t).forEach(_ => sf.rem(_));\n        });\n      } else {\n        pulse.visit(pulse.MOD, t => subflow(t).mod(t));\n        pulse.visit(pulse.ADD, t => subflow(t).add(t));\n        pulse.visit(pulse.REM, t => subflow(t).rem(t));\n      }\n      if (pulse.clean()) {\n        pulse.runAfter(() => this.clean());\n      }\n      return pulse;\n    }\n  });\n\n  /**\n   * Performs a relational projection, copying selected fields from source\n   * tuples to a new set of derived tuples.\n   * @constructor\n   * @param {object} params - The parameters for this operator.\n   * @param {Array<function(object): *} params.fields - The fields to project,\n   *   as an array of field accessors. If unspecified, all fields will be\n   *   copied with names unchanged.\n   * @param {Array<string>} [params.as] - Output field names for each projected\n   *   field. Any unspecified fields will use the field name provided by\n   *   the field accessor.\n   */\n  function Project(params) {\n    vegaDataflow.Transform.call(this, null, params);\n  }\n  Project.Definition = {\n    'type': 'Project',\n    'metadata': {\n      'generates': true,\n      'changes': true\n    },\n    'params': [{\n      'name': 'fields',\n      'type': 'field',\n      'array': true\n    }, {\n      'name': 'as',\n      'type': 'string',\n      'null': true,\n      'array': true\n    }]\n  };\n  vegaUtil.inherits(Project, vegaDataflow.Transform, {\n    transform(_, pulse) {\n      const out = pulse.fork(pulse.NO_SOURCE),\n        fields = _.fields,\n        as = fieldNames(_.fields, _.as || []),\n        derive = fields ? (s, t) => project(s, t, fields, as) : vegaDataflow.rederive;\n      let lut;\n      if (this.value) {\n        lut = this.value;\n      } else {\n        pulse = pulse.addAll();\n        lut = this.value = {};\n      }\n      pulse.visit(pulse.REM, t => {\n        const id = vegaDataflow.tupleid(t);\n        out.rem.push(lut[id]);\n        lut[id] = null;\n      });\n      pulse.visit(pulse.ADD, t => {\n        const dt = derive(t, vegaDataflow.ingest({}));\n        lut[vegaDataflow.tupleid(t)] = dt;\n        out.add.push(dt);\n      });\n      pulse.visit(pulse.MOD, t => {\n        out.mod.push(derive(t, lut[vegaDataflow.tupleid(t)]));\n      });\n      return out;\n    }\n  });\n  function project(s, t, fields, as) {\n    for (let i = 0, n = fields.length; i < n; ++i) {\n      t[as[i]] = fields[i](s);\n    }\n    return t;\n  }\n\n  /**\n   * Proxy the value of another operator as a pure signal value.\n   * Ensures no tuples are propagated.\n   * @constructor\n   * @param {object} params - The parameters for this operator.\n   * @param {*} params.value - The value to proxy, becomes the value of this operator.\n   */\n  function Proxy(params) {\n    vegaDataflow.Transform.call(this, null, params);\n  }\n  vegaUtil.inherits(Proxy, vegaDataflow.Transform, {\n    transform(_, pulse) {\n      this.value = _.value;\n      return _.modified('value') ? pulse.fork(pulse.NO_SOURCE | pulse.NO_FIELDS) : pulse.StopPropagation;\n    }\n  });\n\n  /**\n   * Generates sample quantile values from an input data stream.\n   * @constructor\n   * @param {object} params - The parameters for this operator.\n   * @param {function(object): *} params.field - An accessor for the data field\n   *   over which to calculate quantile values.\n   * @param {Array<function(object): *>} [params.groupby] - An array of accessors\n   *   to groupby.\n   * @param {Array<number>} [params.probs] - An array of probabilities in\n   *   the range (0, 1) for which to compute quantile values. If not specified,\n   *   the *step* parameter will be used.\n   * @param {Array<number>} [params.step=0.01] - A probability step size for\n   *   sampling quantile values. All values from one-half the step size up to\n   *   1 (exclusive) will be sampled. This parameter is only used if the\n   *   *quantiles* parameter is not provided.\n   */\n  function Quantile(params) {\n    vegaDataflow.Transform.call(this, null, params);\n  }\n  Quantile.Definition = {\n    'type': 'Quantile',\n    'metadata': {\n      'generates': true,\n      'changes': true\n    },\n    'params': [{\n      'name': 'groupby',\n      'type': 'field',\n      'array': true\n    }, {\n      'name': 'field',\n      'type': 'field',\n      'required': true\n    }, {\n      'name': 'probs',\n      'type': 'number',\n      'array': true\n    }, {\n      'name': 'step',\n      'type': 'number',\n      'default': 0.01\n    }, {\n      'name': 'as',\n      'type': 'string',\n      'array': true,\n      'default': ['prob', 'value']\n    }]\n  };\n  const EPSILON = 1e-14;\n  vegaUtil.inherits(Quantile, vegaDataflow.Transform, {\n    transform(_, pulse) {\n      const out = pulse.fork(pulse.NO_SOURCE | pulse.NO_FIELDS),\n        as = _.as || ['prob', 'value'];\n      if (this.value && !_.modified() && !pulse.changed()) {\n        out.source = this.value;\n        return out;\n      }\n      const source = pulse.materialize(pulse.SOURCE).source,\n        groups = partition$1(source, _.groupby, _.field),\n        names = (_.groupby || []).map(vegaUtil.accessorName),\n        values = [],\n        step = _.step || 0.01,\n        p = _.probs || range(step / 2, 1 - EPSILON, step),\n        n = p.length;\n      groups.forEach(g => {\n        const q = vegaStatistics.quantiles(g, p);\n        for (let i = 0; i < n; ++i) {\n          const t = {};\n          for (let i = 0; i < names.length; ++i) {\n            t[names[i]] = g.dims[i];\n          }\n          t[as[0]] = p[i];\n          t[as[1]] = q[i];\n          values.push(vegaDataflow.ingest(t));\n        }\n      });\n      if (this.value) out.rem = this.value;\n      this.value = out.add = out.source = values;\n      return out;\n    }\n  });\n\n  /**\n   * Relays a data stream between data processing pipelines.\n   * If the derive parameter is set, this transform will create derived\n   * copies of observed tuples. This provides derived data streams in which\n   * modifications to the tuples do not pollute an upstream data source.\n   * @param {object} params - The parameters for this operator.\n   * @param {number} [params.derive=false] - Boolean flag indicating if\n   *   the transform should make derived copies of incoming tuples.\n   * @constructor\n   */\n  function Relay(params) {\n    vegaDataflow.Transform.call(this, null, params);\n  }\n  vegaUtil.inherits(Relay, vegaDataflow.Transform, {\n    transform(_, pulse) {\n      let out, lut;\n      if (this.value) {\n        lut = this.value;\n      } else {\n        out = pulse = pulse.addAll();\n        lut = this.value = {};\n      }\n      if (_.derive) {\n        out = pulse.fork(pulse.NO_SOURCE);\n        pulse.visit(pulse.REM, t => {\n          const id = vegaDataflow.tupleid(t);\n          out.rem.push(lut[id]);\n          lut[id] = null;\n        });\n        pulse.visit(pulse.ADD, t => {\n          const dt = vegaDataflow.derive(t);\n          lut[vegaDataflow.tupleid(t)] = dt;\n          out.add.push(dt);\n        });\n        pulse.visit(pulse.MOD, t => {\n          const dt = lut[vegaDataflow.tupleid(t)];\n          for (const k in t) {\n            dt[k] = t[k];\n            // down stream writes may overwrite re-derived tuples\n            // conservatively mark all source fields as modified\n            out.modifies(k);\n          }\n          out.mod.push(dt);\n        });\n      }\n      return out;\n    }\n  });\n\n  /**\n   * Samples tuples passing through this operator.\n   * Uses reservoir sampling to maintain a representative sample.\n   * @constructor\n   * @param {object} params - The parameters for this operator.\n   * @param {number} [params.size=1000] - The maximum number of samples.\n   */\n  function Sample(params) {\n    vegaDataflow.Transform.call(this, [], params);\n    this.count = 0;\n  }\n  Sample.Definition = {\n    'type': 'Sample',\n    'metadata': {},\n    'params': [{\n      'name': 'size',\n      'type': 'number',\n      'default': 1000\n    }]\n  };\n  vegaUtil.inherits(Sample, vegaDataflow.Transform, {\n    transform(_, pulse) {\n      const out = pulse.fork(pulse.NO_SOURCE),\n        mod = _.modified('size'),\n        num = _.size,\n        map = this.value.reduce((m, t) => (m[vegaDataflow.tupleid(t)] = 1, m), {});\n      let res = this.value,\n        cnt = this.count,\n        cap = 0;\n\n      // sample reservoir update function\n      function update(t) {\n        let p, idx;\n        if (res.length < num) {\n          res.push(t);\n        } else {\n          idx = ~~((cnt + 1) * vegaStatistics.random());\n          if (idx < res.length && idx >= cap) {\n            p = res[idx];\n            if (map[vegaDataflow.tupleid(p)]) out.rem.push(p); // eviction\n            res[idx] = t;\n          }\n        }\n        ++cnt;\n      }\n      if (pulse.rem.length) {\n        // find all tuples that should be removed, add to output\n        pulse.visit(pulse.REM, t => {\n          const id = vegaDataflow.tupleid(t);\n          if (map[id]) {\n            map[id] = -1;\n            out.rem.push(t);\n          }\n          --cnt;\n        });\n\n        // filter removed tuples out of the sample reservoir\n        res = res.filter(t => map[vegaDataflow.tupleid(t)] !== -1);\n      }\n      if ((pulse.rem.length || mod) && res.length < num && pulse.source) {\n        // replenish sample if backing data source is available\n        cap = cnt = res.length;\n        pulse.visit(pulse.SOURCE, t => {\n          // update, but skip previously sampled tuples\n          if (!map[vegaDataflow.tupleid(t)]) update(t);\n        });\n        cap = -1;\n      }\n      if (mod && res.length > num) {\n        const n = res.length - num;\n        for (let i = 0; i < n; ++i) {\n          map[vegaDataflow.tupleid(res[i])] = -1;\n          out.rem.push(res[i]);\n        }\n        res = res.slice(n);\n      }\n      if (pulse.mod.length) {\n        // propagate modified tuples in the sample reservoir\n        pulse.visit(pulse.MOD, t => {\n          if (map[vegaDataflow.tupleid(t)]) out.mod.push(t);\n        });\n      }\n      if (pulse.add.length) {\n        // update sample reservoir\n        pulse.visit(pulse.ADD, update);\n      }\n      if (pulse.add.length || cap < 0) {\n        // output newly added tuples\n        out.add = res.filter(t => !map[vegaDataflow.tupleid(t)]);\n      }\n      this.count = cnt;\n      this.value = out.source = res;\n      return out;\n    }\n  });\n\n  /**\n   * Generates data tuples for a specified sequence range of numbers.\n   * @constructor\n   * @param {object} params - The parameters for this operator.\n   * @param {number} params.start - The first number in the sequence.\n   * @param {number} params.stop - The last number (exclusive) in the sequence.\n   * @param {number} [params.step=1] - The step size between numbers in the sequence.\n   */\n  function Sequence(params) {\n    vegaDataflow.Transform.call(this, null, params);\n  }\n  Sequence.Definition = {\n    'type': 'Sequence',\n    'metadata': {\n      'generates': true,\n      'changes': true\n    },\n    'params': [{\n      'name': 'start',\n      'type': 'number',\n      'required': true\n    }, {\n      'name': 'stop',\n      'type': 'number',\n      'required': true\n    }, {\n      'name': 'step',\n      'type': 'number',\n      'default': 1\n    }, {\n      'name': 'as',\n      'type': 'string',\n      'default': 'data'\n    }]\n  };\n  vegaUtil.inherits(Sequence, vegaDataflow.Transform, {\n    transform(_, pulse) {\n      if (this.value && !_.modified()) return;\n      const out = pulse.materialize().fork(pulse.MOD),\n        as = _.as || 'data';\n      out.rem = this.value ? pulse.rem.concat(this.value) : pulse.rem;\n      this.value = range(_.start, _.stop, _.step || 1).map(v => {\n        const t = {};\n        t[as] = v;\n        return vegaDataflow.ingest(t);\n      });\n      out.add = pulse.add.concat(this.value);\n      return out;\n    }\n  });\n\n  /**\n   * Propagates a new pulse without any tuples so long as the input\n   * pulse contains some added, removed or modified tuples.\n   * @param {object} params - The parameters for this operator.\n   * @constructor\n   */\n  function Sieve(params) {\n    vegaDataflow.Transform.call(this, null, params);\n    this.modified(true); // always treat as modified\n  }\n  vegaUtil.inherits(Sieve, vegaDataflow.Transform, {\n    transform(_, pulse) {\n      this.value = pulse.source;\n      return pulse.changed() ? pulse.fork(pulse.NO_SOURCE | pulse.NO_FIELDS) : pulse.StopPropagation;\n    }\n  });\n\n  /**\n   * Discretize dates to specific time units.\n   * @constructor\n   * @param {object} params - The parameters for this operator.\n   * @param {function(object): *} params.field - The data field containing date/time values.\n   */\n  function TimeUnit(params) {\n    vegaDataflow.Transform.call(this, null, params);\n  }\n  const OUTPUT = ['unit0', 'unit1'];\n  TimeUnit.Definition = {\n    'type': 'TimeUnit',\n    'metadata': {\n      'modifies': true\n    },\n    'params': [{\n      'name': 'field',\n      'type': 'field',\n      'required': true\n    }, {\n      'name': 'interval',\n      'type': 'boolean',\n      'default': true\n    }, {\n      'name': 'units',\n      'type': 'enum',\n      'values': vegaTime.TIME_UNITS,\n      'array': true\n    }, {\n      'name': 'step',\n      'type': 'number',\n      'default': 1\n    }, {\n      'name': 'maxbins',\n      'type': 'number',\n      'default': 40\n    }, {\n      'name': 'extent',\n      'type': 'date',\n      'array': true\n    }, {\n      'name': 'timezone',\n      'type': 'enum',\n      'default': 'local',\n      'values': ['local', 'utc']\n    }, {\n      'name': 'as',\n      'type': 'string',\n      'array': true,\n      'length': 2,\n      'default': OUTPUT\n    }]\n  };\n  vegaUtil.inherits(TimeUnit, vegaDataflow.Transform, {\n    transform(_, pulse) {\n      const field = _.field,\n        band = _.interval !== false,\n        utc = _.timezone === 'utc',\n        floor = this._floor(_, pulse),\n        offset = (utc ? vegaTime.utcInterval : vegaTime.timeInterval)(floor.unit).offset,\n        as = _.as || OUTPUT,\n        u0 = as[0],\n        u1 = as[1],\n        step = floor.step;\n      let min = floor.start || Infinity,\n        max = floor.stop || -Infinity,\n        flag = pulse.ADD;\n      if (_.modified() || pulse.changed(pulse.REM) || pulse.modified(vegaUtil.accessorFields(field))) {\n        pulse = pulse.reflow(true);\n        flag = pulse.SOURCE;\n        min = Infinity;\n        max = -Infinity;\n      }\n      pulse.visit(flag, t => {\n        const v = field(t);\n        let a, b;\n        if (v == null) {\n          t[u0] = null;\n          if (band) t[u1] = null;\n        } else {\n          t[u0] = a = b = floor(v);\n          if (band) t[u1] = b = offset(a, step);\n          if (a < min) min = a;\n          if (b > max) max = b;\n        }\n      });\n      floor.start = min;\n      floor.stop = max;\n      return pulse.modifies(band ? as : u0);\n    },\n    _floor(_, pulse) {\n      const utc = _.timezone === 'utc';\n\n      // get parameters\n      const {\n        units,\n        step\n      } = _.units ? {\n        units: _.units,\n        step: _.step || 1\n      } : vegaTime.timeBin({\n        extent: _.extent || vegaUtil.extent(pulse.materialize(pulse.SOURCE).source, _.field),\n        maxbins: _.maxbins\n      });\n\n      // check / standardize time units\n      const tunits = vegaTime.timeUnits(units),\n        prev = this.value || {},\n        floor = (utc ? vegaTime.utcFloor : vegaTime.timeFloor)(tunits, step);\n      floor.unit = vegaUtil.peek(tunits);\n      floor.units = tunits;\n      floor.step = step;\n      floor.start = prev.start;\n      floor.stop = prev.stop;\n      return this.value = floor;\n    }\n  });\n\n  /**\n   * An index that maps from unique, string-coerced, field values to tuples.\n   * Assumes that the field serves as a unique key with no duplicate values.\n   * @constructor\n   * @param {object} params - The parameters for this operator.\n   * @param {function(object): *} params.field - The field accessor to index.\n   */\n  function TupleIndex(params) {\n    vegaDataflow.Transform.call(this, vegaUtil.fastmap(), params);\n  }\n  vegaUtil.inherits(TupleIndex, vegaDataflow.Transform, {\n    transform(_, pulse) {\n      const df = pulse.dataflow,\n        field = _.field,\n        index = this.value,\n        set = t => index.set(field(t), t);\n      let mod = true;\n      if (_.modified('field') || pulse.modified(field.fields)) {\n        index.clear();\n        pulse.visit(pulse.SOURCE, set);\n      } else if (pulse.changed()) {\n        pulse.visit(pulse.REM, t => index.delete(field(t)));\n        pulse.visit(pulse.ADD, set);\n      } else {\n        mod = false;\n      }\n      this.modified(mod);\n      if (index.empty > df.cleanThreshold) df.runAfter(index.clean);\n      return pulse.fork();\n    }\n  });\n\n  /**\n   * Extracts an array of values. Assumes the source data has already been\n   * reduced as needed (e.g., by an upstream Aggregate transform).\n   * @constructor\n   * @param {object} params - The parameters for this operator.\n   * @param {function(object): *} params.field - The domain field to extract.\n   * @param {function(*,*): number} [params.sort] - An optional\n   *   comparator function for sorting the values. The comparator will be\n   *   applied to backing tuples prior to value extraction.\n   */\n  function Values(params) {\n    vegaDataflow.Transform.call(this, null, params);\n  }\n  vegaUtil.inherits(Values, vegaDataflow.Transform, {\n    transform(_, pulse) {\n      const run = !this.value || _.modified('field') || _.modified('sort') || pulse.changed() || _.sort && pulse.modified(_.sort.fields);\n      if (run) {\n        this.value = (_.sort ? pulse.source.slice().sort(vegaDataflow.stableCompare(_.sort)) : pulse.source).map(_.field);\n      }\n    }\n  });\n\n  function WindowOp(op, field, param, as) {\n    const fn = WindowOps[op](field, param);\n    return {\n      init: fn.init || vegaUtil.zero,\n      update: function (w, t) {\n        t[as] = fn.next(w);\n      }\n    };\n  }\n  const WindowOps = {\n    row_number: function () {\n      return {\n        next: w => w.index + 1\n      };\n    },\n    rank: function () {\n      let rank;\n      return {\n        init: () => rank = 1,\n        next: w => {\n          const i = w.index,\n            data = w.data;\n          return i && w.compare(data[i - 1], data[i]) ? rank = i + 1 : rank;\n        }\n      };\n    },\n    dense_rank: function () {\n      let drank;\n      return {\n        init: () => drank = 1,\n        next: w => {\n          const i = w.index,\n            d = w.data;\n          return i && w.compare(d[i - 1], d[i]) ? ++drank : drank;\n        }\n      };\n    },\n    percent_rank: function () {\n      const rank = WindowOps.rank(),\n        next = rank.next;\n      return {\n        init: rank.init,\n        next: w => (next(w) - 1) / (w.data.length - 1)\n      };\n    },\n    cume_dist: function () {\n      let cume;\n      return {\n        init: () => cume = 0,\n        next: w => {\n          const d = w.data,\n            c = w.compare;\n          let i = w.index;\n          if (cume < i) {\n            while (i + 1 < d.length && !c(d[i], d[i + 1])) ++i;\n            cume = i;\n          }\n          return (1 + cume) / d.length;\n        }\n      };\n    },\n    ntile: function (field, num) {\n      num = +num;\n      if (!(num > 0)) vegaUtil.error('ntile num must be greater than zero.');\n      const cume = WindowOps.cume_dist(),\n        next = cume.next;\n      return {\n        init: cume.init,\n        next: w => Math.ceil(num * next(w))\n      };\n    },\n    lag: function (field, offset) {\n      offset = +offset || 1;\n      return {\n        next: w => {\n          const i = w.index - offset;\n          return i >= 0 ? field(w.data[i]) : null;\n        }\n      };\n    },\n    lead: function (field, offset) {\n      offset = +offset || 1;\n      return {\n        next: w => {\n          const i = w.index + offset,\n            d = w.data;\n          return i < d.length ? field(d[i]) : null;\n        }\n      };\n    },\n    first_value: function (field) {\n      return {\n        next: w => field(w.data[w.i0])\n      };\n    },\n    last_value: function (field) {\n      return {\n        next: w => field(w.data[w.i1 - 1])\n      };\n    },\n    nth_value: function (field, nth) {\n      nth = +nth;\n      if (!(nth > 0)) vegaUtil.error('nth_value nth must be greater than zero.');\n      return {\n        next: w => {\n          const i = w.i0 + (nth - 1);\n          return i < w.i1 ? field(w.data[i]) : null;\n        }\n      };\n    },\n    prev_value: function (field) {\n      let prev;\n      return {\n        init: () => prev = null,\n        next: w => {\n          const v = field(w.data[w.index]);\n          return v != null ? prev = v : prev;\n        }\n      };\n    },\n    next_value: function (field) {\n      let v, i;\n      return {\n        init: () => (v = null, i = -1),\n        next: w => {\n          const d = w.data;\n          return w.index <= i ? v : (i = find(field, d, w.index)) < 0 ? (i = d.length, v = null) : v = field(d[i]);\n        }\n      };\n    }\n  };\n  function find(field, data, index) {\n    for (let n = data.length; index < n; ++index) {\n      const v = field(data[index]);\n      if (v != null) return index;\n    }\n    return -1;\n  }\n  const ValidWindowOps = Object.keys(WindowOps);\n\n  function WindowState(_) {\n    const ops = vegaUtil.array(_.ops),\n      fields = vegaUtil.array(_.fields),\n      params = vegaUtil.array(_.params),\n      aggregate_params = vegaUtil.array(_.aggregate_params),\n      as = vegaUtil.array(_.as),\n      outputs = this.outputs = [],\n      windows = this.windows = [],\n      inputs = {},\n      map = {},\n      counts = [],\n      measures = [];\n    let countOnly = true;\n    function visitInputs(f) {\n      vegaUtil.array(vegaUtil.accessorFields(f)).forEach(_ => inputs[_] = 1);\n    }\n    visitInputs(_.sort);\n    ops.forEach((op, i) => {\n      const field = fields[i],\n        param = params[i],\n        aggregate_param = aggregate_params[i] || null,\n        mname = vegaUtil.accessorName(field),\n        name = measureName(op, mname, as[i]);\n      visitInputs(field);\n      outputs.push(name);\n\n      // Window operation\n      if (vegaUtil.hasOwnProperty(WindowOps, op)) {\n        windows.push(WindowOp(op, field, param, name));\n      }\n\n      // Aggregate operation\n      else {\n        if (field == null && op !== 'count') {\n          vegaUtil.error('Null aggregate field specified.');\n        }\n        if (op === 'count') {\n          counts.push(name);\n          return;\n        }\n        countOnly = false;\n        let m = map[mname];\n        if (!m) {\n          m = map[mname] = [];\n          m.field = field;\n          measures.push(m);\n        }\n        m.push(createMeasure(op, aggregate_param, name));\n      }\n    });\n    if (counts.length || measures.length) {\n      this.cell = cell(measures, counts, countOnly);\n    }\n    this.inputs = Object.keys(inputs);\n  }\n  const prototype = WindowState.prototype;\n  prototype.init = function () {\n    this.windows.forEach(_ => _.init());\n    if (this.cell) this.cell.init();\n  };\n  prototype.update = function (w, t) {\n    const cell = this.cell,\n      wind = this.windows,\n      data = w.data,\n      m = wind && wind.length;\n    let j;\n    if (cell) {\n      for (j = w.p0; j < w.i0; ++j) cell.rem(data[j]);\n      for (j = w.p1; j < w.i1; ++j) cell.add(data[j]);\n      cell.set(t);\n    }\n    for (j = 0; j < m; ++j) wind[j].update(w, t);\n  };\n  function cell(measures, counts, countOnly) {\n    measures = measures.map(m => compileMeasures(m, m.field));\n    const cell = {\n      num: 0,\n      agg: null,\n      store: false,\n      count: counts\n    };\n    if (!countOnly) {\n      var n = measures.length,\n        a = cell.agg = Array(n),\n        i = 0;\n      for (; i < n; ++i) a[i] = new measures[i](cell);\n    }\n    if (cell.store) {\n      var store = cell.data = new TupleStore();\n    }\n    cell.add = function (t) {\n      cell.num += 1;\n      if (countOnly) return;\n      if (store) store.add(t);\n      for (let i = 0; i < n; ++i) {\n        a[i].add(a[i].get(t), t);\n      }\n    };\n    cell.rem = function (t) {\n      cell.num -= 1;\n      if (countOnly) return;\n      if (store) store.rem(t);\n      for (let i = 0; i < n; ++i) {\n        a[i].rem(a[i].get(t), t);\n      }\n    };\n    cell.set = function (t) {\n      let i, n;\n\n      // consolidate stored values\n      if (store) store.values();\n\n      // update tuple properties\n      for (i = 0, n = counts.length; i < n; ++i) t[counts[i]] = cell.num;\n      if (!countOnly) for (i = 0, n = a.length; i < n; ++i) a[i].set(t);\n    };\n    cell.init = function () {\n      cell.num = 0;\n      if (store) store.reset();\n      for (let i = 0; i < n; ++i) a[i].init();\n    };\n    return cell;\n  }\n\n  /**\n   * Perform window calculations and write results to the input stream.\n   * @constructor\n   * @param {object} params - The parameters for this operator.\n   * @param {function(*,*): number} [params.sort] - A comparator function for sorting tuples within a window.\n   * @param {Array<function(object): *>} [params.groupby] - An array of accessors by which to partition tuples into separate windows.\n   * @param {Array<string>} params.ops - An array of strings indicating window operations to perform.\n   * @param {Array<function(object): *>} [params.fields] - An array of accessors\n   *   for data fields to use as inputs to window operations.\n   * @param {Array<*>} [params.params] - An array of parameter values for window operations.\n   * @param {Array<number>} [params.aggregate_params] - An optional array of parameter values for aggregation operations.\n   * @param {Array<string>} [params.as] - An array of output field names for window operations.\n   * @param {Array<number>} [params.frame] - Window frame definition as two-element array.\n   * @param {boolean} [params.ignorePeers=false] - If true, base window frame boundaries on row\n   *   number alone, ignoring peers with identical sort values. If false (default),\n   *   the window boundaries will be adjusted to include peer values.\n   */\n  function Window(params) {\n    vegaDataflow.Transform.call(this, {}, params);\n    this._mlen = 0;\n    this._mods = [];\n  }\n  Window.Definition = {\n    'type': 'Window',\n    'metadata': {\n      'modifies': true\n    },\n    'params': [{\n      'name': 'sort',\n      'type': 'compare'\n    }, {\n      'name': 'groupby',\n      'type': 'field',\n      'array': true\n    }, {\n      'name': 'ops',\n      'type': 'enum',\n      'array': true,\n      'values': ValidWindowOps.concat(ValidAggregateOps)\n    }, {\n      'name': 'params',\n      'type': 'number',\n      'null': true,\n      'array': true\n    }, {\n      'name': 'aggregate_params',\n      'type': 'number',\n      'null': true,\n      'array': true\n    }, {\n      'name': 'fields',\n      'type': 'field',\n      'null': true,\n      'array': true\n    }, {\n      'name': 'as',\n      'type': 'string',\n      'null': true,\n      'array': true\n    }, {\n      'name': 'frame',\n      'type': 'number',\n      'null': true,\n      'array': true,\n      'length': 2,\n      'default': [null, 0]\n    }, {\n      'name': 'ignorePeers',\n      'type': 'boolean',\n      'default': false\n    }]\n  };\n  vegaUtil.inherits(Window, vegaDataflow.Transform, {\n    transform(_, pulse) {\n      this.stamp = pulse.stamp;\n      const mod = _.modified(),\n        cmp = vegaDataflow.stableCompare(_.sort),\n        key = groupkey(_.groupby),\n        group = t => this.group(key(t));\n\n      // initialize window state\n      let state = this.state;\n      if (!state || mod) {\n        state = this.state = new WindowState(_);\n      }\n\n      // partition input tuples\n      if (mod || pulse.modified(state.inputs)) {\n        this.value = {};\n        pulse.visit(pulse.SOURCE, t => group(t).add(t));\n      } else {\n        pulse.visit(pulse.REM, t => group(t).remove(t));\n        pulse.visit(pulse.ADD, t => group(t).add(t));\n      }\n\n      // perform window calculations for each modified partition\n      for (let i = 0, n = this._mlen; i < n; ++i) {\n        processPartition(this._mods[i], state, cmp, _);\n      }\n      this._mlen = 0;\n      this._mods = [];\n\n      // TODO don't reflow everything?\n      return pulse.reflow(mod).modifies(state.outputs);\n    },\n    group(key) {\n      let group = this.value[key];\n      if (!group) {\n        group = this.value[key] = SortedList(vegaDataflow.tupleid);\n        group.stamp = -1;\n      }\n      if (group.stamp < this.stamp) {\n        group.stamp = this.stamp;\n        this._mods[this._mlen++] = group;\n      }\n      return group;\n    }\n  });\n  function processPartition(list, state, cmp, _) {\n    const sort = _.sort,\n      range = sort && !_.ignorePeers,\n      frame = _.frame || [null, 0],\n      data = list.data(cmp),\n      // use cmp for stable sort\n      n = data.length,\n      b = range ? bisector(sort) : null,\n      w = {\n        i0: 0,\n        i1: 0,\n        p0: 0,\n        p1: 0,\n        index: 0,\n        data: data,\n        compare: sort || vegaUtil.constant(-1)\n      };\n    state.init();\n    for (let i = 0; i < n; ++i) {\n      setWindow(w, frame, i, n);\n      if (range) adjustRange(w, b);\n      state.update(w, data[i]);\n    }\n  }\n  function setWindow(w, f, i, n) {\n    w.p0 = w.i0;\n    w.p1 = w.i1;\n    w.i0 = f[0] == null ? 0 : Math.max(0, i - Math.abs(f[0]));\n    w.i1 = f[1] == null ? n : Math.min(n, i + Math.abs(f[1]) + 1);\n    w.index = i;\n  }\n\n  // if frame type is 'range', adjust window for peer values\n  function adjustRange(w, bisect) {\n    const r0 = w.i0,\n      r1 = w.i1 - 1,\n      c = w.compare,\n      d = w.data,\n      n = d.length - 1;\n    if (r0 > 0 && !c(d[r0], d[r0 - 1])) w.i0 = bisect.left(d, d[r0]);\n    if (r1 < n && !c(d[r1], d[r1 + 1])) w.i1 = bisect.right(d, d[r1]);\n  }\n\n  exports.aggregate = Aggregate;\n  exports.bin = Bin;\n  exports.collect = Collect;\n  exports.compare = Compare;\n  exports.countpattern = CountPattern;\n  exports.cross = Cross;\n  exports.density = Density;\n  exports.dotbin = DotBin;\n  exports.expression = Expression;\n  exports.extent = Extent;\n  exports.facet = Facet;\n  exports.field = Field;\n  exports.filter = Filter;\n  exports.flatten = Flatten;\n  exports.fold = Fold;\n  exports.formula = Formula;\n  exports.generate = Generate;\n  exports.impute = Impute;\n  exports.joinaggregate = JoinAggregate;\n  exports.kde = KDE;\n  exports.key = Key;\n  exports.load = Load;\n  exports.lookup = Lookup;\n  exports.multiextent = MultiExtent;\n  exports.multivalues = MultiValues;\n  exports.params = Params;\n  exports.pivot = Pivot;\n  exports.prefacet = PreFacet;\n  exports.project = Project;\n  exports.proxy = Proxy;\n  exports.quantile = Quantile;\n  exports.relay = Relay;\n  exports.sample = Sample;\n  exports.sequence = Sequence;\n  exports.sieve = Sieve;\n  exports.subflow = Subflow;\n  exports.timeunit = TimeUnit;\n  exports.tupleindex = TupleIndex;\n  exports.values = Values;\n  exports.window = Window;\n\n}));\n\n};"],
"names":["shadow$provide","require","module","exports","global","factory","define","amd","globalThis","self","vega","vegaUtil","vegaDataflow","vegaStatistics","vegaTime","multikey","f","x","n","length","i","k","String","groupkey","fields","measure","key","value","out","aggregate_param","extend","name","base_op","compareIndex","a","b","idx","resolve","agg","map","forEach","getreqs","req","AggregateOps","Object","values","sort","init","missing","valid","_ops","op","add","v","t","rem","set","_out","compileMeasures","field","ctr","cell","ops","get","identity","slice","prototype","TupleStore","_key","tupleid","reset","Aggregate","params","Transform","call","_adds","_mods","_mlen","_alen","_drop","_cross","_dims","_dnames","_measures","_countOnly","_outputs","_inputs","_prev","_counts","Bin","SortedList","idFunc","source","input","data","cnt","push","remove","size","compare","resort","filter","merge","concat","Collect","Compare","Operator","update$5","_","modified","orders","CountPattern","Cross","parse","def","func","FUNCTION","hasOwnProperty","Distributions","error","d","FIELD","from","DISTRIBUTIONS","Density","pulse","materialize","SOURCE","fieldNames","as","accessorName","partition$1","groupby","groups","g","dims","DotBin","Expression","update$4","expr","accessor","datum","accessorFields","Extent","undefined","Subflow","parent","count","Facet","_keys","fastmap","_targets","active","a.forEach","Field","update$3","isArray","array","Filter","Flatten","Fold","Formula","Generate","ascending","NaN","descending","bisector","left","lo","hi","compare1","mid","compare2","delta","zero","center","right","numbers","valueof","index","compareDefined","ascendingDefined","TypeError","max","min","quickselect","Infinity","Math","floor","m","z","log","s","exp","sd","sqrt","newLeft","newRight","j","swap","range","start","stop","step","arguments","ceil","Array","Impute","getValue","method","Methods","getField","partition","keyvals","domain","kMap","gMap","group","gKey","gVals","Empty","JoinAggregate","KDE","Key","update$2","flat","Load","_pending","output","ingest","fork","NO_FIELDS","NO_SOURCE","clean","Lookup","MultiExtent","update$1","ext","extents","e","MultiValues","update","reduce","Params","Pivot","aggregateParams","keys","pivotKeys","limit","changed","bind","list","visit","PreFacet","Project","Proxy","Quantile","Relay","Sample","Sequence","Sieve","TimeUnit","TupleIndex","Values","WindowOp","param","fn","WindowOps","w","next","WindowState","visitInputs","inputs","aggregate_params","outputs","windows","counts","measures","countOnly","mname","num","store","cell.add","cell.rem","cell.set","cell.init","Window","processPartition","state","cmp","ignorePeers","frame","i0","i1","p0","p1","constant","abs","r0","r1","c","noop","__count__","sum","product","mean","mean_d","average","variance","dev","variancep","stdev","stdevp","stderr","distinct","ci0","ci1","median","q2","q1","q3","Number","isNaN","argmin","argmax","exponential","r","exp_r","exponentialb","ValidAggregateOps","prototype$1","prototype$1.reset","_add","_rem","_q","_get","_ext","prototype$1.add","prototype$1.rem","prototype$1.values","prototype$1.distinct","extent","prototype$1.extent","extentIndex","prototype$1.argmin","prototype$1.argmax","prototype$1.min","prototype$1.max","quartile","prototype$1.quartile","quartiles","prototype$1.q1","prototype$1.q2","prototype$1.q3","ci","prototype$1.ci","_ci","bootstrapCI","prototype$1.ci0","prototype$1.ci1","Definition","inherits","transform","aggr","mod","stamp","create","REM","ADD","modifies","drop","cross","runAfter","changes","collect","cells","tuple","vals","generate","base","curr","inputVisit","inputMap","dname","cellkey","outname","newcell","newtuple","p","names","replace","celltuple","adds","mods","prev","band","interval","bins","_bins","b0","b1","reflow","flag","ADD_MOD","bin","anchor","toNumber","EPSILON$1","ALL","stableCompare","root","process","case","text","toUpperCase","toLowerCase","tokens","match","test","_parameterCheck","_match","_stop","_finish","RegExp","stopwords","pattern","tuples","_tuples","ADD_REM","truthy","kde","randomKDE","mixture","randomMixture","normal","randomNormal","lognormal","randomLogNormal","uniform","randomUniform","distributions","dist","distribution","minsteps","steps","maxsteps","sampleCurve","Output","smooth","span","dotbin","isFinite","dataflow","warn","connect","target","detachSubflow","targets","evaluate","activate","flow","subflow","flows","sf","_group","df","detached","detach","initTargets","act","cache","rekey","id","delete","MOD","k0","k1","REFLOW","empty","cleanThreshold","revisit","isMod","has","arrays","maxlen","l","derive","fnames","initonly","gen","generator","Float64Array","value0","subarray","value1","impute","fName","kName","gNames","kVal","_impute","bandwidth","cumulative","density","scale","local","StopPropagation","format","async","request","url","then","res","touch","defaultValue","default","some","_transform","rederive","lut","addAll","dt","probs","EPSILON","q","quantiles","random","cap","OUTPUT","TIME_UNITS","utc","timezone","_floor","offset","utcInterval","timeInterval","unit","u0","u1","units","timeBin","maxbins","tunits","timeUnits","utcFloor","timeFloor","peek","clear","row_number","rank","dense_rank","drank","percent_rank","cume_dist","cume","ntile","lag","lead","first_value","last_value","nth_value","nth","prev_value","next_value","ValidWindowOps","prototype.init","prototype.update","wind","aggregate","countpattern","expression","facet","flatten","fold","formula","joinaggregate","load","lookup","multiextent","multivalues","pivot","prefacet","project","proxy","quantile","relay","sample","sequence","sieve","timeunit","tupleindex","window"]
}
