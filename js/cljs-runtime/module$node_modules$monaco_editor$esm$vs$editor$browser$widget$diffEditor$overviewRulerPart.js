shadow$provide.module$node_modules$monaco_editor$esm$vs$editor$browser$widget$diffEditor$overviewRulerPart = function(require, module, exports) {
  Object.defineProperties(exports, {__esModule:{enumerable:!0, value:!0}, OverviewRulerPart:{enumerable:!0, get:function() {
    return OverviewRulerPart;
  }}});
  var require$_DOT__DOT__SLASH__DOT__DOT__SLASH__DOT__DOT__SLASH__DOT__DOT__SLASH_base_SLASH_browser_SLASH_dom_DOT_js = require("module$node_modules$monaco_editor$esm$vs$base$browser$dom"), require$_DOT__DOT__SLASH__DOT__DOT__SLASH__DOT__DOT__SLASH__DOT__DOT__SLASH_base_SLASH_browser_SLASH_fastDomNode_DOT_js = require("module$node_modules$monaco_editor$esm$vs$base$browser$fastDomNode"), require$_DOT__DOT__SLASH__DOT__DOT__SLASH__DOT__DOT__SLASH__DOT__DOT__SLASH_base_SLASH_browser_SLASH_ui_SLASH_scrollbar_SLASH_scrollbarState_DOT_js = 
  require("module$node_modules$monaco_editor$esm$vs$base$browser$ui$scrollbar$scrollbarState");
  module = require("module$node_modules$monaco_editor$esm$vs$base$common$lifecycle");
  var require$_DOT__DOT__SLASH__DOT__DOT__SLASH__DOT__DOT__SLASH__DOT__DOT__SLASH_base_SLASH_common_SLASH_observable_DOT_js = require("module$node_modules$monaco_editor$esm$vs$base$common$observable"), require$_DOT__SLASH_utils_DOT_js = require("module$node_modules$monaco_editor$esm$vs$editor$browser$widget$diffEditor$utils"), require$_DOT__DOT__SLASH__DOT__DOT__SLASH__DOT__DOT__SLASH_common_SLASH_core_SLASH_position_DOT_js = require("module$node_modules$monaco_editor$esm$vs$editor$common$core$position"), 
  require$_DOT__DOT__SLASH__DOT__DOT__SLASH__DOT__DOT__SLASH_common_SLASH_viewModel_SLASH_overviewZoneManager_DOT_js = require("module$node_modules$monaco_editor$esm$vs$editor$common$viewModel$overviewZoneManager"), require$_DOT__DOT__SLASH__DOT__DOT__SLASH__DOT__DOT__SLASH__DOT__DOT__SLASH_platform_SLASH_theme_SLASH_common_SLASH_colorRegistry_DOT_js = require("module$node_modules$monaco_editor$esm$vs$platform$theme$common$colorRegistry");
  require = require("module$node_modules$monaco_editor$esm$vs$platform$theme$common$themeService");
  exports = this && this.__decorate || function(decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") {
      r = Reflect.decorate(decorators, target, key, desc);
    } else {
      for (var i = decorators.length - 1; i >= 0; i--) {
        if (d = decorators[i]) {
          r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
        }
      }
    }
    return c > 3 && r && Object.defineProperty(target, key, r), r;
  };
  var __param = this && this.__param || function(paramIndex, decorator) {
    return function(target, key) {
      decorator(target, key, paramIndex);
    };
  }, OverviewRulerPart_1;
  let OverviewRulerPart = OverviewRulerPart_1 = class extends module.Disposable {
    constructor(_editors, _rootElement, _diffModel, _rootWidth, _rootHeight, _modifiedEditorLayoutInfo, _themeService) {
      super();
      this._editors = _editors;
      this._rootElement = _rootElement;
      this._diffModel = _diffModel;
      this._rootWidth = _rootWidth;
      this._rootHeight = _rootHeight;
      this._modifiedEditorLayoutInfo = _modifiedEditorLayoutInfo;
      this._themeService = _themeService;
      this.width = OverviewRulerPart_1.ENTIRE_DIFF_OVERVIEW_WIDTH;
      const currentColorTheme = (0,require$_DOT__DOT__SLASH__DOT__DOT__SLASH__DOT__DOT__SLASH__DOT__DOT__SLASH_base_SLASH_common_SLASH_observable_DOT_js.observableFromEvent)(this._themeService.onDidColorThemeChange, () => this._themeService.getColorTheme()), currentColors = (0,require$_DOT__DOT__SLASH__DOT__DOT__SLASH__DOT__DOT__SLASH__DOT__DOT__SLASH_base_SLASH_common_SLASH_observable_DOT_js.derived)(reader => {
        var theme = currentColorTheme.read(reader);
        reader = theme.getColor(require$_DOT__DOT__SLASH__DOT__DOT__SLASH__DOT__DOT__SLASH__DOT__DOT__SLASH_platform_SLASH_theme_SLASH_common_SLASH_colorRegistry_DOT_js.diffOverviewRulerInserted) || (theme.getColor(require$_DOT__DOT__SLASH__DOT__DOT__SLASH__DOT__DOT__SLASH__DOT__DOT__SLASH_platform_SLASH_theme_SLASH_common_SLASH_colorRegistry_DOT_js.diffInserted) || require$_DOT__DOT__SLASH__DOT__DOT__SLASH__DOT__DOT__SLASH__DOT__DOT__SLASH_platform_SLASH_theme_SLASH_common_SLASH_colorRegistry_DOT_js.defaultInsertColor).transparent(2);
        theme = theme.getColor(require$_DOT__DOT__SLASH__DOT__DOT__SLASH__DOT__DOT__SLASH__DOT__DOT__SLASH_platform_SLASH_theme_SLASH_common_SLASH_colorRegistry_DOT_js.diffOverviewRulerRemoved) || (theme.getColor(require$_DOT__DOT__SLASH__DOT__DOT__SLASH__DOT__DOT__SLASH__DOT__DOT__SLASH_platform_SLASH_theme_SLASH_common_SLASH_colorRegistry_DOT_js.diffRemoved) || require$_DOT__DOT__SLASH__DOT__DOT__SLASH__DOT__DOT__SLASH__DOT__DOT__SLASH_platform_SLASH_theme_SLASH_common_SLASH_colorRegistry_DOT_js.defaultRemoveColor).transparent(2);
        return {insertColor:reader, removeColor:theme};
      }), viewportDomElement = (0,require$_DOT__DOT__SLASH__DOT__DOT__SLASH__DOT__DOT__SLASH__DOT__DOT__SLASH_base_SLASH_browser_SLASH_fastDomNode_DOT_js.createFastDomNode)(document.createElement("div"));
      viewportDomElement.setClassName("diffViewport");
      viewportDomElement.setPosition("absolute");
      const diffOverviewRoot = (0,require$_DOT__DOT__SLASH__DOT__DOT__SLASH__DOT__DOT__SLASH__DOT__DOT__SLASH_base_SLASH_browser_SLASH_dom_DOT_js.h)("div.diffOverview", {style:{position:"absolute", top:"0px", width:OverviewRulerPart_1.ENTIRE_DIFF_OVERVIEW_WIDTH + "px"}}).root;
      this._register((0,require$_DOT__SLASH_utils_DOT_js.appendRemoveOnDispose)(diffOverviewRoot, viewportDomElement.domNode));
      this._register((0,require$_DOT__DOT__SLASH__DOT__DOT__SLASH__DOT__DOT__SLASH__DOT__DOT__SLASH_base_SLASH_browser_SLASH_dom_DOT_js.addStandardDisposableListener)(diffOverviewRoot, require$_DOT__DOT__SLASH__DOT__DOT__SLASH__DOT__DOT__SLASH__DOT__DOT__SLASH_base_SLASH_browser_SLASH_dom_DOT_js.EventType.POINTER_DOWN, e => {
        this._editors.modified.delegateVerticalScrollbarPointerDown(e);
      }));
      this._register((0,require$_DOT__DOT__SLASH__DOT__DOT__SLASH__DOT__DOT__SLASH__DOT__DOT__SLASH_base_SLASH_browser_SLASH_dom_DOT_js.addDisposableListener)(diffOverviewRoot, require$_DOT__DOT__SLASH__DOT__DOT__SLASH__DOT__DOT__SLASH__DOT__DOT__SLASH_base_SLASH_browser_SLASH_dom_DOT_js.EventType.MOUSE_WHEEL, e => {
        this._editors.modified.delegateScrollFromMouseWheelEvent(e);
      }, {passive:!1}));
      this._register((0,require$_DOT__SLASH_utils_DOT_js.appendRemoveOnDispose)(this._rootElement, diffOverviewRoot));
      this._register((0,require$_DOT__DOT__SLASH__DOT__DOT__SLASH__DOT__DOT__SLASH__DOT__DOT__SLASH_base_SLASH_common_SLASH_observable_DOT_js.autorunWithStore)((reader, store) => {
        const m = this._diffModel.read(reader), originalOverviewRuler = this._editors.original.createOverviewRuler("original diffOverviewRuler");
        originalOverviewRuler && (store.add(originalOverviewRuler), store.add((0,require$_DOT__SLASH_utils_DOT_js.appendRemoveOnDispose)(diffOverviewRoot, originalOverviewRuler.getDomNode())));
        const modifiedOverviewRuler = this._editors.modified.createOverviewRuler("modified diffOverviewRuler");
        modifiedOverviewRuler && (store.add(modifiedOverviewRuler), store.add((0,require$_DOT__SLASH_utils_DOT_js.appendRemoveOnDispose)(diffOverviewRoot, modifiedOverviewRuler.getDomNode())));
        if (originalOverviewRuler && modifiedOverviewRuler) {
          var origViewZonesChanged = (0,require$_DOT__DOT__SLASH__DOT__DOT__SLASH__DOT__DOT__SLASH__DOT__DOT__SLASH_base_SLASH_common_SLASH_observable_DOT_js.observableSignalFromEvent)("viewZoneChanged", this._editors.original.onDidChangeViewZones), modViewZonesChanged = (0,require$_DOT__DOT__SLASH__DOT__DOT__SLASH__DOT__DOT__SLASH__DOT__DOT__SLASH_base_SLASH_common_SLASH_observable_DOT_js.observableSignalFromEvent)("viewZoneChanged", this._editors.modified.onDidChangeViewZones), origHiddenRangesChanged = 
          (0,require$_DOT__DOT__SLASH__DOT__DOT__SLASH__DOT__DOT__SLASH__DOT__DOT__SLASH_base_SLASH_common_SLASH_observable_DOT_js.observableSignalFromEvent)("hiddenRangesChanged", this._editors.original.onDidChangeHiddenAreas), modHiddenRangesChanged = (0,require$_DOT__DOT__SLASH__DOT__DOT__SLASH__DOT__DOT__SLASH__DOT__DOT__SLASH_base_SLASH_common_SLASH_observable_DOT_js.observableSignalFromEvent)("hiddenRangesChanged", this._editors.modified.onDidChangeHiddenAreas);
          store.add((0,require$_DOT__DOT__SLASH__DOT__DOT__SLASH__DOT__DOT__SLASH__DOT__DOT__SLASH_base_SLASH_common_SLASH_observable_DOT_js.autorun)(reader => {
            function createZones(ranges, color, editor) {
              const vm = editor._getViewModel();
              return vm ? ranges.filter(d => d.length > 0).map(r => {
                const start = vm.coordinatesConverter.convertModelPositionToViewPosition(new require$_DOT__DOT__SLASH__DOT__DOT__SLASH__DOT__DOT__SLASH_common_SLASH_core_SLASH_position_DOT_js.Position(r.startLineNumber, 1));
                r = vm.coordinatesConverter.convertModelPositionToViewPosition(new require$_DOT__DOT__SLASH__DOT__DOT__SLASH__DOT__DOT__SLASH_common_SLASH_core_SLASH_position_DOT_js.Position(r.endLineNumberExclusive, 1));
                return new require$_DOT__DOT__SLASH__DOT__DOT__SLASH__DOT__DOT__SLASH_common_SLASH_viewModel_SLASH_overviewZoneManager_DOT_js.OverviewRulerZone(start.lineNumber, r.lineNumber, r.lineNumber - start.lineNumber, color.toString());
              }) : [];
            }
            var _a;
            origViewZonesChanged.read(reader);
            modViewZonesChanged.read(reader);
            origHiddenRangesChanged.read(reader);
            modHiddenRangesChanged.read(reader);
            var colors = currentColors.read(reader);
            reader = (_a = m === null || m === void 0 ? void 0 : m.diff.read(reader)) === null || _a === void 0 ? void 0 : _a.mappings;
            _a = createZones((reader || []).map(d => d.lineRangeMapping.original), colors.removeColor, this._editors.original);
            colors = createZones((reader || []).map(d => d.lineRangeMapping.modified), colors.insertColor, this._editors.modified);
            originalOverviewRuler === null || originalOverviewRuler === void 0 || originalOverviewRuler.setZones(_a);
            modifiedOverviewRuler === null || modifiedOverviewRuler === void 0 || modifiedOverviewRuler.setZones(colors);
          }));
          store.add((0,require$_DOT__DOT__SLASH__DOT__DOT__SLASH__DOT__DOT__SLASH__DOT__DOT__SLASH_base_SLASH_common_SLASH_observable_DOT_js.autorun)(reader => {
            const height = this._rootHeight.read(reader), width = this._rootWidth.read(reader);
            var layoutInfo = this._modifiedEditorLayoutInfo.read(reader);
            if (layoutInfo) {
              originalOverviewRuler.setLayout({top:0, height, right:OverviewRulerPart_1.ENTIRE_DIFF_OVERVIEW_WIDTH - 2 * OverviewRulerPart_1.ONE_OVERVIEW_WIDTH + OverviewRulerPart_1.ONE_OVERVIEW_WIDTH, width:OverviewRulerPart_1.ONE_OVERVIEW_WIDTH});
              modifiedOverviewRuler.setLayout({top:0, height, right:0, width:OverviewRulerPart_1.ONE_OVERVIEW_WIDTH});
              const scrollTop = this._editors.modifiedScrollTop.read(reader);
              reader = this._editors.modifiedScrollHeight.read(reader);
              const scrollBarOptions = this._editors.modified.getOption(102);
              layoutInfo = new require$_DOT__DOT__SLASH__DOT__DOT__SLASH__DOT__DOT__SLASH__DOT__DOT__SLASH_base_SLASH_browser_SLASH_ui_SLASH_scrollbar_SLASH_scrollbarState_DOT_js.ScrollbarState(scrollBarOptions.verticalHasArrows ? scrollBarOptions.arrowSize : 0, scrollBarOptions.verticalScrollbarSize, 0, layoutInfo.height, reader, scrollTop);
              viewportDomElement.setTop(layoutInfo.getSliderPosition());
              viewportDomElement.setHeight(layoutInfo.getSliderSize());
            } else {
              viewportDomElement.setTop(0), viewportDomElement.setHeight(0);
            }
            diffOverviewRoot.style.height = height + "px";
            diffOverviewRoot.style.left = width - OverviewRulerPart_1.ENTIRE_DIFF_OVERVIEW_WIDTH + "px";
            viewportDomElement.setWidth(OverviewRulerPart_1.ENTIRE_DIFF_OVERVIEW_WIDTH);
          }));
        }
      }));
    }
  };
  OverviewRulerPart.ONE_OVERVIEW_WIDTH = 15;
  OverviewRulerPart.ENTIRE_DIFF_OVERVIEW_WIDTH = OverviewRulerPart_1.ONE_OVERVIEW_WIDTH * 2;
  OverviewRulerPart = OverviewRulerPart_1 = exports([__param(6, require.IThemeService)], OverviewRulerPart);
};

//# sourceMappingURL=module$node_modules$monaco_editor$esm$vs$editor$browser$widget$diffEditor$overviewRulerPart.js.map
