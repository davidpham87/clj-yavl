shadow$provide.module$node_modules$monaco_editor$esm$vs$editor$browser$widget$diffEditor$hideUnchangedRegionsFeature = function(require, module, exports) {
  Object.defineProperties(exports, {__esModule:{enumerable:!0, value:!0}, HideUnchangedRegionsFeature:{enumerable:!0, get:function() {
    return HideUnchangedRegionsFeature;
  }}});
  var require$_DOT__DOT__SLASH__DOT__DOT__SLASH__DOT__DOT__SLASH__DOT__DOT__SLASH_base_SLASH_browser_SLASH_dom_DOT_js = require("module$node_modules$monaco_editor$esm$vs$base$browser$dom"), require$_DOT__DOT__SLASH__DOT__DOT__SLASH__DOT__DOT__SLASH__DOT__DOT__SLASH_base_SLASH_browser_SLASH_ui_SLASH_iconLabel_SLASH_iconLabels_DOT_js = require("module$node_modules$monaco_editor$esm$vs$base$browser$ui$iconLabel$iconLabels"), require$_DOT__DOT__SLASH__DOT__DOT__SLASH__DOT__DOT__SLASH__DOT__DOT__SLASH_base_SLASH_common_SLASH_arrays_DOT_js = 
  require("module$node_modules$monaco_editor$esm$vs$base$common$arrays"), require$_DOT__DOT__SLASH__DOT__DOT__SLASH__DOT__DOT__SLASH__DOT__DOT__SLASH_base_SLASH_common_SLASH_codicons_DOT_js = require("module$node_modules$monaco_editor$esm$vs$base$common$codicons"), require$_DOT__DOT__SLASH__DOT__DOT__SLASH__DOT__DOT__SLASH__DOT__DOT__SLASH_base_SLASH_common_SLASH_event_DOT_js = require("module$node_modules$monaco_editor$esm$vs$base$common$event"), require$_DOT__DOT__SLASH__DOT__DOT__SLASH__DOT__DOT__SLASH__DOT__DOT__SLASH_base_SLASH_common_SLASH_htmlContent_DOT_js = 
  require("module$node_modules$monaco_editor$esm$vs$base$common$htmlContent");
  module = require("module$node_modules$monaco_editor$esm$vs$base$common$lifecycle");
  var require$_DOT__DOT__SLASH__DOT__DOT__SLASH__DOT__DOT__SLASH__DOT__DOT__SLASH_base_SLASH_common_SLASH_observable_DOT_js = require("module$node_modules$monaco_editor$esm$vs$base$common$observable"), require$_DOT__DOT__SLASH__DOT__DOT__SLASH__DOT__DOT__SLASH__DOT__DOT__SLASH_base_SLASH_common_SLASH_observableInternal_SLASH_derived_DOT_js = require("module$node_modules$monaco_editor$esm$vs$base$common$observableInternal$derived"), require$_DOT__DOT__SLASH__DOT__DOT__SLASH__DOT__DOT__SLASH__DOT__DOT__SLASH_base_SLASH_common_SLASH_themables_DOT_js = 
  require("module$node_modules$monaco_editor$esm$vs$base$common$themables"), require$_DOT__DOT__SLASH__DOT__DOT__SLASH__DOT__DOT__SLASH__DOT__DOT__SLASH_base_SLASH_common_SLASH_types_DOT_js = require("module$node_modules$monaco_editor$esm$vs$base$common$types"), require$_DOT__SLASH_outlineModel_DOT_js = require("module$node_modules$monaco_editor$esm$vs$editor$browser$widget$diffEditor$outlineModel"), require$_DOT__SLASH_utils_DOT_js = require("module$node_modules$monaco_editor$esm$vs$editor$browser$widget$diffEditor$utils"), 
  require$_DOT__DOT__SLASH__DOT__DOT__SLASH__DOT__DOT__SLASH_common_SLASH_core_SLASH_lineRange_DOT_js = require("module$node_modules$monaco_editor$esm$vs$editor$common$core$lineRange"), require$_DOT__DOT__SLASH__DOT__DOT__SLASH__DOT__DOT__SLASH_common_SLASH_core_SLASH_position_DOT_js = require("module$node_modules$monaco_editor$esm$vs$editor$common$core$position"), require$_DOT__DOT__SLASH__DOT__DOT__SLASH__DOT__DOT__SLASH_common_SLASH_core_SLASH_range_DOT_js = require("module$node_modules$monaco_editor$esm$vs$editor$common$core$range"), 
  require$_DOT__DOT__SLASH__DOT__DOT__SLASH__DOT__DOT__SLASH_common_SLASH_languages_DOT_js = require("module$node_modules$monaco_editor$esm$vs$editor$common$languages");
  exports = require("module$node_modules$monaco_editor$esm$vs$editor$common$services$languageFeatures");
  var require$_DOT__DOT__SLASH__DOT__DOT__SLASH__DOT__DOT__SLASH__DOT__DOT__SLASH_nls_DOT_js = require("module$node_modules$monaco_editor$esm$vs$nls");
  require = this && this.__decorate || function(decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") {
      r = Reflect.decorate(decorators, target, key, desc);
    } else {
      for (var i = decorators.length - 1; i >= 0; i--) {
        if (d = decorators[i]) {
          r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
        }
      }
    }
    return c > 3 && r && Object.defineProperty(target, key, r), r;
  };
  var __param = this && this.__param || function(paramIndex, decorator) {
    return function(target, key) {
      decorator(target, key, paramIndex);
    };
  };
  let HideUnchangedRegionsFeature = class extends module.Disposable {
    get isUpdatingHiddenAreas() {
      return this._isUpdatingHiddenAreas;
    }
    constructor(_editors, _diffModel, _options, _languageFeaturesService) {
      super();
      this._editors = _editors;
      this._diffModel = _diffModel;
      this._options = _options;
      this._languageFeaturesService = _languageFeaturesService;
      this._modifiedOutlineSource = (0,require$_DOT__DOT__SLASH__DOT__DOT__SLASH__DOT__DOT__SLASH__DOT__DOT__SLASH_base_SLASH_common_SLASH_observableInternal_SLASH_derived_DOT_js.derivedDisposable)(this, reader => (reader = this._editors.modifiedModel.read(reader)) ? new OutlineSource(this._languageFeaturesService, reader) : void 0);
      this._isUpdatingHiddenAreas = !1;
      this._register(this._editors.original.onDidChangeCursorPosition(e => {
        if (e.reason === 3) {
          const m = this._diffModel.get();
          (0,require$_DOT__DOT__SLASH__DOT__DOT__SLASH__DOT__DOT__SLASH__DOT__DOT__SLASH_base_SLASH_common_SLASH_observable_DOT_js.transaction)(tx => {
            for (const s of this._editors.original.getSelections() || []) {
              m === null || m === void 0 || m.ensureOriginalLineIsVisible(s.getStartPosition().lineNumber, tx), m === null || m === void 0 || m.ensureOriginalLineIsVisible(s.getEndPosition().lineNumber, tx);
            }
          });
        }
      }));
      this._register(this._editors.modified.onDidChangeCursorPosition(e => {
        if (e.reason === 3) {
          const m = this._diffModel.get();
          (0,require$_DOT__DOT__SLASH__DOT__DOT__SLASH__DOT__DOT__SLASH__DOT__DOT__SLASH_base_SLASH_common_SLASH_observable_DOT_js.transaction)(tx => {
            for (const s of this._editors.modified.getSelections() || []) {
              m === null || m === void 0 || m.ensureModifiedLineIsVisible(s.getStartPosition().lineNumber, tx), m === null || m === void 0 || m.ensureModifiedLineIsVisible(s.getEndPosition().lineNumber, tx);
            }
          });
        }
      }));
      const unchangedRegions = this._diffModel.map((m, reader) => {
        var _a, _b;
        return ((_a = m === null || m === void 0 ? void 0 : m.diff.read(reader)) === null || _a === void 0 ? void 0 : _a.mappings.length) === 0 ? [] : (_b = m === null || m === void 0 ? void 0 : m.unchangedRegions.read(reader)) !== null && _b !== void 0 ? _b : [];
      });
      this.viewZones = (0,require$_DOT__DOT__SLASH__DOT__DOT__SLASH__DOT__DOT__SLASH__DOT__DOT__SLASH_base_SLASH_common_SLASH_observable_DOT_js.derivedWithStore)(this, (reader, store) => {
        const modifiedOutlineSource = this._modifiedOutlineSource.read(reader);
        if (!modifiedOutlineSource) {
          return {origViewZones:[], modViewZones:[]};
        }
        const origViewZones = [], modViewZones = [], sideBySide = this._options.renderSideBySide.read(reader);
        var curUnchangedRegions = unchangedRegions.read(reader);
        for (const r of curUnchangedRegions) {
          r.shouldHideControls(reader) || (curUnchangedRegions = (0,require$_DOT__DOT__SLASH__DOT__DOT__SLASH__DOT__DOT__SLASH__DOT__DOT__SLASH_base_SLASH_common_SLASH_observable_DOT_js.derived)(this, reader => r.getHiddenOriginalRange(reader).startLineNumber - 1), curUnchangedRegions = new require$_DOT__SLASH_utils_DOT_js.PlaceholderViewZone(curUnchangedRegions, 24), origViewZones.push(curUnchangedRegions), store.add(new CollapsedCodeOverlayWidget(this._editors.original, curUnchangedRegions, r, 
          r.originalUnchangedRange, !sideBySide, modifiedOutlineSource, l => this._diffModel.get().ensureModifiedLineIsVisible(l, void 0), this._options)), curUnchangedRegions = (0,require$_DOT__DOT__SLASH__DOT__DOT__SLASH__DOT__DOT__SLASH__DOT__DOT__SLASH_base_SLASH_common_SLASH_observable_DOT_js.derived)(this, reader => r.getHiddenModifiedRange(reader).startLineNumber - 1), curUnchangedRegions = new require$_DOT__SLASH_utils_DOT_js.PlaceholderViewZone(curUnchangedRegions, 24), modViewZones.push(curUnchangedRegions), 
          store.add(new CollapsedCodeOverlayWidget(this._editors.modified, curUnchangedRegions, r, r.modifiedUnchangedRange, !1, modifiedOutlineSource, l => this._diffModel.get().ensureModifiedLineIsVisible(l, void 0), this._options)));
        }
        return {origViewZones, modViewZones};
      });
      const unchangedLinesDecoration = {description:"unchanged lines", className:"diff-unchanged-lines", isWholeLine:!0}, unchangedLinesDecorationShow = {description:"Fold Unchanged", glyphMarginHoverMessage:(new require$_DOT__DOT__SLASH__DOT__DOT__SLASH__DOT__DOT__SLASH__DOT__DOT__SLASH_base_SLASH_common_SLASH_htmlContent_DOT_js.MarkdownString(void 0, {isTrusted:!0, supportThemeIcons:!0})).appendMarkdown((0,require$_DOT__DOT__SLASH__DOT__DOT__SLASH__DOT__DOT__SLASH__DOT__DOT__SLASH_nls_DOT_js.localize)("foldUnchanged", 
      "Fold Unchanged Region")), glyphMarginClassName:"fold-unchanged " + require$_DOT__DOT__SLASH__DOT__DOT__SLASH__DOT__DOT__SLASH__DOT__DOT__SLASH_base_SLASH_common_SLASH_themables_DOT_js.ThemeIcon.asClassName(require$_DOT__DOT__SLASH__DOT__DOT__SLASH__DOT__DOT__SLASH__DOT__DOT__SLASH_base_SLASH_common_SLASH_codicons_DOT_js.Codicon.fold), zIndex:10001};
      this._register((0,require$_DOT__SLASH_utils_DOT_js.applyObservableDecorations)(this._editors.original, (0,require$_DOT__DOT__SLASH__DOT__DOT__SLASH__DOT__DOT__SLASH__DOT__DOT__SLASH_base_SLASH_common_SLASH_observable_DOT_js.derived)(this, reader => {
        const curUnchangedRegions = unchangedRegions.read(reader), result = curUnchangedRegions.map(r => ({range:r.originalUnchangedRange.toInclusiveRange(), options:unchangedLinesDecoration}));
        for (const r of curUnchangedRegions) {
          r.shouldHideControls(reader) && result.push({range:require$_DOT__DOT__SLASH__DOT__DOT__SLASH__DOT__DOT__SLASH_common_SLASH_core_SLASH_range_DOT_js.Range.fromPositions(new require$_DOT__DOT__SLASH__DOT__DOT__SLASH__DOT__DOT__SLASH_common_SLASH_core_SLASH_position_DOT_js.Position(r.originalLineNumber, 1)), options:unchangedLinesDecorationShow});
        }
        return result;
      })));
      this._register((0,require$_DOT__SLASH_utils_DOT_js.applyObservableDecorations)(this._editors.modified, (0,require$_DOT__DOT__SLASH__DOT__DOT__SLASH__DOT__DOT__SLASH__DOT__DOT__SLASH_base_SLASH_common_SLASH_observable_DOT_js.derived)(this, reader => {
        const curUnchangedRegions = unchangedRegions.read(reader), result = curUnchangedRegions.map(r => ({range:r.modifiedUnchangedRange.toInclusiveRange(), options:unchangedLinesDecoration}));
        for (const r of curUnchangedRegions) {
          r.shouldHideControls(reader) && result.push({range:require$_DOT__DOT__SLASH__DOT__DOT__SLASH__DOT__DOT__SLASH_common_SLASH_core_SLASH_lineRange_DOT_js.LineRange.ofLength(r.modifiedLineNumber, 1).toInclusiveRange(), options:unchangedLinesDecorationShow});
        }
        return result;
      })));
      this._register((0,require$_DOT__DOT__SLASH__DOT__DOT__SLASH__DOT__DOT__SLASH__DOT__DOT__SLASH_base_SLASH_common_SLASH_observable_DOT_js.autorun)(reader => {
        const curUnchangedRegions = unchangedRegions.read(reader);
        this._isUpdatingHiddenAreas = !0;
        try {
          this._editors.original.setHiddenAreas(curUnchangedRegions.map(r => r.getHiddenOriginalRange(reader).toInclusiveRange()).filter(require$_DOT__DOT__SLASH__DOT__DOT__SLASH__DOT__DOT__SLASH__DOT__DOT__SLASH_base_SLASH_common_SLASH_types_DOT_js.isDefined)), this._editors.modified.setHiddenAreas(curUnchangedRegions.map(r => r.getHiddenModifiedRange(reader).toInclusiveRange()).filter(require$_DOT__DOT__SLASH__DOT__DOT__SLASH__DOT__DOT__SLASH__DOT__DOT__SLASH_base_SLASH_common_SLASH_types_DOT_js.isDefined));
        } finally {
          this._isUpdatingHiddenAreas = !1;
        }
      }));
      this._register(this._editors.modified.onMouseUp(event => {
        var _a;
        if (!event.event.rightButton && event.target.position && ((_a = event.target.element) === null || _a === void 0 ? 0 : _a.className.includes("fold-unchanged"))) {
          const lineNumber = event.target.position.lineNumber;
          if (_a = this._diffModel.get()) {
            if (_a = _a.unchangedRegions.get().find(r => r.modifiedUnchangedRange.includes(lineNumber))) {
              _a.collapseAll(void 0), event.event.stopPropagation(), event.event.preventDefault();
            }
          }
        }
      }));
      this._register(this._editors.original.onMouseUp(event => {
        var _a;
        if (!event.event.rightButton && event.target.position && ((_a = event.target.element) === null || _a === void 0 ? 0 : _a.className.includes("fold-unchanged"))) {
          const lineNumber = event.target.position.lineNumber;
          if (_a = this._diffModel.get()) {
            if (_a = _a.unchangedRegions.get().find(r => r.originalUnchangedRange.includes(lineNumber))) {
              _a.collapseAll(void 0), event.event.stopPropagation(), event.event.preventDefault();
            }
          }
        }
      }));
    }
  };
  HideUnchangedRegionsFeature = require([__param(3, exports.ILanguageFeaturesService)], HideUnchangedRegionsFeature);
  class CollapsedCodeOverlayWidget extends require$_DOT__SLASH_utils_DOT_js.ViewZoneOverlayWidget {
    constructor(_editor, _viewZone, _unchangedRegion, _unchangedRegionRange, _hide, _modifiedOutlineSource, _revealModifiedHiddenLine, _options) {
      const root = (0,require$_DOT__DOT__SLASH__DOT__DOT__SLASH__DOT__DOT__SLASH__DOT__DOT__SLASH_base_SLASH_browser_SLASH_dom_DOT_js.h)("div.diff-hidden-lines-widget");
      super(_editor, _viewZone, root.root);
      this._editor = _editor;
      this._unchangedRegion = _unchangedRegion;
      this._unchangedRegionRange = _unchangedRegionRange;
      this._hide = _hide;
      this._modifiedOutlineSource = _modifiedOutlineSource;
      this._revealModifiedHiddenLine = _revealModifiedHiddenLine;
      this._options = _options;
      this._nodes = (0,require$_DOT__DOT__SLASH__DOT__DOT__SLASH__DOT__DOT__SLASH__DOT__DOT__SLASH_base_SLASH_browser_SLASH_dom_DOT_js.h)("div.diff-hidden-lines", [(0,require$_DOT__DOT__SLASH__DOT__DOT__SLASH__DOT__DOT__SLASH__DOT__DOT__SLASH_base_SLASH_browser_SLASH_dom_DOT_js.h)("div.top@top", {title:(0,require$_DOT__DOT__SLASH__DOT__DOT__SLASH__DOT__DOT__SLASH__DOT__DOT__SLASH_nls_DOT_js.localize)("diff.hiddenLines.top", "Click or drag to show more above")}), (0,require$_DOT__DOT__SLASH__DOT__DOT__SLASH__DOT__DOT__SLASH__DOT__DOT__SLASH_base_SLASH_browser_SLASH_dom_DOT_js.h)("div.center@content", 
      {style:{display:"flex"}}, [(0,require$_DOT__DOT__SLASH__DOT__DOT__SLASH__DOT__DOT__SLASH__DOT__DOT__SLASH_base_SLASH_browser_SLASH_dom_DOT_js.h)("div@first", {style:{display:"flex", justifyContent:"center", alignItems:"center", flexShrink:"0"}}, [(0,require$_DOT__DOT__SLASH__DOT__DOT__SLASH__DOT__DOT__SLASH__DOT__DOT__SLASH_base_SLASH_browser_SLASH_dom_DOT_js.$)("a", {title:(0,require$_DOT__DOT__SLASH__DOT__DOT__SLASH__DOT__DOT__SLASH__DOT__DOT__SLASH_nls_DOT_js.localize)("showUnchangedRegion", 
      "Show Unchanged Region"), role:"button", onclick:() => {
        this._unchangedRegion.showAll(void 0);
      }}, ...(0,require$_DOT__DOT__SLASH__DOT__DOT__SLASH__DOT__DOT__SLASH__DOT__DOT__SLASH_base_SLASH_browser_SLASH_ui_SLASH_iconLabel_SLASH_iconLabels_DOT_js.renderLabelWithIcons)("$(unfold)"))]), (0,require$_DOT__DOT__SLASH__DOT__DOT__SLASH__DOT__DOT__SLASH__DOT__DOT__SLASH_base_SLASH_browser_SLASH_dom_DOT_js.h)("div@others", {style:{display:"flex", justifyContent:"center", alignItems:"center"}})]), (0,require$_DOT__DOT__SLASH__DOT__DOT__SLASH__DOT__DOT__SLASH__DOT__DOT__SLASH_base_SLASH_browser_SLASH_dom_DOT_js.h)("div.bottom@bottom", 
      {title:(0,require$_DOT__DOT__SLASH__DOT__DOT__SLASH__DOT__DOT__SLASH__DOT__DOT__SLASH_nls_DOT_js.localize)("diff.bottom", "Click or drag to show more below"), role:"button"})]);
      root.root.appendChild(this._nodes.root);
      _editor = (0,require$_DOT__DOT__SLASH__DOT__DOT__SLASH__DOT__DOT__SLASH__DOT__DOT__SLASH_base_SLASH_common_SLASH_observable_DOT_js.observableFromEvent)(this._editor.onDidLayoutChange, () => this._editor.getLayoutInfo());
      this._hide ? (0,require$_DOT__DOT__SLASH__DOT__DOT__SLASH__DOT__DOT__SLASH__DOT__DOT__SLASH_base_SLASH_browser_SLASH_dom_DOT_js.reset)(this._nodes.first) : this._register((0,require$_DOT__SLASH_utils_DOT_js.applyStyle)(this._nodes.first, {width:_editor.map(l => l.contentLeft)}));
      this._register((0,require$_DOT__DOT__SLASH__DOT__DOT__SLASH__DOT__DOT__SLASH__DOT__DOT__SLASH_base_SLASH_common_SLASH_observable_DOT_js.autorun)(reader => {
        const isFullyRevealed = this._unchangedRegion.visibleLineCountTop.read(reader) + this._unchangedRegion.visibleLineCountBottom.read(reader) === this._unchangedRegion.lineCount;
        this._nodes.bottom.classList.toggle("canMoveTop", !isFullyRevealed);
        this._nodes.bottom.classList.toggle("canMoveBottom", this._unchangedRegion.visibleLineCountBottom.read(reader) > 0);
        this._nodes.top.classList.toggle("canMoveTop", this._unchangedRegion.visibleLineCountTop.read(reader) > 0);
        this._nodes.top.classList.toggle("canMoveBottom", !isFullyRevealed);
        const isDragged = this._unchangedRegion.isDragged.read(reader), domNode = this._editor.getDomNode();
        domNode && (domNode.classList.toggle("draggingUnchangedRegion", !!isDragged), isDragged === "top" ? (domNode.classList.toggle("canMoveTop", this._unchangedRegion.visibleLineCountTop.read(reader) > 0), domNode.classList.toggle("canMoveBottom", !isFullyRevealed)) : isDragged === "bottom" ? (domNode.classList.toggle("canMoveTop", !isFullyRevealed), domNode.classList.toggle("canMoveBottom", this._unchangedRegion.visibleLineCountBottom.read(reader) > 0)) : (domNode.classList.toggle("canMoveTop", 
        !1), domNode.classList.toggle("canMoveBottom", !1)));
      }));
      const editor = this._editor;
      this._register((0,require$_DOT__DOT__SLASH__DOT__DOT__SLASH__DOT__DOT__SLASH__DOT__DOT__SLASH_base_SLASH_browser_SLASH_dom_DOT_js.addDisposableListener)(this._nodes.top, "mousedown", e => {
        if (e.button === 0) {
          this._nodes.top.classList.toggle("dragging", !0);
          this._nodes.root.classList.toggle("dragging", !0);
          e.preventDefault();
          var startTop = e.clientY, didMove = !1, cur = this._unchangedRegion.visibleLineCountTop.get();
          this._unchangedRegion.isDragged.set("top", void 0);
          e = (0,require$_DOT__DOT__SLASH__DOT__DOT__SLASH__DOT__DOT__SLASH__DOT__DOT__SLASH_base_SLASH_browser_SLASH_dom_DOT_js.getWindow)(this._nodes.top);
          var mouseMoveListener = (0,require$_DOT__DOT__SLASH__DOT__DOT__SLASH__DOT__DOT__SLASH__DOT__DOT__SLASH_base_SLASH_browser_SLASH_dom_DOT_js.addDisposableListener)(e, "mousemove", e => {
            e = e.clientY - startTop;
            didMove = didMove || Math.abs(e) > 2;
            e = Math.round(e / editor.getOption(66));
            e = Math.max(0, Math.min(cur + e, this._unchangedRegion.getMaxVisibleLineCountTop()));
            this._unchangedRegion.visibleLineCountTop.set(e, void 0);
          }), mouseUpListener = (0,require$_DOT__DOT__SLASH__DOT__DOT__SLASH__DOT__DOT__SLASH__DOT__DOT__SLASH_base_SLASH_browser_SLASH_dom_DOT_js.addDisposableListener)(e, "mouseup", e => {
            didMove || this._unchangedRegion.showMoreAbove(this._options.hideUnchangedRegionsRevealLineCount.get(), void 0);
            this._nodes.top.classList.toggle("dragging", !1);
            this._nodes.root.classList.toggle("dragging", !1);
            this._unchangedRegion.isDragged.set(void 0, void 0);
            mouseMoveListener.dispose();
            mouseUpListener.dispose();
          });
        }
      }));
      this._register((0,require$_DOT__DOT__SLASH__DOT__DOT__SLASH__DOT__DOT__SLASH__DOT__DOT__SLASH_base_SLASH_browser_SLASH_dom_DOT_js.addDisposableListener)(this._nodes.bottom, "mousedown", e => {
        if (e.button === 0) {
          this._nodes.bottom.classList.toggle("dragging", !0);
          this._nodes.root.classList.toggle("dragging", !0);
          e.preventDefault();
          var startTop = e.clientY, didMove = !1, cur = this._unchangedRegion.visibleLineCountBottom.get();
          this._unchangedRegion.isDragged.set("bottom", void 0);
          e = (0,require$_DOT__DOT__SLASH__DOT__DOT__SLASH__DOT__DOT__SLASH__DOT__DOT__SLASH_base_SLASH_browser_SLASH_dom_DOT_js.getWindow)(this._nodes.bottom);
          var mouseMoveListener = (0,require$_DOT__DOT__SLASH__DOT__DOT__SLASH__DOT__DOT__SLASH__DOT__DOT__SLASH_base_SLASH_browser_SLASH_dom_DOT_js.addDisposableListener)(e, "mousemove", e => {
            e = e.clientY - startTop;
            didMove = didMove || Math.abs(e) > 2;
            e = Math.round(e / editor.getOption(66));
            var newVal = Math.max(0, Math.min(cur - e, this._unchangedRegion.getMaxVisibleLineCountBottom()));
            e = editor.getTopForLineNumber(this._unchangedRegionRange.endLineNumberExclusive);
            this._unchangedRegion.visibleLineCountBottom.set(newVal, void 0);
            newVal = editor.getTopForLineNumber(this._unchangedRegionRange.endLineNumberExclusive);
            editor.setScrollTop(editor.getScrollTop() + (newVal - e));
          }), mouseUpListener = (0,require$_DOT__DOT__SLASH__DOT__DOT__SLASH__DOT__DOT__SLASH__DOT__DOT__SLASH_base_SLASH_browser_SLASH_dom_DOT_js.addDisposableListener)(e, "mouseup", e => {
            this._unchangedRegion.isDragged.set(void 0, void 0);
            if (!didMove) {
              e = editor.getTopForLineNumber(this._unchangedRegionRange.endLineNumberExclusive);
              this._unchangedRegion.showMoreBelow(this._options.hideUnchangedRegionsRevealLineCount.get(), void 0);
              const top2 = editor.getTopForLineNumber(this._unchangedRegionRange.endLineNumberExclusive);
              editor.setScrollTop(editor.getScrollTop() + (top2 - e));
            }
            this._nodes.bottom.classList.toggle("dragging", !1);
            this._nodes.root.classList.toggle("dragging", !1);
            mouseMoveListener.dispose();
            mouseUpListener.dispose();
          });
        }
      }));
      this._register((0,require$_DOT__DOT__SLASH__DOT__DOT__SLASH__DOT__DOT__SLASH__DOT__DOT__SLASH_base_SLASH_common_SLASH_observable_DOT_js.autorun)(reader => {
        const children = [];
        if (!this._hide) {
          var lineCount = _unchangedRegion.getHiddenModifiedRange(reader).length;
          lineCount = (0,require$_DOT__DOT__SLASH__DOT__DOT__SLASH__DOT__DOT__SLASH__DOT__DOT__SLASH_nls_DOT_js.localize)("hiddenLines", "{0} hidden lines", lineCount);
          lineCount = (0,require$_DOT__DOT__SLASH__DOT__DOT__SLASH__DOT__DOT__SLASH__DOT__DOT__SLASH_base_SLASH_browser_SLASH_dom_DOT_js.$)("span", {title:(0,require$_DOT__DOT__SLASH__DOT__DOT__SLASH__DOT__DOT__SLASH__DOT__DOT__SLASH_nls_DOT_js.localize)("diff.hiddenLines.expandAll", "Double click to unfold")}, lineCount);
          lineCount.addEventListener("dblclick", e => {
            e.button === 0 && (e.preventDefault(), this._unchangedRegion.showAll(void 0));
          });
          children.push(lineCount);
          lineCount = this._unchangedRegion.getHiddenModifiedRange(reader);
          reader = this._modifiedOutlineSource.getBreadcrumbItems(lineCount, reader);
          if (reader.length > 0) {
            for (children.push((0,require$_DOT__DOT__SLASH__DOT__DOT__SLASH__DOT__DOT__SLASH__DOT__DOT__SLASH_base_SLASH_browser_SLASH_dom_DOT_js.$)("span", void 0, "  |  ")), lineCount = 0; lineCount < reader.length; lineCount++) {
              const item = reader[lineCount];
              var icon = require$_DOT__DOT__SLASH__DOT__DOT__SLASH__DOT__DOT__SLASH_common_SLASH_languages_DOT_js.SymbolKinds.toIcon(item.kind);
              icon = (0,require$_DOT__DOT__SLASH__DOT__DOT__SLASH__DOT__DOT__SLASH__DOT__DOT__SLASH_base_SLASH_browser_SLASH_dom_DOT_js.h)("div.breadcrumb-item", {style:{display:"flex", alignItems:"center"}}, [(0,require$_DOT__DOT__SLASH__DOT__DOT__SLASH__DOT__DOT__SLASH__DOT__DOT__SLASH_base_SLASH_browser_SLASH_ui_SLASH_iconLabel_SLASH_iconLabels_DOT_js.renderIcon)(icon), " ", item.name, ...(lineCount === reader.length - 1 ? [] : [(0,require$_DOT__DOT__SLASH__DOT__DOT__SLASH__DOT__DOT__SLASH__DOT__DOT__SLASH_base_SLASH_browser_SLASH_ui_SLASH_iconLabel_SLASH_iconLabels_DOT_js.renderIcon)(require$_DOT__DOT__SLASH__DOT__DOT__SLASH__DOT__DOT__SLASH__DOT__DOT__SLASH_base_SLASH_common_SLASH_codicons_DOT_js.Codicon.chevronRight)])]).root;
              children.push(icon);
              icon.onclick = () => {
                this._revealModifiedHiddenLine(item.startLineNumber);
              };
            }
          }
        }
        (0,require$_DOT__DOT__SLASH__DOT__DOT__SLASH__DOT__DOT__SLASH__DOT__DOT__SLASH_base_SLASH_browser_SLASH_dom_DOT_js.reset)(this._nodes.others, ...children);
      }));
    }
  }
  let OutlineSource = class extends module.Disposable {
    constructor(_languageFeaturesService, _textModel) {
      super();
      this._languageFeaturesService = _languageFeaturesService;
      this._textModel = _textModel;
      this._currentModel = (0,require$_DOT__DOT__SLASH__DOT__DOT__SLASH__DOT__DOT__SLASH__DOT__DOT__SLASH_base_SLASH_common_SLASH_observable_DOT_js.observableValue)(this, void 0);
      const documentSymbolProviderChanged = (0,require$_DOT__DOT__SLASH__DOT__DOT__SLASH__DOT__DOT__SLASH__DOT__DOT__SLASH_base_SLASH_common_SLASH_observable_DOT_js.observableSignalFromEvent)("documentSymbolProvider.onDidChange", this._languageFeaturesService.documentSymbolProvider.onDidChange), textModelChanged = (0,require$_DOT__DOT__SLASH__DOT__DOT__SLASH__DOT__DOT__SLASH__DOT__DOT__SLASH_base_SLASH_common_SLASH_observable_DOT_js.observableSignalFromEvent)("_textModel.onDidChangeContent", require$_DOT__DOT__SLASH__DOT__DOT__SLASH__DOT__DOT__SLASH__DOT__DOT__SLASH_base_SLASH_common_SLASH_event_DOT_js.Event.debounce(e => 
      this._textModel.onDidChangeContent(e), () => {
      }, 100));
      this._register((0,require$_DOT__DOT__SLASH__DOT__DOT__SLASH__DOT__DOT__SLASH__DOT__DOT__SLASH_base_SLASH_common_SLASH_observable_DOT_js.autorunWithStore)(async(reader, store) => {
        documentSymbolProviderChanged.read(reader);
        textModelChanged.read(reader);
        reader = store.add(new require$_DOT__SLASH_utils_DOT_js.DisposableCancellationTokenSource());
        reader = await require$_DOT__SLASH_outlineModel_DOT_js.OutlineModel.create(this._languageFeaturesService.documentSymbolProvider, this._textModel, reader.token);
        store.isDisposed || this._currentModel.set(reader, void 0);
      }));
    }
    getBreadcrumbItems(startRange, reader) {
      reader = this._currentModel.read(reader);
      if (!reader) {
        return [];
      }
      reader = reader.asListOfDocumentSymbols().filter(s => startRange.contains(s.range.startLineNumber) && !startRange.contains(s.range.endLineNumber));
      reader.sort((0,require$_DOT__DOT__SLASH__DOT__DOT__SLASH__DOT__DOT__SLASH__DOT__DOT__SLASH_base_SLASH_common_SLASH_arrays_DOT_js.reverseOrder)((0,require$_DOT__DOT__SLASH__DOT__DOT__SLASH__DOT__DOT__SLASH__DOT__DOT__SLASH_base_SLASH_common_SLASH_arrays_DOT_js.compareBy)(s => s.range.endLineNumber - s.range.startLineNumber, require$_DOT__DOT__SLASH__DOT__DOT__SLASH__DOT__DOT__SLASH__DOT__DOT__SLASH_base_SLASH_common_SLASH_arrays_DOT_js.numberComparator)));
      return reader.map(s => ({name:s.name, kind:s.kind, startLineNumber:s.range.startLineNumber}));
    }
  };
  OutlineSource = require([__param(0, exports.ILanguageFeaturesService)], OutlineSource);
};

//# sourceMappingURL=module$node_modules$monaco_editor$esm$vs$editor$browser$widget$diffEditor$hideUnchangedRegionsFeature.js.map
