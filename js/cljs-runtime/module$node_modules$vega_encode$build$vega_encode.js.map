{
"version":3,
"file":"module$node_modules$vega_encode$build$vega_encode.js",
"lineCount":670,
"mappings":"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",
"sources":["node_modules/vega-encode/build/vega-encode.js"],
"sourcesContent":["shadow$provide[\"module$node_modules$vega_encode$build$vega_encode\"] = function(require,module,exports) {\n(function (global, factory) {\n  typeof exports === 'object' && typeof module !== 'undefined' ? factory(exports, require('vega-dataflow'), require('vega-scale'), require('vega-util')) :\n  typeof define === 'function' && define.amd ? define(['exports', 'vega-dataflow', 'vega-scale', 'vega-util'], factory) :\n  (global = typeof globalThis !== 'undefined' ? globalThis : global || self, factory(global.vega = {}, global.vega, global.vega, global.vega));\n})(this, (function (exports, vegaDataflow, vegaScale, vegaUtil) { 'use strict';\n\n  /**\n   * Generates axis ticks for visualizing a spatial scale.\n   * @constructor\n   * @param {object} params - The parameters for this operator.\n   * @param {Scale} params.scale - The scale to generate ticks for.\n   * @param {*} [params.count=10] - The approximate number of ticks, or\n   *   desired tick interval, to use.\n   * @param {Array<*>} [params.values] - The exact tick values to use.\n   *   These must be legal domain values for the provided scale.\n   *   If provided, the count argument is ignored.\n   * @param {function(*):string} [params.formatSpecifier] - A format specifier\n   *   to use in conjunction with scale.tickFormat. Legal values are\n   *   any valid d3 4.0 format specifier.\n   * @param {function(*):string} [params.format] - The format function to use.\n   *   If provided, the formatSpecifier argument is ignored.\n   */\n  function AxisTicks(params) {\n    vegaDataflow.Transform.call(this, null, params);\n  }\n  vegaUtil.inherits(AxisTicks, vegaDataflow.Transform, {\n    transform(_, pulse) {\n      if (this.value && !_.modified()) {\n        return pulse.StopPropagation;\n      }\n      var locale = pulse.dataflow.locale(),\n        out = pulse.fork(pulse.NO_SOURCE | pulse.NO_FIELDS),\n        ticks = this.value,\n        scale = _.scale,\n        tally = _.count == null ? _.values ? _.values.length : 10 : _.count,\n        count = vegaScale.tickCount(scale, tally, _.minstep),\n        format = _.format || vegaScale.tickFormat(locale, scale, count, _.formatSpecifier, _.formatType, !!_.values),\n        values = _.values ? vegaScale.validTicks(scale, _.values, count) : vegaScale.tickValues(scale, count);\n      if (ticks) out.rem = ticks;\n      ticks = values.map((value, i) => vegaDataflow.ingest({\n        index: i / (values.length - 1 || 1),\n        value: value,\n        label: format(value)\n      }));\n      if (_.extra && ticks.length) {\n        // add an extra tick pegged to the initial domain value\n        // this is used to generate axes with 'binned' domains\n        ticks.push(vegaDataflow.ingest({\n          index: -1,\n          extra: {\n            value: ticks[0].value\n          },\n          label: ''\n        }));\n      }\n      out.source = ticks;\n      out.add = ticks;\n      this.value = ticks;\n      return out;\n    }\n  });\n\n  /**\n   * Joins a set of data elements against a set of visual items.\n   * @constructor\n   * @param {object} params - The parameters for this operator.\n   * @param {function(object): object} [params.item] - An item generator function.\n   * @param {function(object): *} [params.key] - The key field associating data and visual items.\n   */\n  function DataJoin(params) {\n    vegaDataflow.Transform.call(this, null, params);\n  }\n  function defaultItemCreate() {\n    return vegaDataflow.ingest({});\n  }\n  function newMap(key) {\n    const map = vegaUtil.fastmap().test(t => t.exit);\n    map.lookup = t => map.get(key(t));\n    return map;\n  }\n  vegaUtil.inherits(DataJoin, vegaDataflow.Transform, {\n    transform(_, pulse) {\n      var df = pulse.dataflow,\n        out = pulse.fork(pulse.NO_SOURCE | pulse.NO_FIELDS),\n        item = _.item || defaultItemCreate,\n        key = _.key || vegaDataflow.tupleid,\n        map = this.value;\n\n      // prevent transient (e.g., hover) requests from\n      // cascading across marks derived from marks\n      if (vegaUtil.isArray(out.encode)) {\n        out.encode = null;\n      }\n      if (map && (_.modified('key') || pulse.modified(key))) {\n        vegaUtil.error('DataJoin does not support modified key function or fields.');\n      }\n      if (!map) {\n        pulse = pulse.addAll();\n        this.value = map = newMap(key);\n      }\n      pulse.visit(pulse.ADD, t => {\n        const k = key(t);\n        let x = map.get(k);\n        if (x) {\n          if (x.exit) {\n            map.empty--;\n            out.add.push(x);\n          } else {\n            out.mod.push(x);\n          }\n        } else {\n          x = item(t);\n          map.set(k, x);\n          out.add.push(x);\n        }\n        x.datum = t;\n        x.exit = false;\n      });\n      pulse.visit(pulse.MOD, t => {\n        const k = key(t),\n          x = map.get(k);\n        if (x) {\n          x.datum = t;\n          out.mod.push(x);\n        }\n      });\n      pulse.visit(pulse.REM, t => {\n        const k = key(t),\n          x = map.get(k);\n        if (t === x.datum && !x.exit) {\n          out.rem.push(x);\n          x.exit = true;\n          ++map.empty;\n        }\n      });\n      if (pulse.changed(pulse.ADD_MOD)) out.modifies('datum');\n      if (pulse.clean() || _.clean && map.empty > df.cleanThreshold) {\n        df.runAfter(map.clean);\n      }\n      return out;\n    }\n  });\n\n  /**\n   * Invokes encoding functions for visual items.\n   * @constructor\n   * @param {object} params - The parameters to the encoding functions. This\n   *   parameter object will be passed through to all invoked encoding functions.\n   * @param {object} [params.mod=false] - Flag indicating if tuples in the input\n   *   mod set that are unmodified by encoders should be included in the output.\n   * @param {object} param.encoders - The encoding functions\n   * @param {function(object, object): boolean} [param.encoders.update] - Update encoding set\n   * @param {function(object, object): boolean} [param.encoders.enter] - Enter encoding set\n   * @param {function(object, object): boolean} [param.encoders.exit] - Exit encoding set\n   */\n  function Encode(params) {\n    vegaDataflow.Transform.call(this, null, params);\n  }\n  vegaUtil.inherits(Encode, vegaDataflow.Transform, {\n    transform(_, pulse) {\n      var out = pulse.fork(pulse.ADD_REM),\n        fmod = _.mod || false,\n        encoders = _.encoders,\n        encode = pulse.encode;\n\n      // if an array, the encode directive includes additional sets\n      // that must be defined in order for the primary set to be invoked\n      // e.g., only run the update set if the hover set is defined\n      if (vegaUtil.isArray(encode)) {\n        if (out.changed() || encode.every(e => encoders[e])) {\n          encode = encode[0];\n          out.encode = null; // consume targeted encode directive\n        } else {\n          return pulse.StopPropagation;\n        }\n      }\n\n      // marshall encoder functions\n      var reenter = encode === 'enter',\n        update = encoders.update || vegaUtil.falsy,\n        enter = encoders.enter || vegaUtil.falsy,\n        exit = encoders.exit || vegaUtil.falsy,\n        set = (encode && !reenter ? encoders[encode] : update) || vegaUtil.falsy;\n      if (pulse.changed(pulse.ADD)) {\n        pulse.visit(pulse.ADD, t => {\n          enter(t, _);\n          update(t, _);\n        });\n        out.modifies(enter.output);\n        out.modifies(update.output);\n        if (set !== vegaUtil.falsy && set !== update) {\n          pulse.visit(pulse.ADD, t => {\n            set(t, _);\n          });\n          out.modifies(set.output);\n        }\n      }\n      if (pulse.changed(pulse.REM) && exit !== vegaUtil.falsy) {\n        pulse.visit(pulse.REM, t => {\n          exit(t, _);\n        });\n        out.modifies(exit.output);\n      }\n      if (reenter || set !== vegaUtil.falsy) {\n        const flag = pulse.MOD | (_.modified() ? pulse.REFLOW : 0);\n        if (reenter) {\n          pulse.visit(flag, t => {\n            const mod = enter(t, _) || fmod;\n            if (set(t, _) || mod) out.mod.push(t);\n          });\n          if (out.mod.length) out.modifies(enter.output);\n        } else {\n          pulse.visit(flag, t => {\n            if (set(t, _) || fmod) out.mod.push(t);\n          });\n        }\n        if (out.mod.length) out.modifies(set.output);\n      }\n      return out.changed() ? out : pulse.StopPropagation;\n    }\n  });\n\n  /**\n   * Generates legend entries for visualizing a scale.\n   * @constructor\n   * @param {object} params - The parameters for this operator.\n   * @param {Scale} params.scale - The scale to generate items for.\n   * @param {*} [params.count=5] - The approximate number of items, or\n   *   desired tick interval, to use.\n   * @param {*} [params.limit] - The maximum number of entries to\n   *   include in a symbol legend.\n   * @param {Array<*>} [params.values] - The exact tick values to use.\n   *   These must be legal domain values for the provided scale.\n   *   If provided, the count argument is ignored.\n   * @param {string} [params.formatSpecifier] - A format specifier\n   *   to use in conjunction with scale.tickFormat. Legal values are\n   *   any valid D3 format specifier string.\n   * @param {function(*):string} [params.format] - The format function to use.\n   *   If provided, the formatSpecifier argument is ignored.\n   */\n  function LegendEntries(params) {\n    vegaDataflow.Transform.call(this, [], params);\n  }\n  vegaUtil.inherits(LegendEntries, vegaDataflow.Transform, {\n    transform(_, pulse) {\n      if (this.value != null && !_.modified()) {\n        return pulse.StopPropagation;\n      }\n      var locale = pulse.dataflow.locale(),\n        out = pulse.fork(pulse.NO_SOURCE | pulse.NO_FIELDS),\n        items = this.value,\n        type = _.type || vegaScale.SymbolLegend,\n        scale = _.scale,\n        limit = +_.limit,\n        count = vegaScale.tickCount(scale, _.count == null ? 5 : _.count, _.minstep),\n        lskip = !!_.values || type === vegaScale.SymbolLegend,\n        format = _.format || vegaScale.labelFormat(locale, scale, count, type, _.formatSpecifier, _.formatType, lskip),\n        values = _.values || vegaScale.labelValues(scale, count),\n        domain,\n        fraction,\n        size,\n        offset,\n        ellipsis;\n      if (items) out.rem = items;\n      if (type === vegaScale.SymbolLegend) {\n        if (limit && values.length > limit) {\n          pulse.dataflow.warn('Symbol legend count exceeds limit, filtering items.');\n          items = values.slice(0, limit - 1);\n          ellipsis = true;\n        } else {\n          items = values;\n        }\n        if (vegaUtil.isFunction(size = _.size)) {\n          // if first value maps to size zero, remove from list (vega#717)\n          if (!_.values && scale(items[0]) === 0) {\n            items = items.slice(1);\n          }\n          // compute size offset for legend entries\n          offset = items.reduce((max, value) => Math.max(max, size(value, _)), 0);\n        } else {\n          size = vegaUtil.constant(offset = size || 8);\n        }\n        items = items.map((value, index) => vegaDataflow.ingest({\n          index: index,\n          label: format(value, index, items),\n          value: value,\n          offset: offset,\n          size: size(value, _)\n        }));\n        if (ellipsis) {\n          ellipsis = values[items.length];\n          items.push(vegaDataflow.ingest({\n            index: items.length,\n            label: `\\u2026${values.length - items.length} entries`,\n            value: ellipsis,\n            offset: offset,\n            size: size(ellipsis, _)\n          }));\n        }\n      } else if (type === vegaScale.GradientLegend) {\n        domain = scale.domain(), fraction = vegaScale.scaleFraction(scale, domain[0], vegaUtil.peek(domain));\n\n        // if automatic label generation produces 2 or fewer values,\n        // use the domain end points instead (fixes vega/vega#1364)\n        if (values.length < 3 && !_.values && domain[0] !== vegaUtil.peek(domain)) {\n          values = [domain[0], vegaUtil.peek(domain)];\n        }\n        items = values.map((value, index) => vegaDataflow.ingest({\n          index: index,\n          label: format(value, index, values),\n          value: value,\n          perc: fraction(value)\n        }));\n      } else {\n        size = values.length - 1;\n        fraction = vegaScale.labelFraction(scale);\n        items = values.map((value, index) => vegaDataflow.ingest({\n          index: index,\n          label: format(value, index, values),\n          value: value,\n          perc: index ? fraction(value) : 0,\n          perc2: index === size ? 1 : fraction(values[index + 1])\n        }));\n      }\n      out.source = items;\n      out.add = items;\n      this.value = items;\n      return out;\n    }\n  });\n\n  const sourceX = t => t.source.x;\n  const sourceY = t => t.source.y;\n  const targetX = t => t.target.x;\n  const targetY = t => t.target.y;\n\n  /**\n   * Layout paths linking source and target elements.\n   * @constructor\n   * @param {object} params - The parameters for this operator.\n   */\n  function LinkPath(params) {\n    vegaDataflow.Transform.call(this, {}, params);\n  }\n  LinkPath.Definition = {\n    'type': 'LinkPath',\n    'metadata': {\n      'modifies': true\n    },\n    'params': [{\n      'name': 'sourceX',\n      'type': 'field',\n      'default': 'source.x'\n    }, {\n      'name': 'sourceY',\n      'type': 'field',\n      'default': 'source.y'\n    }, {\n      'name': 'targetX',\n      'type': 'field',\n      'default': 'target.x'\n    }, {\n      'name': 'targetY',\n      'type': 'field',\n      'default': 'target.y'\n    }, {\n      'name': 'orient',\n      'type': 'enum',\n      'default': 'vertical',\n      'values': ['horizontal', 'vertical', 'radial']\n    }, {\n      'name': 'shape',\n      'type': 'enum',\n      'default': 'line',\n      'values': ['line', 'arc', 'curve', 'diagonal', 'orthogonal']\n    }, {\n      'name': 'require',\n      'type': 'signal'\n    }, {\n      'name': 'as',\n      'type': 'string',\n      'default': 'path'\n    }]\n  };\n  vegaUtil.inherits(LinkPath, vegaDataflow.Transform, {\n    transform(_, pulse) {\n      var sx = _.sourceX || sourceX,\n        sy = _.sourceY || sourceY,\n        tx = _.targetX || targetX,\n        ty = _.targetY || targetY,\n        as = _.as || 'path',\n        orient = _.orient || 'vertical',\n        shape = _.shape || 'line',\n        path = Paths.get(shape + '-' + orient) || Paths.get(shape);\n      if (!path) {\n        vegaUtil.error('LinkPath unsupported type: ' + _.shape + (_.orient ? '-' + _.orient : ''));\n      }\n      pulse.visit(pulse.SOURCE, t => {\n        t[as] = path(sx(t), sy(t), tx(t), ty(t));\n      });\n      return pulse.reflow(_.modified()).modifies(as);\n    }\n  });\n  const line = (sx, sy, tx, ty) => 'M' + sx + ',' + sy + 'L' + tx + ',' + ty;\n  const lineR = (sa, sr, ta, tr) => line(sr * Math.cos(sa), sr * Math.sin(sa), tr * Math.cos(ta), tr * Math.sin(ta));\n  const arc = (sx, sy, tx, ty) => {\n    var dx = tx - sx,\n      dy = ty - sy,\n      rr = Math.hypot(dx, dy) / 2,\n      ra = 180 * Math.atan2(dy, dx) / Math.PI;\n    return 'M' + sx + ',' + sy + 'A' + rr + ',' + rr + ' ' + ra + ' 0 1' + ' ' + tx + ',' + ty;\n  };\n  const arcR = (sa, sr, ta, tr) => arc(sr * Math.cos(sa), sr * Math.sin(sa), tr * Math.cos(ta), tr * Math.sin(ta));\n  const curve = (sx, sy, tx, ty) => {\n    const dx = tx - sx,\n      dy = ty - sy,\n      ix = 0.2 * (dx + dy),\n      iy = 0.2 * (dy - dx);\n    return 'M' + sx + ',' + sy + 'C' + (sx + ix) + ',' + (sy + iy) + ' ' + (tx + iy) + ',' + (ty - ix) + ' ' + tx + ',' + ty;\n  };\n  const curveR = (sa, sr, ta, tr) => curve(sr * Math.cos(sa), sr * Math.sin(sa), tr * Math.cos(ta), tr * Math.sin(ta));\n  const orthoX = (sx, sy, tx, ty) => 'M' + sx + ',' + sy + 'V' + ty + 'H' + tx;\n  const orthoY = (sx, sy, tx, ty) => 'M' + sx + ',' + sy + 'H' + tx + 'V' + ty;\n  const orthoR = (sa, sr, ta, tr) => {\n    const sc = Math.cos(sa),\n      ss = Math.sin(sa),\n      tc = Math.cos(ta),\n      ts = Math.sin(ta),\n      sf = Math.abs(ta - sa) > Math.PI ? ta <= sa : ta > sa;\n    return 'M' + sr * sc + ',' + sr * ss + 'A' + sr + ',' + sr + ' 0 0,' + (sf ? 1 : 0) + ' ' + sr * tc + ',' + sr * ts + 'L' + tr * tc + ',' + tr * ts;\n  };\n  const diagonalX = (sx, sy, tx, ty) => {\n    const m = (sx + tx) / 2;\n    return 'M' + sx + ',' + sy + 'C' + m + ',' + sy + ' ' + m + ',' + ty + ' ' + tx + ',' + ty;\n  };\n  const diagonalY = (sx, sy, tx, ty) => {\n    const m = (sy + ty) / 2;\n    return 'M' + sx + ',' + sy + 'C' + sx + ',' + m + ' ' + tx + ',' + m + ' ' + tx + ',' + ty;\n  };\n  const diagonalR = (sa, sr, ta, tr) => {\n    const sc = Math.cos(sa),\n      ss = Math.sin(sa),\n      tc = Math.cos(ta),\n      ts = Math.sin(ta),\n      mr = (sr + tr) / 2;\n    return 'M' + sr * sc + ',' + sr * ss + 'C' + mr * sc + ',' + mr * ss + ' ' + mr * tc + ',' + mr * ts + ' ' + tr * tc + ',' + tr * ts;\n  };\n  const Paths = vegaUtil.fastmap({\n    'line': line,\n    'line-radial': lineR,\n    'arc': arc,\n    'arc-radial': arcR,\n    'curve': curve,\n    'curve-radial': curveR,\n    'orthogonal-horizontal': orthoX,\n    'orthogonal-vertical': orthoY,\n    'orthogonal-radial': orthoR,\n    'diagonal-horizontal': diagonalX,\n    'diagonal-vertical': diagonalY,\n    'diagonal-radial': diagonalR\n  });\n\n  function range(start, stop, step) {\n    start = +start, stop = +stop, step = (n = arguments.length) < 2 ? (stop = start, start = 0, 1) : n < 3 ? 1 : +step;\n    var i = -1,\n      n = Math.max(0, Math.ceil((stop - start) / step)) | 0,\n      range = new Array(n);\n    while (++i < n) {\n      range[i] = start + i * step;\n    }\n    return range;\n  }\n\n  function sum(values, valueof) {\n    let sum = 0;\n    {\n      for (let value of values) {\n        if (value = +value) {\n          sum += value;\n        }\n      }\n    }\n    return sum;\n  }\n\n  /**\n   * Pie and donut chart layout.\n   * @constructor\n   * @param {object} params - The parameters for this operator.\n   * @param {function(object): *} params.field - The value field to size pie segments.\n   * @param {number} [params.startAngle=0] - The start angle (in radians) of the layout.\n   * @param {number} [params.endAngle=2\u03c0] - The end angle (in radians) of the layout.\n   * @param {boolean} [params.sort] - Boolean flag for sorting sectors by value.\n   */\n  function Pie(params) {\n    vegaDataflow.Transform.call(this, null, params);\n  }\n  Pie.Definition = {\n    'type': 'Pie',\n    'metadata': {\n      'modifies': true\n    },\n    'params': [{\n      'name': 'field',\n      'type': 'field'\n    }, {\n      'name': 'startAngle',\n      'type': 'number',\n      'default': 0\n    }, {\n      'name': 'endAngle',\n      'type': 'number',\n      'default': 6.283185307179586\n    }, {\n      'name': 'sort',\n      'type': 'boolean',\n      'default': false\n    }, {\n      'name': 'as',\n      'type': 'string',\n      'array': true,\n      'length': 2,\n      'default': ['startAngle', 'endAngle']\n    }]\n  };\n  vegaUtil.inherits(Pie, vegaDataflow.Transform, {\n    transform(_, pulse) {\n      var as = _.as || ['startAngle', 'endAngle'],\n        startAngle = as[0],\n        endAngle = as[1],\n        field = _.field || vegaUtil.one,\n        start = _.startAngle || 0,\n        stop = _.endAngle != null ? _.endAngle : 2 * Math.PI,\n        data = pulse.source,\n        values = data.map(field),\n        n = values.length,\n        a = start,\n        k = (stop - start) / sum(values),\n        index = range(n),\n        i,\n        t,\n        v;\n      if (_.sort) {\n        index.sort((a, b) => values[a] - values[b]);\n      }\n      for (i = 0; i < n; ++i) {\n        v = values[index[i]];\n        t = data[index[i]];\n        t[startAngle] = a;\n        t[endAngle] = a += v * k;\n      }\n      this.value = values;\n      return pulse.reflow(_.modified()).modifies(as);\n    }\n  });\n\n  function define (constructor, factory, prototype) {\n    constructor.prototype = factory.prototype = prototype;\n    prototype.constructor = constructor;\n  }\n  function extend(parent, definition) {\n    var prototype = Object.create(parent.prototype);\n    for (var key in definition) prototype[key] = definition[key];\n    return prototype;\n  }\n\n  function Color() {}\n  var darker = 0.7;\n  var brighter = 1 / darker;\n  var reI = \"\\\\s*([+-]?\\\\d+)\\\\s*\",\n    reN = \"\\\\s*([+-]?(?:\\\\d*\\\\.)?\\\\d+(?:[eE][+-]?\\\\d+)?)\\\\s*\",\n    reP = \"\\\\s*([+-]?(?:\\\\d*\\\\.)?\\\\d+(?:[eE][+-]?\\\\d+)?)%\\\\s*\",\n    reHex = /^#([0-9a-f]{3,8})$/,\n    reRgbInteger = new RegExp(`^rgb\\\\(${reI},${reI},${reI}\\\\)$`),\n    reRgbPercent = new RegExp(`^rgb\\\\(${reP},${reP},${reP}\\\\)$`),\n    reRgbaInteger = new RegExp(`^rgba\\\\(${reI},${reI},${reI},${reN}\\\\)$`),\n    reRgbaPercent = new RegExp(`^rgba\\\\(${reP},${reP},${reP},${reN}\\\\)$`),\n    reHslPercent = new RegExp(`^hsl\\\\(${reN},${reP},${reP}\\\\)$`),\n    reHslaPercent = new RegExp(`^hsla\\\\(${reN},${reP},${reP},${reN}\\\\)$`);\n  var named = {\n    aliceblue: 0xf0f8ff,\n    antiquewhite: 0xfaebd7,\n    aqua: 0x00ffff,\n    aquamarine: 0x7fffd4,\n    azure: 0xf0ffff,\n    beige: 0xf5f5dc,\n    bisque: 0xffe4c4,\n    black: 0x000000,\n    blanchedalmond: 0xffebcd,\n    blue: 0x0000ff,\n    blueviolet: 0x8a2be2,\n    brown: 0xa52a2a,\n    burlywood: 0xdeb887,\n    cadetblue: 0x5f9ea0,\n    chartreuse: 0x7fff00,\n    chocolate: 0xd2691e,\n    coral: 0xff7f50,\n    cornflowerblue: 0x6495ed,\n    cornsilk: 0xfff8dc,\n    crimson: 0xdc143c,\n    cyan: 0x00ffff,\n    darkblue: 0x00008b,\n    darkcyan: 0x008b8b,\n    darkgoldenrod: 0xb8860b,\n    darkgray: 0xa9a9a9,\n    darkgreen: 0x006400,\n    darkgrey: 0xa9a9a9,\n    darkkhaki: 0xbdb76b,\n    darkmagenta: 0x8b008b,\n    darkolivegreen: 0x556b2f,\n    darkorange: 0xff8c00,\n    darkorchid: 0x9932cc,\n    darkred: 0x8b0000,\n    darksalmon: 0xe9967a,\n    darkseagreen: 0x8fbc8f,\n    darkslateblue: 0x483d8b,\n    darkslategray: 0x2f4f4f,\n    darkslategrey: 0x2f4f4f,\n    darkturquoise: 0x00ced1,\n    darkviolet: 0x9400d3,\n    deeppink: 0xff1493,\n    deepskyblue: 0x00bfff,\n    dimgray: 0x696969,\n    dimgrey: 0x696969,\n    dodgerblue: 0x1e90ff,\n    firebrick: 0xb22222,\n    floralwhite: 0xfffaf0,\n    forestgreen: 0x228b22,\n    fuchsia: 0xff00ff,\n    gainsboro: 0xdcdcdc,\n    ghostwhite: 0xf8f8ff,\n    gold: 0xffd700,\n    goldenrod: 0xdaa520,\n    gray: 0x808080,\n    green: 0x008000,\n    greenyellow: 0xadff2f,\n    grey: 0x808080,\n    honeydew: 0xf0fff0,\n    hotpink: 0xff69b4,\n    indianred: 0xcd5c5c,\n    indigo: 0x4b0082,\n    ivory: 0xfffff0,\n    khaki: 0xf0e68c,\n    lavender: 0xe6e6fa,\n    lavenderblush: 0xfff0f5,\n    lawngreen: 0x7cfc00,\n    lemonchiffon: 0xfffacd,\n    lightblue: 0xadd8e6,\n    lightcoral: 0xf08080,\n    lightcyan: 0xe0ffff,\n    lightgoldenrodyellow: 0xfafad2,\n    lightgray: 0xd3d3d3,\n    lightgreen: 0x90ee90,\n    lightgrey: 0xd3d3d3,\n    lightpink: 0xffb6c1,\n    lightsalmon: 0xffa07a,\n    lightseagreen: 0x20b2aa,\n    lightskyblue: 0x87cefa,\n    lightslategray: 0x778899,\n    lightslategrey: 0x778899,\n    lightsteelblue: 0xb0c4de,\n    lightyellow: 0xffffe0,\n    lime: 0x00ff00,\n    limegreen: 0x32cd32,\n    linen: 0xfaf0e6,\n    magenta: 0xff00ff,\n    maroon: 0x800000,\n    mediumaquamarine: 0x66cdaa,\n    mediumblue: 0x0000cd,\n    mediumorchid: 0xba55d3,\n    mediumpurple: 0x9370db,\n    mediumseagreen: 0x3cb371,\n    mediumslateblue: 0x7b68ee,\n    mediumspringgreen: 0x00fa9a,\n    mediumturquoise: 0x48d1cc,\n    mediumvioletred: 0xc71585,\n    midnightblue: 0x191970,\n    mintcream: 0xf5fffa,\n    mistyrose: 0xffe4e1,\n    moccasin: 0xffe4b5,\n    navajowhite: 0xffdead,\n    navy: 0x000080,\n    oldlace: 0xfdf5e6,\n    olive: 0x808000,\n    olivedrab: 0x6b8e23,\n    orange: 0xffa500,\n    orangered: 0xff4500,\n    orchid: 0xda70d6,\n    palegoldenrod: 0xeee8aa,\n    palegreen: 0x98fb98,\n    paleturquoise: 0xafeeee,\n    palevioletred: 0xdb7093,\n    papayawhip: 0xffefd5,\n    peachpuff: 0xffdab9,\n    peru: 0xcd853f,\n    pink: 0xffc0cb,\n    plum: 0xdda0dd,\n    powderblue: 0xb0e0e6,\n    purple: 0x800080,\n    rebeccapurple: 0x663399,\n    red: 0xff0000,\n    rosybrown: 0xbc8f8f,\n    royalblue: 0x4169e1,\n    saddlebrown: 0x8b4513,\n    salmon: 0xfa8072,\n    sandybrown: 0xf4a460,\n    seagreen: 0x2e8b57,\n    seashell: 0xfff5ee,\n    sienna: 0xa0522d,\n    silver: 0xc0c0c0,\n    skyblue: 0x87ceeb,\n    slateblue: 0x6a5acd,\n    slategray: 0x708090,\n    slategrey: 0x708090,\n    snow: 0xfffafa,\n    springgreen: 0x00ff7f,\n    steelblue: 0x4682b4,\n    tan: 0xd2b48c,\n    teal: 0x008080,\n    thistle: 0xd8bfd8,\n    tomato: 0xff6347,\n    turquoise: 0x40e0d0,\n    violet: 0xee82ee,\n    wheat: 0xf5deb3,\n    white: 0xffffff,\n    whitesmoke: 0xf5f5f5,\n    yellow: 0xffff00,\n    yellowgreen: 0x9acd32\n  };\n  define(Color, color, {\n    copy(channels) {\n      return Object.assign(new this.constructor(), this, channels);\n    },\n    displayable() {\n      return this.rgb().displayable();\n    },\n    hex: color_formatHex,\n    // Deprecated! Use color.formatHex.\n    formatHex: color_formatHex,\n    formatHex8: color_formatHex8,\n    formatHsl: color_formatHsl,\n    formatRgb: color_formatRgb,\n    toString: color_formatRgb\n  });\n  function color_formatHex() {\n    return this.rgb().formatHex();\n  }\n  function color_formatHex8() {\n    return this.rgb().formatHex8();\n  }\n  function color_formatHsl() {\n    return hslConvert(this).formatHsl();\n  }\n  function color_formatRgb() {\n    return this.rgb().formatRgb();\n  }\n  function color(format) {\n    var m, l;\n    format = (format + \"\").trim().toLowerCase();\n    return (m = reHex.exec(format)) ? (l = m[1].length, m = parseInt(m[1], 16), l === 6 ? rgbn(m) // #ff0000\n    : l === 3 ? new Rgb(m >> 8 & 0xf | m >> 4 & 0xf0, m >> 4 & 0xf | m & 0xf0, (m & 0xf) << 4 | m & 0xf, 1) // #f00\n    : l === 8 ? rgba(m >> 24 & 0xff, m >> 16 & 0xff, m >> 8 & 0xff, (m & 0xff) / 0xff) // #ff000000\n    : l === 4 ? rgba(m >> 12 & 0xf | m >> 8 & 0xf0, m >> 8 & 0xf | m >> 4 & 0xf0, m >> 4 & 0xf | m & 0xf0, ((m & 0xf) << 4 | m & 0xf) / 0xff) // #f000\n    : null // invalid hex\n    ) : (m = reRgbInteger.exec(format)) ? new Rgb(m[1], m[2], m[3], 1) // rgb(255, 0, 0)\n    : (m = reRgbPercent.exec(format)) ? new Rgb(m[1] * 255 / 100, m[2] * 255 / 100, m[3] * 255 / 100, 1) // rgb(100%, 0%, 0%)\n    : (m = reRgbaInteger.exec(format)) ? rgba(m[1], m[2], m[3], m[4]) // rgba(255, 0, 0, 1)\n    : (m = reRgbaPercent.exec(format)) ? rgba(m[1] * 255 / 100, m[2] * 255 / 100, m[3] * 255 / 100, m[4]) // rgb(100%, 0%, 0%, 1)\n    : (m = reHslPercent.exec(format)) ? hsla(m[1], m[2] / 100, m[3] / 100, 1) // hsl(120, 50%, 50%)\n    : (m = reHslaPercent.exec(format)) ? hsla(m[1], m[2] / 100, m[3] / 100, m[4]) // hsla(120, 50%, 50%, 1)\n    : named.hasOwnProperty(format) ? rgbn(named[format]) // eslint-disable-line no-prototype-builtins\n    : format === \"transparent\" ? new Rgb(NaN, NaN, NaN, 0) : null;\n  }\n  function rgbn(n) {\n    return new Rgb(n >> 16 & 0xff, n >> 8 & 0xff, n & 0xff, 1);\n  }\n  function rgba(r, g, b, a) {\n    if (a <= 0) r = g = b = NaN;\n    return new Rgb(r, g, b, a);\n  }\n  function rgbConvert(o) {\n    if (!(o instanceof Color)) o = color(o);\n    if (!o) return new Rgb();\n    o = o.rgb();\n    return new Rgb(o.r, o.g, o.b, o.opacity);\n  }\n  function rgb$1(r, g, b, opacity) {\n    return arguments.length === 1 ? rgbConvert(r) : new Rgb(r, g, b, opacity == null ? 1 : opacity);\n  }\n  function Rgb(r, g, b, opacity) {\n    this.r = +r;\n    this.g = +g;\n    this.b = +b;\n    this.opacity = +opacity;\n  }\n  define(Rgb, rgb$1, extend(Color, {\n    brighter(k) {\n      k = k == null ? brighter : Math.pow(brighter, k);\n      return new Rgb(this.r * k, this.g * k, this.b * k, this.opacity);\n    },\n    darker(k) {\n      k = k == null ? darker : Math.pow(darker, k);\n      return new Rgb(this.r * k, this.g * k, this.b * k, this.opacity);\n    },\n    rgb() {\n      return this;\n    },\n    clamp() {\n      return new Rgb(clampi(this.r), clampi(this.g), clampi(this.b), clampa(this.opacity));\n    },\n    displayable() {\n      return -0.5 <= this.r && this.r < 255.5 && -0.5 <= this.g && this.g < 255.5 && -0.5 <= this.b && this.b < 255.5 && 0 <= this.opacity && this.opacity <= 1;\n    },\n    hex: rgb_formatHex,\n    // Deprecated! Use color.formatHex.\n    formatHex: rgb_formatHex,\n    formatHex8: rgb_formatHex8,\n    formatRgb: rgb_formatRgb,\n    toString: rgb_formatRgb\n  }));\n  function rgb_formatHex() {\n    return `#${hex(this.r)}${hex(this.g)}${hex(this.b)}`;\n  }\n  function rgb_formatHex8() {\n    return `#${hex(this.r)}${hex(this.g)}${hex(this.b)}${hex((isNaN(this.opacity) ? 1 : this.opacity) * 255)}`;\n  }\n  function rgb_formatRgb() {\n    const a = clampa(this.opacity);\n    return `${a === 1 ? \"rgb(\" : \"rgba(\"}${clampi(this.r)}, ${clampi(this.g)}, ${clampi(this.b)}${a === 1 ? \")\" : `, ${a})`}`;\n  }\n  function clampa(opacity) {\n    return isNaN(opacity) ? 1 : Math.max(0, Math.min(1, opacity));\n  }\n  function clampi(value) {\n    return Math.max(0, Math.min(255, Math.round(value) || 0));\n  }\n  function hex(value) {\n    value = clampi(value);\n    return (value < 16 ? \"0\" : \"\") + value.toString(16);\n  }\n  function hsla(h, s, l, a) {\n    if (a <= 0) h = s = l = NaN;else if (l <= 0 || l >= 1) h = s = NaN;else if (s <= 0) h = NaN;\n    return new Hsl(h, s, l, a);\n  }\n  function hslConvert(o) {\n    if (o instanceof Hsl) return new Hsl(o.h, o.s, o.l, o.opacity);\n    if (!(o instanceof Color)) o = color(o);\n    if (!o) return new Hsl();\n    if (o instanceof Hsl) return o;\n    o = o.rgb();\n    var r = o.r / 255,\n      g = o.g / 255,\n      b = o.b / 255,\n      min = Math.min(r, g, b),\n      max = Math.max(r, g, b),\n      h = NaN,\n      s = max - min,\n      l = (max + min) / 2;\n    if (s) {\n      if (r === max) h = (g - b) / s + (g < b) * 6;else if (g === max) h = (b - r) / s + 2;else h = (r - g) / s + 4;\n      s /= l < 0.5 ? max + min : 2 - max - min;\n      h *= 60;\n    } else {\n      s = l > 0 && l < 1 ? 0 : h;\n    }\n    return new Hsl(h, s, l, o.opacity);\n  }\n  function hsl(h, s, l, opacity) {\n    return arguments.length === 1 ? hslConvert(h) : new Hsl(h, s, l, opacity == null ? 1 : opacity);\n  }\n  function Hsl(h, s, l, opacity) {\n    this.h = +h;\n    this.s = +s;\n    this.l = +l;\n    this.opacity = +opacity;\n  }\n  define(Hsl, hsl, extend(Color, {\n    brighter(k) {\n      k = k == null ? brighter : Math.pow(brighter, k);\n      return new Hsl(this.h, this.s, this.l * k, this.opacity);\n    },\n    darker(k) {\n      k = k == null ? darker : Math.pow(darker, k);\n      return new Hsl(this.h, this.s, this.l * k, this.opacity);\n    },\n    rgb() {\n      var h = this.h % 360 + (this.h < 0) * 360,\n        s = isNaN(h) || isNaN(this.s) ? 0 : this.s,\n        l = this.l,\n        m2 = l + (l < 0.5 ? l : 1 - l) * s,\n        m1 = 2 * l - m2;\n      return new Rgb(hsl2rgb(h >= 240 ? h - 240 : h + 120, m1, m2), hsl2rgb(h, m1, m2), hsl2rgb(h < 120 ? h + 240 : h - 120, m1, m2), this.opacity);\n    },\n    clamp() {\n      return new Hsl(clamph(this.h), clampt(this.s), clampt(this.l), clampa(this.opacity));\n    },\n    displayable() {\n      return (0 <= this.s && this.s <= 1 || isNaN(this.s)) && 0 <= this.l && this.l <= 1 && 0 <= this.opacity && this.opacity <= 1;\n    },\n    formatHsl() {\n      const a = clampa(this.opacity);\n      return `${a === 1 ? \"hsl(\" : \"hsla(\"}${clamph(this.h)}, ${clampt(this.s) * 100}%, ${clampt(this.l) * 100}%${a === 1 ? \")\" : `, ${a})`}`;\n    }\n  }));\n  function clamph(value) {\n    value = (value || 0) % 360;\n    return value < 0 ? value + 360 : value;\n  }\n  function clampt(value) {\n    return Math.max(0, Math.min(1, value || 0));\n  }\n\n  /* From FvD 13.37, CSS Color Module Level 3 */\n  function hsl2rgb(h, m1, m2) {\n    return (h < 60 ? m1 + (m2 - m1) * h / 60 : h < 180 ? m2 : h < 240 ? m1 + (m2 - m1) * (240 - h) / 60 : m1) * 255;\n  }\n\n  var constant = x => () => x;\n\n  function linear(a, d) {\n    return function (t) {\n      return a + t * d;\n    };\n  }\n  function exponential(a, b, y) {\n    return a = Math.pow(a, y), b = Math.pow(b, y) - a, y = 1 / y, function (t) {\n      return Math.pow(a + t * b, y);\n    };\n  }\n  function gamma(y) {\n    return (y = +y) === 1 ? nogamma : function (a, b) {\n      return b - a ? exponential(a, b, y) : constant(isNaN(a) ? b : a);\n    };\n  }\n  function nogamma(a, b) {\n    var d = b - a;\n    return d ? linear(a, d) : constant(isNaN(a) ? b : a);\n  }\n\n  var rgb = (function rgbGamma(y) {\n    var color = gamma(y);\n    function rgb(start, end) {\n      var r = color((start = rgb$1(start)).r, (end = rgb$1(end)).r),\n        g = color(start.g, end.g),\n        b = color(start.b, end.b),\n        opacity = nogamma(start.opacity, end.opacity);\n      return function (t) {\n        start.r = r(t);\n        start.g = g(t);\n        start.b = b(t);\n        start.opacity = opacity(t);\n        return start + \"\";\n      };\n    }\n    rgb.gamma = rgbGamma;\n    return rgb;\n  })(1);\n\n  function numberArray (a, b) {\n    if (!b) b = [];\n    var n = a ? Math.min(b.length, a.length) : 0,\n      c = b.slice(),\n      i;\n    return function (t) {\n      for (i = 0; i < n; ++i) c[i] = a[i] * (1 - t) + b[i] * t;\n      return c;\n    };\n  }\n  function isNumberArray(x) {\n    return ArrayBuffer.isView(x) && !(x instanceof DataView);\n  }\n\n  function genericArray(a, b) {\n    var nb = b ? b.length : 0,\n      na = a ? Math.min(nb, a.length) : 0,\n      x = new Array(na),\n      c = new Array(nb),\n      i;\n    for (i = 0; i < na; ++i) x[i] = interpolate(a[i], b[i]);\n    for (; i < nb; ++i) c[i] = b[i];\n    return function (t) {\n      for (i = 0; i < na; ++i) c[i] = x[i](t);\n      return c;\n    };\n  }\n\n  function date (a, b) {\n    var d = new Date();\n    return a = +a, b = +b, function (t) {\n      return d.setTime(a * (1 - t) + b * t), d;\n    };\n  }\n\n  function number (a, b) {\n    return a = +a, b = +b, function (t) {\n      return a * (1 - t) + b * t;\n    };\n  }\n\n  function object (a, b) {\n    var i = {},\n      c = {},\n      k;\n    if (a === null || typeof a !== \"object\") a = {};\n    if (b === null || typeof b !== \"object\") b = {};\n    for (k in b) {\n      if (k in a) {\n        i[k] = interpolate(a[k], b[k]);\n      } else {\n        c[k] = b[k];\n      }\n    }\n    return function (t) {\n      for (k in i) c[k] = i[k](t);\n      return c;\n    };\n  }\n\n  var reA = /[-+]?(?:\\d+\\.?\\d*|\\.?\\d+)(?:[eE][-+]?\\d+)?/g,\n    reB = new RegExp(reA.source, \"g\");\n  function zero(b) {\n    return function () {\n      return b;\n    };\n  }\n  function one(b) {\n    return function (t) {\n      return b(t) + \"\";\n    };\n  }\n  function string (a, b) {\n    var bi = reA.lastIndex = reB.lastIndex = 0,\n      // scan index for next number in b\n      am,\n      // current match in a\n      bm,\n      // current match in b\n      bs,\n      // string preceding current number in b, if any\n      i = -1,\n      // index in s\n      s = [],\n      // string constants and placeholders\n      q = []; // number interpolators\n\n    // Coerce inputs to strings.\n    a = a + \"\", b = b + \"\";\n\n    // Interpolate pairs of numbers in a & b.\n    while ((am = reA.exec(a)) && (bm = reB.exec(b))) {\n      if ((bs = bm.index) > bi) {\n        // a string precedes the next number in b\n        bs = b.slice(bi, bs);\n        if (s[i]) s[i] += bs; // coalesce with previous string\n        else s[++i] = bs;\n      }\n      if ((am = am[0]) === (bm = bm[0])) {\n        // numbers in a & b match\n        if (s[i]) s[i] += bm; // coalesce with previous string\n        else s[++i] = bm;\n      } else {\n        // interpolate non-matching numbers\n        s[++i] = null;\n        q.push({\n          i: i,\n          x: number(am, bm)\n        });\n      }\n      bi = reB.lastIndex;\n    }\n\n    // Add remains of b.\n    if (bi < b.length) {\n      bs = b.slice(bi);\n      if (s[i]) s[i] += bs; // coalesce with previous string\n      else s[++i] = bs;\n    }\n\n    // Special optimization for only a single match.\n    // Otherwise, interpolate each of the numbers and rejoin the string.\n    return s.length < 2 ? q[0] ? one(q[0].x) : zero(b) : (b = q.length, function (t) {\n      for (var i = 0, o; i < b; ++i) s[(o = q[i]).i] = o.x(t);\n      return s.join(\"\");\n    });\n  }\n\n  function interpolate (a, b) {\n    var t = typeof b,\n      c;\n    return b == null || t === \"boolean\" ? constant(b) : (t === \"number\" ? number : t === \"string\" ? (c = color(b)) ? (b = c, rgb) : string : b instanceof color ? rgb : b instanceof Date ? date : isNumberArray(b) ? numberArray : Array.isArray(b) ? genericArray : typeof b.valueOf !== \"function\" && typeof b.toString !== \"function\" || isNaN(b) ? object : number)(a, b);\n  }\n\n  function interpolateRound (a, b) {\n    return a = +a, b = +b, function (t) {\n      return Math.round(a * (1 - t) + b * t);\n    };\n  }\n\n  const DEFAULT_COUNT = 5;\n  function includeZero(scale) {\n    const type = scale.type;\n    return !scale.bins && (type === vegaScale.Linear || type === vegaScale.Pow || type === vegaScale.Sqrt);\n  }\n  function includePad(type) {\n    return vegaScale.isContinuous(type) && type !== vegaScale.Sequential;\n  }\n  const SKIP = vegaUtil.toSet(['set', 'modified', 'clear', 'type', 'scheme', 'schemeExtent', 'schemeCount', 'domain', 'domainMin', 'domainMid', 'domainMax', 'domainRaw', 'domainImplicit', 'nice', 'zero', 'bins', 'range', 'rangeStep', 'round', 'reverse', 'interpolate', 'interpolateGamma']);\n\n  /**\n   * Maintains a scale function mapping data values to visual channels.\n   * @constructor\n   * @param {object} params - The parameters for this operator.\n   */\n  function Scale(params) {\n    vegaDataflow.Transform.call(this, null, params);\n    this.modified(true); // always treat as modified\n  }\n  vegaUtil.inherits(Scale, vegaDataflow.Transform, {\n    transform(_, pulse) {\n      var df = pulse.dataflow,\n        scale = this.value,\n        key = scaleKey(_);\n      if (!scale || key !== scale.type) {\n        this.value = scale = vegaScale.scale(key)();\n      }\n      for (key in _) if (!SKIP[key]) {\n        // padding is a scale property for band/point but not others\n        if (key === 'padding' && includePad(scale.type)) continue;\n        // invoke scale property setter, raise warning if not found\n        vegaUtil.isFunction(scale[key]) ? scale[key](_[key]) : df.warn('Unsupported scale property: ' + key);\n      }\n      configureRange(scale, _, configureBins(scale, _, configureDomain(scale, _, df)));\n      return pulse.fork(pulse.NO_SOURCE | pulse.NO_FIELDS);\n    }\n  });\n  function scaleKey(_) {\n    var t = _.type,\n      d = '',\n      n;\n\n    // backwards compatibility pre Vega 5.\n    if (t === vegaScale.Sequential) return vegaScale.Sequential + '-' + vegaScale.Linear;\n    if (isContinuousColor(_)) {\n      n = _.rawDomain ? _.rawDomain.length : _.domain ? _.domain.length + +(_.domainMid != null) : 0;\n      d = n === 2 ? vegaScale.Sequential + '-' : n === 3 ? vegaScale.Diverging + '-' : '';\n    }\n    return (d + t || vegaScale.Linear).toLowerCase();\n  }\n  function isContinuousColor(_) {\n    const t = _.type;\n    return vegaScale.isContinuous(t) && t !== vegaScale.Time && t !== vegaScale.UTC && (_.scheme || _.range && _.range.length && _.range.every(vegaUtil.isString));\n  }\n  function configureDomain(scale, _, df) {\n    // check raw domain, if provided use that and exit early\n    const raw = rawDomain(scale, _.domainRaw, df);\n    if (raw > -1) return raw;\n    var domain = _.domain,\n      type = scale.type,\n      zero = _.zero || _.zero === undefined && includeZero(scale),\n      n,\n      mid;\n    if (!domain) return 0;\n\n    // adjust domain based on zero, min, max settings\n    if (zero || _.domainMin != null || _.domainMax != null || _.domainMid != null) {\n      n = (domain = domain.slice()).length - 1 || 1;\n      if (zero) {\n        if (domain[0] > 0) domain[0] = 0;\n        if (domain[n] < 0) domain[n] = 0;\n      }\n      if (_.domainMin != null) domain[0] = _.domainMin;\n      if (_.domainMax != null) domain[n] = _.domainMax;\n      if (_.domainMid != null) {\n        mid = _.domainMid;\n        const i = mid > domain[n] ? n + 1 : mid < domain[0] ? 0 : n;\n        if (i !== n) df.warn('Scale domainMid exceeds domain min or max.', mid);\n        domain.splice(i, 0, mid);\n      }\n    }\n\n    // adjust continuous domain for minimum pixel padding\n    if (includePad(type) && _.padding && domain[0] !== vegaUtil.peek(domain)) {\n      domain = padDomain(type, domain, _.range, _.padding, _.exponent, _.constant);\n    }\n\n    // set the scale domain\n    scale.domain(domainCheck(type, domain, df));\n\n    // if ordinal scale domain is defined, prevent implicit\n    // domain construction as side-effect of scale lookup\n    if (type === vegaScale.Ordinal) {\n      scale.unknown(_.domainImplicit ? vegaScale.scaleImplicit : undefined);\n    }\n\n    // perform 'nice' adjustment as requested\n    if (_.nice && scale.nice) {\n      scale.nice(_.nice !== true && vegaScale.tickCount(scale, _.nice) || null);\n    }\n\n    // return the cardinality of the domain\n    return domain.length;\n  }\n  function rawDomain(scale, raw, df) {\n    if (raw) {\n      scale.domain(domainCheck(scale.type, raw, df));\n      return raw.length;\n    } else {\n      return -1;\n    }\n  }\n  function padDomain(type, domain, range, pad, exponent, constant) {\n    var span = Math.abs(vegaUtil.peek(range) - range[0]),\n      frac = span / (span - 2 * pad),\n      d = type === vegaScale.Log ? vegaUtil.zoomLog(domain, null, frac) : type === vegaScale.Sqrt ? vegaUtil.zoomPow(domain, null, frac, 0.5) : type === vegaScale.Pow ? vegaUtil.zoomPow(domain, null, frac, exponent || 1) : type === vegaScale.Symlog ? vegaUtil.zoomSymlog(domain, null, frac, constant || 1) : vegaUtil.zoomLinear(domain, null, frac);\n    domain = domain.slice();\n    domain[0] = d[0];\n    domain[domain.length - 1] = d[1];\n    return domain;\n  }\n  function domainCheck(type, domain, df) {\n    if (vegaScale.isLogarithmic(type)) {\n      // sum signs of domain values\n      // if all pos or all neg, abs(sum) === domain.length\n      var s = Math.abs(domain.reduce((s, v) => s + (v < 0 ? -1 : v > 0 ? 1 : 0), 0));\n      if (s !== domain.length) {\n        df.warn('Log scale domain includes zero: ' + vegaUtil.stringValue(domain));\n      }\n    }\n    return domain;\n  }\n  function configureBins(scale, _, count) {\n    let bins = _.bins;\n    if (bins && !vegaUtil.isArray(bins)) {\n      // generate bin boundary array\n      const domain = scale.domain(),\n        lo = domain[0],\n        hi = vegaUtil.peek(domain),\n        step = bins.step;\n      let start = bins.start == null ? lo : bins.start,\n        stop = bins.stop == null ? hi : bins.stop;\n      if (!step) vegaUtil.error('Scale bins parameter missing step property.');\n      if (start < lo) start = step * Math.ceil(lo / step);\n      if (stop > hi) stop = step * Math.floor(hi / step);\n      bins = range(start, stop + step / 2, step);\n    }\n    if (bins) {\n      // assign bin boundaries to scale instance\n      scale.bins = bins;\n    } else if (scale.bins) {\n      // no current bins, remove bins if previously set\n      delete scale.bins;\n    }\n\n    // special handling for bin-ordinal scales\n    if (scale.type === vegaScale.BinOrdinal) {\n      if (!bins) {\n        // the domain specifies the bins\n        scale.bins = scale.domain();\n      } else if (!_.domain && !_.domainRaw) {\n        // the bins specify the domain\n        scale.domain(bins);\n        count = bins.length;\n      }\n    }\n\n    // return domain cardinality\n    return count;\n  }\n  function configureRange(scale, _, count) {\n    var type = scale.type,\n      round = _.round || false,\n      range = _.range;\n\n    // if range step specified, calculate full range extent\n    if (_.rangeStep != null) {\n      range = configureRangeStep(type, _, count);\n    }\n\n    // else if a range scheme is defined, use that\n    else if (_.scheme) {\n      range = configureScheme(type, _, count);\n      if (vegaUtil.isFunction(range)) {\n        if (scale.interpolator) {\n          return scale.interpolator(range);\n        } else {\n          vegaUtil.error(`Scale type ${type} does not support interpolating color schemes.`);\n        }\n      }\n    }\n\n    // given a range array for an interpolating scale, convert to interpolator\n    if (range && vegaScale.isInterpolating(type)) {\n      return scale.interpolator(vegaScale.interpolateColors(flip(range, _.reverse), _.interpolate, _.interpolateGamma));\n    }\n\n    // configure rounding / interpolation\n    if (range && _.interpolate && scale.interpolate) {\n      scale.interpolate(vegaScale.interpolate(_.interpolate, _.interpolateGamma));\n    } else if (vegaUtil.isFunction(scale.round)) {\n      scale.round(round);\n    } else if (vegaUtil.isFunction(scale.rangeRound)) {\n      scale.interpolate(round ? interpolateRound : interpolate);\n    }\n    if (range) scale.range(flip(range, _.reverse));\n  }\n  function configureRangeStep(type, _, count) {\n    if (type !== vegaScale.Band && type !== vegaScale.Point) {\n      vegaUtil.error('Only band and point scales support rangeStep.');\n    }\n\n    // calculate full range based on requested step size and padding\n    var outer = (_.paddingOuter != null ? _.paddingOuter : _.padding) || 0,\n      inner = type === vegaScale.Point ? 1 : (_.paddingInner != null ? _.paddingInner : _.padding) || 0;\n    return [0, _.rangeStep * vegaScale.bandSpace(count, inner, outer)];\n  }\n  function configureScheme(type, _, count) {\n    var extent = _.schemeExtent,\n      name,\n      scheme;\n    if (vegaUtil.isArray(_.scheme)) {\n      scheme = vegaScale.interpolateColors(_.scheme, _.interpolate, _.interpolateGamma);\n    } else {\n      name = _.scheme.toLowerCase();\n      scheme = vegaScale.scheme(name);\n      if (!scheme) vegaUtil.error(`Unrecognized scheme name: ${_.scheme}`);\n    }\n\n    // determine size for potential discrete range\n    count = type === vegaScale.Threshold ? count + 1 : type === vegaScale.BinOrdinal ? count - 1 : type === vegaScale.Quantile || type === vegaScale.Quantize ? +_.schemeCount || DEFAULT_COUNT : count;\n\n    // adjust and/or quantize scheme as appropriate\n    return vegaScale.isInterpolating(type) ? adjustScheme(scheme, extent, _.reverse) : vegaUtil.isFunction(scheme) ? vegaScale.quantizeInterpolator(adjustScheme(scheme, extent), count) : type === vegaScale.Ordinal ? scheme : scheme.slice(0, count);\n  }\n  function adjustScheme(scheme, extent, reverse) {\n    return vegaUtil.isFunction(scheme) && (extent || reverse) ? vegaScale.interpolateRange(scheme, flip(extent || [0, 1], reverse)) : scheme;\n  }\n  function flip(array, reverse) {\n    return reverse ? array.slice().reverse() : array;\n  }\n\n  /**\n   * Sorts scenegraph items in the pulse source array.\n   * @constructor\n   * @param {object} params - The parameters for this operator.\n   * @param {function(*,*): number} [params.sort] - A comparator\n   *   function for sorting tuples.\n   */\n  function SortItems(params) {\n    vegaDataflow.Transform.call(this, null, params);\n  }\n  vegaUtil.inherits(SortItems, vegaDataflow.Transform, {\n    transform(_, pulse) {\n      const mod = _.modified('sort') || pulse.changed(pulse.ADD) || pulse.modified(_.sort.fields) || pulse.modified('datum');\n      if (mod) pulse.source.sort(vegaDataflow.stableCompare(_.sort));\n      this.modified(mod);\n      return pulse;\n    }\n  });\n\n  const Zero = 'zero',\n    Center = 'center',\n    Normalize = 'normalize',\n    DefOutput = ['y0', 'y1'];\n\n  /**\n   * Stack layout for visualization elements.\n   * @constructor\n   * @param {object} params - The parameters for this operator.\n   * @param {function(object): *} params.field - The value field to stack.\n   * @param {Array<function(object): *>} [params.groupby] - An array of accessors to groupby.\n   * @param {function(object,object): number} [params.sort] - A comparator for stack sorting.\n   * @param {string} [offset='zero'] - Stack baseline offset. One of 'zero', 'center', 'normalize'.\n   */\n  function Stack(params) {\n    vegaDataflow.Transform.call(this, null, params);\n  }\n  Stack.Definition = {\n    'type': 'Stack',\n    'metadata': {\n      'modifies': true\n    },\n    'params': [{\n      'name': 'field',\n      'type': 'field'\n    }, {\n      'name': 'groupby',\n      'type': 'field',\n      'array': true\n    }, {\n      'name': 'sort',\n      'type': 'compare'\n    }, {\n      'name': 'offset',\n      'type': 'enum',\n      'default': Zero,\n      'values': [Zero, Center, Normalize]\n    }, {\n      'name': 'as',\n      'type': 'string',\n      'array': true,\n      'length': 2,\n      'default': DefOutput\n    }]\n  };\n  vegaUtil.inherits(Stack, vegaDataflow.Transform, {\n    transform(_, pulse) {\n      var as = _.as || DefOutput,\n        y0 = as[0],\n        y1 = as[1],\n        sort = vegaDataflow.stableCompare(_.sort),\n        field = _.field || vegaUtil.one,\n        stack = _.offset === Center ? stackCenter : _.offset === Normalize ? stackNormalize : stackZero,\n        groups,\n        i,\n        n,\n        max;\n\n      // partition, sum, and sort the stack groups\n      groups = partition(pulse.source, _.groupby, sort, field);\n\n      // compute stack layouts per group\n      for (i = 0, n = groups.length, max = groups.max; i < n; ++i) {\n        stack(groups[i], max, field, y0, y1);\n      }\n      return pulse.reflow(_.modified()).modifies(as);\n    }\n  });\n  function stackCenter(group, max, field, y0, y1) {\n    var last = (max - group.sum) / 2,\n      m = group.length,\n      j = 0,\n      t;\n    for (; j < m; ++j) {\n      t = group[j];\n      t[y0] = last;\n      t[y1] = last += Math.abs(field(t));\n    }\n  }\n  function stackNormalize(group, max, field, y0, y1) {\n    var scale = 1 / group.sum,\n      last = 0,\n      m = group.length,\n      j = 0,\n      v = 0,\n      t;\n    for (; j < m; ++j) {\n      t = group[j];\n      t[y0] = last;\n      t[y1] = last = scale * (v += Math.abs(field(t)));\n    }\n  }\n  function stackZero(group, max, field, y0, y1) {\n    var lastPos = 0,\n      lastNeg = 0,\n      m = group.length,\n      j = 0,\n      v,\n      t;\n    for (; j < m; ++j) {\n      t = group[j];\n      v = +field(t);\n      if (v < 0) {\n        t[y0] = lastNeg;\n        t[y1] = lastNeg += v;\n      } else {\n        t[y0] = lastPos;\n        t[y1] = lastPos += v;\n      }\n    }\n  }\n  function partition(data, groupby, sort, field) {\n    var groups = [],\n      get = f => f(t),\n      map,\n      i,\n      n,\n      m,\n      t,\n      k,\n      g,\n      s,\n      max;\n\n    // partition data points into stack groups\n    if (groupby == null) {\n      groups.push(data.slice());\n    } else {\n      for (map = {}, i = 0, n = data.length; i < n; ++i) {\n        t = data[i];\n        k = groupby.map(get);\n        g = map[k];\n        if (!g) {\n          map[k] = g = [];\n          groups.push(g);\n        }\n        g.push(t);\n      }\n    }\n\n    // compute sums of groups, sort groups as needed\n    for (k = 0, max = 0, m = groups.length; k < m; ++k) {\n      g = groups[k];\n      for (i = 0, s = 0, n = g.length; i < n; ++i) {\n        s += Math.abs(field(g[i]));\n      }\n      g.sum = s;\n      if (s > max) max = s;\n      if (sort) g.sort(sort);\n    }\n    groups.max = max;\n    return groups;\n  }\n\n  exports.axisticks = AxisTicks;\n  exports.datajoin = DataJoin;\n  exports.encode = Encode;\n  exports.legendentries = LegendEntries;\n  exports.linkpath = LinkPath;\n  exports.pie = Pie;\n  exports.scale = Scale;\n  exports.sortitems = SortItems;\n  exports.stack = Stack;\n\n}));\n\n};"],
"names":["shadow$provide","require","module","exports","global","factory","define","amd","globalThis","self","vega","vegaDataflow","vegaScale","vegaUtil","AxisTicks","params","Transform","call","DataJoin","defaultItemCreate","ingest","newMap","key","map","fastmap","test","t","exit","lookup","map.lookup","get","Encode","LegendEntries","LinkPath","range","start","stop","step","n","arguments","length","i","Math","max","ceil","Array","sum","values","valueof","value","Pie","constructor","prototype","extend","parent","definition","Object","create","Color","color_formatHex","rgb","formatHex","color_formatRgb","formatRgb","color","format","m","l","trim","toLowerCase","reHex","exec","parseInt","rgbn","Rgb","rgba","reRgbInteger","reRgbPercent","reRgbaInteger","reRgbaPercent","reHslPercent","hsla","reHslaPercent","named","hasOwnProperty","NaN","r","g","b","a","rgb$1","opacity","o","rgb_formatHex","hex","rgb_formatRgb","clampa","clampi","isNaN","min","round","toString","h","s","Hsl","hslConvert","clamph","clampt","hsl2rgb","m1","m2","linear","d","exponential","y","pow","gamma","nogamma","constant","numberArray","c","slice","genericArray","nb","na","x","interpolate","date","Date","setTime","number","object","k","zero","one","string","bi","reA","lastIndex","reB","am","bm","bs","q","index","push","join","ArrayBuffer","isView","DataView","interpolateRound","includePad","type","isContinuous","Sequential","Scale","modified","domainCheck","domain","df","isLogarithmic","abs","reduce","v","warn","stringValue","adjustScheme","scheme","extent","reverse","isFunction","interpolateRange","flip","array","SortItems","Stack","stackCenter","group","field","y0","y1","last","j","stackNormalize","scale","stackZero","lastNeg","lastPos","partition","data","groupby","sort","groups","f","inherits","transform","_","pulse","StopPropagation","locale","dataflow","out","fork","NO_SOURCE","NO_FIELDS","ticks","count","tickCount","tally","minstep","tickFormat","formatSpecifier","formatType","validTicks","tickValues","rem","label","extra","source","add","item","tupleid","isArray","encode","error","addAll","visit","ADD","empty","mod","set","datum","MOD","REM","changed","ADD_MOD","modifies","clean","cleanThreshold","runAfter","ADD_REM","fmod","encoders","every","e","reenter","update","falsy","enter","output","flag","REFLOW","items","SymbolLegend","limit","lskip","labelFormat","labelValues","size","ellipsis","offset","GradientLegend","fraction","scaleFraction","peek","perc","labelFraction","perc2","sourceX","sourceY","targetX","target","targetY","Definition","sx","sy","tx","ty","as","shape","path","Paths","orient","SOURCE","reflow","line","arc","dx","dy","rr","hypot","atan2","PI","curve","ix","iy","sa","sr","ta","tr","lineR","cos","sin","arcR","curveR","orthoX","orthoY","orthoR","tc","ts","sc","ss","sf","diagonalX","diagonalY","diagonalR","mr","startAngle","endAngle","brighter","darker","RegExp","aliceblue","antiquewhite","aqua","aquamarine","azure","beige","bisque","black","blanchedalmond","blue","blueviolet","brown","burlywood","cadetblue","chartreuse","chocolate","coral","cornflowerblue","cornsilk","crimson","cyan","darkblue","darkcyan","darkgoldenrod","darkgray","darkgreen","darkgrey","darkkhaki","darkmagenta","darkolivegreen","darkorange","darkorchid","darkred","darksalmon","darkseagreen","darkslateblue","darkslategray","darkslategrey","darkturquoise","darkviolet","deeppink","deepskyblue","dimgray","dimgrey","dodgerblue","firebrick","floralwhite","forestgreen","fuchsia","gainsboro","ghostwhite","gold","goldenrod","gray","green","greenyellow","grey","honeydew","hotpink","indianred","indigo","ivory","khaki","lavender","lavenderblush","lawngreen","lemonchiffon","lightblue","lightcoral","lightcyan","lightgoldenrodyellow","lightgray","lightgreen","lightgrey","lightpink","lightsalmon","lightseagreen","lightskyblue","lightslategray","lightslategrey","lightsteelblue","lightyellow","lime","limegreen","linen","magenta","maroon","mediumaquamarine","mediumblue","mediumorchid","mediumpurple","mediumseagreen","mediumslateblue","mediumspringgreen","mediumturquoise","mediumvioletred","midnightblue","mintcream","mistyrose","moccasin","navajowhite","navy","oldlace","olive","olivedrab","orange","orangered","orchid","palegoldenrod","palegreen","paleturquoise","palevioletred","papayawhip","peachpuff","peru","pink","plum","powderblue","purple","rebeccapurple","red","rosybrown","royalblue","saddlebrown","salmon","sandybrown","seagreen","seashell","sienna","silver","skyblue","slateblue","slategray","slategrey","snow","springgreen","steelblue","tan","teal","thistle","tomato","turquoise","violet","wheat","white","whitesmoke","yellow","yellowgreen","copy","channels","assign","displayable","formatHex8","color_formatHex8","formatHsl","color_formatHsl","clamp","rgb_formatHex8","hsl","rgbGamma","end","SKIP","toSet","Linear","Time","UTC","isString","rawDomain","domainMid","Diverging","domainRaw","raw","bins","Pow","Sqrt","domainMin","domainMax","mid","splice","padding","exponent","span","frac","pad","Log","zoomLog","zoomPow","Symlog","zoomSymlog","zoomLinear","Ordinal","unknown","domainImplicit","scaleImplicit","undefined","nice","lo","hi","floor","BinOrdinal","rangeStep","Band","Point","bandSpace","inner","paddingInner","paddingOuter","schemeExtent","interpolateColors","interpolateGamma","name","Threshold","Quantile","Quantize","schemeCount","DEFAULT_COUNT","isInterpolating","quantizeInterpolator","interpolator","rangeRound","fields","stableCompare","DefOutput","Zero","Center","Normalize","stack","axisticks","datajoin","legendentries","linkpath","pie","sortitems"]
}
