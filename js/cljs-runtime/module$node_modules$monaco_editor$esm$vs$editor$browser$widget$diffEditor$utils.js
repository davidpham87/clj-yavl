shadow$provide.module$node_modules$monaco_editor$esm$vs$editor$browser$widget$diffEditor$utils = function(require, module, exports) {
  function joinCombine(arr1, arr2, keySelector, combine) {
    if (arr1.length === 0) {
      return arr2;
    }
    if (arr2.length === 0) {
      return arr1;
    }
    const result = [];
    let i = 0, j = 0;
    for (; i < arr1.length && j < arr2.length;) {
      const val1 = arr1[i], val2 = arr2[j], key1 = keySelector(val1), key2 = keySelector(val2);
      key1 < key2 ? (result.push(val1), i++) : (key1 > key2 ? result.push(val2) : (result.push(combine(val1, val2)), i++), j++);
    }
    for (; i < arr1.length;) {
      result.push(arr1[i]), i++;
    }
    for (; j < arr2.length;) {
      result.push(arr2[j]), j++;
    }
    return result;
  }
  function applyObservableDecorations(editor, decorations) {
    const d = new require$_DOT__DOT__SLASH__DOT__DOT__SLASH__DOT__DOT__SLASH__DOT__DOT__SLASH_base_SLASH_common_SLASH_lifecycle_DOT_js.DisposableStore(), decorationsCollection = editor.createDecorationsCollection();
    d.add((0,require$_DOT__DOT__SLASH__DOT__DOT__SLASH__DOT__DOT__SLASH__DOT__DOT__SLASH_base_SLASH_common_SLASH_observable_DOT_js.autorunOpts)({debugName:() => `Apply decorations from ${decorations.debugName}`}, reader => {
      reader = decorations.read(reader);
      decorationsCollection.set(reader);
    }));
    d.add({dispose:() => {
      decorationsCollection.clear();
    }});
    return d;
  }
  function appendRemoveOnDispose(parent, child) {
    parent.appendChild(child);
    return (0,require$_DOT__DOT__SLASH__DOT__DOT__SLASH__DOT__DOT__SLASH__DOT__DOT__SLASH_base_SLASH_common_SLASH_lifecycle_DOT_js.toDisposable)(() => {
      parent.removeChild(child);
    });
  }
  function animatedObservable(targetWindow, base, store) {
    function update() {
      const passedMs = Date.now() - animationStartMs;
      var JSCompiler_temp_const = Math, b = startVal, c = targetVal - startVal;
      curVal = JSCompiler_temp_const.floor.call(JSCompiler_temp_const, passedMs === 300 ? b + c : c * (-Math.pow(2, -10 * passedMs / 300) + 1) + b);
      passedMs < 300 ? animationFrame = targetWindow.requestAnimationFrame(update) : curVal = targetVal;
      result.set(curVal, void 0);
    }
    let targetVal = base.get(), startVal = targetVal, curVal = targetVal;
    const result = (0,require$_DOT__DOT__SLASH__DOT__DOT__SLASH__DOT__DOT__SLASH__DOT__DOT__SLASH_base_SLASH_common_SLASH_observable_DOT_js.observableValue)("animatedValue", targetVal);
    let animationStartMs = -1, animationFrame = void 0;
    store.add((0,require$_DOT__DOT__SLASH__DOT__DOT__SLASH__DOT__DOT__SLASH__DOT__DOT__SLASH_base_SLASH_common_SLASH_observable_DOT_js.autorunHandleChanges)({createEmptyChangeSummary:() => ({animate:!1}), handleChange:(ctx, s) => {
      ctx.didChange(base) && (s.animate = s.animate || ctx.change);
      return !0;
    }}, (reader, s) => {
      animationFrame !== void 0 && (targetWindow.cancelAnimationFrame(animationFrame), animationFrame = void 0);
      startVal = curVal;
      targetVal = base.read(reader);
      animationStartMs = Date.now() - (s.animate ? 0 : 300);
      update();
    }));
    return result;
  }
  function applyStyle(domNode, style) {
    return (0,require$_DOT__DOT__SLASH__DOT__DOT__SLASH__DOT__DOT__SLASH__DOT__DOT__SLASH_base_SLASH_common_SLASH_observable_DOT_js.autorun)(reader => {
      for (let [key, val] of Object.entries(style)) {
        val && typeof val === "object" && "read" in val && (val = val.read(reader)), typeof val === "number" && (val = `${val}px`), key = key.replace(/[A-Z]/g, m => "-" + m.toLowerCase()), domNode.style[key] = val;
      }
    });
  }
  function readHotReloadableExport(value, reader) {
    observeHotReloadableExports([value], reader);
    return value;
  }
  function observeHotReloadableExports(values, reader) {
    (0,require$_DOT__DOT__SLASH__DOT__DOT__SLASH__DOT__DOT__SLASH__DOT__DOT__SLASH_base_SLASH_common_SLASH_hotReload_DOT_js.isHotReloadEnabled)() && (0,require$_DOT__DOT__SLASH__DOT__DOT__SLASH__DOT__DOT__SLASH__DOT__DOT__SLASH_base_SLASH_common_SLASH_observable_DOT_js.observableSignalFromEvent)("reload", event => (0,require$_DOT__DOT__SLASH__DOT__DOT__SLASH__DOT__DOT__SLASH__DOT__DOT__SLASH_base_SLASH_common_SLASH_hotReload_DOT_js.registerHotReloadHandler)(({oldExports}) => {
      if ([...Object.values(oldExports)].some(v => values.includes(v))) {
        return _newExports => {
          event(void 0);
          return !0;
        };
      }
    })).read(reader);
  }
  function applyViewZones(editor, viewZones, setIsUpdating, zoneIds) {
    const store = new require$_DOT__DOT__SLASH__DOT__DOT__SLASH__DOT__DOT__SLASH__DOT__DOT__SLASH_base_SLASH_common_SLASH_lifecycle_DOT_js.DisposableStore(), lastViewZoneIds = [];
    store.add((0,require$_DOT__DOT__SLASH__DOT__DOT__SLASH__DOT__DOT__SLASH__DOT__DOT__SLASH_base_SLASH_common_SLASH_observable_DOT_js.autorunWithStore)((reader, store) => {
      const curViewZones = viewZones.read(reader), viewZonIdsPerViewZone = new Map(), viewZoneIdPerOnChangeObservable = new Map();
      setIsUpdating && setIsUpdating(!0);
      editor.changeViewZones(a => {
        for (var id of lastViewZoneIds) {
          a.removeZone(id), zoneIds === null || zoneIds === void 0 || zoneIds.delete(id);
        }
        lastViewZoneIds.length = 0;
        for (const z of curViewZones) {
          id = a.addZone(z), z.setZoneId && z.setZoneId(id), lastViewZoneIds.push(id), zoneIds === null || zoneIds === void 0 || zoneIds.add(id), viewZonIdsPerViewZone.set(z, id);
        }
      });
      setIsUpdating && setIsUpdating(!1);
      store.add((0,require$_DOT__DOT__SLASH__DOT__DOT__SLASH__DOT__DOT__SLASH__DOT__DOT__SLASH_base_SLASH_common_SLASH_observable_DOT_js.autorunHandleChanges)({createEmptyChangeSummary() {
        return {zoneIds:[]};
      }, handleChange(context, changeSummary) {
        context = viewZoneIdPerOnChangeObservable.get(context.changedObservable);
        context !== void 0 && changeSummary.zoneIds.push(context);
        return !0;
      }}, (reader, changeSummary) => {
        for (const vz of curViewZones) {
          vz.onChange && (viewZoneIdPerOnChangeObservable.set(vz.onChange, viewZonIdsPerViewZone.get(vz)), vz.onChange.read(reader));
        }
        setIsUpdating && setIsUpdating(!0);
        editor.changeViewZones(a => {
          for (const id of changeSummary.zoneIds) {
            a.layoutZone(id);
          }
        });
        setIsUpdating && setIsUpdating(!1);
      }));
    }));
    store.add({dispose() {
      setIsUpdating && setIsUpdating(!0);
      editor.changeViewZones(a => {
        for (const id of lastViewZoneIds) {
          a.removeZone(id);
        }
      });
      zoneIds === null || zoneIds === void 0 || zoneIds.clear();
      setIsUpdating && setIsUpdating(!1);
    }});
    return store;
  }
  function translatePosition(posInOriginal, mappings) {
    var mapping = (0,require$_DOT__DOT__SLASH__DOT__DOT__SLASH__DOT__DOT__SLASH__DOT__DOT__SLASH_base_SLASH_common_SLASH_arraysFind_DOT_js.findLast)(mappings, m => m.original.startLineNumber <= posInOriginal.lineNumber);
    if (!mapping) {
      return require$_DOT__DOT__SLASH__DOT__DOT__SLASH__DOT__DOT__SLASH_common_SLASH_core_SLASH_range_DOT_js.Range.fromPositions(posInOriginal);
    }
    if (mapping.original.endLineNumberExclusive <= posInOriginal.lineNumber) {
      return require$_DOT__DOT__SLASH__DOT__DOT__SLASH__DOT__DOT__SLASH_common_SLASH_core_SLASH_range_DOT_js.Range.fromPositions(new require$_DOT__DOT__SLASH__DOT__DOT__SLASH__DOT__DOT__SLASH_common_SLASH_core_SLASH_position_DOT_js.Position(posInOriginal.lineNumber - mapping.original.endLineNumberExclusive + mapping.modified.endLineNumberExclusive, posInOriginal.column));
    }
    if (!mapping.innerChanges) {
      return require$_DOT__DOT__SLASH__DOT__DOT__SLASH__DOT__DOT__SLASH_common_SLASH_core_SLASH_range_DOT_js.Range.fromPositions(new require$_DOT__DOT__SLASH__DOT__DOT__SLASH__DOT__DOT__SLASH_common_SLASH_core_SLASH_position_DOT_js.Position(mapping.modified.startLineNumber, 1));
    }
    mappings = (0,require$_DOT__DOT__SLASH__DOT__DOT__SLASH__DOT__DOT__SLASH__DOT__DOT__SLASH_base_SLASH_common_SLASH_arraysFind_DOT_js.findLast)(mapping.innerChanges, m => m.originalRange.getStartPosition().isBeforeOrEqual(posInOriginal));
    if (!mappings) {
      return require$_DOT__DOT__SLASH__DOT__DOT__SLASH__DOT__DOT__SLASH_common_SLASH_core_SLASH_range_DOT_js.Range.fromPositions(new require$_DOT__DOT__SLASH__DOT__DOT__SLASH__DOT__DOT__SLASH_common_SLASH_core_SLASH_position_DOT_js.Position(posInOriginal.lineNumber - mapping.original.startLineNumber + mapping.modified.startLineNumber, posInOriginal.column));
    }
    if (mappings.originalRange.containsPosition(posInOriginal)) {
      return mappings.modifiedRange;
    }
    mapping = lengthBetweenPositions(mappings.originalRange.getEndPosition(), posInOriginal);
    return require$_DOT__DOT__SLASH__DOT__DOT__SLASH__DOT__DOT__SLASH_common_SLASH_core_SLASH_range_DOT_js.Range.fromPositions(addLength(mappings.modifiedRange.getEndPosition(), mapping));
  }
  function lengthBetweenPositions(position1, position2) {
    return position1.lineNumber === position2.lineNumber ? new require$_DOT__DOT__SLASH__DOT__DOT__SLASH__DOT__DOT__SLASH_common_SLASH_model_SLASH_bracketPairsTextModelPart_SLASH_bracketPairsTree_SLASH_length_DOT_js.LengthObj(0, position2.column - position1.column) : new require$_DOT__DOT__SLASH__DOT__DOT__SLASH__DOT__DOT__SLASH_common_SLASH_model_SLASH_bracketPairsTextModelPart_SLASH_bracketPairsTree_SLASH_length_DOT_js.LengthObj(position2.lineNumber - position1.lineNumber, position2.column - 1);
  }
  function addLength(position, length) {
    return length.lineCount === 0 ? new require$_DOT__DOT__SLASH__DOT__DOT__SLASH__DOT__DOT__SLASH_common_SLASH_core_SLASH_position_DOT_js.Position(position.lineNumber, position.column + length.columnCount) : new require$_DOT__DOT__SLASH__DOT__DOT__SLASH__DOT__DOT__SLASH_common_SLASH_core_SLASH_position_DOT_js.Position(position.lineNumber + length.lineCount, length.columnCount + 1);
  }
  function bindContextKey(key, service, computeValue) {
    const boundKey = key.bindTo(service);
    return (0,require$_DOT__DOT__SLASH__DOT__DOT__SLASH__DOT__DOT__SLASH__DOT__DOT__SLASH_base_SLASH_common_SLASH_observable_DOT_js.autorunOpts)({debugName:() => `Update ${key.key}`}, reader => {
      boundKey.set(computeValue(reader));
    });
  }
  Object.defineProperties(exports, {__esModule:{enumerable:!0, value:!0}, DisposableCancellationTokenSource:{enumerable:!0, get:function() {
    return DisposableCancellationTokenSource;
  }}, ManagedOverlayWidget:{enumerable:!0, get:function() {
    return ManagedOverlayWidget;
  }}, ObservableElementSizeObserver:{enumerable:!0, get:function() {
    return ObservableElementSizeObserver;
  }}, PlaceholderViewZone:{enumerable:!0, get:function() {
    return PlaceholderViewZone;
  }}, ViewZoneOverlayWidget:{enumerable:!0, get:function() {
    return ViewZoneOverlayWidget;
  }}, animatedObservable:{enumerable:!0, get:function() {
    return animatedObservable;
  }}, appendRemoveOnDispose:{enumerable:!0, get:function() {
    return appendRemoveOnDispose;
  }}, applyObservableDecorations:{enumerable:!0, get:function() {
    return applyObservableDecorations;
  }}, applyStyle:{enumerable:!0, get:function() {
    return applyStyle;
  }}, applyViewZones:{enumerable:!0, get:function() {
    return applyViewZones;
  }}, bindContextKey:{enumerable:!0, get:function() {
    return bindContextKey;
  }}, joinCombine:{enumerable:!0, get:function() {
    return joinCombine;
  }}, observeHotReloadableExports:{enumerable:!0, get:function() {
    return observeHotReloadableExports;
  }}, readHotReloadableExport:{enumerable:!0, get:function() {
    return readHotReloadableExport;
  }}, translatePosition:{enumerable:!0, get:function() {
    return translatePosition;
  }}});
  var require$_DOT__DOT__SLASH__DOT__DOT__SLASH__DOT__DOT__SLASH__DOT__DOT__SLASH_base_SLASH_common_SLASH_arraysFind_DOT_js = require("module$node_modules$monaco_editor$esm$vs$base$common$arraysFind");
  module = require("module$node_modules$monaco_editor$esm$vs$base$common$cancellation");
  var require$_DOT__DOT__SLASH__DOT__DOT__SLASH__DOT__DOT__SLASH__DOT__DOT__SLASH_base_SLASH_common_SLASH_hotReload_DOT_js = require("module$node_modules$monaco_editor$esm$vs$base$common$hotReload"), require$_DOT__DOT__SLASH__DOT__DOT__SLASH__DOT__DOT__SLASH__DOT__DOT__SLASH_base_SLASH_common_SLASH_lifecycle_DOT_js = require("module$node_modules$monaco_editor$esm$vs$base$common$lifecycle"), require$_DOT__DOT__SLASH__DOT__DOT__SLASH__DOT__DOT__SLASH__DOT__DOT__SLASH_base_SLASH_common_SLASH_observable_DOT_js = 
  require("module$node_modules$monaco_editor$esm$vs$base$common$observable"), require$_DOT__DOT__SLASH__DOT__DOT__SLASH_config_SLASH_elementSizeObserver_DOT_js = require("module$node_modules$monaco_editor$esm$vs$editor$browser$config$elementSizeObserver"), require$_DOT__DOT__SLASH__DOT__DOT__SLASH__DOT__DOT__SLASH_common_SLASH_core_SLASH_position_DOT_js = require("module$node_modules$monaco_editor$esm$vs$editor$common$core$position"), require$_DOT__DOT__SLASH__DOT__DOT__SLASH__DOT__DOT__SLASH_common_SLASH_core_SLASH_range_DOT_js = 
  require("module$node_modules$monaco_editor$esm$vs$editor$common$core$range"), require$_DOT__DOT__SLASH__DOT__DOT__SLASH__DOT__DOT__SLASH_common_SLASH_model_SLASH_bracketPairsTextModelPart_SLASH_bracketPairsTree_SLASH_length_DOT_js = require("module$node_modules$monaco_editor$esm$vs$editor$common$model$bracketPairsTextModelPart$bracketPairsTree$length");
  class ObservableElementSizeObserver extends require$_DOT__DOT__SLASH__DOT__DOT__SLASH__DOT__DOT__SLASH__DOT__DOT__SLASH_base_SLASH_common_SLASH_lifecycle_DOT_js.Disposable {
    get width() {
      return this._width;
    }
    get height() {
      return this._height;
    }
    constructor(element, dimension) {
      super();
      this.elementSizeObserver = this._register(new require$_DOT__DOT__SLASH__DOT__DOT__SLASH_config_SLASH_elementSizeObserver_DOT_js.ElementSizeObserver(element, dimension));
      this._width = (0,require$_DOT__DOT__SLASH__DOT__DOT__SLASH__DOT__DOT__SLASH__DOT__DOT__SLASH_base_SLASH_common_SLASH_observable_DOT_js.observableValue)(this, this.elementSizeObserver.getWidth());
      this._height = (0,require$_DOT__DOT__SLASH__DOT__DOT__SLASH__DOT__DOT__SLASH__DOT__DOT__SLASH_base_SLASH_common_SLASH_observable_DOT_js.observableValue)(this, this.elementSizeObserver.getHeight());
      this._register(this.elementSizeObserver.onDidChange(e => (0,require$_DOT__DOT__SLASH__DOT__DOT__SLASH__DOT__DOT__SLASH__DOT__DOT__SLASH_base_SLASH_common_SLASH_observable_DOT_js.transaction)(tx => {
        this._width.set(this.elementSizeObserver.getWidth(), tx);
        this._height.set(this.elementSizeObserver.getHeight(), tx);
      })));
    }
    observe(dimension) {
      this.elementSizeObserver.observe(dimension);
    }
    setAutomaticLayout(automaticLayout) {
      automaticLayout ? this.elementSizeObserver.startObserving() : this.elementSizeObserver.stopObserving();
    }
  }
  class ViewZoneOverlayWidget extends require$_DOT__DOT__SLASH__DOT__DOT__SLASH__DOT__DOT__SLASH__DOT__DOT__SLASH_base_SLASH_common_SLASH_lifecycle_DOT_js.Disposable {
    constructor(editor, viewZone, htmlElement) {
      super();
      this._register(new ManagedOverlayWidget(editor, htmlElement));
      this._register(applyStyle(htmlElement, {height:viewZone.actualHeight, top:viewZone.actualTop}));
    }
  }
  class PlaceholderViewZone {
    get afterLineNumber() {
      return this._afterLineNumber.get();
    }
    constructor(_afterLineNumber, heightInPx) {
      this._afterLineNumber = _afterLineNumber;
      this.heightInPx = heightInPx;
      this.domNode = document.createElement("div");
      this._actualTop = (0,require$_DOT__DOT__SLASH__DOT__DOT__SLASH__DOT__DOT__SLASH__DOT__DOT__SLASH_base_SLASH_common_SLASH_observable_DOT_js.observableValue)(this, void 0);
      this._actualHeight = (0,require$_DOT__DOT__SLASH__DOT__DOT__SLASH__DOT__DOT__SLASH__DOT__DOT__SLASH_base_SLASH_common_SLASH_observable_DOT_js.observableValue)(this, void 0);
      this.actualTop = this._actualTop;
      this.actualHeight = this._actualHeight;
      this.showInHiddenAreas = !0;
      this.onChange = this._afterLineNumber;
      this.onDomNodeTop = top => {
        this._actualTop.set(top, void 0);
      };
      this.onComputedHeight = height => {
        this._actualHeight.set(height, void 0);
      };
    }
  }
  class ManagedOverlayWidget {
    constructor(_editor, _domElement) {
      this._editor = _editor;
      this._domElement = _domElement;
      this._overlayWidgetId = `managedOverlayWidget-${ManagedOverlayWidget._counter++}`;
      this._overlayWidget = {getId:() => this._overlayWidgetId, getDomNode:() => this._domElement, getPosition:() => null};
      this._editor.addOverlayWidget(this._overlayWidget);
    }
    dispose() {
      this._editor.removeOverlayWidget(this._overlayWidget);
    }
  }
  ManagedOverlayWidget._counter = 0;
  class DisposableCancellationTokenSource extends module.CancellationTokenSource {
    dispose() {
      super.dispose(!0);
    }
  }
};

//# sourceMappingURL=module$node_modules$monaco_editor$esm$vs$editor$browser$widget$diffEditor$utils.js.map
