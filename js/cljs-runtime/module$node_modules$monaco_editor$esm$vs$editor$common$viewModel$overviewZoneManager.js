shadow$provide.module$node_modules$monaco_editor$esm$vs$editor$common$viewModel$overviewZoneManager = function(require, module, exports) {
  Object.defineProperties(exports, {__esModule:{enumerable:!0, value:!0}, ColorZone:{enumerable:!0, get:function() {
    return ColorZone;
  }}, OverviewRulerZone:{enumerable:!0, get:function() {
    return OverviewRulerZone;
  }}, OverviewZoneManager:{enumerable:!0, get:function() {
    return OverviewZoneManager;
  }}});
  class ColorZone {
    constructor(from, to, colorId) {
      this._colorZoneBrand = void 0;
      this.from = from | 0;
      this.to = to | 0;
      this.colorId = colorId | 0;
    }
    static compare(a, b) {
      return a.colorId === b.colorId ? a.from === b.from ? a.to - b.to : a.from - b.from : a.colorId - b.colorId;
    }
  }
  class OverviewRulerZone {
    constructor(startLineNumber, endLineNumber, heightInLines, color) {
      this._overviewRulerZoneBrand = void 0;
      this.startLineNumber = startLineNumber;
      this.endLineNumber = endLineNumber;
      this.heightInLines = heightInLines;
      this.color = color;
      this._colorZone = null;
    }
    static compare(a, b) {
      return a.color === b.color ? a.startLineNumber === b.startLineNumber ? a.heightInLines === b.heightInLines ? a.endLineNumber - b.endLineNumber : a.heightInLines - b.heightInLines : a.startLineNumber - b.startLineNumber : a.color < b.color ? -1 : 1;
    }
    setColorZone(colorZone) {
      this._colorZone = colorZone;
    }
    getColorZones() {
      return this._colorZone;
    }
  }
  class OverviewZoneManager {
    constructor(getVerticalOffsetForLine) {
      this._getVerticalOffsetForLine = getVerticalOffsetForLine;
      this._zones = [];
      this._colorZonesInvalid = !1;
      this._outerHeight = this._domHeight = this._domWidth = this._lineHeight = 0;
      this._pixelRatio = 1;
      this._lastAssignedId = 0;
      this._color2Id = Object.create(null);
      this._id2Color = [];
    }
    getId2Color() {
      return this._id2Color;
    }
    setZones(newZones) {
      this._zones = newZones;
      this._zones.sort(OverviewRulerZone.compare);
    }
    setLineHeight(lineHeight) {
      if (this._lineHeight === lineHeight) {
        return !1;
      }
      this._lineHeight = lineHeight;
      return this._colorZonesInvalid = !0;
    }
    setPixelRatio(pixelRatio) {
      this._pixelRatio = pixelRatio;
      this._colorZonesInvalid = !0;
    }
    getDOMWidth() {
      return this._domWidth;
    }
    getCanvasWidth() {
      return this._domWidth * this._pixelRatio;
    }
    setDOMWidth(width) {
      if (this._domWidth === width) {
        return !1;
      }
      this._domWidth = width;
      return this._colorZonesInvalid = !0;
    }
    getDOMHeight() {
      return this._domHeight;
    }
    getCanvasHeight() {
      return this._domHeight * this._pixelRatio;
    }
    setDOMHeight(height) {
      if (this._domHeight === height) {
        return !1;
      }
      this._domHeight = height;
      return this._colorZonesInvalid = !0;
    }
    getOuterHeight() {
      return this._outerHeight;
    }
    setOuterHeight(outerHeight) {
      if (this._outerHeight === outerHeight) {
        return !1;
      }
      this._outerHeight = outerHeight;
      return this._colorZonesInvalid = !0;
    }
    resolveColorZones() {
      const colorZonesInvalid = this._colorZonesInvalid, lineHeight = Math.floor(this._lineHeight), totalHeight = Math.floor(this.getCanvasHeight()), heightRatio = totalHeight / Math.floor(this._outerHeight), halfMinimumHeight = Math.floor(4 * this._pixelRatio / 2), allColorZones = [];
      for (let i = 0, len = this._zones.length; i < len; i++) {
        const zone = this._zones[i];
        if (!colorZonesInvalid) {
          var colorZone = zone.getColorZones();
          if (colorZone) {
            allColorZones.push(colorZone);
            continue;
          }
        }
        colorZone = this._getVerticalOffsetForLine(zone.startLineNumber);
        var offset2 = zone.heightInLines === 0 ? this._getVerticalOffsetForLine(zone.endLineNumber) + lineHeight : colorZone + zone.heightInLines * lineHeight;
        offset2 = Math.floor(heightRatio * offset2);
        colorZone = Math.floor((Math.floor(heightRatio * colorZone) + offset2) / 2);
        offset2 -= colorZone;
        offset2 < halfMinimumHeight && (offset2 = halfMinimumHeight);
        colorZone - offset2 < 0 && (colorZone = offset2);
        colorZone + offset2 > totalHeight && (colorZone = totalHeight - offset2);
        const color = zone.color;
        let colorId = this._color2Id[color];
        colorId || (colorId = ++this._lastAssignedId, this._color2Id[color] = colorId, this._id2Color[colorId] = color);
        colorZone = new ColorZone(colorZone - offset2, colorZone + offset2, colorId);
        zone.setColorZone(colorZone);
        allColorZones.push(colorZone);
      }
      this._colorZonesInvalid = !1;
      allColorZones.sort(ColorZone.compare);
      return allColorZones;
    }
  }
};

//# sourceMappingURL=module$node_modules$monaco_editor$esm$vs$editor$common$viewModel$overviewZoneManager.js.map
