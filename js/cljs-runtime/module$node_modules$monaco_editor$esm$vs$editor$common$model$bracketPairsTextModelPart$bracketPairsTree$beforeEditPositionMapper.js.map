{
"version":3,
"file":"module$node_modules$monaco_editor$esm$vs$editor$common$model$bracketPairsTextModelPart$bracketPairsTree$beforeEditPositionMapper.js",
"lineCount":75,
"mappings":"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",
"sources":["node_modules/monaco-editor/esm/vs/editor/common/model/bracketPairsTextModelPart/bracketPairsTree/beforeEditPositionMapper.js"],
"sourcesContent":["shadow$provide[\"module$node_modules$monaco_editor$esm$vs$editor$common$model$bracketPairsTextModelPart$bracketPairsTree$beforeEditPositionMapper\"] = function(require,module,exports) {\nObject.defineProperties(exports, {__esModule:{enumerable:true, value:true}, BeforeEditPositionMapper:{enumerable:true, get:function() {\n  return BeforeEditPositionMapper;\n}}, TextEditInfo:{enumerable:true, get:function() {\n  return TextEditInfo;\n}}});\nvar require$_DOT__DOT__SLASH__DOT__DOT__SLASH__DOT__DOT__SLASH_core_SLASH_range_DOT_js = require(\"../../../core/range.js\");\nvar require$_DOT__SLASH_length_DOT_js = require(\"./length.js\");\nclass TextEditInfo {\n  static fromModelContentChanges(changes) {\n    const edits = changes.map(c => {\n      const range = require$_DOT__DOT__SLASH__DOT__DOT__SLASH__DOT__DOT__SLASH_core_SLASH_range_DOT_js.Range.lift(c.range);\n      return new TextEditInfo((0,require$_DOT__SLASH_length_DOT_js.positionToLength)(range.getStartPosition()), (0,require$_DOT__SLASH_length_DOT_js.positionToLength)(range.getEndPosition()), (0,require$_DOT__SLASH_length_DOT_js.lengthOfString)(c.text));\n    }).reverse();\n    return edits;\n  }\n  constructor(startOffset, endOffset, newLength) {\n    this.startOffset = startOffset;\n    this.endOffset = endOffset;\n    this.newLength = newLength;\n  }\n  toString() {\n    return `[${(0,require$_DOT__SLASH_length_DOT_js.lengthToObj)(this.startOffset)}...${(0,require$_DOT__SLASH_length_DOT_js.lengthToObj)(this.endOffset)}) -> ${(0,require$_DOT__SLASH_length_DOT_js.lengthToObj)(this.newLength)}`;\n  }\n}\nclass BeforeEditPositionMapper {\n  constructor(edits) {\n    this.nextEditIdx = 0;\n    this.deltaOldToNewLineCount = 0;\n    this.deltaOldToNewColumnCount = 0;\n    this.deltaLineIdxInOld = -1;\n    this.edits = edits.map(edit => TextEditInfoCache.from(edit));\n  }\n  getOffsetBeforeChange(offset) {\n    this.adjustNextEdit(offset);\n    return this.translateCurToOld(offset);\n  }\n  getDistanceToNextChange(offset) {\n    this.adjustNextEdit(offset);\n    const nextEdit = this.edits[this.nextEditIdx];\n    const nextChangeOffset = nextEdit ? this.translateOldToCur(nextEdit.offsetObj) : null;\n    if (nextChangeOffset === null) {\n      return null;\n    }\n    return (0,require$_DOT__SLASH_length_DOT_js.lengthDiffNonNegative)(offset, nextChangeOffset);\n  }\n  translateOldToCur(oldOffsetObj) {\n    if (oldOffsetObj.lineCount === this.deltaLineIdxInOld) {\n      return (0,require$_DOT__SLASH_length_DOT_js.toLength)(oldOffsetObj.lineCount + this.deltaOldToNewLineCount, oldOffsetObj.columnCount + this.deltaOldToNewColumnCount);\n    } else {\n      return (0,require$_DOT__SLASH_length_DOT_js.toLength)(oldOffsetObj.lineCount + this.deltaOldToNewLineCount, oldOffsetObj.columnCount);\n    }\n  }\n  translateCurToOld(newOffset) {\n    const offsetObj = (0,require$_DOT__SLASH_length_DOT_js.lengthToObj)(newOffset);\n    if (offsetObj.lineCount - this.deltaOldToNewLineCount === this.deltaLineIdxInOld) {\n      return (0,require$_DOT__SLASH_length_DOT_js.toLength)(offsetObj.lineCount - this.deltaOldToNewLineCount, offsetObj.columnCount - this.deltaOldToNewColumnCount);\n    } else {\n      return (0,require$_DOT__SLASH_length_DOT_js.toLength)(offsetObj.lineCount - this.deltaOldToNewLineCount, offsetObj.columnCount);\n    }\n  }\n  adjustNextEdit(offset) {\n    while (this.nextEditIdx < this.edits.length) {\n      const nextEdit = this.edits[this.nextEditIdx];\n      const nextEditEndOffsetInCur = this.translateOldToCur(nextEdit.endOffsetAfterObj);\n      if ((0,require$_DOT__SLASH_length_DOT_js.lengthLessThanEqual)(nextEditEndOffsetInCur, offset)) {\n        this.nextEditIdx++;\n        const nextEditEndOffsetInCurObj = (0,require$_DOT__SLASH_length_DOT_js.lengthToObj)(nextEditEndOffsetInCur);\n        const nextEditEndOffsetBeforeInCurObj = (0,require$_DOT__SLASH_length_DOT_js.lengthToObj)(this.translateOldToCur(nextEdit.endOffsetBeforeObj));\n        const lineDelta = nextEditEndOffsetInCurObj.lineCount - nextEditEndOffsetBeforeInCurObj.lineCount;\n        this.deltaOldToNewLineCount += lineDelta;\n        const previousColumnDelta = this.deltaLineIdxInOld === nextEdit.endOffsetBeforeObj.lineCount ? this.deltaOldToNewColumnCount : 0;\n        const columnDelta = nextEditEndOffsetInCurObj.columnCount - nextEditEndOffsetBeforeInCurObj.columnCount;\n        this.deltaOldToNewColumnCount = previousColumnDelta + columnDelta;\n        this.deltaLineIdxInOld = nextEdit.endOffsetBeforeObj.lineCount;\n      } else {\n        break;\n      }\n    }\n  }\n}\nclass TextEditInfoCache {\n  static from(edit) {\n    return new TextEditInfoCache(edit.startOffset, edit.endOffset, edit.newLength);\n  }\n  constructor(startOffset, endOffset, textLength) {\n    this.endOffsetBeforeObj = (0,require$_DOT__SLASH_length_DOT_js.lengthToObj)(endOffset);\n    this.endOffsetAfterObj = (0,require$_DOT__SLASH_length_DOT_js.lengthToObj)((0,require$_DOT__SLASH_length_DOT_js.lengthAdd)(startOffset, textLength));\n    this.offsetObj = (0,require$_DOT__SLASH_length_DOT_js.lengthToObj)(startOffset);\n  }\n}\n\n};"],
"names":["shadow$provide","require","module","exports","Object","defineProperties","__esModule","enumerable","value","BeforeEditPositionMapper","get","TextEditInfo","require$_DOT__DOT__SLASH__DOT__DOT__SLASH__DOT__DOT__SLASH_core_SLASH_range_DOT_js","require$_DOT__SLASH_length_DOT_js","fromModelContentChanges","changes","map","c","range","Range","lift","positionToLength","getStartPosition","getEndPosition","lengthOfString","text","reverse","edits","constructor","startOffset","endOffset","newLength","toString","lengthToObj","deltaOldToNewColumnCount","deltaOldToNewLineCount","nextEditIdx","deltaLineIdxInOld","edit","TextEditInfoCache","from","getOffsetBeforeChange","offset","adjustNextEdit","translateCurToOld","getDistanceToNextChange","nextEdit","nextChangeOffset","translateOldToCur","offsetObj","lengthDiffNonNegative","oldOffsetObj","lineCount","toLength","columnCount","newOffset","length","nextEditEndOffsetInCur","endOffsetAfterObj","lengthLessThanEqual","nextEditEndOffsetInCurObj","nextEditEndOffsetBeforeInCurObj","endOffsetBeforeObj","previousColumnDelta","textLength","lengthAdd"]
}
