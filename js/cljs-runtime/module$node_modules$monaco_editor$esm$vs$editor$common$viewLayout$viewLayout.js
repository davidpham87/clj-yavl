shadow$provide.module$node_modules$monaco_editor$esm$vs$editor$common$viewLayout$viewLayout = function(require, module, exports) {
  Object.defineProperties(exports, {__esModule:{enumerable:!0, value:!0}, ViewLayout:{enumerable:!0, get:function() {
    return ViewLayout;
  }}});
  var require$_DOT__DOT__SLASH__DOT__DOT__SLASH__DOT__DOT__SLASH_base_SLASH_common_SLASH_event_DOT_js = require("module$node_modules$monaco_editor$esm$vs$base$common$event");
  module = require("module$node_modules$monaco_editor$esm$vs$base$common$lifecycle");
  var require$_DOT__DOT__SLASH__DOT__DOT__SLASH__DOT__DOT__SLASH_base_SLASH_common_SLASH_scrollable_DOT_js = require("module$node_modules$monaco_editor$esm$vs$base$common$scrollable"), require$_DOT__SLASH_linesLayout_DOT_js = require("module$node_modules$monaco_editor$esm$vs$editor$common$viewLayout$linesLayout"), require$_DOT__DOT__SLASH_viewModel_DOT_js = require("module$node_modules$monaco_editor$esm$vs$editor$common$viewModel"), require$_DOT__DOT__SLASH_viewModelEventDispatcher_DOT_js = require("module$node_modules$monaco_editor$esm$vs$editor$common$viewModelEventDispatcher");
  class EditorScrollDimensions {
    constructor(width, contentWidth, height, contentHeight) {
      width |= 0;
      contentWidth |= 0;
      height |= 0;
      contentHeight |= 0;
      width < 0 && (width = 0);
      contentWidth < 0 && (contentWidth = 0);
      height < 0 && (height = 0);
      contentHeight < 0 && (contentHeight = 0);
      this.width = width;
      this.contentWidth = contentWidth;
      this.scrollWidth = Math.max(width, contentWidth);
      this.height = height;
      this.contentHeight = contentHeight;
      this.scrollHeight = Math.max(height, contentHeight);
    }
    equals(other) {
      return this.width === other.width && this.contentWidth === other.contentWidth && this.height === other.height && this.contentHeight === other.contentHeight;
    }
  }
  class EditorScrollable extends module.Disposable {
    constructor(smoothScrollDuration, scheduleAtNextAnimationFrame) {
      super();
      this._onDidContentSizeChange = this._register(new require$_DOT__DOT__SLASH__DOT__DOT__SLASH__DOT__DOT__SLASH_base_SLASH_common_SLASH_event_DOT_js.Emitter());
      this.onDidContentSizeChange = this._onDidContentSizeChange.event;
      this._dimensions = new EditorScrollDimensions(0, 0, 0, 0);
      this._scrollable = this._register(new require$_DOT__DOT__SLASH__DOT__DOT__SLASH__DOT__DOT__SLASH_base_SLASH_common_SLASH_scrollable_DOT_js.Scrollable({forceIntegerValues:!0, smoothScrollDuration, scheduleAtNextAnimationFrame}));
      this.onDidScroll = this._scrollable.onScroll;
    }
    getScrollable() {
      return this._scrollable;
    }
    setSmoothScrollDuration(smoothScrollDuration) {
      this._scrollable.setSmoothScrollDuration(smoothScrollDuration);
    }
    validateScrollPosition(scrollPosition) {
      return this._scrollable.validateScrollPosition(scrollPosition);
    }
    getScrollDimensions() {
      return this._dimensions;
    }
    setScrollDimensions(dimensions) {
      if (!this._dimensions.equals(dimensions)) {
        var oldDimensions = this._dimensions;
        this._dimensions = dimensions;
        this._scrollable.setScrollDimensions({width:dimensions.width, scrollWidth:dimensions.scrollWidth, height:dimensions.height, scrollHeight:dimensions.scrollHeight}, !0);
        var contentHeightChanged = oldDimensions.contentHeight !== dimensions.contentHeight;
        (oldDimensions.contentWidth !== dimensions.contentWidth || contentHeightChanged) && this._onDidContentSizeChange.fire(new require$_DOT__DOT__SLASH_viewModelEventDispatcher_DOT_js.ContentSizeChangedEvent(oldDimensions.contentWidth, oldDimensions.contentHeight, dimensions.contentWidth, dimensions.contentHeight));
      }
    }
    getFutureScrollPosition() {
      return this._scrollable.getFutureScrollPosition();
    }
    getCurrentScrollPosition() {
      return this._scrollable.getCurrentScrollPosition();
    }
    setScrollPositionNow(update) {
      this._scrollable.setScrollPositionNow(update);
    }
    setScrollPositionSmooth(update) {
      this._scrollable.setScrollPositionSmooth(update);
    }
    hasPendingScrollAnimation() {
      return this._scrollable.hasPendingScrollAnimation();
    }
  }
  class ViewLayout extends module.Disposable {
    constructor(configuration, lineCount, scheduleAtNextAnimationFrame) {
      super();
      this._configuration = configuration;
      configuration = this._configuration.options;
      const layoutInfo = configuration.get(143), padding = configuration.get(83);
      this._linesLayout = new require$_DOT__SLASH_linesLayout_DOT_js.LinesLayout(lineCount, configuration.get(66), padding.top, padding.bottom);
      this._overlayWidgetsMinWidth = this._maxLineWidth = 0;
      this._scrollable = this._register(new EditorScrollable(0, scheduleAtNextAnimationFrame));
      this._configureSmoothScrollDuration();
      this._scrollable.setScrollDimensions(new EditorScrollDimensions(layoutInfo.contentWidth, 0, layoutInfo.height, 0));
      this.onDidScroll = this._scrollable.onDidScroll;
      this.onDidContentSizeChange = this._scrollable.onDidContentSizeChange;
      this._updateHeight();
    }
    dispose() {
      super.dispose();
    }
    getScrollable() {
      return this._scrollable.getScrollable();
    }
    onHeightMaybeChanged() {
      this._updateHeight();
    }
    _configureSmoothScrollDuration() {
      this._scrollable.setSmoothScrollDuration(this._configuration.options.get(113) ? 125 : 0);
    }
    onConfigurationChanged(e) {
      var options = this._configuration.options;
      e.hasChanged(66) && this._linesLayout.setLineHeight(options.get(66));
      if (e.hasChanged(83)) {
        var padding = options.get(83);
        this._linesLayout.setPadding(padding.top, padding.bottom);
      }
      if (e.hasChanged(143)) {
        padding = options.get(143);
        options = padding.contentWidth;
        padding = padding.height;
        const scrollDimensions = this._scrollable.getScrollDimensions();
        this._scrollable.setScrollDimensions(new EditorScrollDimensions(options, scrollDimensions.contentWidth, padding, this._getContentHeight(options, padding, scrollDimensions.contentWidth)));
      } else {
        this._updateHeight();
      }
      e.hasChanged(113) && this._configureSmoothScrollDuration();
    }
    onFlushed(lineCount) {
      this._linesLayout.onFlushed(lineCount);
    }
    onLinesDeleted(fromLineNumber, toLineNumber) {
      this._linesLayout.onLinesDeleted(fromLineNumber, toLineNumber);
    }
    onLinesInserted(fromLineNumber, toLineNumber) {
      this._linesLayout.onLinesInserted(fromLineNumber, toLineNumber);
    }
    _getHorizontalScrollbarHeight(width, scrollWidth) {
      const scrollbar = this._configuration.options.get(102);
      return scrollbar.horizontal === 2 || width >= scrollWidth ? 0 : scrollbar.horizontalScrollbarSize;
    }
    _getContentHeight(width, height, contentWidth) {
      const options = this._configuration.options;
      let result = this._linesLayout.getLinesTotalHeight();
      options.get(104) ? result += Math.max(0, height - options.get(66) - options.get(83).bottom) : options.get(102).ignoreHorizontalScrollbarInContentHeight || (result += this._getHorizontalScrollbarHeight(width, contentWidth));
      return result;
    }
    _updateHeight() {
      const scrollDimensions = this._scrollable.getScrollDimensions(), width = scrollDimensions.width, height = scrollDimensions.height;
      this._scrollable.setScrollDimensions(new EditorScrollDimensions(width, scrollDimensions.contentWidth, height, this._getContentHeight(width, height, scrollDimensions.contentWidth)));
    }
    getCurrentViewport() {
      const scrollDimensions = this._scrollable.getScrollDimensions(), currentScrollPosition = this._scrollable.getCurrentScrollPosition();
      return new require$_DOT__DOT__SLASH_viewModel_DOT_js.Viewport(currentScrollPosition.scrollTop, currentScrollPosition.scrollLeft, scrollDimensions.width, scrollDimensions.height);
    }
    getFutureViewport() {
      const scrollDimensions = this._scrollable.getScrollDimensions(), currentScrollPosition = this._scrollable.getFutureScrollPosition();
      return new require$_DOT__DOT__SLASH_viewModel_DOT_js.Viewport(currentScrollPosition.scrollTop, currentScrollPosition.scrollLeft, scrollDimensions.width, scrollDimensions.height);
    }
    _computeContentWidth() {
      var options = this._configuration.options;
      const maxLineWidth = this._maxLineWidth, wrappingInfo = options.get(144);
      var fontInfo = options.get(50);
      const layoutInfo = options.get(143);
      if (wrappingInfo.isViewportWrapping) {
        return options = options.get(72), maxLineWidth > layoutInfo.contentWidth + fontInfo.typicalHalfwidthCharacterWidth && options.enabled && options.side === "right" ? maxLineWidth + layoutInfo.verticalScrollbarWidth : maxLineWidth;
      }
      fontInfo = options.get(103) * fontInfo.typicalHalfwidthCharacterWidth;
      options = this._linesLayout.getWhitespaceMinWidth();
      return Math.max(maxLineWidth + fontInfo + layoutInfo.verticalScrollbarWidth, options, this._overlayWidgetsMinWidth);
    }
    setMaxLineWidth(maxLineWidth) {
      this._maxLineWidth = maxLineWidth;
      this._updateContentWidth();
    }
    setOverlayWidgetsMinWidth(maxMinWidth) {
      this._overlayWidgetsMinWidth = maxMinWidth;
      this._updateContentWidth();
    }
    _updateContentWidth() {
      const scrollDimensions = this._scrollable.getScrollDimensions();
      this._scrollable.setScrollDimensions(new EditorScrollDimensions(scrollDimensions.width, this._computeContentWidth(), scrollDimensions.height, scrollDimensions.contentHeight));
      this._updateHeight();
    }
    saveState() {
      const currentScrollPosition = this._scrollable.getFutureScrollPosition(), scrollTop = currentScrollPosition.scrollTop;
      var firstLineNumberInViewport = this._linesLayout.getLineNumberAtOrAfterVerticalOffset(scrollTop);
      firstLineNumberInViewport = this._linesLayout.getWhitespaceAccumulatedHeightBeforeLineNumber(firstLineNumberInViewport);
      return {scrollTop, scrollTopWithoutViewZones:scrollTop - firstLineNumberInViewport, scrollLeft:currentScrollPosition.scrollLeft};
    }
    changeWhitespace(callback) {
      if (callback = this._linesLayout.changeWhitespace(callback)) {
        this.onHeightMaybeChanged();
      }
      return callback;
    }
    getVerticalOffsetForLineNumber(lineNumber, includeViewZones = !1) {
      return this._linesLayout.getVerticalOffsetForLineNumber(lineNumber, includeViewZones);
    }
    getVerticalOffsetAfterLineNumber(lineNumber, includeViewZones = !1) {
      return this._linesLayout.getVerticalOffsetAfterLineNumber(lineNumber, includeViewZones);
    }
    isAfterLines(verticalOffset) {
      return this._linesLayout.isAfterLines(verticalOffset);
    }
    isInTopPadding(verticalOffset) {
      return this._linesLayout.isInTopPadding(verticalOffset);
    }
    isInBottomPadding(verticalOffset) {
      return this._linesLayout.isInBottomPadding(verticalOffset);
    }
    getLineNumberAtVerticalOffset(verticalOffset) {
      return this._linesLayout.getLineNumberAtOrAfterVerticalOffset(verticalOffset);
    }
    getWhitespaceAtVerticalOffset(verticalOffset) {
      return this._linesLayout.getWhitespaceAtVerticalOffset(verticalOffset);
    }
    getLinesViewportData() {
      const visibleBox = this.getCurrentViewport();
      return this._linesLayout.getLinesViewportData(visibleBox.top, visibleBox.top + visibleBox.height);
    }
    getLinesViewportDataAtScrollTop(scrollTop) {
      const scrollDimensions = this._scrollable.getScrollDimensions();
      scrollTop + scrollDimensions.height > scrollDimensions.scrollHeight && (scrollTop = scrollDimensions.scrollHeight - scrollDimensions.height);
      scrollTop < 0 && (scrollTop = 0);
      return this._linesLayout.getLinesViewportData(scrollTop, scrollTop + scrollDimensions.height);
    }
    getWhitespaceViewportData() {
      const visibleBox = this.getCurrentViewport();
      return this._linesLayout.getWhitespaceViewportData(visibleBox.top, visibleBox.top + visibleBox.height);
    }
    getWhitespaces() {
      return this._linesLayout.getWhitespaces();
    }
    getContentWidth() {
      return this._scrollable.getScrollDimensions().contentWidth;
    }
    getScrollWidth() {
      return this._scrollable.getScrollDimensions().scrollWidth;
    }
    getContentHeight() {
      return this._scrollable.getScrollDimensions().contentHeight;
    }
    getScrollHeight() {
      return this._scrollable.getScrollDimensions().scrollHeight;
    }
    getCurrentScrollLeft() {
      return this._scrollable.getCurrentScrollPosition().scrollLeft;
    }
    getCurrentScrollTop() {
      return this._scrollable.getCurrentScrollPosition().scrollTop;
    }
    validateScrollPosition(scrollPosition) {
      return this._scrollable.validateScrollPosition(scrollPosition);
    }
    setScrollPosition(position, type) {
      type === 1 ? this._scrollable.setScrollPositionNow(position) : this._scrollable.setScrollPositionSmooth(position);
    }
    hasPendingScrollAnimation() {
      return this._scrollable.hasPendingScrollAnimation();
    }
    deltaScrollNow(deltaScrollLeft, deltaScrollTop) {
      const currentScrollPosition = this._scrollable.getCurrentScrollPosition();
      this._scrollable.setScrollPositionNow({scrollLeft:currentScrollPosition.scrollLeft + deltaScrollLeft, scrollTop:currentScrollPosition.scrollTop + deltaScrollTop});
    }
  }
};

//# sourceMappingURL=module$node_modules$monaco_editor$esm$vs$editor$common$viewLayout$viewLayout.js.map
