{
"version":3,
"file":"module$node_modules$monaco_editor$esm$vs$editor$common$model$pieceTreeTextBuffer$pieceTreeTextBufferBuilder.js",
"lineCount":84,
"mappings":"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",
"sources":["node_modules/monaco-editor/esm/vs/editor/common/model/pieceTreeTextBuffer/pieceTreeTextBufferBuilder.js"],
"sourcesContent":["shadow$provide[\"module$node_modules$monaco_editor$esm$vs$editor$common$model$pieceTreeTextBuffer$pieceTreeTextBufferBuilder\"] = function(require,module,exports) {\nObject.defineProperties(exports, {__esModule:{enumerable:true, value:true}, PieceTreeTextBufferBuilder:{enumerable:true, get:function() {\n  return PieceTreeTextBufferBuilder;\n}}});\nvar strings = require(\"../../../../base/common/strings.js\");\nvar require$_DOT__SLASH_pieceTreeBase_DOT_js = require(\"./pieceTreeBase.js\");\nvar require$_DOT__SLASH_pieceTreeTextBuffer_DOT_js = require(\"./pieceTreeTextBuffer.js\");\nclass PieceTreeTextBufferFactory {\n  constructor(_chunks, _bom, _cr, _lf, _crlf, _containsRTL, _containsUnusualLineTerminators, _isBasicASCII, _normalizeEOL) {\n    this._chunks = _chunks;\n    this._bom = _bom;\n    this._cr = _cr;\n    this._lf = _lf;\n    this._crlf = _crlf;\n    this._containsRTL = _containsRTL;\n    this._containsUnusualLineTerminators = _containsUnusualLineTerminators;\n    this._isBasicASCII = _isBasicASCII;\n    this._normalizeEOL = _normalizeEOL;\n  }\n  _getEOL(defaultEOL) {\n    const totalEOLCount = this._cr + this._lf + this._crlf;\n    const totalCRCount = this._cr + this._crlf;\n    if (totalEOLCount === 0) {\n      return defaultEOL === 1 ? \"\\n\" : \"\\r\\n\";\n    }\n    if (totalCRCount > totalEOLCount / 2) {\n      return \"\\r\\n\";\n    }\n    return \"\\n\";\n  }\n  create(defaultEOL) {\n    const eol = this._getEOL(defaultEOL);\n    const chunks = this._chunks;\n    if (this._normalizeEOL && (eol === \"\\r\\n\" && (this._cr > 0 || this._lf > 0) || eol === \"\\n\" && (this._cr > 0 || this._crlf > 0))) {\n      for (let i = 0, len = chunks.length; i < len; i++) {\n        const str = chunks[i].buffer.replace(/\\r\\n|\\r|\\n/g, eol);\n        const newLineStart = (0,require$_DOT__SLASH_pieceTreeBase_DOT_js.createLineStartsFast)(str);\n        chunks[i] = new require$_DOT__SLASH_pieceTreeBase_DOT_js.StringBuffer(str, newLineStart);\n      }\n    }\n    const textBuffer = new require$_DOT__SLASH_pieceTreeTextBuffer_DOT_js.PieceTreeTextBuffer(chunks, this._bom, eol, this._containsRTL, this._containsUnusualLineTerminators, this._isBasicASCII, this._normalizeEOL);\n    return {textBuffer:textBuffer, disposable:textBuffer};\n  }\n}\nclass PieceTreeTextBufferBuilder {\n  constructor() {\n    this.chunks = [];\n    this.BOM = \"\";\n    this._hasPreviousChar = false;\n    this._previousChar = 0;\n    this._tmpLineStarts = [];\n    this.cr = 0;\n    this.lf = 0;\n    this.crlf = 0;\n    this.containsRTL = false;\n    this.containsUnusualLineTerminators = false;\n    this.isBasicASCII = true;\n  }\n  acceptChunk(chunk) {\n    if (chunk.length === 0) {\n      return;\n    }\n    if (this.chunks.length === 0) {\n      if (strings.startsWithUTF8BOM(chunk)) {\n        this.BOM = strings.UTF8_BOM_CHARACTER;\n        chunk = chunk.substr(1);\n      }\n    }\n    const lastChar = chunk.charCodeAt(chunk.length - 1);\n    if (lastChar === 13 || lastChar >= 55296 && lastChar <= 56319) {\n      this._acceptChunk1(chunk.substr(0, chunk.length - 1), false);\n      this._hasPreviousChar = true;\n      this._previousChar = lastChar;\n    } else {\n      this._acceptChunk1(chunk, false);\n      this._hasPreviousChar = false;\n      this._previousChar = lastChar;\n    }\n  }\n  _acceptChunk1(chunk, allowEmptyStrings) {\n    if (!allowEmptyStrings && chunk.length === 0) {\n      return;\n    }\n    if (this._hasPreviousChar) {\n      this._acceptChunk2(String.fromCharCode(this._previousChar) + chunk);\n    } else {\n      this._acceptChunk2(chunk);\n    }\n  }\n  _acceptChunk2(chunk) {\n    const lineStarts = (0,require$_DOT__SLASH_pieceTreeBase_DOT_js.createLineStarts)(this._tmpLineStarts, chunk);\n    this.chunks.push(new require$_DOT__SLASH_pieceTreeBase_DOT_js.StringBuffer(chunk, lineStarts.lineStarts));\n    this.cr += lineStarts.cr;\n    this.lf += lineStarts.lf;\n    this.crlf += lineStarts.crlf;\n    if (!lineStarts.isBasicASCII) {\n      this.isBasicASCII = false;\n      if (!this.containsRTL) {\n        this.containsRTL = strings.containsRTL(chunk);\n      }\n      if (!this.containsUnusualLineTerminators) {\n        this.containsUnusualLineTerminators = strings.containsUnusualLineTerminators(chunk);\n      }\n    }\n  }\n  finish(normalizeEOL = true) {\n    this._finish();\n    return new PieceTreeTextBufferFactory(this.chunks, this.BOM, this.cr, this.lf, this.crlf, this.containsRTL, this.containsUnusualLineTerminators, this.isBasicASCII, normalizeEOL);\n  }\n  _finish() {\n    if (this.chunks.length === 0) {\n      this._acceptChunk1(\"\", true);\n    }\n    if (this._hasPreviousChar) {\n      this._hasPreviousChar = false;\n      const lastChunk = this.chunks[this.chunks.length - 1];\n      lastChunk.buffer += String.fromCharCode(this._previousChar);\n      const newLineStarts = (0,require$_DOT__SLASH_pieceTreeBase_DOT_js.createLineStartsFast)(lastChunk.buffer);\n      lastChunk.lineStarts = newLineStarts;\n      if (this._previousChar === 13) {\n        this.cr++;\n      }\n    }\n  }\n}\n\n};"],
"names":["shadow$provide","require","module","exports","Object","defineProperties","__esModule","enumerable","value","PieceTreeTextBufferBuilder","get","strings","require$_DOT__SLASH_pieceTreeBase_DOT_js","require$_DOT__SLASH_pieceTreeTextBuffer_DOT_js","PieceTreeTextBufferFactory","constructor","_chunks","_bom","_cr","_lf","_crlf","_containsRTL","_containsUnusualLineTerminators","_isBasicASCII","_normalizeEOL","_getEOL","defaultEOL","totalEOLCount","create","eol","chunks","i","len","length","str","buffer","replace","newLineStart","createLineStartsFast","StringBuffer","textBuffer","PieceTreeTextBuffer","disposable","BOM","_hasPreviousChar","_previousChar","_tmpLineStarts","crlf","lf","cr","containsUnusualLineTerminators","containsRTL","isBasicASCII","acceptChunk","chunk","startsWithUTF8BOM","UTF8_BOM_CHARACTER","substr","lastChar","charCodeAt","_acceptChunk1","allowEmptyStrings","_acceptChunk2","String","fromCharCode","lineStarts","createLineStarts","push","finish","normalizeEOL","_finish","lastChunk","newLineStarts"]
}
