shadow$provide.module$node_modules$monaco_editor$esm$vs$editor$common$model$bracketPairsTextModelPart$bracketPairsTree$beforeEditPositionMapper = function(require, module, exports) {
  Object.defineProperties(exports, {__esModule:{enumerable:!0, value:!0}, BeforeEditPositionMapper:{enumerable:!0, get:function() {
    return BeforeEditPositionMapper;
  }}, TextEditInfo:{enumerable:!0, get:function() {
    return TextEditInfo;
  }}});
  var require$_DOT__DOT__SLASH__DOT__DOT__SLASH__DOT__DOT__SLASH_core_SLASH_range_DOT_js = require("module$node_modules$monaco_editor$esm$vs$editor$common$core$range"), require$_DOT__SLASH_length_DOT_js = require("module$node_modules$monaco_editor$esm$vs$editor$common$model$bracketPairsTextModelPart$bracketPairsTree$length");
  class TextEditInfo {
    static fromModelContentChanges(changes) {
      return changes.map(c => {
        const range = require$_DOT__DOT__SLASH__DOT__DOT__SLASH__DOT__DOT__SLASH_core_SLASH_range_DOT_js.Range.lift(c.range);
        return new TextEditInfo((0,require$_DOT__SLASH_length_DOT_js.positionToLength)(range.getStartPosition()), (0,require$_DOT__SLASH_length_DOT_js.positionToLength)(range.getEndPosition()), (0,require$_DOT__SLASH_length_DOT_js.lengthOfString)(c.text));
      }).reverse();
    }
    constructor(startOffset, endOffset, newLength) {
      this.startOffset = startOffset;
      this.endOffset = endOffset;
      this.newLength = newLength;
    }
    toString() {
      return `[${(0,require$_DOT__SLASH_length_DOT_js.lengthToObj)(this.startOffset)}...${(0,require$_DOT__SLASH_length_DOT_js.lengthToObj)(this.endOffset)}) -> ${(0,require$_DOT__SLASH_length_DOT_js.lengthToObj)(this.newLength)}`;
    }
  }
  class BeforeEditPositionMapper {
    constructor(edits) {
      this.deltaOldToNewColumnCount = this.deltaOldToNewLineCount = this.nextEditIdx = 0;
      this.deltaLineIdxInOld = -1;
      this.edits = edits.map(edit => TextEditInfoCache.from(edit));
    }
    getOffsetBeforeChange(offset) {
      this.adjustNextEdit(offset);
      return this.translateCurToOld(offset);
    }
    getDistanceToNextChange(offset) {
      this.adjustNextEdit(offset);
      var nextEdit = this.edits[this.nextEditIdx];
      nextEdit = nextEdit ? this.translateOldToCur(nextEdit.offsetObj) : null;
      return nextEdit === null ? null : (0,require$_DOT__SLASH_length_DOT_js.lengthDiffNonNegative)(offset, nextEdit);
    }
    translateOldToCur(oldOffsetObj) {
      return oldOffsetObj.lineCount === this.deltaLineIdxInOld ? (0,require$_DOT__SLASH_length_DOT_js.toLength)(oldOffsetObj.lineCount + this.deltaOldToNewLineCount, oldOffsetObj.columnCount + this.deltaOldToNewColumnCount) : (0,require$_DOT__SLASH_length_DOT_js.toLength)(oldOffsetObj.lineCount + this.deltaOldToNewLineCount, oldOffsetObj.columnCount);
    }
    translateCurToOld(newOffset) {
      newOffset = (0,require$_DOT__SLASH_length_DOT_js.lengthToObj)(newOffset);
      return newOffset.lineCount - this.deltaOldToNewLineCount === this.deltaLineIdxInOld ? (0,require$_DOT__SLASH_length_DOT_js.toLength)(newOffset.lineCount - this.deltaOldToNewLineCount, newOffset.columnCount - this.deltaOldToNewColumnCount) : (0,require$_DOT__SLASH_length_DOT_js.toLength)(newOffset.lineCount - this.deltaOldToNewLineCount, newOffset.columnCount);
    }
    adjustNextEdit(offset) {
      for (; this.nextEditIdx < this.edits.length;) {
        const nextEdit = this.edits[this.nextEditIdx];
        var nextEditEndOffsetInCur = this.translateOldToCur(nextEdit.endOffsetAfterObj);
        if ((0,require$_DOT__SLASH_length_DOT_js.lengthLessThanEqual)(nextEditEndOffsetInCur, offset)) {
          this.nextEditIdx++;
          nextEditEndOffsetInCur = (0,require$_DOT__SLASH_length_DOT_js.lengthToObj)(nextEditEndOffsetInCur);
          const nextEditEndOffsetBeforeInCurObj = (0,require$_DOT__SLASH_length_DOT_js.lengthToObj)(this.translateOldToCur(nextEdit.endOffsetBeforeObj));
          this.deltaOldToNewLineCount += nextEditEndOffsetInCur.lineCount - nextEditEndOffsetBeforeInCurObj.lineCount;
          this.deltaOldToNewColumnCount = (this.deltaLineIdxInOld === nextEdit.endOffsetBeforeObj.lineCount ? this.deltaOldToNewColumnCount : 0) + (nextEditEndOffsetInCur.columnCount - nextEditEndOffsetBeforeInCurObj.columnCount);
          this.deltaLineIdxInOld = nextEdit.endOffsetBeforeObj.lineCount;
        } else {
          break;
        }
      }
    }
  }
  class TextEditInfoCache {
    static from(edit) {
      return new TextEditInfoCache(edit.startOffset, edit.endOffset, edit.newLength);
    }
    constructor(startOffset, endOffset, textLength) {
      this.endOffsetBeforeObj = (0,require$_DOT__SLASH_length_DOT_js.lengthToObj)(endOffset);
      this.endOffsetAfterObj = (0,require$_DOT__SLASH_length_DOT_js.lengthToObj)((0,require$_DOT__SLASH_length_DOT_js.lengthAdd)(startOffset, textLength));
      this.offsetObj = (0,require$_DOT__SLASH_length_DOT_js.lengthToObj)(startOffset);
    }
  }
};

//# sourceMappingURL=module$node_modules$monaco_editor$esm$vs$editor$common$model$bracketPairsTextModelPart$bracketPairsTree$beforeEditPositionMapper.js.map
