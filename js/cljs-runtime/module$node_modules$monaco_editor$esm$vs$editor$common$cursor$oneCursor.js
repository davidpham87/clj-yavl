shadow$provide.module$node_modules$monaco_editor$esm$vs$editor$common$cursor$oneCursor = function(require, module, exports) {
  Object.defineProperties(exports, {__esModule:{enumerable:!0, value:!0}, Cursor:{enumerable:!0, get:function() {
    return Cursor;
  }}});
  var require$_DOT__DOT__SLASH_cursorCommon_DOT_js = require("module$node_modules$monaco_editor$esm$vs$editor$common$cursorCommon"), require$_DOT__DOT__SLASH_core_SLASH_position_DOT_js = require("module$node_modules$monaco_editor$esm$vs$editor$common$core$position"), require$_DOT__DOT__SLASH_core_SLASH_range_DOT_js = require("module$node_modules$monaco_editor$esm$vs$editor$common$core$range"), require$_DOT__DOT__SLASH_core_SLASH_selection_DOT_js = require("module$node_modules$monaco_editor$esm$vs$editor$common$core$selection");
  class Cursor {
    constructor(context) {
      this._selTrackedRange = null;
      this._trackSelection = !0;
      this._setState(context, new require$_DOT__DOT__SLASH_cursorCommon_DOT_js.SingleCursorState(new require$_DOT__DOT__SLASH_core_SLASH_range_DOT_js.Range(1, 1, 1, 1), 0, 0, new require$_DOT__DOT__SLASH_core_SLASH_position_DOT_js.Position(1, 1), 0), new require$_DOT__DOT__SLASH_cursorCommon_DOT_js.SingleCursorState(new require$_DOT__DOT__SLASH_core_SLASH_range_DOT_js.Range(1, 1, 1, 1), 0, 0, new require$_DOT__DOT__SLASH_core_SLASH_position_DOT_js.Position(1, 1), 0));
    }
    dispose(context) {
      this._removeTrackedRange(context);
    }
    startTrackingSelection(context) {
      this._trackSelection = !0;
      this._updateTrackedRange(context);
    }
    stopTrackingSelection(context) {
      this._trackSelection = !1;
      this._removeTrackedRange(context);
    }
    _updateTrackedRange(context) {
      this._trackSelection && (this._selTrackedRange = context.model._setTrackedRange(this._selTrackedRange, this.modelState.selection, 0));
    }
    _removeTrackedRange(context) {
      this._selTrackedRange = context.model._setTrackedRange(this._selTrackedRange, null, 0);
    }
    asCursorState() {
      return new require$_DOT__DOT__SLASH_cursorCommon_DOT_js.CursorState(this.modelState, this.viewState);
    }
    readSelectionFromMarkers(context) {
      context = context.model._getTrackedRange(this._selTrackedRange);
      return this.modelState.selection.isEmpty() && !context.isEmpty() ? require$_DOT__DOT__SLASH_core_SLASH_selection_DOT_js.Selection.fromRange(context.collapseToEnd(), this.modelState.selection.getDirection()) : require$_DOT__DOT__SLASH_core_SLASH_selection_DOT_js.Selection.fromRange(context, this.modelState.selection.getDirection());
    }
    ensureValidState(context) {
      this._setState(context, this.modelState, this.viewState);
    }
    setState(context, modelState, viewState) {
      this._setState(context, modelState, viewState);
    }
    static _validatePositionWithCache(viewModel, position, cacheInput, cacheOutput) {
      return position.equals(cacheInput) ? cacheOutput : viewModel.normalizePosition(position, 2);
    }
    static _validateViewState(viewModel, viewState) {
      const position = viewState.position, sStartPosition = viewState.selectionStart.getStartPosition(), sEndPosition = viewState.selectionStart.getEndPosition(), validPosition = viewModel.normalizePosition(position, 2), validSStartPosition = this._validatePositionWithCache(viewModel, sStartPosition, position, validPosition);
      viewModel = this._validatePositionWithCache(viewModel, sEndPosition, sStartPosition, validSStartPosition);
      return position.equals(validPosition) && sStartPosition.equals(validSStartPosition) && sEndPosition.equals(viewModel) ? viewState : new require$_DOT__DOT__SLASH_cursorCommon_DOT_js.SingleCursorState(require$_DOT__DOT__SLASH_core_SLASH_range_DOT_js.Range.fromPositions(validSStartPosition, viewModel), viewState.selectionStartKind, viewState.selectionStartLeftoverVisibleColumns + sStartPosition.column - validSStartPosition.column, validPosition, viewState.leftoverVisibleColumns + position.column - 
      validPosition.column);
    }
    _setState(context, modelState, viewState) {
      viewState &&= Cursor._validateViewState(context.viewModel, viewState);
      if (modelState) {
        var selectionStart = context.model.validateRange(modelState.selectionStart);
        const selectionStartLeftoverVisibleColumns = modelState.selectionStart.equalsRange(selectionStart) ? modelState.selectionStartLeftoverVisibleColumns : 0, position = context.model.validatePosition(modelState.position), leftoverVisibleColumns = modelState.position.equals(position) ? modelState.leftoverVisibleColumns : 0;
        modelState = new require$_DOT__DOT__SLASH_cursorCommon_DOT_js.SingleCursorState(selectionStart, modelState.selectionStartKind, selectionStartLeftoverVisibleColumns, position, leftoverVisibleColumns);
      } else {
        if (!viewState) {
          return;
        }
        modelState = context.model.validateRange(context.coordinatesConverter.convertViewRangeToModelRange(viewState.selectionStart));
        selectionStart = context.model.validatePosition(context.coordinatesConverter.convertViewPositionToModelPosition(viewState.position));
        modelState = new require$_DOT__DOT__SLASH_cursorCommon_DOT_js.SingleCursorState(modelState, viewState.selectionStartKind, viewState.selectionStartLeftoverVisibleColumns, selectionStart, viewState.leftoverVisibleColumns);
      }
      viewState ? (selectionStart = context.coordinatesConverter.validateViewRange(viewState.selectionStart, modelState.selectionStart), viewState = context.coordinatesConverter.validateViewPosition(viewState.position, modelState.position), viewState = new require$_DOT__DOT__SLASH_cursorCommon_DOT_js.SingleCursorState(selectionStart, modelState.selectionStartKind, modelState.selectionStartLeftoverVisibleColumns, viewState, modelState.leftoverVisibleColumns)) : (viewState = context.coordinatesConverter.convertModelPositionToViewPosition(new require$_DOT__DOT__SLASH_core_SLASH_position_DOT_js.Position(modelState.selectionStart.startLineNumber, 
      modelState.selectionStart.startColumn)), selectionStart = context.coordinatesConverter.convertModelPositionToViewPosition(new require$_DOT__DOT__SLASH_core_SLASH_position_DOT_js.Position(modelState.selectionStart.endLineNumber, modelState.selectionStart.endColumn)), viewState = new require$_DOT__DOT__SLASH_core_SLASH_range_DOT_js.Range(viewState.lineNumber, viewState.column, selectionStart.lineNumber, selectionStart.column), selectionStart = context.coordinatesConverter.convertModelPositionToViewPosition(modelState.position), 
      viewState = new require$_DOT__DOT__SLASH_cursorCommon_DOT_js.SingleCursorState(viewState, modelState.selectionStartKind, modelState.selectionStartLeftoverVisibleColumns, selectionStart, modelState.leftoverVisibleColumns));
      this.modelState = modelState;
      this.viewState = viewState;
      this._updateTrackedRange(context);
    }
  }
};

//# sourceMappingURL=module$node_modules$monaco_editor$esm$vs$editor$common$cursor$oneCursor.js.map
