{
"version":3,
"file":"module$node_modules$vega_view_transforms$build$vega_view_transforms.js",
"lineCount":724,
"mappings":"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",
"sources":["node_modules/vega-view-transforms/build/vega-view-transforms.js"],
"sourcesContent":["shadow$provide[\"module$node_modules$vega_view_transforms$build$vega_view_transforms\"] = function(require,module,exports) {\n(function (global, factory) {\n  typeof exports === 'object' && typeof module !== 'undefined' ? factory(exports, require('vega-dataflow'), require('vega-scenegraph'), require('vega-util')) :\n  typeof define === 'function' && define.amd ? define(['exports', 'vega-dataflow', 'vega-scenegraph', 'vega-util'], factory) :\n  (global = typeof globalThis !== 'undefined' ? globalThis : global || self, factory((global.vega = global.vega || {}, global.vega.transforms = {}), global.vega, global.vega, global.vega));\n})(this, (function (exports, vegaDataflow, vegaScenegraph, vegaUtil) { 'use strict';\n\n  const Top = 'top';\n  const Left = 'left';\n  const Right = 'right';\n  const Bottom = 'bottom';\n  const TopLeft = 'top-left';\n  const TopRight = 'top-right';\n  const BottomLeft = 'bottom-left';\n  const BottomRight = 'bottom-right';\n  const Start = 'start';\n  const Middle = 'middle';\n  const End = 'end';\n  const X = 'x';\n  const Y = 'y';\n  const Group = 'group';\n  const AxisRole = 'axis';\n  const TitleRole = 'title';\n  const FrameRole = 'frame';\n  const ScopeRole = 'scope';\n  const LegendRole = 'legend';\n  const RowHeader = 'row-header';\n  const RowFooter = 'row-footer';\n  const RowTitle = 'row-title';\n  const ColHeader = 'column-header';\n  const ColFooter = 'column-footer';\n  const ColTitle = 'column-title';\n  const Padding = 'padding';\n  const Symbols = 'symbol';\n  const Fit = 'fit';\n  const FitX = 'fit-x';\n  const FitY = 'fit-y';\n  const Pad = 'pad';\n  const None = 'none';\n  const All = 'all';\n  const Each = 'each';\n  const Flush = 'flush';\n  const Column = 'column';\n  const Row = 'row';\n\n  /**\n   * Calculate bounding boxes for scenegraph items.\n   * @constructor\n   * @param {object} params - The parameters for this operator.\n   * @param {object} params.mark - The scenegraph mark instance to bound.\n   */\n  function Bound(params) {\n    vegaDataflow.Transform.call(this, null, params);\n  }\n  vegaUtil.inherits(Bound, vegaDataflow.Transform, {\n    transform(_, pulse) {\n      const view = pulse.dataflow,\n        mark = _.mark,\n        type = mark.marktype,\n        entry = vegaScenegraph.Marks[type],\n        bound = entry.bound;\n      let markBounds = mark.bounds,\n        rebound;\n      if (entry.nested) {\n        // multi-item marks have a single bounds instance\n        if (mark.items.length) view.dirty(mark.items[0]);\n        markBounds = boundItem(mark, bound);\n        mark.items.forEach(item => {\n          item.bounds.clear().union(markBounds);\n        });\n      } else if (type === Group || _.modified()) {\n        // operator parameters modified -> re-bound all items\n        // updates group bounds in response to modified group content\n        pulse.visit(pulse.MOD, item => view.dirty(item));\n        markBounds.clear();\n        mark.items.forEach(item => markBounds.union(boundItem(item, bound)));\n\n        // force reflow for axes/legends/titles to propagate any layout changes\n        switch (mark.role) {\n          case AxisRole:\n          case LegendRole:\n          case TitleRole:\n            pulse.reflow();\n        }\n      } else {\n        // incrementally update bounds, re-bound mark as needed\n        rebound = pulse.changed(pulse.REM);\n        pulse.visit(pulse.ADD, item => {\n          markBounds.union(boundItem(item, bound));\n        });\n        pulse.visit(pulse.MOD, item => {\n          rebound = rebound || markBounds.alignsWith(item.bounds);\n          view.dirty(item);\n          markBounds.union(boundItem(item, bound));\n        });\n        if (rebound) {\n          markBounds.clear();\n          mark.items.forEach(item => markBounds.union(item.bounds));\n        }\n      }\n\n      // ensure mark bounds do not exceed any clipping region\n      vegaScenegraph.boundClip(mark);\n      return pulse.modifies('bounds');\n    }\n  });\n  function boundItem(item, bound, opt) {\n    return bound(item.bounds.clear(), item, opt);\n  }\n\n  const COUNTER_NAME = ':vega_identifier:';\n\n  /**\n   * Adds a unique identifier to all added tuples.\n   * This transform creates a new signal that serves as an id counter.\n   * As a result, the id counter is shared across all instances of this\n   * transform, generating unique ids across multiple data streams. In\n   * addition, this signal value can be included in a snapshot of the\n   * dataflow state, enabling correct resumption of id allocation.\n   * @constructor\n   * @param {object} params - The parameters for this operator.\n   * @param {string} params.as - The field name for the generated identifier.\n   */\n  function Identifier(params) {\n    vegaDataflow.Transform.call(this, 0, params);\n  }\n  Identifier.Definition = {\n    'type': 'Identifier',\n    'metadata': {\n      'modifies': true\n    },\n    'params': [{\n      'name': 'as',\n      'type': 'string',\n      'required': true\n    }]\n  };\n  vegaUtil.inherits(Identifier, vegaDataflow.Transform, {\n    transform(_, pulse) {\n      const counter = getCounter(pulse.dataflow),\n        as = _.as;\n      let id = counter.value;\n      pulse.visit(pulse.ADD, t => t[as] = t[as] || ++id);\n      counter.set(this.value = id);\n      return pulse;\n    }\n  });\n  function getCounter(view) {\n    return view._signals[COUNTER_NAME] || (view._signals[COUNTER_NAME] = view.add(0));\n  }\n\n  /**\n   * Bind scenegraph items to a scenegraph mark instance.\n   * @constructor\n   * @param {object} params - The parameters for this operator.\n   * @param {object} params.markdef - The mark definition for creating the mark.\n   *   This is an object of legal scenegraph mark properties which *must* include\n   *   the 'marktype' property.\n   */\n  function Mark(params) {\n    vegaDataflow.Transform.call(this, null, params);\n  }\n  vegaUtil.inherits(Mark, vegaDataflow.Transform, {\n    transform(_, pulse) {\n      let mark = this.value;\n\n      // acquire mark on first invocation, bind context and group\n      if (!mark) {\n        mark = pulse.dataflow.scenegraph().mark(_.markdef, lookup$1(_), _.index);\n        mark.group.context = _.context;\n        if (!_.context.group) _.context.group = mark.group;\n        mark.source = this.source; // point to upstream collector\n        mark.clip = _.clip;\n        mark.interactive = _.interactive;\n        this.value = mark;\n      }\n\n      // initialize entering items\n      const Init = mark.marktype === Group ? vegaScenegraph.GroupItem : vegaScenegraph.Item;\n      pulse.visit(pulse.ADD, item => Init.call(item, mark));\n\n      // update clipping and/or interactive status\n      if (_.modified('clip') || _.modified('interactive')) {\n        mark.clip = _.clip;\n        mark.interactive = !!_.interactive;\n        mark.zdirty = true; // force scenegraph re-eval\n        pulse.reflow();\n      }\n\n      // bind items array to scenegraph mark\n      mark.items = pulse.source;\n      return pulse;\n    }\n  });\n  function lookup$1(_) {\n    const g = _.groups,\n      p = _.parent;\n    return g && g.size === 1 ? g.get(Object.keys(g.object)[0]) : g && p ? g.lookup(p) : null;\n  }\n\n  /**\n   * Analyze items for overlap, changing opacity to hide items with\n   * overlapping bounding boxes. This transform will preserve at least\n   * two items (e.g., first and last) even if overlap persists.\n   * @param {object} params - The parameters for this operator.\n   * @param {function(*,*): number} [params.sort] - A comparator\n   *   function for sorting items.\n   * @param {object} [params.method] - The overlap removal method to apply.\n   *   One of 'parity' (default, hide every other item until there is no\n   *   more overlap) or 'greedy' (sequentially scan and hide and items that\n   *   overlap with the last visible item).\n   * @param {object} [params.boundScale] - A scale whose range should be used\n   *   to bound the items. Items exceeding the bounds of the scale range\n   *   will be treated as overlapping. If null or undefined, no bounds check\n   *   will be applied.\n   * @param {object} [params.boundOrient] - The orientation of the scale\n   *   (top, bottom, left, or right) used to bound items. This parameter is\n   *   ignored if boundScale is null or undefined.\n   * @param {object} [params.boundTolerance] - The tolerance in pixels for\n   *   bound inclusion testing (default 1). This specifies by how many pixels\n   *   an item's bounds may exceed the scale range bounds and not be culled.\n   * @constructor\n   */\n  function Overlap(params) {\n    vegaDataflow.Transform.call(this, null, params);\n  }\n  const methods = {\n    parity: items => items.filter((item, i) => i % 2 ? item.opacity = 0 : 1),\n    greedy: (items, sep) => {\n      let a;\n      return items.filter((b, i) => !i || !intersect(a.bounds, b.bounds, sep) ? (a = b, 1) : b.opacity = 0);\n    }\n  };\n\n  // compute bounding box intersection\n  // including padding pixels of separation\n  const intersect = (a, b, sep) => sep > Math.max(b.x1 - a.x2, a.x1 - b.x2, b.y1 - a.y2, a.y1 - b.y2);\n  const hasOverlap = (items, pad) => {\n    for (var i = 1, n = items.length, a = items[0].bounds, b; i < n; a = b, ++i) {\n      if (intersect(a, b = items[i].bounds, pad)) return true;\n    }\n  };\n  const hasBounds = item => {\n    const b = item.bounds;\n    return b.width() > 1 && b.height() > 1;\n  };\n  const boundTest = (scale, orient, tolerance) => {\n    var range = scale.range(),\n      b = new vegaScenegraph.Bounds();\n    if (orient === Top || orient === Bottom) {\n      b.set(range[0], -Infinity, range[1], +Infinity);\n    } else {\n      b.set(-Infinity, range[0], +Infinity, range[1]);\n    }\n    b.expand(tolerance || 1);\n    return item => b.encloses(item.bounds);\n  };\n\n  // reset all items to be fully opaque\n  const reset = source => {\n    source.forEach(item => item.opacity = 1);\n    return source;\n  };\n\n  // add all tuples to mod, fork pulse if parameters were modified\n  // fork prevents cross-stream tuple pollution (e.g., pulse from scale)\n  const reflow = (pulse, _) => pulse.reflow(_.modified()).modifies('opacity');\n  vegaUtil.inherits(Overlap, vegaDataflow.Transform, {\n    transform(_, pulse) {\n      const reduce = methods[_.method] || methods.parity,\n        sep = _.separation || 0;\n      let source = pulse.materialize(pulse.SOURCE).source,\n        items,\n        test;\n      if (!source || !source.length) return;\n      if (!_.method) {\n        // early exit if method is falsy\n        if (_.modified('method')) {\n          reset(source);\n          pulse = reflow(pulse, _);\n        }\n        return pulse;\n      }\n\n      // skip labels with no content\n      source = source.filter(hasBounds);\n\n      // early exit, nothing to do\n      if (!source.length) return;\n      if (_.sort) {\n        source = source.slice().sort(_.sort);\n      }\n      items = reset(source);\n      pulse = reflow(pulse, _);\n      if (items.length >= 3 && hasOverlap(items, sep)) {\n        do {\n          items = reduce(items, sep);\n        } while (items.length >= 3 && hasOverlap(items, sep));\n        if (items.length < 3 && !vegaUtil.peek(source).opacity) {\n          if (items.length > 1) vegaUtil.peek(items).opacity = 0;\n          vegaUtil.peek(source).opacity = 1;\n        }\n      }\n      if (_.boundScale && _.boundTolerance >= 0) {\n        test = boundTest(_.boundScale, _.boundOrient, +_.boundTolerance);\n        source.forEach(item => {\n          if (!test(item)) item.opacity = 0;\n        });\n      }\n\n      // re-calculate mark bounds\n      const bounds = items[0].mark.bounds.clear();\n      source.forEach(item => {\n        if (item.opacity) bounds.union(item.bounds);\n      });\n      return pulse;\n    }\n  });\n\n  /**\n   * Queue modified scenegraph items for rendering.\n   * @constructor\n   */\n  function Render(params) {\n    vegaDataflow.Transform.call(this, null, params);\n  }\n  vegaUtil.inherits(Render, vegaDataflow.Transform, {\n    transform(_, pulse) {\n      const view = pulse.dataflow;\n      pulse.visit(pulse.ALL, item => view.dirty(item));\n\n      // set z-index dirty flag as needed\n      if (pulse.fields && pulse.fields['zindex']) {\n        const item = pulse.source && pulse.source[0];\n        if (item) item.mark.zdirty = true;\n      }\n    }\n  });\n\n  const tempBounds = new vegaScenegraph.Bounds();\n  function set(item, property, value) {\n    return item[property] === value ? 0 : (item[property] = value, 1);\n  }\n\n  function isYAxis(mark) {\n    var orient = mark.items[0].orient;\n    return orient === Left || orient === Right;\n  }\n  function axisIndices(datum) {\n    let index = +datum.grid;\n    return [datum.ticks ? index++ : -1,\n    // ticks index\n    datum.labels ? index++ : -1,\n    // labels index\n    index + +datum.domain // title index\n    ];\n  }\n  function axisLayout(view, axis, width, height) {\n    var item = axis.items[0],\n      datum = item.datum,\n      delta = item.translate != null ? item.translate : 0.5,\n      orient = item.orient,\n      indices = axisIndices(datum),\n      range = item.range,\n      offset = item.offset,\n      position = item.position,\n      minExtent = item.minExtent,\n      maxExtent = item.maxExtent,\n      title = datum.title && item.items[indices[2]].items[0],\n      titlePadding = item.titlePadding,\n      bounds = item.bounds,\n      dl = title && vegaScenegraph.multiLineOffset(title),\n      x = 0,\n      y = 0,\n      i,\n      s;\n    tempBounds.clear().union(bounds);\n    bounds.clear();\n    if ((i = indices[0]) > -1) bounds.union(item.items[i].bounds);\n    if ((i = indices[1]) > -1) bounds.union(item.items[i].bounds);\n\n    // position axis group and title\n    switch (orient) {\n      case Top:\n        x = position || 0;\n        y = -offset;\n        s = Math.max(minExtent, Math.min(maxExtent, -bounds.y1));\n        bounds.add(0, -s).add(range, 0);\n        if (title) axisTitleLayout(view, title, s, titlePadding, dl, 0, -1, bounds);\n        break;\n      case Left:\n        x = -offset;\n        y = position || 0;\n        s = Math.max(minExtent, Math.min(maxExtent, -bounds.x1));\n        bounds.add(-s, 0).add(0, range);\n        if (title) axisTitleLayout(view, title, s, titlePadding, dl, 1, -1, bounds);\n        break;\n      case Right:\n        x = width + offset;\n        y = position || 0;\n        s = Math.max(minExtent, Math.min(maxExtent, bounds.x2));\n        bounds.add(0, 0).add(s, range);\n        if (title) axisTitleLayout(view, title, s, titlePadding, dl, 1, 1, bounds);\n        break;\n      case Bottom:\n        x = position || 0;\n        y = height + offset;\n        s = Math.max(minExtent, Math.min(maxExtent, bounds.y2));\n        bounds.add(0, 0).add(range, s);\n        if (title) axisTitleLayout(view, title, s, titlePadding, 0, 0, 1, bounds);\n        break;\n      default:\n        x = item.x;\n        y = item.y;\n    }\n\n    // update bounds\n    vegaScenegraph.boundStroke(bounds.translate(x, y), item);\n    if (set(item, 'x', x + delta) | set(item, 'y', y + delta)) {\n      item.bounds = tempBounds;\n      view.dirty(item);\n      item.bounds = bounds;\n      view.dirty(item);\n    }\n    return item.mark.bounds.clear().union(bounds);\n  }\n  function axisTitleLayout(view, title, offset, pad, dl, isYAxis, sign, bounds) {\n    const b = title.bounds;\n    if (title.auto) {\n      const v = sign * (offset + dl + pad);\n      let dx = 0,\n        dy = 0;\n      view.dirty(title);\n      isYAxis ? dx = (title.x || 0) - (title.x = v) : dy = (title.y || 0) - (title.y = v);\n      title.mark.bounds.clear().union(b.translate(-dx, -dy));\n      view.dirty(title);\n    }\n    bounds.union(b);\n  }\n\n  // aggregation functions for grid margin determination\n  const min = (a, b) => Math.floor(Math.min(a, b));\n  const max = (a, b) => Math.ceil(Math.max(a, b));\n  function gridLayoutGroups(group) {\n    var groups = group.items,\n      n = groups.length,\n      i = 0,\n      mark,\n      items;\n    const views = {\n      marks: [],\n      rowheaders: [],\n      rowfooters: [],\n      colheaders: [],\n      colfooters: [],\n      rowtitle: null,\n      coltitle: null\n    };\n\n    // layout axes, gather legends, collect bounds\n    for (; i < n; ++i) {\n      mark = groups[i];\n      items = mark.items;\n      if (mark.marktype === Group) {\n        switch (mark.role) {\n          case AxisRole:\n          case LegendRole:\n          case TitleRole:\n            break;\n          case RowHeader:\n            views.rowheaders.push(...items);\n            break;\n          case RowFooter:\n            views.rowfooters.push(...items);\n            break;\n          case ColHeader:\n            views.colheaders.push(...items);\n            break;\n          case ColFooter:\n            views.colfooters.push(...items);\n            break;\n          case RowTitle:\n            views.rowtitle = items[0];\n            break;\n          case ColTitle:\n            views.coltitle = items[0];\n            break;\n          default:\n            views.marks.push(...items);\n        }\n      }\n    }\n    return views;\n  }\n  function bboxFlush(item) {\n    return new vegaScenegraph.Bounds().set(0, 0, item.width || 0, item.height || 0);\n  }\n  function bboxFull(item) {\n    const b = item.bounds.clone();\n    return b.empty() ? b.set(0, 0, 0, 0) : b.translate(-(item.x || 0), -(item.y || 0));\n  }\n  function get(opt, key, d) {\n    const v = vegaUtil.isObject(opt) ? opt[key] : opt;\n    return v != null ? v : d !== undefined ? d : 0;\n  }\n  function offsetValue(v) {\n    return v < 0 ? Math.ceil(-v) : 0;\n  }\n  function gridLayout(view, groups, opt) {\n    var dirty = !opt.nodirty,\n      bbox = opt.bounds === Flush ? bboxFlush : bboxFull,\n      bounds = tempBounds.set(0, 0, 0, 0),\n      alignCol = get(opt.align, Column),\n      alignRow = get(opt.align, Row),\n      padCol = get(opt.padding, Column),\n      padRow = get(opt.padding, Row),\n      ncols = opt.columns || groups.length,\n      nrows = ncols <= 0 ? 1 : Math.ceil(groups.length / ncols),\n      n = groups.length,\n      xOffset = Array(n),\n      xExtent = Array(ncols),\n      xMax = 0,\n      yOffset = Array(n),\n      yExtent = Array(nrows),\n      yMax = 0,\n      dx = Array(n),\n      dy = Array(n),\n      boxes = Array(n),\n      m,\n      i,\n      c,\n      r,\n      b,\n      g,\n      px,\n      py,\n      x,\n      y,\n      offset;\n    for (i = 0; i < ncols; ++i) xExtent[i] = 0;\n    for (i = 0; i < nrows; ++i) yExtent[i] = 0;\n\n    // determine offsets for each group\n    for (i = 0; i < n; ++i) {\n      g = groups[i];\n      b = boxes[i] = bbox(g);\n      g.x = g.x || 0;\n      dx[i] = 0;\n      g.y = g.y || 0;\n      dy[i] = 0;\n      c = i % ncols;\n      r = ~~(i / ncols);\n      xMax = Math.max(xMax, px = Math.ceil(b.x2));\n      yMax = Math.max(yMax, py = Math.ceil(b.y2));\n      xExtent[c] = Math.max(xExtent[c], px);\n      yExtent[r] = Math.max(yExtent[r], py);\n      xOffset[i] = padCol + offsetValue(b.x1);\n      yOffset[i] = padRow + offsetValue(b.y1);\n      if (dirty) view.dirty(groups[i]);\n    }\n\n    // set initial alignment offsets\n    for (i = 0; i < n; ++i) {\n      if (i % ncols === 0) xOffset[i] = 0;\n      if (i < ncols) yOffset[i] = 0;\n    }\n\n    // enforce column alignment constraints\n    if (alignCol === Each) {\n      for (c = 1; c < ncols; ++c) {\n        for (offset = 0, i = c; i < n; i += ncols) {\n          if (offset < xOffset[i]) offset = xOffset[i];\n        }\n        for (i = c; i < n; i += ncols) {\n          xOffset[i] = offset + xExtent[c - 1];\n        }\n      }\n    } else if (alignCol === All) {\n      for (offset = 0, i = 0; i < n; ++i) {\n        if (i % ncols && offset < xOffset[i]) offset = xOffset[i];\n      }\n      for (i = 0; i < n; ++i) {\n        if (i % ncols) xOffset[i] = offset + xMax;\n      }\n    } else {\n      for (alignCol = false, c = 1; c < ncols; ++c) {\n        for (i = c; i < n; i += ncols) {\n          xOffset[i] += xExtent[c - 1];\n        }\n      }\n    }\n\n    // enforce row alignment constraints\n    if (alignRow === Each) {\n      for (r = 1; r < nrows; ++r) {\n        for (offset = 0, i = r * ncols, m = i + ncols; i < m; ++i) {\n          if (offset < yOffset[i]) offset = yOffset[i];\n        }\n        for (i = r * ncols; i < m; ++i) {\n          yOffset[i] = offset + yExtent[r - 1];\n        }\n      }\n    } else if (alignRow === All) {\n      for (offset = 0, i = ncols; i < n; ++i) {\n        if (offset < yOffset[i]) offset = yOffset[i];\n      }\n      for (i = ncols; i < n; ++i) {\n        yOffset[i] = offset + yMax;\n      }\n    } else {\n      for (alignRow = false, r = 1; r < nrows; ++r) {\n        for (i = r * ncols, m = i + ncols; i < m; ++i) {\n          yOffset[i] += yExtent[r - 1];\n        }\n      }\n    }\n\n    // perform horizontal grid layout\n    for (x = 0, i = 0; i < n; ++i) {\n      x = xOffset[i] + (i % ncols ? x : 0);\n      dx[i] += x - groups[i].x;\n    }\n\n    // perform vertical grid layout\n    for (c = 0; c < ncols; ++c) {\n      for (y = 0, i = c; i < n; i += ncols) {\n        y += yOffset[i];\n        dy[i] += y - groups[i].y;\n      }\n    }\n\n    // perform horizontal centering\n    if (alignCol && get(opt.center, Column) && nrows > 1) {\n      for (i = 0; i < n; ++i) {\n        b = alignCol === All ? xMax : xExtent[i % ncols];\n        x = b - boxes[i].x2 - groups[i].x - dx[i];\n        if (x > 0) dx[i] += x / 2;\n      }\n    }\n\n    // perform vertical centering\n    if (alignRow && get(opt.center, Row) && ncols !== 1) {\n      for (i = 0; i < n; ++i) {\n        b = alignRow === All ? yMax : yExtent[~~(i / ncols)];\n        y = b - boxes[i].y2 - groups[i].y - dy[i];\n        if (y > 0) dy[i] += y / 2;\n      }\n    }\n\n    // position grid relative to anchor\n    for (i = 0; i < n; ++i) {\n      bounds.union(boxes[i].translate(dx[i], dy[i]));\n    }\n    x = get(opt.anchor, X);\n    y = get(opt.anchor, Y);\n    switch (get(opt.anchor, Column)) {\n      case End:\n        x -= bounds.width();\n        break;\n      case Middle:\n        x -= bounds.width() / 2;\n    }\n    switch (get(opt.anchor, Row)) {\n      case End:\n        y -= bounds.height();\n        break;\n      case Middle:\n        y -= bounds.height() / 2;\n    }\n    x = Math.round(x);\n    y = Math.round(y);\n\n    // update mark positions, bounds, dirty\n    bounds.clear();\n    for (i = 0; i < n; ++i) {\n      groups[i].mark.bounds.clear();\n    }\n    for (i = 0; i < n; ++i) {\n      g = groups[i];\n      g.x += dx[i] += x;\n      g.y += dy[i] += y;\n      bounds.union(g.mark.bounds.union(g.bounds.translate(dx[i], dy[i])));\n      if (dirty) view.dirty(g);\n    }\n    return bounds;\n  }\n  function trellisLayout(view, group, opt) {\n    var views = gridLayoutGroups(group),\n      groups = views.marks,\n      bbox = opt.bounds === Flush ? boundFlush : boundFull,\n      off = opt.offset,\n      ncols = opt.columns || groups.length,\n      nrows = ncols <= 0 ? 1 : Math.ceil(groups.length / ncols),\n      cells = nrows * ncols,\n      x,\n      y,\n      x2,\n      y2,\n      anchor,\n      band,\n      offset;\n\n    // -- initial grid layout\n    const bounds = gridLayout(view, groups, opt);\n    if (bounds.empty()) bounds.set(0, 0, 0, 0); // empty grid\n\n    // -- layout grid headers and footers --\n\n    // perform row header layout\n    if (views.rowheaders) {\n      band = get(opt.headerBand, Row, null);\n      x = layoutHeaders(view, views.rowheaders, groups, ncols, nrows, -get(off, 'rowHeader'), min, 0, bbox, 'x1', 0, ncols, 1, band);\n    }\n\n    // perform column header layout\n    if (views.colheaders) {\n      band = get(opt.headerBand, Column, null);\n      y = layoutHeaders(view, views.colheaders, groups, ncols, ncols, -get(off, 'columnHeader'), min, 1, bbox, 'y1', 0, 1, ncols, band);\n    }\n\n    // perform row footer layout\n    if (views.rowfooters) {\n      band = get(opt.footerBand, Row, null);\n      x2 = layoutHeaders(view, views.rowfooters, groups, ncols, nrows, get(off, 'rowFooter'), max, 0, bbox, 'x2', ncols - 1, ncols, 1, band);\n    }\n\n    // perform column footer layout\n    if (views.colfooters) {\n      band = get(opt.footerBand, Column, null);\n      y2 = layoutHeaders(view, views.colfooters, groups, ncols, ncols, get(off, 'columnFooter'), max, 1, bbox, 'y2', cells - ncols, 1, ncols, band);\n    }\n\n    // perform row title layout\n    if (views.rowtitle) {\n      anchor = get(opt.titleAnchor, Row);\n      offset = get(off, 'rowTitle');\n      offset = anchor === End ? x2 + offset : x - offset;\n      band = get(opt.titleBand, Row, 0.5);\n      layoutTitle(view, views.rowtitle, offset, 0, bounds, band);\n    }\n\n    // perform column title layout\n    if (views.coltitle) {\n      anchor = get(opt.titleAnchor, Column);\n      offset = get(off, 'columnTitle');\n      offset = anchor === End ? y2 + offset : y - offset;\n      band = get(opt.titleBand, Column, 0.5);\n      layoutTitle(view, views.coltitle, offset, 1, bounds, band);\n    }\n  }\n  function boundFlush(item, field) {\n    return field === 'x1' ? item.x || 0 : field === 'y1' ? item.y || 0 : field === 'x2' ? (item.x || 0) + (item.width || 0) : field === 'y2' ? (item.y || 0) + (item.height || 0) : undefined;\n  }\n  function boundFull(item, field) {\n    return item.bounds[field];\n  }\n  function layoutHeaders(view, headers, groups, ncols, limit, offset, agg, isX, bound, bf, start, stride, back, band) {\n    var n = groups.length,\n      init = 0,\n      edge = 0,\n      i,\n      j,\n      k,\n      m,\n      b,\n      h,\n      g,\n      x,\n      y;\n\n    // if no groups, early exit and return 0\n    if (!n) return init;\n\n    // compute margin\n    for (i = start; i < n; i += stride) {\n      if (groups[i]) init = agg(init, bound(groups[i], bf));\n    }\n\n    // if no headers, return margin calculation\n    if (!headers.length) return init;\n\n    // check if number of headers exceeds number of rows or columns\n    if (headers.length > limit) {\n      view.warn('Grid headers exceed limit: ' + limit);\n      headers = headers.slice(0, limit);\n    }\n\n    // apply offset\n    init += offset;\n\n    // clear mark bounds for all headers\n    for (j = 0, m = headers.length; j < m; ++j) {\n      view.dirty(headers[j]);\n      headers[j].mark.bounds.clear();\n    }\n\n    // layout each header\n    for (i = start, j = 0, m = headers.length; j < m; ++j, i += stride) {\n      h = headers[j];\n      b = h.mark.bounds;\n\n      // search for nearest group to align to\n      // necessary if table has empty cells\n      for (k = i; k >= 0 && (g = groups[k]) == null; k -= back);\n\n      // assign coordinates and update bounds\n      if (isX) {\n        x = band == null ? g.x : Math.round(g.bounds.x1 + band * g.bounds.width());\n        y = init;\n      } else {\n        x = init;\n        y = band == null ? g.y : Math.round(g.bounds.y1 + band * g.bounds.height());\n      }\n      b.union(h.bounds.translate(x - (h.x || 0), y - (h.y || 0)));\n      h.x = x;\n      h.y = y;\n      view.dirty(h);\n\n      // update current edge of layout bounds\n      edge = agg(edge, b[bf]);\n    }\n    return edge;\n  }\n  function layoutTitle(view, g, offset, isX, bounds, band) {\n    if (!g) return;\n    view.dirty(g);\n\n    // compute title coordinates\n    var x = offset,\n      y = offset;\n    isX ? x = Math.round(bounds.x1 + band * bounds.width()) : y = Math.round(bounds.y1 + band * bounds.height());\n\n    // assign coordinates and update bounds\n    g.bounds.translate(x - (g.x || 0), y - (g.y || 0));\n    g.mark.bounds.clear().union(g.bounds);\n    g.x = x;\n    g.y = y;\n\n    // queue title for redraw\n    view.dirty(g);\n  }\n\n  // utility for looking up legend layout configuration\n  function lookup(config, orient) {\n    const opt = config[orient] || {};\n    return (key, d) => opt[key] != null ? opt[key] : config[key] != null ? config[key] : d;\n  }\n\n  // if legends specify offset directly, use the maximum specified value\n  function offsets(legends, value) {\n    let max = -Infinity;\n    legends.forEach(item => {\n      if (item.offset != null) max = Math.max(max, item.offset);\n    });\n    return max > -Infinity ? max : value;\n  }\n  function legendParams(g, orient, config, xb, yb, w, h) {\n    const _ = lookup(config, orient),\n      offset = offsets(g, _('offset', 0)),\n      anchor = _('anchor', Start),\n      mult = anchor === End ? 1 : anchor === Middle ? 0.5 : 0;\n    const p = {\n      align: Each,\n      bounds: _('bounds', Flush),\n      columns: _('direction') === 'vertical' ? 1 : g.length,\n      padding: _('margin', 8),\n      center: _('center'),\n      nodirty: true\n    };\n    switch (orient) {\n      case Left:\n        p.anchor = {\n          x: Math.floor(xb.x1) - offset,\n          column: End,\n          y: mult * (h || xb.height() + 2 * xb.y1),\n          row: anchor\n        };\n        break;\n      case Right:\n        p.anchor = {\n          x: Math.ceil(xb.x2) + offset,\n          y: mult * (h || xb.height() + 2 * xb.y1),\n          row: anchor\n        };\n        break;\n      case Top:\n        p.anchor = {\n          y: Math.floor(yb.y1) - offset,\n          row: End,\n          x: mult * (w || yb.width() + 2 * yb.x1),\n          column: anchor\n        };\n        break;\n      case Bottom:\n        p.anchor = {\n          y: Math.ceil(yb.y2) + offset,\n          x: mult * (w || yb.width() + 2 * yb.x1),\n          column: anchor\n        };\n        break;\n      case TopLeft:\n        p.anchor = {\n          x: offset,\n          y: offset\n        };\n        break;\n      case TopRight:\n        p.anchor = {\n          x: w - offset,\n          y: offset,\n          column: End\n        };\n        break;\n      case BottomLeft:\n        p.anchor = {\n          x: offset,\n          y: h - offset,\n          row: End\n        };\n        break;\n      case BottomRight:\n        p.anchor = {\n          x: w - offset,\n          y: h - offset,\n          column: End,\n          row: End\n        };\n        break;\n    }\n    return p;\n  }\n  function legendLayout(view, legend) {\n    var item = legend.items[0],\n      datum = item.datum,\n      orient = item.orient,\n      bounds = item.bounds,\n      x = item.x,\n      y = item.y,\n      w,\n      h;\n\n    // cache current bounds for later comparison\n    item._bounds ? item._bounds.clear().union(bounds) : item._bounds = bounds.clone();\n    bounds.clear();\n\n    // adjust legend to accommodate padding and title\n    legendGroupLayout(view, item, item.items[0].items[0]);\n\n    // aggregate bounds to determine size, and include origin\n    bounds = legendBounds(item, bounds);\n    w = 2 * item.padding;\n    h = 2 * item.padding;\n    if (!bounds.empty()) {\n      w = Math.ceil(bounds.width() + w);\n      h = Math.ceil(bounds.height() + h);\n    }\n    if (datum.type === Symbols) {\n      legendEntryLayout(item.items[0].items[0].items[0].items);\n    }\n    if (orient !== None) {\n      item.x = x = 0;\n      item.y = y = 0;\n    }\n    item.width = w;\n    item.height = h;\n    vegaScenegraph.boundStroke(bounds.set(x, y, x + w, y + h), item);\n    item.mark.bounds.clear().union(bounds);\n    return item;\n  }\n  function legendBounds(item, b) {\n    // aggregate item bounds\n    item.items.forEach(_ => b.union(_.bounds));\n\n    // anchor to legend origin\n    b.x1 = item.padding;\n    b.y1 = item.padding;\n    return b;\n  }\n  function legendGroupLayout(view, item, entry) {\n    var pad = item.padding,\n      ex = pad - entry.x,\n      ey = pad - entry.y;\n    if (!item.datum.title) {\n      if (ex || ey) translate(view, entry, ex, ey);\n    } else {\n      var title = item.items[1].items[0],\n        anchor = title.anchor,\n        tpad = item.titlePadding || 0,\n        tx = pad - title.x,\n        ty = pad - title.y;\n      switch (title.orient) {\n        case Left:\n          ex += Math.ceil(title.bounds.width()) + tpad;\n          break;\n        case Right:\n        case Bottom:\n          break;\n        default:\n          ey += title.bounds.height() + tpad;\n      }\n      if (ex || ey) translate(view, entry, ex, ey);\n      switch (title.orient) {\n        case Left:\n          ty += legendTitleOffset(item, entry, title, anchor, 1, 1);\n          break;\n        case Right:\n          tx += legendTitleOffset(item, entry, title, End, 0, 0) + tpad;\n          ty += legendTitleOffset(item, entry, title, anchor, 1, 1);\n          break;\n        case Bottom:\n          tx += legendTitleOffset(item, entry, title, anchor, 0, 0);\n          ty += legendTitleOffset(item, entry, title, End, -1, 0, 1) + tpad;\n          break;\n        default:\n          tx += legendTitleOffset(item, entry, title, anchor, 0, 0);\n      }\n      if (tx || ty) translate(view, title, tx, ty);\n\n      // translate legend if title pushes into negative coordinates\n      if ((tx = Math.round(title.bounds.x1 - pad)) < 0) {\n        translate(view, entry, -tx, 0);\n        translate(view, title, -tx, 0);\n      }\n    }\n  }\n  function legendTitleOffset(item, entry, title, anchor, y, lr, noBar) {\n    const grad = item.datum.type !== 'symbol',\n      vgrad = title.datum.vgrad,\n      e = grad && (lr || !vgrad) && !noBar ? entry.items[0] : entry,\n      s = e.bounds[y ? 'y2' : 'x2'] - item.padding,\n      u = vgrad && lr ? s : 0,\n      v = vgrad && lr ? 0 : s,\n      o = y <= 0 ? 0 : vegaScenegraph.multiLineOffset(title);\n    return Math.round(anchor === Start ? u : anchor === End ? v - o : 0.5 * (s - o));\n  }\n  function translate(view, item, dx, dy) {\n    item.x += dx;\n    item.y += dy;\n    item.bounds.translate(dx, dy);\n    item.mark.bounds.translate(dx, dy);\n    view.dirty(item);\n  }\n  function legendEntryLayout(entries) {\n    // get max widths for each column\n    const widths = entries.reduce((w, g) => {\n      w[g.column] = Math.max(g.bounds.x2 - g.x, w[g.column] || 0);\n      return w;\n    }, {});\n\n    // set dimensions of legend entry groups\n    entries.forEach(g => {\n      g.width = widths[g.column];\n      g.height = g.bounds.y2 - g.y;\n    });\n  }\n\n  function titleLayout(view, mark, width, height, viewBounds) {\n    var group = mark.items[0],\n      frame = group.frame,\n      orient = group.orient,\n      anchor = group.anchor,\n      offset = group.offset,\n      padding = group.padding,\n      title = group.items[0].items[0],\n      subtitle = group.items[1] && group.items[1].items[0],\n      end = orient === Left || orient === Right ? height : width,\n      start = 0,\n      x = 0,\n      y = 0,\n      sx = 0,\n      sy = 0,\n      pos;\n    if (frame !== Group) {\n      orient === Left ? (start = viewBounds.y2, end = viewBounds.y1) : orient === Right ? (start = viewBounds.y1, end = viewBounds.y2) : (start = viewBounds.x1, end = viewBounds.x2);\n    } else if (orient === Left) {\n      start = height, end = 0;\n    }\n    pos = anchor === Start ? start : anchor === End ? end : (start + end) / 2;\n    if (subtitle && subtitle.text) {\n      // position subtitle\n      switch (orient) {\n        case Top:\n        case Bottom:\n          sy = title.bounds.height() + padding;\n          break;\n        case Left:\n          sx = title.bounds.width() + padding;\n          break;\n        case Right:\n          sx = -title.bounds.width() - padding;\n          break;\n      }\n      tempBounds.clear().union(subtitle.bounds);\n      tempBounds.translate(sx - (subtitle.x || 0), sy - (subtitle.y || 0));\n      if (set(subtitle, 'x', sx) | set(subtitle, 'y', sy)) {\n        view.dirty(subtitle);\n        subtitle.bounds.clear().union(tempBounds);\n        subtitle.mark.bounds.clear().union(tempBounds);\n        view.dirty(subtitle);\n      }\n      tempBounds.clear().union(subtitle.bounds);\n    } else {\n      tempBounds.clear();\n    }\n    tempBounds.union(title.bounds);\n\n    // position title group\n    switch (orient) {\n      case Top:\n        x = pos;\n        y = viewBounds.y1 - tempBounds.height() - offset;\n        break;\n      case Left:\n        x = viewBounds.x1 - tempBounds.width() - offset;\n        y = pos;\n        break;\n      case Right:\n        x = viewBounds.x2 + tempBounds.width() + offset;\n        y = pos;\n        break;\n      case Bottom:\n        x = pos;\n        y = viewBounds.y2 + offset;\n        break;\n      default:\n        x = group.x;\n        y = group.y;\n    }\n    if (set(group, 'x', x) | set(group, 'y', y)) {\n      tempBounds.translate(x, y);\n      view.dirty(group);\n      group.bounds.clear().union(tempBounds);\n      mark.bounds.clear().union(tempBounds);\n      view.dirty(group);\n    }\n    return group.bounds;\n  }\n\n  /**\n   * Layout view elements such as axes and legends.\n   * Also performs size adjustments.\n   * @constructor\n   * @param {object} params - The parameters for this operator.\n   * @param {object} params.mark - Scenegraph mark of groups to layout.\n   */\n  function ViewLayout(params) {\n    vegaDataflow.Transform.call(this, null, params);\n  }\n  vegaUtil.inherits(ViewLayout, vegaDataflow.Transform, {\n    transform(_, pulse) {\n      const view = pulse.dataflow;\n      _.mark.items.forEach(group => {\n        if (_.layout) trellisLayout(view, group, _.layout);\n        layoutGroup(view, group, _);\n      });\n      return shouldReflow(_.mark.group) ? pulse.reflow() : pulse;\n    }\n  });\n  function shouldReflow(group) {\n    // We typically should reflow if layout is invoked (#2568), as child items\n    // may have resized and reflow ensures group bounds are re-calculated.\n    // However, legend entries have a special exception to avoid instability.\n    // For example, if a selected legend symbol gains a stroke on hover,\n    // we don't want to re-position subsequent elements in the legend.\n    return group && group.mark.role !== 'legend-entry';\n  }\n  function layoutGroup(view, group, _) {\n    var items = group.items,\n      width = Math.max(0, group.width || 0),\n      height = Math.max(0, group.height || 0),\n      viewBounds = new vegaScenegraph.Bounds().set(0, 0, width, height),\n      xBounds = viewBounds.clone(),\n      yBounds = viewBounds.clone(),\n      legends = [],\n      title,\n      mark,\n      orient,\n      b,\n      i,\n      n;\n\n    // layout axes, gather legends, collect bounds\n    for (i = 0, n = items.length; i < n; ++i) {\n      mark = items[i];\n      switch (mark.role) {\n        case AxisRole:\n          b = isYAxis(mark) ? xBounds : yBounds;\n          b.union(axisLayout(view, mark, width, height));\n          break;\n        case TitleRole:\n          title = mark;\n          break;\n        case LegendRole:\n          legends.push(legendLayout(view, mark));\n          break;\n        case FrameRole:\n        case ScopeRole:\n        case RowHeader:\n        case RowFooter:\n        case RowTitle:\n        case ColHeader:\n        case ColFooter:\n        case ColTitle:\n          xBounds.union(mark.bounds);\n          yBounds.union(mark.bounds);\n          break;\n        default:\n          viewBounds.union(mark.bounds);\n      }\n    }\n\n    // layout legends, adjust viewBounds\n    if (legends.length) {\n      // group legends by orient\n      const l = {};\n      legends.forEach(item => {\n        orient = item.orient || Right;\n        if (orient !== None) (l[orient] || (l[orient] = [])).push(item);\n      });\n\n      // perform grid layout for each orient group\n      for (const orient in l) {\n        const g = l[orient];\n        gridLayout(view, g, legendParams(g, orient, _.legends, xBounds, yBounds, width, height));\n      }\n\n      // update view bounds\n      legends.forEach(item => {\n        const b = item.bounds;\n        if (!b.equals(item._bounds)) {\n          item.bounds = item._bounds;\n          view.dirty(item); // dirty previous location\n          item.bounds = b;\n          view.dirty(item);\n        }\n        if (_.autosize && (_.autosize.type === Fit || _.autosize.type === FitX || _.autosize.type === FitY)) {\n          // For autosize fit, incorporate the orthogonal dimension only.\n          // Legends that overrun the chart area will then be clipped;\n          // otherwise the chart area gets reduced to nothing!\n          switch (item.orient) {\n            case Left:\n            case Right:\n              viewBounds.add(b.x1, 0).add(b.x2, 0);\n              break;\n            case Top:\n            case Bottom:\n              viewBounds.add(0, b.y1).add(0, b.y2);\n          }\n        } else {\n          viewBounds.union(b);\n        }\n      });\n    }\n\n    // combine bounding boxes\n    viewBounds.union(xBounds).union(yBounds);\n\n    // layout title, adjust bounds\n    if (title) {\n      viewBounds.union(titleLayout(view, title, width, height, viewBounds));\n    }\n\n    // override aggregated view bounds if content is clipped\n    if (group.clip) {\n      viewBounds.set(0, 0, group.width || 0, group.height || 0);\n    }\n\n    // perform size adjustment\n    viewSizeLayout(view, group, viewBounds, _);\n  }\n  function viewSizeLayout(view, group, viewBounds, _) {\n    const auto = _.autosize || {},\n      type = auto.type;\n    if (view._autosize < 1 || !type) return;\n    let viewWidth = view._width,\n      viewHeight = view._height,\n      width = Math.max(0, group.width || 0),\n      left = Math.max(0, Math.ceil(-viewBounds.x1)),\n      height = Math.max(0, group.height || 0),\n      top = Math.max(0, Math.ceil(-viewBounds.y1));\n    const right = Math.max(0, Math.ceil(viewBounds.x2 - width)),\n      bottom = Math.max(0, Math.ceil(viewBounds.y2 - height));\n    if (auto.contains === Padding) {\n      const padding = view.padding();\n      viewWidth -= padding.left + padding.right;\n      viewHeight -= padding.top + padding.bottom;\n    }\n    if (type === None) {\n      left = 0;\n      top = 0;\n      width = viewWidth;\n      height = viewHeight;\n    } else if (type === Fit) {\n      width = Math.max(0, viewWidth - left - right);\n      height = Math.max(0, viewHeight - top - bottom);\n    } else if (type === FitX) {\n      width = Math.max(0, viewWidth - left - right);\n      viewHeight = height + top + bottom;\n    } else if (type === FitY) {\n      viewWidth = width + left + right;\n      height = Math.max(0, viewHeight - top - bottom);\n    } else if (type === Pad) {\n      viewWidth = width + left + right;\n      viewHeight = height + top + bottom;\n    }\n    view._resizeView(viewWidth, viewHeight, width, height, [left, top], auto.resize);\n  }\n\n  exports.bound = Bound;\n  exports.identifier = Identifier;\n  exports.mark = Mark;\n  exports.overlap = Overlap;\n  exports.render = Render;\n  exports.viewlayout = ViewLayout;\n\n}));\n\n};"],
"names":["shadow$provide","require","module","exports","global","factory","define","amd","globalThis","self","vega","transforms","vegaDataflow","vegaScenegraph","vegaUtil","Bound","params","Transform","call","boundItem","item","bound","opt","bounds","clear","Identifier","getCounter","view","_signals","COUNTER_NAME","add","Mark","lookup$1","_","g","groups","p","parent","size","get","Object","keys","object","lookup","Overlap","Render","set","property","value","isYAxis","mark","orient","items","Left","Right","axisLayout","axis","width","height","datum","delta","translate","index","grid","ticks","labels","domain","range","offset","position","minExtent","maxExtent","title","indices","titlePadding","dl","multiLineOffset","i","tempBounds","union","Top","x","y","s","Math","max","min","y1","axisTitleLayout","x1","x2","Bottom","y2","boundStroke","dirty","pad","sign","b","auto","v","dy","dx","bboxFlush","Bounds","bboxFull","clone","empty","key","d","isObject","undefined","offsetValue","ceil","gridLayout","nodirty","bbox","Flush","alignCol","align","Column","alignRow","Row","padCol","padding","padRow","ncols","columns","length","nrows","n","xOffset","Array","xExtent","xMax","yOffset","yExtent","yMax","boxes","px","py","c","r","Each","All","m","center","anchor","X","Y","End","Middle","round","boundFlush","field","boundFull","layoutHeaders","headers","limit","agg","isX","bf","start","stride","back","band","edge","init","warn","slice","j","h","k","layoutTitle","config","offsets","legends","Infinity","forEach","legendParams","xb","yb","w","Start","mult","floor","column","row","TopLeft","TopRight","BottomLeft","BottomRight","legendLayout","legend","_bounds","ex","entry","ey","tpad","tx","ty","legendTitleOffset","legendBounds","type","Symbols","legendEntryLayout","None","lr","noBar","vgrad","e","u","o","entries","widths","reduce","titleLayout","viewBounds","group","subtitle","end","sy","sx","frame","Group","pos","text","ViewLayout","shouldReflow","role","layoutGroup","xBounds","yBounds","AxisRole","TitleRole","LegendRole","push","FrameRole","ScopeRole","RowHeader","RowFooter","RowTitle","ColHeader","ColFooter","ColTitle","l","equals","autosize","Fit","FitX","FitY","clip","viewSizeLayout","_autosize","viewWidth","_width","viewHeight","_height","left","top","right","bottom","contains","Padding","Pad","_resizeView","resize","inherits","transform","pulse","dataflow","marktype","Marks","markBounds","rebound","nested","modified","visit","MOD","reflow","changed","REM","ADD","alignsWith","boundClip","modifies","Definition","counter","as","id","t","scenegraph","markdef","context","source","interactive","Init","GroupItem","Item","zdirty","methods","parity","filter","opacity","greedy","sep","a","intersect","hasOverlap","hasBounds","boundTest","scale","tolerance","expand","encloses","reset","method","separation","materialize","SOURCE","test","sort","peek","boundScale","boundTolerance","boundOrient","ALL","fields","layout","views","marks","rowheaders","rowfooters","colheaders","colfooters","rowtitle","coltitle","off","cells","headerBand","footerBand","titleAnchor","titleBand","identifier","overlap","render","viewlayout"]
}
