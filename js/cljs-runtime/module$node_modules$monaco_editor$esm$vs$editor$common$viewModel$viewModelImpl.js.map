{
"version":3,
"file":"module$node_modules$monaco_editor$esm$vs$editor$common$viewModel$viewModelImpl.js",
"lineCount":723,
"mappings":"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",
"sources":["node_modules/monaco-editor/esm/vs/editor/common/viewModel/viewModelImpl.js"],
"sourcesContent":["shadow$provide[\"module$node_modules$monaco_editor$esm$vs$editor$common$viewModel$viewModelImpl\"] = function(require,module,exports) {\nObject.defineProperties(exports, {__esModule:{enumerable:true, value:true}, ViewModel:{enumerable:true, get:function() {\n  return ViewModel;\n}}});\nvar require$_DOT__DOT__SLASH__DOT__DOT__SLASH__DOT__DOT__SLASH_base_SLASH_common_SLASH_arrays_DOT_js = require(\"../../../base/common/arrays.js\");\nvar require$_DOT__DOT__SLASH__DOT__DOT__SLASH__DOT__DOT__SLASH_base_SLASH_common_SLASH_async_DOT_js = require(\"../../../base/common/async.js\");\nvar require$_DOT__DOT__SLASH__DOT__DOT__SLASH__DOT__DOT__SLASH_base_SLASH_common_SLASH_color_DOT_js = require(\"../../../base/common/color.js\");\nvar require$_DOT__DOT__SLASH__DOT__DOT__SLASH__DOT__DOT__SLASH_base_SLASH_common_SLASH_lifecycle_DOT_js = require(\"../../../base/common/lifecycle.js\");\nvar platform = require(\"../../../base/common/platform.js\");\nvar strings = require(\"../../../base/common/strings.js\");\nvar require$_DOT__DOT__SLASH_config_SLASH_editorOptions_DOT_js = require(\"../config/editorOptions.js\");\nvar require$_DOT__DOT__SLASH_cursor_SLASH_cursor_DOT_js = require(\"../cursor/cursor.js\");\nvar require$_DOT__DOT__SLASH_cursorCommon_DOT_js = require(\"../cursorCommon.js\");\nvar require$_DOT__DOT__SLASH_core_SLASH_position_DOT_js = require(\"../core/position.js\");\nvar require$_DOT__DOT__SLASH_core_SLASH_range_DOT_js = require(\"../core/range.js\");\nvar textModelEvents = require(\"../textModelEvents.js\");\nvar require$_DOT__DOT__SLASH_languages_DOT_js = require(\"../languages.js\");\nvar require$_DOT__DOT__SLASH_languages_SLASH_modesRegistry_DOT_js = require(\"../languages/modesRegistry.js\");\nvar require$_DOT__DOT__SLASH_languages_SLASH_textToHtmlTokenizer_DOT_js = require(\"../languages/textToHtmlTokenizer.js\");\nvar viewEvents = require(\"../viewEvents.js\");\nvar require$_DOT__DOT__SLASH_viewLayout_SLASH_viewLayout_DOT_js = require(\"../viewLayout/viewLayout.js\");\nvar require$_DOT__SLASH_minimapTokensColorTracker_DOT_js = require(\"./minimapTokensColorTracker.js\");\nvar require$_DOT__DOT__SLASH_viewModel_DOT_js = require(\"../viewModel.js\");\nvar require$_DOT__SLASH_viewModelDecorations_DOT_js = require(\"./viewModelDecorations.js\");\nvar require$_DOT__DOT__SLASH_viewModelEventDispatcher_DOT_js = require(\"../viewModelEventDispatcher.js\");\nvar require$_DOT__SLASH_viewModelLines_DOT_js = require(\"./viewModelLines.js\");\nconst USE_IDENTITY_LINES_COLLECTION = true;\nclass ViewModel extends require$_DOT__DOT__SLASH__DOT__DOT__SLASH__DOT__DOT__SLASH_base_SLASH_common_SLASH_lifecycle_DOT_js.Disposable {\n  constructor(editorId, configuration, model, domLineBreaksComputerFactory, monospaceLineBreaksComputerFactory, scheduleAtNextAnimationFrame, languageConfigurationService, _themeService, _attachedView) {\n    super();\n    this.languageConfigurationService = languageConfigurationService;\n    this._themeService = _themeService;\n    this._attachedView = _attachedView;\n    this.hiddenAreasModel = new HiddenAreasModel();\n    this.previousHiddenAreas = [];\n    this._editorId = editorId;\n    this._configuration = configuration;\n    this.model = model;\n    this._eventDispatcher = new require$_DOT__DOT__SLASH_viewModelEventDispatcher_DOT_js.ViewModelEventDispatcher();\n    this.onEvent = this._eventDispatcher.onEvent;\n    this.cursorConfig = new require$_DOT__DOT__SLASH_cursorCommon_DOT_js.CursorConfiguration(this.model.getLanguageId(), this.model.getOptions(), this._configuration, this.languageConfigurationService);\n    this._updateConfigurationViewLineCount = this._register(new require$_DOT__DOT__SLASH__DOT__DOT__SLASH__DOT__DOT__SLASH_base_SLASH_common_SLASH_async_DOT_js.RunOnceScheduler(() => this._updateConfigurationViewLineCountNow(), 0));\n    this._hasFocus = false;\n    this._viewportStart = ViewportStart.create(this.model);\n    if (USE_IDENTITY_LINES_COLLECTION && this.model.isTooLargeForTokenization()) {\n      this._lines = new require$_DOT__SLASH_viewModelLines_DOT_js.ViewModelLinesFromModelAsIs(this.model);\n    } else {\n      const options = this._configuration.options;\n      const fontInfo = options.get(50);\n      const wrappingStrategy = options.get(137);\n      const wrappingInfo = options.get(144);\n      const wrappingIndent = options.get(136);\n      const wordBreak = options.get(128);\n      this._lines = new require$_DOT__SLASH_viewModelLines_DOT_js.ViewModelLinesFromProjectedModel(this._editorId, this.model, domLineBreaksComputerFactory, monospaceLineBreaksComputerFactory, fontInfo, this.model.getOptions().tabSize, wrappingStrategy, wrappingInfo.wrappingColumn, wrappingIndent, wordBreak);\n    }\n    this.coordinatesConverter = this._lines.createCoordinatesConverter();\n    this._cursor = this._register(new require$_DOT__DOT__SLASH_cursor_SLASH_cursor_DOT_js.CursorsController(model, this, this.coordinatesConverter, this.cursorConfig));\n    this.viewLayout = this._register(new require$_DOT__DOT__SLASH_viewLayout_SLASH_viewLayout_DOT_js.ViewLayout(this._configuration, this.getLineCount(), scheduleAtNextAnimationFrame));\n    this._register(this.viewLayout.onDidScroll(e => {\n      if (e.scrollTopChanged) {\n        this._handleVisibleLinesChanged();\n      }\n      if (e.scrollTopChanged) {\n        this._viewportStart.invalidate();\n      }\n      this._eventDispatcher.emitSingleViewEvent(new viewEvents.ViewScrollChangedEvent(e));\n      this._eventDispatcher.emitOutgoingEvent(new require$_DOT__DOT__SLASH_viewModelEventDispatcher_DOT_js.ScrollChangedEvent(e.oldScrollWidth, e.oldScrollLeft, e.oldScrollHeight, e.oldScrollTop, e.scrollWidth, e.scrollLeft, e.scrollHeight, e.scrollTop));\n    }));\n    this._register(this.viewLayout.onDidContentSizeChange(e => {\n      this._eventDispatcher.emitOutgoingEvent(e);\n    }));\n    this._decorations = new require$_DOT__SLASH_viewModelDecorations_DOT_js.ViewModelDecorations(this._editorId, this.model, this._configuration, this._lines, this.coordinatesConverter);\n    this._registerModelEvents();\n    this._register(this._configuration.onDidChangeFast(e => {\n      try {\n        const eventsCollector = this._eventDispatcher.beginEmitViewEvents();\n        this._onConfigurationChanged(eventsCollector, e);\n      } finally {\n        this._eventDispatcher.endEmitViewEvents();\n      }\n    }));\n    this._register(require$_DOT__SLASH_minimapTokensColorTracker_DOT_js.MinimapTokensColorTracker.getInstance().onDidChange(() => {\n      this._eventDispatcher.emitSingleViewEvent(new viewEvents.ViewTokensColorsChangedEvent());\n    }));\n    this._register(this._themeService.onDidColorThemeChange(theme => {\n      this._invalidateDecorationsColorCache();\n      this._eventDispatcher.emitSingleViewEvent(new viewEvents.ViewThemeChangedEvent(theme));\n    }));\n    this._updateConfigurationViewLineCountNow();\n  }\n  dispose() {\n    super.dispose();\n    this._decorations.dispose();\n    this._lines.dispose();\n    this._viewportStart.dispose();\n    this._eventDispatcher.dispose();\n  }\n  createLineBreaksComputer() {\n    return this._lines.createLineBreaksComputer();\n  }\n  addViewEventHandler(eventHandler) {\n    this._eventDispatcher.addViewEventHandler(eventHandler);\n  }\n  removeViewEventHandler(eventHandler) {\n    this._eventDispatcher.removeViewEventHandler(eventHandler);\n  }\n  _updateConfigurationViewLineCountNow() {\n    this._configuration.setViewLineCount(this._lines.getViewLineCount());\n  }\n  getModelVisibleRanges() {\n    const linesViewportData = this.viewLayout.getLinesViewportData();\n    const viewVisibleRange = new require$_DOT__DOT__SLASH_core_SLASH_range_DOT_js.Range(linesViewportData.startLineNumber, this.getLineMinColumn(linesViewportData.startLineNumber), linesViewportData.endLineNumber, this.getLineMaxColumn(linesViewportData.endLineNumber));\n    const modelVisibleRanges = this._toModelVisibleRanges(viewVisibleRange);\n    return modelVisibleRanges;\n  }\n  visibleLinesStabilized() {\n    const modelVisibleRanges = this.getModelVisibleRanges();\n    this._attachedView.setVisibleLines(modelVisibleRanges, true);\n  }\n  _handleVisibleLinesChanged() {\n    const modelVisibleRanges = this.getModelVisibleRanges();\n    this._attachedView.setVisibleLines(modelVisibleRanges, false);\n  }\n  setHasFocus(hasFocus) {\n    this._hasFocus = hasFocus;\n    this._cursor.setHasFocus(hasFocus);\n    this._eventDispatcher.emitSingleViewEvent(new viewEvents.ViewFocusChangedEvent(hasFocus));\n    this._eventDispatcher.emitOutgoingEvent(new require$_DOT__DOT__SLASH_viewModelEventDispatcher_DOT_js.FocusChangedEvent(!hasFocus, hasFocus));\n  }\n  onCompositionStart() {\n    this._eventDispatcher.emitSingleViewEvent(new viewEvents.ViewCompositionStartEvent());\n  }\n  onCompositionEnd() {\n    this._eventDispatcher.emitSingleViewEvent(new viewEvents.ViewCompositionEndEvent());\n  }\n  _captureStableViewport() {\n    if (this._viewportStart.isValid && this.viewLayout.getCurrentScrollTop() > 0) {\n      const previousViewportStartViewPosition = new require$_DOT__DOT__SLASH_core_SLASH_position_DOT_js.Position(this._viewportStart.viewLineNumber, this.getLineMinColumn(this._viewportStart.viewLineNumber));\n      const previousViewportStartModelPosition = this.coordinatesConverter.convertViewPositionToModelPosition(previousViewportStartViewPosition);\n      return new StableViewport(previousViewportStartModelPosition, this._viewportStart.startLineDelta);\n    }\n    return new StableViewport(null, 0);\n  }\n  _onConfigurationChanged(eventsCollector, e) {\n    const stableViewport = this._captureStableViewport();\n    const options = this._configuration.options;\n    const fontInfo = options.get(50);\n    const wrappingStrategy = options.get(137);\n    const wrappingInfo = options.get(144);\n    const wrappingIndent = options.get(136);\n    const wordBreak = options.get(128);\n    if (this._lines.setWrappingSettings(fontInfo, wrappingStrategy, wrappingInfo.wrappingColumn, wrappingIndent, wordBreak)) {\n      eventsCollector.emitViewEvent(new viewEvents.ViewFlushedEvent());\n      eventsCollector.emitViewEvent(new viewEvents.ViewLineMappingChangedEvent());\n      eventsCollector.emitViewEvent(new viewEvents.ViewDecorationsChangedEvent(null));\n      this._cursor.onLineMappingChanged(eventsCollector);\n      this._decorations.onLineMappingChanged();\n      this.viewLayout.onFlushed(this.getLineCount());\n      this._updateConfigurationViewLineCount.schedule();\n    }\n    if (e.hasChanged(90)) {\n      this._decorations.reset();\n      eventsCollector.emitViewEvent(new viewEvents.ViewDecorationsChangedEvent(null));\n    }\n    if (e.hasChanged(97)) {\n      this._decorations.reset();\n      eventsCollector.emitViewEvent(new viewEvents.ViewDecorationsChangedEvent(null));\n    }\n    eventsCollector.emitViewEvent(new viewEvents.ViewConfigurationChangedEvent(e));\n    this.viewLayout.onConfigurationChanged(e);\n    stableViewport.recoverViewportStart(this.coordinatesConverter, this.viewLayout);\n    if (require$_DOT__DOT__SLASH_cursorCommon_DOT_js.CursorConfiguration.shouldRecreate(e)) {\n      this.cursorConfig = new require$_DOT__DOT__SLASH_cursorCommon_DOT_js.CursorConfiguration(this.model.getLanguageId(), this.model.getOptions(), this._configuration, this.languageConfigurationService);\n      this._cursor.updateConfiguration(this.cursorConfig);\n    }\n  }\n  _registerModelEvents() {\n    this._register(this.model.onDidChangeContentOrInjectedText(e => {\n      try {\n        const eventsCollector = this._eventDispatcher.beginEmitViewEvents();\n        let hadOtherModelChange = false;\n        let hadModelLineChangeThatChangedLineMapping = false;\n        const changes = e instanceof textModelEvents.InternalModelContentChangeEvent ? e.rawContentChangedEvent.changes : e.changes;\n        const versionId = e instanceof textModelEvents.InternalModelContentChangeEvent ? e.rawContentChangedEvent.versionId : null;\n        const lineBreaksComputer = this._lines.createLineBreaksComputer();\n        for (const change of changes) {\n          switch(change.changeType) {\n            case 4:\n              {\n                for (let lineIdx = 0; lineIdx < change.detail.length; lineIdx++) {\n                  const line = change.detail[lineIdx];\n                  let injectedText = change.injectedTexts[lineIdx];\n                  if (injectedText) {\n                    injectedText = injectedText.filter(element => !element.ownerId || element.ownerId === this._editorId);\n                  }\n                  lineBreaksComputer.addRequest(line, injectedText, null);\n                }\n                break;\n              }\n            case 2:\n              {\n                let injectedText = null;\n                if (change.injectedText) {\n                  injectedText = change.injectedText.filter(element => !element.ownerId || element.ownerId === this._editorId);\n                }\n                lineBreaksComputer.addRequest(change.detail, injectedText, null);\n                break;\n              }\n          }\n        }\n        const lineBreaks = lineBreaksComputer.finalize();\n        const lineBreakQueue = new require$_DOT__DOT__SLASH__DOT__DOT__SLASH__DOT__DOT__SLASH_base_SLASH_common_SLASH_arrays_DOT_js.ArrayQueue(lineBreaks);\n        for (const change of changes) {\n          switch(change.changeType) {\n            case 1:\n              {\n                this._lines.onModelFlushed();\n                eventsCollector.emitViewEvent(new viewEvents.ViewFlushedEvent());\n                this._decorations.reset();\n                this.viewLayout.onFlushed(this.getLineCount());\n                hadOtherModelChange = true;\n                break;\n              }\n            case 3:\n              {\n                const linesDeletedEvent = this._lines.onModelLinesDeleted(versionId, change.fromLineNumber, change.toLineNumber);\n                if (linesDeletedEvent !== null) {\n                  eventsCollector.emitViewEvent(linesDeletedEvent);\n                  this.viewLayout.onLinesDeleted(linesDeletedEvent.fromLineNumber, linesDeletedEvent.toLineNumber);\n                }\n                hadOtherModelChange = true;\n                break;\n              }\n            case 4:\n              {\n                const insertedLineBreaks = lineBreakQueue.takeCount(change.detail.length);\n                const linesInsertedEvent = this._lines.onModelLinesInserted(versionId, change.fromLineNumber, change.toLineNumber, insertedLineBreaks);\n                if (linesInsertedEvent !== null) {\n                  eventsCollector.emitViewEvent(linesInsertedEvent);\n                  this.viewLayout.onLinesInserted(linesInsertedEvent.fromLineNumber, linesInsertedEvent.toLineNumber);\n                }\n                hadOtherModelChange = true;\n                break;\n              }\n            case 2:\n              {\n                const changedLineBreakData = lineBreakQueue.dequeue();\n                const [lineMappingChanged, linesChangedEvent, linesInsertedEvent, linesDeletedEvent] = this._lines.onModelLineChanged(versionId, change.lineNumber, changedLineBreakData);\n                hadModelLineChangeThatChangedLineMapping = lineMappingChanged;\n                if (linesChangedEvent) {\n                  eventsCollector.emitViewEvent(linesChangedEvent);\n                }\n                if (linesInsertedEvent) {\n                  eventsCollector.emitViewEvent(linesInsertedEvent);\n                  this.viewLayout.onLinesInserted(linesInsertedEvent.fromLineNumber, linesInsertedEvent.toLineNumber);\n                }\n                if (linesDeletedEvent) {\n                  eventsCollector.emitViewEvent(linesDeletedEvent);\n                  this.viewLayout.onLinesDeleted(linesDeletedEvent.fromLineNumber, linesDeletedEvent.toLineNumber);\n                }\n                break;\n              }\n            case 5:\n              {\n                break;\n              }\n          }\n        }\n        if (versionId !== null) {\n          this._lines.acceptVersionId(versionId);\n        }\n        this.viewLayout.onHeightMaybeChanged();\n        if (!hadOtherModelChange && hadModelLineChangeThatChangedLineMapping) {\n          eventsCollector.emitViewEvent(new viewEvents.ViewLineMappingChangedEvent());\n          eventsCollector.emitViewEvent(new viewEvents.ViewDecorationsChangedEvent(null));\n          this._cursor.onLineMappingChanged(eventsCollector);\n          this._decorations.onLineMappingChanged();\n        }\n      } finally {\n        this._eventDispatcher.endEmitViewEvents();\n      }\n      const viewportStartWasValid = this._viewportStart.isValid;\n      this._viewportStart.invalidate();\n      this._configuration.setModelLineCount(this.model.getLineCount());\n      this._updateConfigurationViewLineCountNow();\n      if (!this._hasFocus && this.model.getAttachedEditorCount() >= 2 && viewportStartWasValid) {\n        const modelRange = this.model._getTrackedRange(this._viewportStart.modelTrackedRange);\n        if (modelRange) {\n          const viewPosition = this.coordinatesConverter.convertModelPositionToViewPosition(modelRange.getStartPosition());\n          const viewPositionTop = this.viewLayout.getVerticalOffsetForLineNumber(viewPosition.lineNumber);\n          this.viewLayout.setScrollPosition({scrollTop:viewPositionTop + this._viewportStart.startLineDelta}, 1);\n        }\n      }\n      try {\n        const eventsCollector = this._eventDispatcher.beginEmitViewEvents();\n        if (e instanceof textModelEvents.InternalModelContentChangeEvent) {\n          eventsCollector.emitOutgoingEvent(new require$_DOT__DOT__SLASH_viewModelEventDispatcher_DOT_js.ModelContentChangedEvent(e.contentChangedEvent));\n        }\n        this._cursor.onModelContentChanged(eventsCollector, e);\n      } finally {\n        this._eventDispatcher.endEmitViewEvents();\n      }\n      this._handleVisibleLinesChanged();\n    }));\n    this._register(this.model.onDidChangeTokens(e => {\n      const viewRanges = [];\n      for (let j = 0, lenJ = e.ranges.length; j < lenJ; j++) {\n        const modelRange = e.ranges[j];\n        const viewStartLineNumber = this.coordinatesConverter.convertModelPositionToViewPosition(new require$_DOT__DOT__SLASH_core_SLASH_position_DOT_js.Position(modelRange.fromLineNumber, 1)).lineNumber;\n        const viewEndLineNumber = this.coordinatesConverter.convertModelPositionToViewPosition(new require$_DOT__DOT__SLASH_core_SLASH_position_DOT_js.Position(modelRange.toLineNumber, this.model.getLineMaxColumn(modelRange.toLineNumber))).lineNumber;\n        viewRanges[j] = {fromLineNumber:viewStartLineNumber, toLineNumber:viewEndLineNumber};\n      }\n      this._eventDispatcher.emitSingleViewEvent(new viewEvents.ViewTokensChangedEvent(viewRanges));\n      this._eventDispatcher.emitOutgoingEvent(new require$_DOT__DOT__SLASH_viewModelEventDispatcher_DOT_js.ModelTokensChangedEvent(e));\n    }));\n    this._register(this.model.onDidChangeLanguageConfiguration(e => {\n      this._eventDispatcher.emitSingleViewEvent(new viewEvents.ViewLanguageConfigurationEvent());\n      this.cursorConfig = new require$_DOT__DOT__SLASH_cursorCommon_DOT_js.CursorConfiguration(this.model.getLanguageId(), this.model.getOptions(), this._configuration, this.languageConfigurationService);\n      this._cursor.updateConfiguration(this.cursorConfig);\n      this._eventDispatcher.emitOutgoingEvent(new require$_DOT__DOT__SLASH_viewModelEventDispatcher_DOT_js.ModelLanguageConfigurationChangedEvent(e));\n    }));\n    this._register(this.model.onDidChangeLanguage(e => {\n      this.cursorConfig = new require$_DOT__DOT__SLASH_cursorCommon_DOT_js.CursorConfiguration(this.model.getLanguageId(), this.model.getOptions(), this._configuration, this.languageConfigurationService);\n      this._cursor.updateConfiguration(this.cursorConfig);\n      this._eventDispatcher.emitOutgoingEvent(new require$_DOT__DOT__SLASH_viewModelEventDispatcher_DOT_js.ModelLanguageChangedEvent(e));\n    }));\n    this._register(this.model.onDidChangeOptions(e => {\n      if (this._lines.setTabSize(this.model.getOptions().tabSize)) {\n        try {\n          const eventsCollector = this._eventDispatcher.beginEmitViewEvents();\n          eventsCollector.emitViewEvent(new viewEvents.ViewFlushedEvent());\n          eventsCollector.emitViewEvent(new viewEvents.ViewLineMappingChangedEvent());\n          eventsCollector.emitViewEvent(new viewEvents.ViewDecorationsChangedEvent(null));\n          this._cursor.onLineMappingChanged(eventsCollector);\n          this._decorations.onLineMappingChanged();\n          this.viewLayout.onFlushed(this.getLineCount());\n        } finally {\n          this._eventDispatcher.endEmitViewEvents();\n        }\n        this._updateConfigurationViewLineCount.schedule();\n      }\n      this.cursorConfig = new require$_DOT__DOT__SLASH_cursorCommon_DOT_js.CursorConfiguration(this.model.getLanguageId(), this.model.getOptions(), this._configuration, this.languageConfigurationService);\n      this._cursor.updateConfiguration(this.cursorConfig);\n      this._eventDispatcher.emitOutgoingEvent(new require$_DOT__DOT__SLASH_viewModelEventDispatcher_DOT_js.ModelOptionsChangedEvent(e));\n    }));\n    this._register(this.model.onDidChangeDecorations(e => {\n      this._decorations.onModelDecorationsChanged();\n      this._eventDispatcher.emitSingleViewEvent(new viewEvents.ViewDecorationsChangedEvent(e));\n      this._eventDispatcher.emitOutgoingEvent(new require$_DOT__DOT__SLASH_viewModelEventDispatcher_DOT_js.ModelDecorationsChangedEvent(e));\n    }));\n  }\n  setHiddenAreas(ranges, source) {\n    var _a;\n    this.hiddenAreasModel.setHiddenAreas(source, ranges);\n    const mergedRanges = this.hiddenAreasModel.getMergedRanges();\n    if (mergedRanges === this.previousHiddenAreas) {\n      return;\n    }\n    this.previousHiddenAreas = mergedRanges;\n    const stableViewport = this._captureStableViewport();\n    let lineMappingChanged = false;\n    try {\n      const eventsCollector = this._eventDispatcher.beginEmitViewEvents();\n      lineMappingChanged = this._lines.setHiddenAreas(mergedRanges);\n      if (lineMappingChanged) {\n        eventsCollector.emitViewEvent(new viewEvents.ViewFlushedEvent());\n        eventsCollector.emitViewEvent(new viewEvents.ViewLineMappingChangedEvent());\n        eventsCollector.emitViewEvent(new viewEvents.ViewDecorationsChangedEvent(null));\n        this._cursor.onLineMappingChanged(eventsCollector);\n        this._decorations.onLineMappingChanged();\n        this.viewLayout.onFlushed(this.getLineCount());\n        this.viewLayout.onHeightMaybeChanged();\n      }\n      const firstModelLineInViewPort = (_a = stableViewport.viewportStartModelPosition) === null || _a === void 0 ? void 0 : _a.lineNumber;\n      const firstModelLineIsHidden = firstModelLineInViewPort && mergedRanges.some(range => range.startLineNumber <= firstModelLineInViewPort && firstModelLineInViewPort <= range.endLineNumber);\n      if (!firstModelLineIsHidden) {\n        stableViewport.recoverViewportStart(this.coordinatesConverter, this.viewLayout);\n      }\n    } finally {\n      this._eventDispatcher.endEmitViewEvents();\n    }\n    this._updateConfigurationViewLineCount.schedule();\n    if (lineMappingChanged) {\n      this._eventDispatcher.emitOutgoingEvent(new require$_DOT__DOT__SLASH_viewModelEventDispatcher_DOT_js.HiddenAreasChangedEvent());\n    }\n  }\n  getVisibleRangesPlusViewportAboveBelow() {\n    const layoutInfo = this._configuration.options.get(143);\n    const lineHeight = this._configuration.options.get(66);\n    const linesAround = Math.max(20, Math.round(layoutInfo.height / lineHeight));\n    const partialData = this.viewLayout.getLinesViewportData();\n    const startViewLineNumber = Math.max(1, partialData.completelyVisibleStartLineNumber - linesAround);\n    const endViewLineNumber = Math.min(this.getLineCount(), partialData.completelyVisibleEndLineNumber + linesAround);\n    return this._toModelVisibleRanges(new require$_DOT__DOT__SLASH_core_SLASH_range_DOT_js.Range(startViewLineNumber, this.getLineMinColumn(startViewLineNumber), endViewLineNumber, this.getLineMaxColumn(endViewLineNumber)));\n  }\n  getVisibleRanges() {\n    const visibleViewRange = this.getCompletelyVisibleViewRange();\n    return this._toModelVisibleRanges(visibleViewRange);\n  }\n  getHiddenAreas() {\n    return this._lines.getHiddenAreas();\n  }\n  _toModelVisibleRanges(visibleViewRange) {\n    const visibleRange = this.coordinatesConverter.convertViewRangeToModelRange(visibleViewRange);\n    const hiddenAreas = this._lines.getHiddenAreas();\n    if (hiddenAreas.length === 0) {\n      return [visibleRange];\n    }\n    const result = [];\n    let resultLen = 0;\n    let startLineNumber = visibleRange.startLineNumber;\n    let startColumn = visibleRange.startColumn;\n    const endLineNumber = visibleRange.endLineNumber;\n    const endColumn = visibleRange.endColumn;\n    for (let i = 0, len = hiddenAreas.length; i < len; i++) {\n      const hiddenStartLineNumber = hiddenAreas[i].startLineNumber;\n      const hiddenEndLineNumber = hiddenAreas[i].endLineNumber;\n      if (hiddenEndLineNumber < startLineNumber) {\n        continue;\n      }\n      if (hiddenStartLineNumber > endLineNumber) {\n        continue;\n      }\n      if (startLineNumber < hiddenStartLineNumber) {\n        result[resultLen++] = new require$_DOT__DOT__SLASH_core_SLASH_range_DOT_js.Range(startLineNumber, startColumn, hiddenStartLineNumber - 1, this.model.getLineMaxColumn(hiddenStartLineNumber - 1));\n      }\n      startLineNumber = hiddenEndLineNumber + 1;\n      startColumn = 1;\n    }\n    if (startLineNumber < endLineNumber || startLineNumber === endLineNumber && startColumn < endColumn) {\n      result[resultLen++] = new require$_DOT__DOT__SLASH_core_SLASH_range_DOT_js.Range(startLineNumber, startColumn, endLineNumber, endColumn);\n    }\n    return result;\n  }\n  getCompletelyVisibleViewRange() {\n    const partialData = this.viewLayout.getLinesViewportData();\n    const startViewLineNumber = partialData.completelyVisibleStartLineNumber;\n    const endViewLineNumber = partialData.completelyVisibleEndLineNumber;\n    return new require$_DOT__DOT__SLASH_core_SLASH_range_DOT_js.Range(startViewLineNumber, this.getLineMinColumn(startViewLineNumber), endViewLineNumber, this.getLineMaxColumn(endViewLineNumber));\n  }\n  getCompletelyVisibleViewRangeAtScrollTop(scrollTop) {\n    const partialData = this.viewLayout.getLinesViewportDataAtScrollTop(scrollTop);\n    const startViewLineNumber = partialData.completelyVisibleStartLineNumber;\n    const endViewLineNumber = partialData.completelyVisibleEndLineNumber;\n    return new require$_DOT__DOT__SLASH_core_SLASH_range_DOT_js.Range(startViewLineNumber, this.getLineMinColumn(startViewLineNumber), endViewLineNumber, this.getLineMaxColumn(endViewLineNumber));\n  }\n  saveState() {\n    const compatViewState = this.viewLayout.saveState();\n    const scrollTop = compatViewState.scrollTop;\n    const firstViewLineNumber = this.viewLayout.getLineNumberAtVerticalOffset(scrollTop);\n    const firstPosition = this.coordinatesConverter.convertViewPositionToModelPosition(new require$_DOT__DOT__SLASH_core_SLASH_position_DOT_js.Position(firstViewLineNumber, this.getLineMinColumn(firstViewLineNumber)));\n    const firstPositionDeltaTop = this.viewLayout.getVerticalOffsetForLineNumber(firstViewLineNumber) - scrollTop;\n    return {scrollLeft:compatViewState.scrollLeft, firstPosition:firstPosition, firstPositionDeltaTop:firstPositionDeltaTop};\n  }\n  reduceRestoreState(state) {\n    if (typeof state.firstPosition === \"undefined\") {\n      return this._reduceRestoreStateCompatibility(state);\n    }\n    const modelPosition = this.model.validatePosition(state.firstPosition);\n    const viewPosition = this.coordinatesConverter.convertModelPositionToViewPosition(modelPosition);\n    const scrollTop = this.viewLayout.getVerticalOffsetForLineNumber(viewPosition.lineNumber) - state.firstPositionDeltaTop;\n    return {scrollLeft:state.scrollLeft, scrollTop:scrollTop};\n  }\n  _reduceRestoreStateCompatibility(state) {\n    return {scrollLeft:state.scrollLeft, scrollTop:state.scrollTopWithoutViewZones};\n  }\n  getTabSize() {\n    return this.model.getOptions().tabSize;\n  }\n  getLineCount() {\n    return this._lines.getViewLineCount();\n  }\n  setViewport(startLineNumber, endLineNumber, centeredLineNumber) {\n    this._viewportStart.update(this, startLineNumber);\n  }\n  getActiveIndentGuide(lineNumber, minLineNumber, maxLineNumber) {\n    return this._lines.getActiveIndentGuide(lineNumber, minLineNumber, maxLineNumber);\n  }\n  getLinesIndentGuides(startLineNumber, endLineNumber) {\n    return this._lines.getViewLinesIndentGuides(startLineNumber, endLineNumber);\n  }\n  getBracketGuidesInRangeByLine(startLineNumber, endLineNumber, activePosition, options) {\n    return this._lines.getViewLinesBracketGuides(startLineNumber, endLineNumber, activePosition, options);\n  }\n  getLineContent(lineNumber) {\n    return this._lines.getViewLineContent(lineNumber);\n  }\n  getLineLength(lineNumber) {\n    return this._lines.getViewLineLength(lineNumber);\n  }\n  getLineMinColumn(lineNumber) {\n    return this._lines.getViewLineMinColumn(lineNumber);\n  }\n  getLineMaxColumn(lineNumber) {\n    return this._lines.getViewLineMaxColumn(lineNumber);\n  }\n  getLineFirstNonWhitespaceColumn(lineNumber) {\n    const result = strings.firstNonWhitespaceIndex(this.getLineContent(lineNumber));\n    if (result === -1) {\n      return 0;\n    }\n    return result + 1;\n  }\n  getLineLastNonWhitespaceColumn(lineNumber) {\n    const result = strings.lastNonWhitespaceIndex(this.getLineContent(lineNumber));\n    if (result === -1) {\n      return 0;\n    }\n    return result + 2;\n  }\n  getMinimapDecorationsInRange(range) {\n    return this._decorations.getMinimapDecorationsInRange(range);\n  }\n  getDecorationsInViewport(visibleRange) {\n    return this._decorations.getDecorationsViewportData(visibleRange).decorations;\n  }\n  getInjectedTextAt(viewPosition) {\n    return this._lines.getInjectedTextAt(viewPosition);\n  }\n  getViewportViewLineRenderingData(visibleRange, lineNumber) {\n    const allInlineDecorations = this._decorations.getDecorationsViewportData(visibleRange).inlineDecorations;\n    const inlineDecorations = allInlineDecorations[lineNumber - visibleRange.startLineNumber];\n    return this._getViewLineRenderingData(lineNumber, inlineDecorations);\n  }\n  getViewLineRenderingData(lineNumber) {\n    const inlineDecorations = this._decorations.getInlineDecorationsOnLine(lineNumber);\n    return this._getViewLineRenderingData(lineNumber, inlineDecorations);\n  }\n  _getViewLineRenderingData(lineNumber, inlineDecorations) {\n    const mightContainRTL = this.model.mightContainRTL();\n    const mightContainNonBasicASCII = this.model.mightContainNonBasicASCII();\n    const tabSize = this.getTabSize();\n    const lineData = this._lines.getViewLineData(lineNumber);\n    if (lineData.inlineDecorations) {\n      inlineDecorations = [...inlineDecorations, ...lineData.inlineDecorations.map(d => d.toInlineDecoration(lineNumber))];\n    }\n    return new require$_DOT__DOT__SLASH_viewModel_DOT_js.ViewLineRenderingData(lineData.minColumn, lineData.maxColumn, lineData.content, lineData.continuesWithWrappedLine, mightContainRTL, mightContainNonBasicASCII, lineData.tokens, inlineDecorations, tabSize, lineData.startVisibleColumn);\n  }\n  getViewLineData(lineNumber) {\n    return this._lines.getViewLineData(lineNumber);\n  }\n  getMinimapLinesRenderingData(startLineNumber, endLineNumber, needed) {\n    const result = this._lines.getViewLinesData(startLineNumber, endLineNumber, needed);\n    return new require$_DOT__DOT__SLASH_viewModel_DOT_js.MinimapLinesRenderingData(this.getTabSize(), result);\n  }\n  getAllOverviewRulerDecorations(theme) {\n    const decorations = this.model.getOverviewRulerDecorations(this._editorId, (0,require$_DOT__DOT__SLASH_config_SLASH_editorOptions_DOT_js.filterValidationDecorations)(this._configuration.options));\n    const result = new OverviewRulerDecorations();\n    for (const decoration of decorations) {\n      const decorationOptions = decoration.options;\n      const opts = decorationOptions.overviewRuler;\n      if (!opts) {\n        continue;\n      }\n      const lane = opts.position;\n      if (lane === 0) {\n        continue;\n      }\n      const color = opts.getColor(theme.value);\n      const viewStartLineNumber = this.coordinatesConverter.getViewLineNumberOfModelPosition(decoration.range.startLineNumber, decoration.range.startColumn);\n      const viewEndLineNumber = this.coordinatesConverter.getViewLineNumberOfModelPosition(decoration.range.endLineNumber, decoration.range.endColumn);\n      result.accept(color, decorationOptions.zIndex, viewStartLineNumber, viewEndLineNumber, lane);\n    }\n    return result.asArray;\n  }\n  _invalidateDecorationsColorCache() {\n    const decorations = this.model.getOverviewRulerDecorations();\n    for (const decoration of decorations) {\n      const opts1 = decoration.options.overviewRuler;\n      opts1 === null || opts1 === void 0 ? void 0 : opts1.invalidateCachedColor();\n      const opts2 = decoration.options.minimap;\n      opts2 === null || opts2 === void 0 ? void 0 : opts2.invalidateCachedColor();\n    }\n  }\n  getValueInRange(range, eol) {\n    const modelRange = this.coordinatesConverter.convertViewRangeToModelRange(range);\n    return this.model.getValueInRange(modelRange, eol);\n  }\n  getValueLengthInRange(range, eol) {\n    const modelRange = this.coordinatesConverter.convertViewRangeToModelRange(range);\n    return this.model.getValueLengthInRange(modelRange, eol);\n  }\n  modifyPosition(position, offset) {\n    const modelPosition = this.coordinatesConverter.convertViewPositionToModelPosition(position);\n    return this.model.modifyPosition(modelPosition, offset);\n  }\n  deduceModelPositionRelativeToViewPosition(viewAnchorPosition, deltaOffset, lineFeedCnt) {\n    const modelAnchor = this.coordinatesConverter.convertViewPositionToModelPosition(viewAnchorPosition);\n    if (this.model.getEOL().length === 2) {\n      if (deltaOffset < 0) {\n        deltaOffset -= lineFeedCnt;\n      } else {\n        deltaOffset += lineFeedCnt;\n      }\n    }\n    const modelAnchorOffset = this.model.getOffsetAt(modelAnchor);\n    const resultOffset = modelAnchorOffset + deltaOffset;\n    return this.model.getPositionAt(resultOffset);\n  }\n  getPlainTextToCopy(modelRanges, emptySelectionClipboard, forceCRLF) {\n    const newLineCharacter = forceCRLF ? \"\\r\\n\" : this.model.getEOL();\n    modelRanges = modelRanges.slice(0);\n    modelRanges.sort(require$_DOT__DOT__SLASH_core_SLASH_range_DOT_js.Range.compareRangesUsingStarts);\n    let hasEmptyRange = false;\n    let hasNonEmptyRange = false;\n    for (const range of modelRanges) {\n      if (range.isEmpty()) {\n        hasEmptyRange = true;\n      } else {\n        hasNonEmptyRange = true;\n      }\n    }\n    if (!hasNonEmptyRange) {\n      if (!emptySelectionClipboard) {\n        return \"\";\n      }\n      const modelLineNumbers = modelRanges.map(r => r.startLineNumber);\n      let result = \"\";\n      for (let i = 0; i < modelLineNumbers.length; i++) {\n        if (i > 0 && modelLineNumbers[i - 1] === modelLineNumbers[i]) {\n          continue;\n        }\n        result += this.model.getLineContent(modelLineNumbers[i]) + newLineCharacter;\n      }\n      return result;\n    }\n    if (hasEmptyRange && emptySelectionClipboard) {\n      const result = [];\n      let prevModelLineNumber = 0;\n      for (const modelRange of modelRanges) {\n        const modelLineNumber = modelRange.startLineNumber;\n        if (modelRange.isEmpty()) {\n          if (modelLineNumber !== prevModelLineNumber) {\n            result.push(this.model.getLineContent(modelLineNumber));\n          }\n        } else {\n          result.push(this.model.getValueInRange(modelRange, forceCRLF ? 2 : 0));\n        }\n        prevModelLineNumber = modelLineNumber;\n      }\n      return result.length === 1 ? result[0] : result;\n    }\n    const result = [];\n    for (const modelRange of modelRanges) {\n      if (!modelRange.isEmpty()) {\n        result.push(this.model.getValueInRange(modelRange, forceCRLF ? 2 : 0));\n      }\n    }\n    return result.length === 1 ? result[0] : result;\n  }\n  getRichTextToCopy(modelRanges, emptySelectionClipboard) {\n    const languageId = this.model.getLanguageId();\n    if (languageId === require$_DOT__DOT__SLASH_languages_SLASH_modesRegistry_DOT_js.PLAINTEXT_LANGUAGE_ID) {\n      return null;\n    }\n    if (modelRanges.length !== 1) {\n      return null;\n    }\n    let range = modelRanges[0];\n    if (range.isEmpty()) {\n      if (!emptySelectionClipboard) {\n        return null;\n      }\n      const lineNumber = range.startLineNumber;\n      range = new require$_DOT__DOT__SLASH_core_SLASH_range_DOT_js.Range(lineNumber, this.model.getLineMinColumn(lineNumber), lineNumber, this.model.getLineMaxColumn(lineNumber));\n    }\n    const fontInfo = this._configuration.options.get(50);\n    const colorMap = this._getColorMap();\n    const hasBadChars = /[:;\\\\\\/<>]/.test(fontInfo.fontFamily);\n    const useDefaultFontFamily = hasBadChars || fontInfo.fontFamily === require$_DOT__DOT__SLASH_config_SLASH_editorOptions_DOT_js.EDITOR_FONT_DEFAULTS.fontFamily;\n    let fontFamily;\n    if (useDefaultFontFamily) {\n      fontFamily = require$_DOT__DOT__SLASH_config_SLASH_editorOptions_DOT_js.EDITOR_FONT_DEFAULTS.fontFamily;\n    } else {\n      fontFamily = fontInfo.fontFamily;\n      fontFamily = fontFamily.replace(/\"/g, \"'\");\n      const hasQuotesOrIsList = /[,']/.test(fontFamily);\n      if (!hasQuotesOrIsList) {\n        const needsQuotes = /[+ ]/.test(fontFamily);\n        if (needsQuotes) {\n          fontFamily = `'${fontFamily}'`;\n        }\n      }\n      fontFamily = `${fontFamily}, ${require$_DOT__DOT__SLASH_config_SLASH_editorOptions_DOT_js.EDITOR_FONT_DEFAULTS.fontFamily}`;\n    }\n    return {mode:languageId, html:`<div style=\"` + `color: ${colorMap[1]};` + `background-color: ${colorMap[2]};` + `font-family: ${fontFamily};` + `font-weight: ${fontInfo.fontWeight};` + `font-size: ${fontInfo.fontSize}px;` + `line-height: ${fontInfo.lineHeight}px;` + `white-space: pre;` + `\">` + this._getHTMLToCopy(range, colorMap) + \"\\x3c/div\\x3e\"};\n  }\n  _getHTMLToCopy(modelRange, colorMap) {\n    const startLineNumber = modelRange.startLineNumber;\n    const startColumn = modelRange.startColumn;\n    const endLineNumber = modelRange.endLineNumber;\n    const endColumn = modelRange.endColumn;\n    const tabSize = this.getTabSize();\n    let result = \"\";\n    for (let lineNumber = startLineNumber; lineNumber <= endLineNumber; lineNumber++) {\n      const lineTokens = this.model.tokenization.getLineTokens(lineNumber);\n      const lineContent = lineTokens.getLineContent();\n      const startOffset = lineNumber === startLineNumber ? startColumn - 1 : 0;\n      const endOffset = lineNumber === endLineNumber ? endColumn - 1 : lineContent.length;\n      if (lineContent === \"\") {\n        result += \"\\x3cbr\\x3e\";\n      } else {\n        result += (0,require$_DOT__DOT__SLASH_languages_SLASH_textToHtmlTokenizer_DOT_js.tokenizeLineToHTML)(lineContent, lineTokens.inflate(), colorMap, startOffset, endOffset, tabSize, platform.isWindows);\n      }\n    }\n    return result;\n  }\n  _getColorMap() {\n    const colorMap = require$_DOT__DOT__SLASH_languages_DOT_js.TokenizationRegistry.getColorMap();\n    const result = [\"#000000\"];\n    if (colorMap) {\n      for (let i = 1, len = colorMap.length; i < len; i++) {\n        result[i] = require$_DOT__DOT__SLASH__DOT__DOT__SLASH__DOT__DOT__SLASH_base_SLASH_common_SLASH_color_DOT_js.Color.Format.CSS.formatHex(colorMap[i]);\n      }\n    }\n    return result;\n  }\n  getPrimaryCursorState() {\n    return this._cursor.getPrimaryCursorState();\n  }\n  getLastAddedCursorIndex() {\n    return this._cursor.getLastAddedCursorIndex();\n  }\n  getCursorStates() {\n    return this._cursor.getCursorStates();\n  }\n  setCursorStates(source, reason, states) {\n    return this._withViewEventsCollector(eventsCollector => this._cursor.setStates(eventsCollector, source, reason, states));\n  }\n  getCursorColumnSelectData() {\n    return this._cursor.getCursorColumnSelectData();\n  }\n  getCursorAutoClosedCharacters() {\n    return this._cursor.getAutoClosedCharacters();\n  }\n  setCursorColumnSelectData(columnSelectData) {\n    this._cursor.setCursorColumnSelectData(columnSelectData);\n  }\n  getPrevEditOperationType() {\n    return this._cursor.getPrevEditOperationType();\n  }\n  setPrevEditOperationType(type) {\n    this._cursor.setPrevEditOperationType(type);\n  }\n  getSelection() {\n    return this._cursor.getSelection();\n  }\n  getSelections() {\n    return this._cursor.getSelections();\n  }\n  getPosition() {\n    return this._cursor.getPrimaryCursorState().modelState.position;\n  }\n  setSelections(source, selections, reason = 0) {\n    this._withViewEventsCollector(eventsCollector => this._cursor.setSelections(eventsCollector, source, selections, reason));\n  }\n  saveCursorState() {\n    return this._cursor.saveState();\n  }\n  restoreCursorState(states) {\n    this._withViewEventsCollector(eventsCollector => this._cursor.restoreState(eventsCollector, states));\n  }\n  _executeCursorEdit(callback) {\n    if (this._cursor.context.cursorConfig.readOnly) {\n      this._eventDispatcher.emitOutgoingEvent(new require$_DOT__DOT__SLASH_viewModelEventDispatcher_DOT_js.ReadOnlyEditAttemptEvent());\n      return;\n    }\n    this._withViewEventsCollector(callback);\n  }\n  executeEdits(source, edits, cursorStateComputer) {\n    this._executeCursorEdit(eventsCollector => this._cursor.executeEdits(eventsCollector, source, edits, cursorStateComputer));\n  }\n  startComposition() {\n    this._executeCursorEdit(eventsCollector => this._cursor.startComposition(eventsCollector));\n  }\n  endComposition(source) {\n    this._executeCursorEdit(eventsCollector => this._cursor.endComposition(eventsCollector, source));\n  }\n  type(text, source) {\n    this._executeCursorEdit(eventsCollector => this._cursor.type(eventsCollector, text, source));\n  }\n  compositionType(text, replacePrevCharCnt, replaceNextCharCnt, positionDelta, source) {\n    this._executeCursorEdit(eventsCollector => this._cursor.compositionType(eventsCollector, text, replacePrevCharCnt, replaceNextCharCnt, positionDelta, source));\n  }\n  paste(text, pasteOnNewLine, multicursorText, source) {\n    this._executeCursorEdit(eventsCollector => this._cursor.paste(eventsCollector, text, pasteOnNewLine, multicursorText, source));\n  }\n  cut(source) {\n    this._executeCursorEdit(eventsCollector => this._cursor.cut(eventsCollector, source));\n  }\n  executeCommand(command, source) {\n    this._executeCursorEdit(eventsCollector => this._cursor.executeCommand(eventsCollector, command, source));\n  }\n  executeCommands(commands, source) {\n    this._executeCursorEdit(eventsCollector => this._cursor.executeCommands(eventsCollector, commands, source));\n  }\n  revealPrimaryCursor(source, revealHorizontal, minimalReveal = false) {\n    this._withViewEventsCollector(eventsCollector => this._cursor.revealPrimary(eventsCollector, source, minimalReveal, 0, revealHorizontal, 0));\n  }\n  revealTopMostCursor(source) {\n    const viewPosition = this._cursor.getTopMostViewPosition();\n    const viewRange = new require$_DOT__DOT__SLASH_core_SLASH_range_DOT_js.Range(viewPosition.lineNumber, viewPosition.column, viewPosition.lineNumber, viewPosition.column);\n    this._withViewEventsCollector(eventsCollector => eventsCollector.emitViewEvent(new viewEvents.ViewRevealRangeRequestEvent(source, false, viewRange, null, 0, true, 0)));\n  }\n  revealBottomMostCursor(source) {\n    const viewPosition = this._cursor.getBottomMostViewPosition();\n    const viewRange = new require$_DOT__DOT__SLASH_core_SLASH_range_DOT_js.Range(viewPosition.lineNumber, viewPosition.column, viewPosition.lineNumber, viewPosition.column);\n    this._withViewEventsCollector(eventsCollector => eventsCollector.emitViewEvent(new viewEvents.ViewRevealRangeRequestEvent(source, false, viewRange, null, 0, true, 0)));\n  }\n  revealRange(source, revealHorizontal, viewRange, verticalType, scrollType) {\n    this._withViewEventsCollector(eventsCollector => eventsCollector.emitViewEvent(new viewEvents.ViewRevealRangeRequestEvent(source, false, viewRange, null, verticalType, revealHorizontal, scrollType)));\n  }\n  changeWhitespace(callback) {\n    const hadAChange = this.viewLayout.changeWhitespace(callback);\n    if (hadAChange) {\n      this._eventDispatcher.emitSingleViewEvent(new viewEvents.ViewZonesChangedEvent());\n      this._eventDispatcher.emitOutgoingEvent(new require$_DOT__DOT__SLASH_viewModelEventDispatcher_DOT_js.ViewZonesChangedEvent());\n    }\n  }\n  _withViewEventsCollector(callback) {\n    try {\n      const eventsCollector = this._eventDispatcher.beginEmitViewEvents();\n      return callback(eventsCollector);\n    } finally {\n      this._eventDispatcher.endEmitViewEvents();\n    }\n  }\n  normalizePosition(position, affinity) {\n    return this._lines.normalizePosition(position, affinity);\n  }\n  getLineIndentColumn(lineNumber) {\n    return this._lines.getLineIndentColumn(lineNumber);\n  }\n}\nclass ViewportStart {\n  static create(model) {\n    const viewportStartLineTrackedRange = model._setTrackedRange(null, new require$_DOT__DOT__SLASH_core_SLASH_range_DOT_js.Range(1, 1, 1, 1), 1);\n    return new ViewportStart(model, 1, false, viewportStartLineTrackedRange, 0);\n  }\n  get viewLineNumber() {\n    return this._viewLineNumber;\n  }\n  get isValid() {\n    return this._isValid;\n  }\n  get modelTrackedRange() {\n    return this._modelTrackedRange;\n  }\n  get startLineDelta() {\n    return this._startLineDelta;\n  }\n  constructor(_model, _viewLineNumber, _isValid, _modelTrackedRange, _startLineDelta) {\n    this._model = _model;\n    this._viewLineNumber = _viewLineNumber;\n    this._isValid = _isValid;\n    this._modelTrackedRange = _modelTrackedRange;\n    this._startLineDelta = _startLineDelta;\n  }\n  dispose() {\n    this._model._setTrackedRange(this._modelTrackedRange, null, 1);\n  }\n  update(viewModel, startLineNumber) {\n    const position = viewModel.coordinatesConverter.convertViewPositionToModelPosition(new require$_DOT__DOT__SLASH_core_SLASH_position_DOT_js.Position(startLineNumber, viewModel.getLineMinColumn(startLineNumber)));\n    const viewportStartLineTrackedRange = viewModel.model._setTrackedRange(this._modelTrackedRange, new require$_DOT__DOT__SLASH_core_SLASH_range_DOT_js.Range(position.lineNumber, position.column, position.lineNumber, position.column), 1);\n    const viewportStartLineTop = viewModel.viewLayout.getVerticalOffsetForLineNumber(startLineNumber);\n    const scrollTop = viewModel.viewLayout.getCurrentScrollTop();\n    this._viewLineNumber = startLineNumber;\n    this._isValid = true;\n    this._modelTrackedRange = viewportStartLineTrackedRange;\n    this._startLineDelta = scrollTop - viewportStartLineTop;\n  }\n  invalidate() {\n    this._isValid = false;\n  }\n}\nclass OverviewRulerDecorations {\n  constructor() {\n    this._asMap = Object.create(null);\n    this.asArray = [];\n  }\n  accept(color, zIndex, startLineNumber, endLineNumber, lane) {\n    const prevGroup = this._asMap[color];\n    if (prevGroup) {\n      const prevData = prevGroup.data;\n      const prevLane = prevData[prevData.length - 3];\n      const prevEndLineNumber = prevData[prevData.length - 1];\n      if (prevLane === lane && prevEndLineNumber + 1 >= startLineNumber) {\n        if (endLineNumber > prevEndLineNumber) {\n          prevData[prevData.length - 1] = endLineNumber;\n        }\n        return;\n      }\n      prevData.push(lane, startLineNumber, endLineNumber);\n    } else {\n      const group = new require$_DOT__DOT__SLASH_viewModel_DOT_js.OverviewRulerDecorationsGroup(color, zIndex, [lane, startLineNumber, endLineNumber]);\n      this._asMap[color] = group;\n      this.asArray.push(group);\n    }\n  }\n}\nclass HiddenAreasModel {\n  constructor() {\n    this.hiddenAreas = new Map();\n    this.shouldRecompute = false;\n    this.ranges = [];\n  }\n  setHiddenAreas(source, ranges) {\n    const existing = this.hiddenAreas.get(source);\n    if (existing && rangeArraysEqual(existing, ranges)) {\n      return;\n    }\n    this.hiddenAreas.set(source, ranges);\n    this.shouldRecompute = true;\n  }\n  getMergedRanges() {\n    if (!this.shouldRecompute) {\n      return this.ranges;\n    }\n    this.shouldRecompute = false;\n    const newRanges = Array.from(this.hiddenAreas.values()).reduce((r, hiddenAreas) => mergeLineRangeArray(r, hiddenAreas), []);\n    if (rangeArraysEqual(this.ranges, newRanges)) {\n      return this.ranges;\n    }\n    this.ranges = newRanges;\n    return this.ranges;\n  }\n}\nfunction mergeLineRangeArray(arr1, arr2) {\n  const result = [];\n  let i = 0;\n  let j = 0;\n  while (i < arr1.length && j < arr2.length) {\n    const item1 = arr1[i];\n    const item2 = arr2[j];\n    if (item1.endLineNumber < item2.startLineNumber - 1) {\n      result.push(arr1[i++]);\n    } else if (item2.endLineNumber < item1.startLineNumber - 1) {\n      result.push(arr2[j++]);\n    } else {\n      const startLineNumber = Math.min(item1.startLineNumber, item2.startLineNumber);\n      const endLineNumber = Math.max(item1.endLineNumber, item2.endLineNumber);\n      result.push(new require$_DOT__DOT__SLASH_core_SLASH_range_DOT_js.Range(startLineNumber, 1, endLineNumber, 1));\n      i++;\n      j++;\n    }\n  }\n  while (i < arr1.length) {\n    result.push(arr1[i++]);\n  }\n  while (j < arr2.length) {\n    result.push(arr2[j++]);\n  }\n  return result;\n}\nfunction rangeArraysEqual(arr1, arr2) {\n  if (arr1.length !== arr2.length) {\n    return false;\n  }\n  for (let i = 0; i < arr1.length; i++) {\n    if (!arr1[i].equalsRange(arr2[i])) {\n      return false;\n    }\n  }\n  return true;\n}\nclass StableViewport {\n  constructor(viewportStartModelPosition, startLineDelta) {\n    this.viewportStartModelPosition = viewportStartModelPosition;\n    this.startLineDelta = startLineDelta;\n  }\n  recoverViewportStart(coordinatesConverter, viewLayout) {\n    if (!this.viewportStartModelPosition) {\n      return;\n    }\n    const viewPosition = coordinatesConverter.convertModelPositionToViewPosition(this.viewportStartModelPosition);\n    const viewPositionTop = viewLayout.getVerticalOffsetForLineNumber(viewPosition.lineNumber);\n    viewLayout.setScrollPosition({scrollTop:viewPositionTop + this.startLineDelta}, 1);\n  }\n}\n\n};"],
"names":["shadow$provide","require","module","exports","rangeArraysEqual","arr1","arr2","length","i","equalsRange","Object","defineProperties","__esModule","enumerable","value","ViewModel","get","require$_DOT__DOT__SLASH__DOT__DOT__SLASH__DOT__DOT__SLASH_base_SLASH_common_SLASH_arrays_DOT_js","require$_DOT__DOT__SLASH__DOT__DOT__SLASH__DOT__DOT__SLASH_base_SLASH_common_SLASH_async_DOT_js","require$_DOT__DOT__SLASH__DOT__DOT__SLASH__DOT__DOT__SLASH_base_SLASH_common_SLASH_color_DOT_js","require$_DOT__DOT__SLASH__DOT__DOT__SLASH__DOT__DOT__SLASH_base_SLASH_common_SLASH_lifecycle_DOT_js","platform","strings","require$_DOT__DOT__SLASH_config_SLASH_editorOptions_DOT_js","require$_DOT__DOT__SLASH_cursor_SLASH_cursor_DOT_js","require$_DOT__DOT__SLASH_cursorCommon_DOT_js","require$_DOT__DOT__SLASH_core_SLASH_position_DOT_js","require$_DOT__DOT__SLASH_core_SLASH_range_DOT_js","textModelEvents","require$_DOT__DOT__SLASH_languages_DOT_js","require$_DOT__DOT__SLASH_languages_SLASH_modesRegistry_DOT_js","require$_DOT__DOT__SLASH_languages_SLASH_textToHtmlTokenizer_DOT_js","viewEvents","require$_DOT__DOT__SLASH_viewLayout_SLASH_viewLayout_DOT_js","require$_DOT__SLASH_minimapTokensColorTracker_DOT_js","require$_DOT__DOT__SLASH_viewModel_DOT_js","require$_DOT__SLASH_viewModelDecorations_DOT_js","require$_DOT__DOT__SLASH_viewModelEventDispatcher_DOT_js","require$_DOT__SLASH_viewModelLines_DOT_js","Disposable","constructor","editorId","configuration","model","domLineBreaksComputerFactory","monospaceLineBreaksComputerFactory","scheduleAtNextAnimationFrame","languageConfigurationService","_themeService","_attachedView","hiddenAreasModel","HiddenAreasModel","previousHiddenAreas","_editorId","_configuration","_eventDispatcher","ViewModelEventDispatcher","onEvent","cursorConfig","CursorConfiguration","getLanguageId","getOptions","_updateConfigurationViewLineCount","_register","RunOnceScheduler","_updateConfigurationViewLineCountNow","_hasFocus","_viewportStart","ViewportStart","create","isTooLargeForTokenization","_lines","ViewModelLinesFromModelAsIs","options","fontInfo","wrappingStrategy","wrappingInfo","wrappingIndent","wordBreak","ViewModelLinesFromProjectedModel","tabSize","wrappingColumn","coordinatesConverter","createCoordinatesConverter","_cursor","CursorsController","viewLayout","ViewLayout","getLineCount","onDidScroll","e","scrollTopChanged","_handleVisibleLinesChanged","invalidate","emitSingleViewEvent","ViewScrollChangedEvent","emitOutgoingEvent","ScrollChangedEvent","oldScrollWidth","oldScrollLeft","oldScrollHeight","oldScrollTop","scrollWidth","scrollLeft","scrollHeight","scrollTop","onDidContentSizeChange","_decorations","ViewModelDecorations","_registerModelEvents","onDidChangeFast","eventsCollector","beginEmitViewEvents","_onConfigurationChanged","endEmitViewEvents","MinimapTokensColorTracker","getInstance","onDidChange","ViewTokensColorsChangedEvent","onDidColorThemeChange","theme","_invalidateDecorationsColorCache","ViewThemeChangedEvent","dispose","createLineBreaksComputer","addViewEventHandler","eventHandler","removeViewEventHandler","setViewLineCount","getViewLineCount","getModelVisibleRanges","linesViewportData","getLinesViewportData","viewVisibleRange","Range","startLineNumber","getLineMinColumn","endLineNumber","getLineMaxColumn","_toModelVisibleRanges","modelVisibleRanges","visibleLinesStabilized","setVisibleLines","setHasFocus","hasFocus","ViewFocusChangedEvent","FocusChangedEvent","onCompositionStart","ViewCompositionStartEvent","onCompositionEnd","ViewCompositionEndEvent","_captureStableViewport","isValid","getCurrentScrollTop","previousViewportStartViewPosition","Position","viewLineNumber","previousViewportStartModelPosition","convertViewPositionToModelPosition","StableViewport","startLineDelta","stableViewport","setWrappingSettings","emitViewEvent","ViewFlushedEvent","ViewLineMappingChangedEvent","ViewDecorationsChangedEvent","onLineMappingChanged","onFlushed","schedule","hasChanged","reset","ViewConfigurationChangedEvent","onConfigurationChanged","recoverViewportStart","shouldRecreate","updateConfiguration","onDidChangeContentOrInjectedText","hadOtherModelChange","hadModelLineChangeThatChangedLineMapping","changes","InternalModelContentChangeEvent","rawContentChangedEvent","versionId","lineBreaksComputer","change","changeType","lineIdx","detail","line","injectedText","injectedTexts","filter","element","ownerId","addRequest","lineBreaks","finalize","lineBreakQueue","ArrayQueue","onModelFlushed","linesDeletedEvent","onModelLinesDeleted","fromLineNumber","toLineNumber","onLinesDeleted","insertedLineBreaks","takeCount","linesInsertedEvent","onModelLinesInserted","onLinesInserted","changedLineBreakData","dequeue","lineMappingChanged","linesChangedEvent","onModelLineChanged","lineNumber","acceptVersionId","onHeightMaybeChanged","viewportStartWasValid","setModelLineCount","getAttachedEditorCount","modelRange","_getTrackedRange","modelTrackedRange","viewPosition","convertModelPositionToViewPosition","getStartPosition","viewPositionTop","getVerticalOffsetForLineNumber","setScrollPosition","ModelContentChangedEvent","contentChangedEvent","onModelContentChanged","onDidChangeTokens","viewRanges","j","lenJ","ranges","viewStartLineNumber","viewEndLineNumber","ViewTokensChangedEvent","ModelTokensChangedEvent","onDidChangeLanguageConfiguration","ViewLanguageConfigurationEvent","ModelLanguageConfigurationChangedEvent","onDidChangeLanguage","ModelLanguageChangedEvent","onDidChangeOptions","setTabSize","ModelOptionsChangedEvent","onDidChangeDecorations","onModelDecorationsChanged","ModelDecorationsChangedEvent","setHiddenAreas","source","_a","mergedRanges","getMergedRanges","firstModelLineInViewPort","viewportStartModelPosition","some","range","HiddenAreasChangedEvent","getVisibleRangesPlusViewportAboveBelow","layoutInfo","lineHeight","linesAround","Math","max","round","height","partialData","startViewLineNumber","completelyVisibleStartLineNumber","endViewLineNumber","min","completelyVisibleEndLineNumber","getVisibleRanges","visibleViewRange","getCompletelyVisibleViewRange","getHiddenAreas","visibleRange","convertViewRangeToModelRange","hiddenAreas","result","resultLen","startColumn","endColumn","len","hiddenStartLineNumber","hiddenEndLineNumber","getCompletelyVisibleViewRangeAtScrollTop","getLinesViewportDataAtScrollTop","saveState","compatViewState","firstViewLineNumber","getLineNumberAtVerticalOffset","firstPosition","firstPositionDeltaTop","reduceRestoreState","state","_reduceRestoreStateCompatibility","modelPosition","validatePosition","scrollTopWithoutViewZones","getTabSize","setViewport","centeredLineNumber","update","getActiveIndentGuide","minLineNumber","maxLineNumber","getLinesIndentGuides","getViewLinesIndentGuides","getBracketGuidesInRangeByLine","activePosition","getViewLinesBracketGuides","getLineContent","getViewLineContent","getLineLength","getViewLineLength","getViewLineMinColumn","getViewLineMaxColumn","getLineFirstNonWhitespaceColumn","firstNonWhitespaceIndex","getLineLastNonWhitespaceColumn","lastNonWhitespaceIndex","getMinimapDecorationsInRange","getDecorationsInViewport","getDecorationsViewportData","decorations","getInjectedTextAt","getViewportViewLineRenderingData","inlineDecorations","_getViewLineRenderingData","getViewLineRenderingData","getInlineDecorationsOnLine","mightContainRTL","mightContainNonBasicASCII","lineData","getViewLineData","map","d","toInlineDecoration","ViewLineRenderingData","minColumn","maxColumn","content","continuesWithWrappedLine","tokens","startVisibleColumn","getMinimapLinesRenderingData","needed","getViewLinesData","MinimapLinesRenderingData","getAllOverviewRulerDecorations","getOverviewRulerDecorations","filterValidationDecorations","OverviewRulerDecorations","decoration","decorationOptions","opts","overviewRuler","lane","position","color","getColor","getViewLineNumberOfModelPosition","accept","zIndex","asArray","opts1","invalidateCachedColor","opts2","minimap","getValueInRange","eol","getValueLengthInRange","modifyPosition","offset","deduceModelPositionRelativeToViewPosition","viewAnchorPosition","deltaOffset","lineFeedCnt","modelAnchor","getEOL","modelAnchorOffset","getOffsetAt","getPositionAt","getPlainTextToCopy","modelRanges","emptySelectionClipboard","forceCRLF","newLineCharacter","slice","sort","compareRangesUsingStarts","hasEmptyRange","hasNonEmptyRange","isEmpty","modelLineNumbers","r","prevModelLineNumber","modelLineNumber","push","getRichTextToCopy","languageId","PLAINTEXT_LANGUAGE_ID","colorMap","_getColorMap","fontFamily","test","hasBadChars","EDITOR_FONT_DEFAULTS","replace","hasQuotesOrIsList","needsQuotes","mode","html","fontWeight","fontSize","_getHTMLToCopy","lineTokens","tokenization","getLineTokens","lineContent","startOffset","endOffset","tokenizeLineToHTML","inflate","isWindows","TokenizationRegistry","getColorMap","Color","Format","CSS","formatHex","getPrimaryCursorState","getLastAddedCursorIndex","getCursorStates","setCursorStates","reason","states","_withViewEventsCollector","setStates","getCursorColumnSelectData","getCursorAutoClosedCharacters","getAutoClosedCharacters","setCursorColumnSelectData","columnSelectData","getPrevEditOperationType","setPrevEditOperationType","type","getSelection","getSelections","getPosition","modelState","setSelections","selections","saveCursorState","restoreCursorState","restoreState","_executeCursorEdit","callback","context","readOnly","ReadOnlyEditAttemptEvent","executeEdits","edits","cursorStateComputer","startComposition","endComposition","text","compositionType","replacePrevCharCnt","replaceNextCharCnt","positionDelta","paste","pasteOnNewLine","multicursorText","cut","executeCommand","command","executeCommands","commands","revealPrimaryCursor","revealHorizontal","minimalReveal","revealPrimary","revealTopMostCursor","getTopMostViewPosition","viewRange","column","ViewRevealRangeRequestEvent","revealBottomMostCursor","getBottomMostViewPosition","revealRange","verticalType","scrollType","changeWhitespace","hadAChange","ViewZonesChangedEvent","normalizePosition","affinity","getLineIndentColumn","viewportStartLineTrackedRange","_setTrackedRange","_viewLineNumber","_isValid","_modelTrackedRange","_startLineDelta","_model","viewModel","viewportStartLineTop","_asMap","prevGroup","prevData","data","prevEndLineNumber","prevLane","group","OverviewRulerDecorationsGroup","Map","shouldRecompute","existing","set","newRanges","Array","from","values","reduce","item1","item2"]
}
