shadow$provide.module$node_modules$monaco_editor$esm$vs$editor$common$model$bracketPairsTextModelPart$bracketPairsTree$combineTextEditInfos = function(require, module, exports) {
  function combineTextEditInfos(textEditInfoFirst, textEditInfoSecond) {
    function nextS0ToS1MapWithS1LengthOf(s1Length) {
      if (s1Length === void 0) {
        return s1Length = s0ToS1Map.takeWhile(v => !0) || [], curItem && s1Length.unshift(curItem), s1Length;
      }
      const result = [];
      for (; curItem && !(0,require$_DOT__SLASH_length_DOT_js.lengthIsZero)(s1Length);) {
        const [item, remainingItem] = curItem.splitAt(s1Length);
        result.push(item);
        s1Length = (0,require$_DOT__SLASH_length_DOT_js.lengthDiffNonNegative)(item.lengthAfter, s1Length);
        curItem = remainingItem !== null && remainingItem !== void 0 ? remainingItem : s0ToS1Map.dequeue();
      }
      (0,require$_DOT__SLASH_length_DOT_js.lengthIsZero)(s1Length) || result.push(new LengthMapping(!1, s1Length, s1Length));
      return result;
    }
    function pushEdit(startOffset, endOffset, newLength) {
      result.length > 0 && (0,require$_DOT__SLASH_length_DOT_js.lengthEquals)(result[result.length - 1].endOffset, startOffset) ? (startOffset = result[result.length - 1], result[result.length - 1] = new require$_DOT__SLASH_beforeEditPositionMapper_DOT_js.TextEditInfo(startOffset.startOffset, endOffset, (0,require$_DOT__SLASH_length_DOT_js.lengthAdd)(startOffset.newLength, newLength))) : result.push({startOffset, endOffset, newLength});
    }
    if (textEditInfoFirst.length === 0) {
      return textEditInfoSecond;
    }
    if (textEditInfoSecond.length === 0) {
      return textEditInfoFirst;
    }
    const s0ToS1Map = new require$_DOT__DOT__SLASH__DOT__DOT__SLASH__DOT__DOT__SLASH__DOT__DOT__SLASH__DOT__DOT__SLASH_base_SLASH_common_SLASH_arrays_DOT_js.ArrayQueue(toLengthMapping(textEditInfoFirst));
    textEditInfoSecond = toLengthMapping(textEditInfoSecond);
    textEditInfoSecond.push({modified:!1, lengthBefore:void 0, lengthAfter:void 0});
    let curItem = s0ToS1Map.dequeue();
    const result = [];
    textEditInfoFirst = require$_DOT__SLASH_length_DOT_js.lengthZero;
    for (const s1ToS2 of textEditInfoSecond) {
      if (textEditInfoSecond = nextS0ToS1MapWithS1LengthOf(s1ToS2.lengthBefore), s1ToS2.modified) {
        textEditInfoSecond = (0,require$_DOT__SLASH_length_DOT_js.sumLengths)(textEditInfoSecond, s => s.lengthBefore), textEditInfoSecond = (0,require$_DOT__SLASH_length_DOT_js.lengthAdd)(textEditInfoFirst, textEditInfoSecond), pushEdit(textEditInfoFirst, textEditInfoSecond, s1ToS2.lengthAfter), textEditInfoFirst = textEditInfoSecond;
      } else {
        for (const s1 of textEditInfoSecond) {
          textEditInfoSecond = textEditInfoFirst, textEditInfoFirst = (0,require$_DOT__SLASH_length_DOT_js.lengthAdd)(textEditInfoFirst, s1.lengthBefore), s1.modified && pushEdit(textEditInfoSecond, textEditInfoFirst, s1.lengthAfter);
        }
      }
    }
    return result;
  }
  function toLengthMapping(textEditInfos) {
    const result = [];
    let lastOffset = require$_DOT__SLASH_length_DOT_js.lengthZero;
    for (const textEditInfo of textEditInfos) {
      textEditInfos = (0,require$_DOT__SLASH_length_DOT_js.lengthDiffNonNegative)(lastOffset, textEditInfo.startOffset), (0,require$_DOT__SLASH_length_DOT_js.lengthIsZero)(textEditInfos) || result.push(new LengthMapping(!1, textEditInfos, textEditInfos)), textEditInfos = (0,require$_DOT__SLASH_length_DOT_js.lengthDiffNonNegative)(textEditInfo.startOffset, textEditInfo.endOffset), result.push(new LengthMapping(!0, textEditInfos, textEditInfo.newLength)), lastOffset = textEditInfo.endOffset;
    }
    return result;
  }
  Object.defineProperties(exports, {__esModule:{enumerable:!0, value:!0}, combineTextEditInfos:{enumerable:!0, get:function() {
    return combineTextEditInfos;
  }}});
  var require$_DOT__DOT__SLASH__DOT__DOT__SLASH__DOT__DOT__SLASH__DOT__DOT__SLASH__DOT__DOT__SLASH_base_SLASH_common_SLASH_arrays_DOT_js = require("module$node_modules$monaco_editor$esm$vs$base$common$arrays"), require$_DOT__SLASH_beforeEditPositionMapper_DOT_js = require("module$node_modules$monaco_editor$esm$vs$editor$common$model$bracketPairsTextModelPart$bracketPairsTree$beforeEditPositionMapper"), require$_DOT__SLASH_length_DOT_js = require("module$node_modules$monaco_editor$esm$vs$editor$common$model$bracketPairsTextModelPart$bracketPairsTree$length");
  class LengthMapping {
    constructor(modified, lengthBefore, lengthAfter) {
      this.modified = modified;
      this.lengthBefore = lengthBefore;
      this.lengthAfter = lengthAfter;
    }
    splitAt(lengthAfter) {
      const remainingLengthAfter = (0,require$_DOT__SLASH_length_DOT_js.lengthDiffNonNegative)(lengthAfter, this.lengthAfter);
      return (0,require$_DOT__SLASH_length_DOT_js.lengthEquals)(remainingLengthAfter, require$_DOT__SLASH_length_DOT_js.lengthZero) ? [this, void 0] : this.modified ? [new LengthMapping(this.modified, this.lengthBefore, lengthAfter), new LengthMapping(this.modified, require$_DOT__SLASH_length_DOT_js.lengthZero, remainingLengthAfter)] : [new LengthMapping(this.modified, lengthAfter, lengthAfter), new LengthMapping(this.modified, remainingLengthAfter, remainingLengthAfter)];
    }
    toString() {
      return `${this.modified ? "M" : "U"}:${(0,require$_DOT__SLASH_length_DOT_js.lengthToObj)(this.lengthBefore)} -> ${(0,require$_DOT__SLASH_length_DOT_js.lengthToObj)(this.lengthAfter)}`;
    }
  }
};

//# sourceMappingURL=module$node_modules$monaco_editor$esm$vs$editor$common$model$bracketPairsTextModelPart$bracketPairsTree$combineTextEditInfos.js.map
