shadow$provide.module$node_modules$monaco_editor$esm$vs$editor$browser$viewParts$lines$rangeUtil = function(require, module, exports) {
  Object.defineProperties(exports, {__esModule:{enumerable:!0, value:!0}, RangeUtil:{enumerable:!0, get:function() {
    return RangeUtil;
  }}});
  var require$_DOT__DOT__SLASH__DOT__DOT__SLASH_view_SLASH_renderingContext_DOT_js = require("module$node_modules$monaco_editor$esm$vs$editor$browser$view$renderingContext");
  class RangeUtil {
    static _createRange() {
      this._handyReadyRange || (this._handyReadyRange = document.createRange());
      return this._handyReadyRange;
    }
    static _detachRange(range, endNode) {
      range.selectNodeContents(endNode);
    }
    static _readClientRects(startElement, startOffset, endElement, endOffset, endNode) {
      const range = this._createRange();
      try {
        return range.setStart(startElement, startOffset), range.setEnd(endElement, endOffset), range.getClientRects();
      } catch (e) {
        return null;
      } finally {
        this._detachRange(range, endNode);
      }
    }
    static _mergeAdjacentRanges(ranges) {
      if (ranges.length === 1) {
        return ranges;
      }
      ranges.sort(require$_DOT__DOT__SLASH__DOT__DOT__SLASH_view_SLASH_renderingContext_DOT_js.FloatHorizontalRange.compare);
      const result = [];
      let resultLen = 0, prev = ranges[0];
      for (let i = 1, len = ranges.length; i < len; i++) {
        const range = ranges[i];
        prev.left + prev.width + 0.9 >= range.left ? prev.width = Math.max(prev.width, range.left + range.width - prev.left) : (result[resultLen++] = prev, prev = range);
      }
      result[resultLen++] = prev;
      return result;
    }
    static _createHorizontalRangesFromClientRects(clientRects, clientRectDeltaLeft, clientRectScale) {
      if (!clientRects || clientRects.length === 0) {
        return null;
      }
      const result = [];
      for (let i = 0, len = clientRects.length; i < len; i++) {
        const clientRect = clientRects[i];
        result[i] = new require$_DOT__DOT__SLASH__DOT__DOT__SLASH_view_SLASH_renderingContext_DOT_js.FloatHorizontalRange(Math.max(0, (clientRect.left - clientRectDeltaLeft) / clientRectScale), clientRect.width / clientRectScale);
      }
      return this._mergeAdjacentRanges(result);
    }
    static readHorizontalRanges(domNode, startChildIndex, startOffset, endChildIndex, endOffset, context) {
      var max = domNode.children.length - 1;
      if (0 > max) {
        return null;
      }
      startChildIndex = Math.min(max, Math.max(0, startChildIndex));
      endChildIndex = Math.min(max, Math.max(0, endChildIndex));
      if (startChildIndex === endChildIndex && startOffset === endOffset && startOffset === 0 && !domNode.children[startChildIndex].firstChild) {
        return domNode = domNode.children[startChildIndex].getClientRects(), context.markDidDomLayout(), this._createHorizontalRangesFromClientRects(domNode, context.clientRectDeltaLeft, context.clientRectScale);
      }
      startChildIndex !== endChildIndex && endChildIndex > 0 && endOffset === 0 && (endChildIndex--, endOffset = 1073741824);
      max = domNode.children[startChildIndex].firstChild;
      let endElement = domNode.children[endChildIndex].firstChild;
      max && endElement || (!max && startOffset === 0 && startChildIndex > 0 && (max = domNode.children[startChildIndex - 1].firstChild, startOffset = 1073741824), !endElement && endOffset === 0 && endChildIndex > 0 && (endElement = domNode.children[endChildIndex - 1].firstChild, endOffset = 1073741824));
      if (!max || !endElement) {
        return null;
      }
      startOffset = Math.min(max.textContent.length, Math.max(0, startOffset));
      endOffset = Math.min(endElement.textContent.length, Math.max(0, endOffset));
      domNode = this._readClientRects(max, startOffset, endElement, endOffset, context.endNode);
      context.markDidDomLayout();
      return this._createHorizontalRangesFromClientRects(domNode, context.clientRectDeltaLeft, context.clientRectScale);
    }
  }
};

//# sourceMappingURL=module$node_modules$monaco_editor$esm$vs$editor$browser$viewParts$lines$rangeUtil.js.map
