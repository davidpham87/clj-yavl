{
"version":3,
"file":"module$node_modules$monaco_editor$esm$vs$editor$common$tokens$sparseTokensStore.js",
"lineCount":127,
"mappings":"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",
"sources":["node_modules/monaco-editor/esm/vs/editor/common/tokens/sparseTokensStore.js"],
"sourcesContent":["shadow$provide[\"module$node_modules$monaco_editor$esm$vs$editor$common$tokens$sparseTokensStore\"] = function(require,module,exports) {\nObject.defineProperties(exports, {__esModule:{enumerable:true, value:true}, SparseTokensStore:{enumerable:true, get:function() {\n  return SparseTokensStore;\n}}});\nvar arrays = require(\"../../../base/common/arrays.js\");\nvar require$_DOT__SLASH_lineTokens_DOT_js = require(\"./lineTokens.js\");\nclass SparseTokensStore {\n  constructor(languageIdCodec) {\n    this._pieces = [];\n    this._isComplete = false;\n    this._languageIdCodec = languageIdCodec;\n  }\n  flush() {\n    this._pieces = [];\n    this._isComplete = false;\n  }\n  isEmpty() {\n    return this._pieces.length === 0;\n  }\n  set(pieces, isComplete) {\n    this._pieces = pieces || [];\n    this._isComplete = isComplete;\n  }\n  setPartial(_range, pieces) {\n    let range = _range;\n    if (pieces.length > 0) {\n      const _firstRange = pieces[0].getRange();\n      const _lastRange = pieces[pieces.length - 1].getRange();\n      if (!_firstRange || !_lastRange) {\n        return _range;\n      }\n      range = _range.plusRange(_firstRange).plusRange(_lastRange);\n    }\n    let insertPosition = null;\n    for (let i = 0, len = this._pieces.length; i < len; i++) {\n      const piece = this._pieces[i];\n      if (piece.endLineNumber < range.startLineNumber) {\n        continue;\n      }\n      if (piece.startLineNumber > range.endLineNumber) {\n        insertPosition = insertPosition || {index:i};\n        break;\n      }\n      piece.removeTokens(range);\n      if (piece.isEmpty()) {\n        this._pieces.splice(i, 1);\n        i--;\n        len--;\n        continue;\n      }\n      if (piece.endLineNumber < range.startLineNumber) {\n        continue;\n      }\n      if (piece.startLineNumber > range.endLineNumber) {\n        insertPosition = insertPosition || {index:i};\n        continue;\n      }\n      const [a, b] = piece.split(range);\n      if (a.isEmpty()) {\n        insertPosition = insertPosition || {index:i};\n        continue;\n      }\n      if (b.isEmpty()) {\n        continue;\n      }\n      this._pieces.splice(i, 1, a, b);\n      i++;\n      len++;\n      insertPosition = insertPosition || {index:i};\n    }\n    insertPosition = insertPosition || {index:this._pieces.length};\n    if (pieces.length > 0) {\n      this._pieces = arrays.arrayInsert(this._pieces, insertPosition.index, pieces);\n    }\n    return range;\n  }\n  isComplete() {\n    return this._isComplete;\n  }\n  addSparseTokens(lineNumber, aTokens) {\n    if (aTokens.getLineContent().length === 0) {\n      return aTokens;\n    }\n    const pieces = this._pieces;\n    if (pieces.length === 0) {\n      return aTokens;\n    }\n    const pieceIndex = SparseTokensStore._findFirstPieceWithLine(pieces, lineNumber);\n    const bTokens = pieces[pieceIndex].getLineTokens(lineNumber);\n    if (!bTokens) {\n      return aTokens;\n    }\n    const aLen = aTokens.getCount();\n    const bLen = bTokens.getCount();\n    let aIndex = 0;\n    const result = [];\n    let resultLen = 0;\n    let lastEndOffset = 0;\n    const emitToken = (endOffset, metadata) => {\n      if (endOffset === lastEndOffset) {\n        return;\n      }\n      lastEndOffset = endOffset;\n      result[resultLen++] = endOffset;\n      result[resultLen++] = metadata;\n    };\n    for (let bIndex = 0; bIndex < bLen; bIndex++) {\n      const bStartCharacter = bTokens.getStartCharacter(bIndex);\n      const bEndCharacter = bTokens.getEndCharacter(bIndex);\n      const bMetadata = bTokens.getMetadata(bIndex);\n      const bMask = ((bMetadata & 1 ? 2048 : 0) | (bMetadata & 2 ? 4096 : 0) | (bMetadata & 4 ? 8192 : 0) | (bMetadata & 8 ? 16384 : 0) | (bMetadata & 16 ? 16744448 : 0) | (bMetadata & 32 ? 4278190080 : 0)) >>> 0;\n      const aMask = ~bMask >>> 0;\n      while (aIndex < aLen && aTokens.getEndOffset(aIndex) <= bStartCharacter) {\n        emitToken(aTokens.getEndOffset(aIndex), aTokens.getMetadata(aIndex));\n        aIndex++;\n      }\n      if (aIndex < aLen && aTokens.getStartOffset(aIndex) < bStartCharacter) {\n        emitToken(bStartCharacter, aTokens.getMetadata(aIndex));\n      }\n      while (aIndex < aLen && aTokens.getEndOffset(aIndex) < bEndCharacter) {\n        emitToken(aTokens.getEndOffset(aIndex), aTokens.getMetadata(aIndex) & aMask | bMetadata & bMask);\n        aIndex++;\n      }\n      if (aIndex < aLen) {\n        emitToken(bEndCharacter, aTokens.getMetadata(aIndex) & aMask | bMetadata & bMask);\n        if (aTokens.getEndOffset(aIndex) === bEndCharacter) {\n          aIndex++;\n        }\n      } else {\n        const aMergeIndex = Math.min(Math.max(0, aIndex - 1), aLen - 1);\n        emitToken(bEndCharacter, aTokens.getMetadata(aMergeIndex) & aMask | bMetadata & bMask);\n      }\n    }\n    while (aIndex < aLen) {\n      emitToken(aTokens.getEndOffset(aIndex), aTokens.getMetadata(aIndex));\n      aIndex++;\n    }\n    return new require$_DOT__SLASH_lineTokens_DOT_js.LineTokens(new Uint32Array(result), aTokens.getLineContent(), this._languageIdCodec);\n  }\n  static _findFirstPieceWithLine(pieces, lineNumber) {\n    let low = 0;\n    let high = pieces.length - 1;\n    while (low < high) {\n      let mid = low + Math.floor((high - low) / 2);\n      if (pieces[mid].endLineNumber < lineNumber) {\n        low = mid + 1;\n      } else if (pieces[mid].startLineNumber > lineNumber) {\n        high = mid - 1;\n      } else {\n        while (mid > low && pieces[mid - 1].startLineNumber <= lineNumber && lineNumber <= pieces[mid - 1].endLineNumber) {\n          mid--;\n        }\n        return mid;\n      }\n    }\n    return low;\n  }\n  acceptEdit(range, eolCount, firstLineLength, lastLineLength, firstCharCode) {\n    for (const piece of this._pieces) {\n      piece.acceptEdit(range, eolCount, firstLineLength, lastLineLength, firstCharCode);\n    }\n  }\n}\n\n};"],
"names":["shadow$provide","require","module","exports","Object","defineProperties","__esModule","enumerable","value","SparseTokensStore","get","arrays","require$_DOT__SLASH_lineTokens_DOT_js","constructor","languageIdCodec","_pieces","_isComplete","_languageIdCodec","flush","isEmpty","length","set","pieces","isComplete","setPartial","_range","range","_firstRange","getRange","_lastRange","plusRange","insertPosition","i","len","piece","endLineNumber","startLineNumber","index","removeTokens","splice","a","b","split","arrayInsert","addSparseTokens","lineNumber","aTokens","getLineContent","pieceIndex","_findFirstPieceWithLine","bTokens","getLineTokens","aLen","getCount","bLen","aIndex","result","resultLen","lastEndOffset","emitToken","endOffset","metadata","bIndex","bStartCharacter","getStartCharacter","bEndCharacter","getEndCharacter","bMetadata","getMetadata","bMask","aMask","getEndOffset","getStartOffset","Math","min","aMergeIndex","max","LineTokens","Uint32Array","low","high","mid","floor","acceptEdit","eolCount","firstLineLength","lastLineLength","firstCharCode"]
}
