{
"version":3,
"file":"module$node_modules$monaco_editor$esm$vs$editor$common$model$prefixSumComputer.js",
"lineCount":162,
"mappings":"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",
"sources":["node_modules/monaco-editor/esm/vs/editor/common/model/prefixSumComputer.js"],
"sourcesContent":["shadow$provide[\"module$node_modules$monaco_editor$esm$vs$editor$common$model$prefixSumComputer\"] = function(require,module,exports) {\nObject.defineProperties(exports, {__esModule:{enumerable:true, value:true}, ConstantTimePrefixSumComputer:{enumerable:true, get:function() {\n  return ConstantTimePrefixSumComputer;\n}}, PrefixSumComputer:{enumerable:true, get:function() {\n  return PrefixSumComputer;\n}}, PrefixSumIndexOfResult:{enumerable:true, get:function() {\n  return PrefixSumIndexOfResult;\n}}});\nvar require$_DOT__DOT__SLASH__DOT__DOT__SLASH__DOT__DOT__SLASH_base_SLASH_common_SLASH_arrays_DOT_js = require(\"../../../base/common/arrays.js\");\nvar require$_DOT__DOT__SLASH__DOT__DOT__SLASH__DOT__DOT__SLASH_base_SLASH_common_SLASH_uint_DOT_js = require(\"../../../base/common/uint.js\");\nclass PrefixSumComputer {\n  constructor(values) {\n    this.values = values;\n    this.prefixSum = new Uint32Array(values.length);\n    this.prefixSumValidIndex = new Int32Array(1);\n    this.prefixSumValidIndex[0] = -1;\n  }\n  insertValues(insertIndex, insertValues) {\n    insertIndex = (0,require$_DOT__DOT__SLASH__DOT__DOT__SLASH__DOT__DOT__SLASH_base_SLASH_common_SLASH_uint_DOT_js.toUint32)(insertIndex);\n    const oldValues = this.values;\n    const oldPrefixSum = this.prefixSum;\n    const insertValuesLen = insertValues.length;\n    if (insertValuesLen === 0) {\n      return false;\n    }\n    this.values = new Uint32Array(oldValues.length + insertValuesLen);\n    this.values.set(oldValues.subarray(0, insertIndex), 0);\n    this.values.set(oldValues.subarray(insertIndex), insertIndex + insertValuesLen);\n    this.values.set(insertValues, insertIndex);\n    if (insertIndex - 1 < this.prefixSumValidIndex[0]) {\n      this.prefixSumValidIndex[0] = insertIndex - 1;\n    }\n    this.prefixSum = new Uint32Array(this.values.length);\n    if (this.prefixSumValidIndex[0] >= 0) {\n      this.prefixSum.set(oldPrefixSum.subarray(0, this.prefixSumValidIndex[0] + 1));\n    }\n    return true;\n  }\n  setValue(index, value) {\n    index = (0,require$_DOT__DOT__SLASH__DOT__DOT__SLASH__DOT__DOT__SLASH_base_SLASH_common_SLASH_uint_DOT_js.toUint32)(index);\n    value = (0,require$_DOT__DOT__SLASH__DOT__DOT__SLASH__DOT__DOT__SLASH_base_SLASH_common_SLASH_uint_DOT_js.toUint32)(value);\n    if (this.values[index] === value) {\n      return false;\n    }\n    this.values[index] = value;\n    if (index - 1 < this.prefixSumValidIndex[0]) {\n      this.prefixSumValidIndex[0] = index - 1;\n    }\n    return true;\n  }\n  removeValues(startIndex, count) {\n    startIndex = (0,require$_DOT__DOT__SLASH__DOT__DOT__SLASH__DOT__DOT__SLASH_base_SLASH_common_SLASH_uint_DOT_js.toUint32)(startIndex);\n    count = (0,require$_DOT__DOT__SLASH__DOT__DOT__SLASH__DOT__DOT__SLASH_base_SLASH_common_SLASH_uint_DOT_js.toUint32)(count);\n    const oldValues = this.values;\n    const oldPrefixSum = this.prefixSum;\n    if (startIndex >= oldValues.length) {\n      return false;\n    }\n    const maxCount = oldValues.length - startIndex;\n    if (count >= maxCount) {\n      count = maxCount;\n    }\n    if (count === 0) {\n      return false;\n    }\n    this.values = new Uint32Array(oldValues.length - count);\n    this.values.set(oldValues.subarray(0, startIndex), 0);\n    this.values.set(oldValues.subarray(startIndex + count), startIndex);\n    this.prefixSum = new Uint32Array(this.values.length);\n    if (startIndex - 1 < this.prefixSumValidIndex[0]) {\n      this.prefixSumValidIndex[0] = startIndex - 1;\n    }\n    if (this.prefixSumValidIndex[0] >= 0) {\n      this.prefixSum.set(oldPrefixSum.subarray(0, this.prefixSumValidIndex[0] + 1));\n    }\n    return true;\n  }\n  getTotalSum() {\n    if (this.values.length === 0) {\n      return 0;\n    }\n    return this._getPrefixSum(this.values.length - 1);\n  }\n  getPrefixSum(index) {\n    if (index < 0) {\n      return 0;\n    }\n    index = (0,require$_DOT__DOT__SLASH__DOT__DOT__SLASH__DOT__DOT__SLASH_base_SLASH_common_SLASH_uint_DOT_js.toUint32)(index);\n    return this._getPrefixSum(index);\n  }\n  _getPrefixSum(index) {\n    if (index <= this.prefixSumValidIndex[0]) {\n      return this.prefixSum[index];\n    }\n    let startIndex = this.prefixSumValidIndex[0] + 1;\n    if (startIndex === 0) {\n      this.prefixSum[0] = this.values[0];\n      startIndex++;\n    }\n    if (index >= this.values.length) {\n      index = this.values.length - 1;\n    }\n    for (let i = startIndex; i <= index; i++) {\n      this.prefixSum[i] = this.prefixSum[i - 1] + this.values[i];\n    }\n    this.prefixSumValidIndex[0] = Math.max(this.prefixSumValidIndex[0], index);\n    return this.prefixSum[index];\n  }\n  getIndexOf(sum) {\n    sum = Math.floor(sum);\n    this.getTotalSum();\n    let low = 0;\n    let high = this.values.length - 1;\n    let mid = 0;\n    let midStop = 0;\n    let midStart = 0;\n    while (low <= high) {\n      mid = low + (high - low) / 2 | 0;\n      midStop = this.prefixSum[mid];\n      midStart = midStop - this.values[mid];\n      if (sum < midStart) {\n        high = mid - 1;\n      } else if (sum >= midStop) {\n        low = mid + 1;\n      } else {\n        break;\n      }\n    }\n    return new PrefixSumIndexOfResult(mid, sum - midStart);\n  }\n}\nclass ConstantTimePrefixSumComputer {\n  constructor(values) {\n    this._values = values;\n    this._isValid = false;\n    this._validEndIndex = -1;\n    this._prefixSum = [];\n    this._indexBySum = [];\n  }\n  getTotalSum() {\n    this._ensureValid();\n    return this._indexBySum.length;\n  }\n  getPrefixSum(count) {\n    this._ensureValid();\n    if (count === 0) {\n      return 0;\n    }\n    return this._prefixSum[count - 1];\n  }\n  getIndexOf(sum) {\n    this._ensureValid();\n    const idx = this._indexBySum[sum];\n    const viewLinesAbove = idx > 0 ? this._prefixSum[idx - 1] : 0;\n    return new PrefixSumIndexOfResult(idx, sum - viewLinesAbove);\n  }\n  removeValues(start, deleteCount) {\n    this._values.splice(start, deleteCount);\n    this._invalidate(start);\n  }\n  insertValues(insertIndex, insertArr) {\n    this._values = (0,require$_DOT__DOT__SLASH__DOT__DOT__SLASH__DOT__DOT__SLASH_base_SLASH_common_SLASH_arrays_DOT_js.arrayInsert)(this._values, insertIndex, insertArr);\n    this._invalidate(insertIndex);\n  }\n  _invalidate(index) {\n    this._isValid = false;\n    this._validEndIndex = Math.min(this._validEndIndex, index - 1);\n  }\n  _ensureValid() {\n    if (this._isValid) {\n      return;\n    }\n    for (let i = this._validEndIndex + 1, len = this._values.length; i < len; i++) {\n      const value = this._values[i];\n      const sumAbove = i > 0 ? this._prefixSum[i - 1] : 0;\n      this._prefixSum[i] = sumAbove + value;\n      for (let j = 0; j < value; j++) {\n        this._indexBySum[sumAbove + j] = i;\n      }\n    }\n    this._prefixSum.length = this._values.length;\n    this._indexBySum.length = this._prefixSum[this._prefixSum.length - 1];\n    this._isValid = true;\n    this._validEndIndex = this._values.length - 1;\n  }\n  setValue(index, value) {\n    if (this._values[index] === value) {\n      return;\n    }\n    this._values[index] = value;\n    this._invalidate(index);\n  }\n}\nclass PrefixSumIndexOfResult {\n  constructor(index, remainder) {\n    this.index = index;\n    this.remainder = remainder;\n    this._prefixSumIndexOfResultBrand = undefined;\n    this.index = index;\n    this.remainder = remainder;\n  }\n}\n\n};"],
"names":["shadow$provide","require","module","exports","Object","defineProperties","__esModule","enumerable","value","ConstantTimePrefixSumComputer","get","PrefixSumComputer","PrefixSumIndexOfResult","require$_DOT__DOT__SLASH__DOT__DOT__SLASH__DOT__DOT__SLASH_base_SLASH_common_SLASH_arrays_DOT_js","require$_DOT__DOT__SLASH__DOT__DOT__SLASH__DOT__DOT__SLASH_base_SLASH_common_SLASH_uint_DOT_js","constructor","values","prefixSum","Uint32Array","length","prefixSumValidIndex","Int32Array","insertValues","insertIndex","toUint32","oldValues","oldPrefixSum","insertValuesLen","set","subarray","setValue","index","removeValues","startIndex","count","maxCount","getTotalSum","_getPrefixSum","getPrefixSum","i","Math","max","getIndexOf","sum","floor","low","high","mid","midStop","midStart","_values","_isValid","_validEndIndex","_prefixSum","_indexBySum","_ensureValid","idx","viewLinesAbove","start","deleteCount","splice","_invalidate","insertArr","arrayInsert","min","len","sumAbove","j","remainder","_prefixSumIndexOfResultBrand","undefined"]
}
