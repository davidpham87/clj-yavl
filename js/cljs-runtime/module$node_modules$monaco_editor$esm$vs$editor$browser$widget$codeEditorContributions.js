shadow$provide.module$node_modules$monaco_editor$esm$vs$editor$browser$widget$codeEditorContributions = function(require, module, exports) {
  Object.defineProperties(exports, {__esModule:{enumerable:!0, value:!0}, CodeEditorContributions:{enumerable:!0, get:function() {
    return CodeEditorContributions;
  }}});
  var require$_DOT__DOT__SLASH__DOT__DOT__SLASH__DOT__DOT__SLASH_base_SLASH_browser_SLASH_dom_DOT_js = require("module$node_modules$monaco_editor$esm$vs$base$browser$dom"), require$_DOT__DOT__SLASH__DOT__DOT__SLASH__DOT__DOT__SLASH_base_SLASH_common_SLASH_errors_DOT_js = require("module$node_modules$monaco_editor$esm$vs$base$common$errors"), require$_DOT__DOT__SLASH__DOT__DOT__SLASH__DOT__DOT__SLASH_base_SLASH_common_SLASH_lifecycle_DOT_js = require("module$node_modules$monaco_editor$esm$vs$base$common$lifecycle");
  class CodeEditorContributions extends require$_DOT__DOT__SLASH__DOT__DOT__SLASH__DOT__DOT__SLASH_base_SLASH_common_SLASH_lifecycle_DOT_js.Disposable {
    constructor() {
      super();
      this._instantiationService = this._editor = null;
      this._instances = this._register(new require$_DOT__DOT__SLASH__DOT__DOT__SLASH__DOT__DOT__SLASH_base_SLASH_common_SLASH_lifecycle_DOT_js.DisposableMap());
      this._pending = new Map();
      this._finishedInstantiation = [];
      this._finishedInstantiation[0] = !1;
      this._finishedInstantiation[1] = !1;
      this._finishedInstantiation[2] = !1;
      this._finishedInstantiation[3] = !1;
    }
    initialize(editor, contributions, instantiationService) {
      this._editor = editor;
      this._instantiationService = instantiationService;
      for (const desc of contributions) {
        if (this._pending.has(desc.id)) {
          (0,require$_DOT__DOT__SLASH__DOT__DOT__SLASH__DOT__DOT__SLASH_base_SLASH_common_SLASH_errors_DOT_js.onUnexpectedError)(Error(`Cannot have two contributions with the same id ${desc.id}`));
        } else {
          this._pending.set(desc.id, desc);
        }
      }
      this._instantiateSome(0);
      this._register((0,require$_DOT__DOT__SLASH__DOT__DOT__SLASH__DOT__DOT__SLASH_base_SLASH_browser_SLASH_dom_DOT_js.runWhenWindowIdle)((0,require$_DOT__DOT__SLASH__DOT__DOT__SLASH__DOT__DOT__SLASH_base_SLASH_browser_SLASH_dom_DOT_js.getWindow)(this._editor.getDomNode()), () => {
        this._instantiateSome(1);
      }));
      this._register((0,require$_DOT__DOT__SLASH__DOT__DOT__SLASH__DOT__DOT__SLASH_base_SLASH_browser_SLASH_dom_DOT_js.runWhenWindowIdle)((0,require$_DOT__DOT__SLASH__DOT__DOT__SLASH__DOT__DOT__SLASH_base_SLASH_browser_SLASH_dom_DOT_js.getWindow)(this._editor.getDomNode()), () => {
        this._instantiateSome(2);
      }));
      this._register((0,require$_DOT__DOT__SLASH__DOT__DOT__SLASH__DOT__DOT__SLASH_base_SLASH_browser_SLASH_dom_DOT_js.runWhenWindowIdle)((0,require$_DOT__DOT__SLASH__DOT__DOT__SLASH__DOT__DOT__SLASH_base_SLASH_browser_SLASH_dom_DOT_js.getWindow)(this._editor.getDomNode()), () => {
        this._instantiateSome(3);
      }, 5000));
    }
    saveViewState() {
      const contributionsState = {};
      for (const [id, contribution] of this._instances) {
        typeof contribution.saveViewState === "function" && (contributionsState[id] = contribution.saveViewState());
      }
      return contributionsState;
    }
    restoreViewState(contributionsState) {
      for (const [id, contribution] of this._instances) {
        typeof contribution.restoreViewState === "function" && contribution.restoreViewState(contributionsState[id]);
      }
    }
    get(id) {
      this._instantiateById(id);
      return this._instances.get(id) || null;
    }
    onBeforeInteractionEvent() {
      this._instantiateSome(2);
    }
    onAfterModelAttached() {
      var _a;
      this._register((0,require$_DOT__DOT__SLASH__DOT__DOT__SLASH__DOT__DOT__SLASH_base_SLASH_browser_SLASH_dom_DOT_js.runWhenWindowIdle)((0,require$_DOT__DOT__SLASH__DOT__DOT__SLASH__DOT__DOT__SLASH_base_SLASH_browser_SLASH_dom_DOT_js.getWindow)((_a = this._editor) === null || _a === void 0 ? void 0 : _a.getDomNode()), () => {
        this._instantiateSome(1);
      }, 50));
    }
    _instantiateSome(instantiation) {
      if (!this._finishedInstantiation[instantiation]) {
        this._finishedInstantiation[instantiation] = !0;
        instantiation = this._findPendingContributionsByInstantiation(instantiation);
        for (const contrib of instantiation) {
          this._instantiateById(contrib.id);
        }
      }
    }
    _findPendingContributionsByInstantiation(instantiation) {
      const result = [];
      for (const [, desc] of this._pending) {
        desc.instantiation === instantiation && result.push(desc);
      }
      return result;
    }
    _instantiateById(id) {
      const desc = this._pending.get(id);
      if (desc) {
        this._pending.delete(id);
        if (!this._instantiationService || !this._editor) {
          throw Error("Cannot instantiate contributions before being initialized!");
        }
        try {
          const instance = this._instantiationService.createInstance(desc.ctor, this._editor);
          this._instances.set(desc.id, instance);
          typeof instance.restoreViewState === "function" && desc.instantiation !== 0 && console.warn(`Editor contribution '${desc.id}' should be eager instantiated because it uses saveViewState / restoreViewState.`);
        } catch (err) {
          (0,require$_DOT__DOT__SLASH__DOT__DOT__SLASH__DOT__DOT__SLASH_base_SLASH_common_SLASH_errors_DOT_js.onUnexpectedError)(err);
        }
      }
    }
  }
};

//# sourceMappingURL=module$node_modules$monaco_editor$esm$vs$editor$browser$widget$codeEditorContributions.js.map
