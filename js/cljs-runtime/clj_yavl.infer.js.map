{"version":3,"sources":["clj_yavl/infer.cljc"],"mappings":";AAIA,4BAAA,5BAAOA,gEAAYC;AAAnB,AACE,GACE,AAACC,yBAASD;AADZ;;AAAA,GAEE,OAASA;AAFX;;AAAA,GAGE,AAACE,yBAASF;AAHZ;;AAAA,GAIE,OAASA;AAJX;;AAAA,GAKE,AAACG,sBAAMH;AALT;;AAAA,AAAA;;;;;;;;AAQF;;;;8BAAA,9BAAMI,oEAGHC;AAHH,AAIE,GAAI,AAACC,cAAID;AACP,IAAME,SAAO,6CAAA,7CAACC,kDAAQH;IAChBI,WAAS,6CAAA,7CAACC,+EAAS,AAACC,sDAAOC,iEAAKL;IAChCM,QAAM,iBAAAC,qBAAA,oDAAAC;AAAA,AAAA,YAAAC,kBAAA,KAAA;AAAA,AAAA,IAAAD,eAAAA;;AAAA,AAAA,IAAAE,qBAAA,AAAAX,cAAAS;AAAA,AAAA,GAAAE;AAAA,AAAA,IAAAF,eAAAE;AAAA,AAAA,GAAA,AAAAC,6BAAAH;AAAA,IAAAI,kBAi8EmC,AAAAwB,sBAAA5B;IAj8EnCK,qBAAA,AAAAC,gBAAAF;IAAAG,WAAA,AAAAC,uBAAAH;AAAA,AAAA,GAAA,AAAA,iBAAAI,WAAA;;AAAA,AAAA,GAAA,CAAAA,WAAAJ;AAAA,QAAA,AAAAK,eAAAN,gBAAAK,nCAAMU;AAAN,AAAA,AAAA,AAAAR,uBAAAJ,SACE,iBAAMa,SAAO,6CAAA,7CAACE;kBAADD;AAAA,AAAO,mDAAAA,5CAACE,6DAAMJ;;CAAG3B;IACxBgC,QAAM,6CAAA,7CAAC7B,+EAAS,AAAC8B,4CAAIzC,0BAAWoC;IAChCM,aAAW,8FAAA,0DAAA,uFAAA,mDAAA,4FAAA,wDAAA,wFAAA,oDAAA,wFAAA,oDAAA,gGAAA,4DAAA,AAAA,x2BACE,gCAAA,hCAACC,0BAAUH,8HACX,gCAAA,hCAACG,0BAAUH,gHACX,gCAAA,hCAACG,0BAAUH,0HACX,gCAAA,hCAACG,0BAAUH,kHACX,gCAAA,hCAACG,0BAAUH,kHACX,gCAAA,hCAACG,0BAAUH;;AAR9B,AAAA,0FAUGL,EAAEO;;;AAXP,eAAA,CAAAjB,WAAA;;;;AAAA;;;;;AAAA,OAAAG,qBAAA,AAAAC,gBAAAN,UAAA,AAAAO,0CAAA,AAAAC,qBAAAf;;AAAA,OAAAY,qBAAA,AAAAC,gBAAAN,UAAA;;;AAAA,QAAA,AAAAS,gBAAAhB,pBAAMmB;AAAN,AAAA,OAAAF,eACE,iBAAMG,SAAO,6CAAA,7CAACE;kBAADD;AAAA,AAAO,mDAAAA,5CAACE,6DAAMJ;;CAAG3B;IACxBgC,QAAM,6CAAA,7CAAC7B,+EAAS,AAAC8B,4CAAIzC,0BAAWoC;IAChCM,aAAW,8FAAA,0DAAA,uFAAA,mDAAA,4FAAA,wDAAA,wFAAA,oDAAA,wFAAA,oDAAA,gGAAA,4DAAA,AAAA,x2BACE,gCAAA,hCAACC,0BAAUH,8HACX,gCAAA,hCAACG,0BAAUH,gHACX,gCAAA,hCAACG,0BAAUH,0HACX,gCAAA,hCAACG,0BAAUH,kHACX,gCAAA,hCAACG,0BAAUH,kHACX,gCAAA,hCAACG,0BAAUH;;AAR9B,AAAA,0FAUGL,EAAEO;KAXP,AAAAZ,0CAAA,AAAAI,eAAAlB;;;AAAA;;;;GAAA,KAAA;;AAAA,AAAA,OAAAD,mBAAQL;;AAFpB,AAcE,oDAAA,mFAAA,hIAACC,2LAAYG;;AAfjB,0FAAA","names":["clj-yavl.infer/infer-type","value","cljs.core/integer?","cljs.core/boolean?","cljs.core/inst?","clj-yavl.infer/infer-schema","data","cljs.core/seq","sample","cljs.core.take","keys-set","cljs.core.into","cljs.core.mapcat","cljs.core/keys","props","iter__5503__auto__","s__28440","cljs.core/LazySeq","temp__5825__auto__","cljs.core/chunked-seq?","c__5501__auto__","size__5502__auto__","cljs.core/count","b__28442","cljs.core/chunk-buffer","i__28441","cljs.core/-nth","cljs.core/chunk-append","cljs.core/chunk-cons","cljs.core/chunk","iter__28439","cljs.core/chunk-rest","cljs.core/first","cljs.core/cons","cljs.core/rest","k","values","p1__28438#","cljs.core.keep","cljs.core.get","types","cljs.core.map","final-type","cljs.core/contains?","cljs.core/chunk-first"],"sourcesContent":["(ns clj-yavl.infer\n  (:require [malli.core :as m]\n            [clojure.string :as str]))\n\n(defn- infer-type [value]\n  (cond\n    (integer? value) :int\n    (number? value) :double\n    (boolean? value) :boolean\n    (string? value) :string\n    (inst? value) :inst\n    :else :any))\n\n(defn infer-schema\n  \"Infers a Malli schema from a list of data maps.\n   Uses the first 10 items to determine keys and types, prioritizing more specific types.\"\n  [data]\n  (if (seq data)\n    (let [sample (take 10 data)\n          keys-set (into #{} (mapcat keys sample))\n          props (for [k keys-set]\n                  (let [values (keep #(get % k) sample)\n                        types (into #{} (map infer-type values))\n                        final-type (cond\n                                     (contains? types :string) :string ;; If any string, treat as string (e.g. mixed types)\n                                     (contains? types :any) :any\n                                     (contains? types :double) :double\n                                     (contains? types :int) :int\n                                     (contains? types :inst) :inst\n                                     (contains? types :boolean) :boolean\n                                     :else :any)]\n                    [k final-type]))]\n      (into [:map] props))\n    [:map]))\n"]}