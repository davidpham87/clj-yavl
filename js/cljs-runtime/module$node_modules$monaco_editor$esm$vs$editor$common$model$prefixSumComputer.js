shadow$provide.module$node_modules$monaco_editor$esm$vs$editor$common$model$prefixSumComputer = function(require, module, exports) {
  Object.defineProperties(exports, {__esModule:{enumerable:!0, value:!0}, ConstantTimePrefixSumComputer:{enumerable:!0, get:function() {
    return ConstantTimePrefixSumComputer;
  }}, PrefixSumComputer:{enumerable:!0, get:function() {
    return PrefixSumComputer;
  }}, PrefixSumIndexOfResult:{enumerable:!0, get:function() {
    return PrefixSumIndexOfResult;
  }}});
  var require$_DOT__DOT__SLASH__DOT__DOT__SLASH__DOT__DOT__SLASH_base_SLASH_common_SLASH_arrays_DOT_js = require("module$node_modules$monaco_editor$esm$vs$base$common$arrays"), require$_DOT__DOT__SLASH__DOT__DOT__SLASH__DOT__DOT__SLASH_base_SLASH_common_SLASH_uint_DOT_js = require("module$node_modules$monaco_editor$esm$vs$base$common$uint");
  class PrefixSumComputer {
    constructor(values) {
      this.values = values;
      this.prefixSum = new Uint32Array(values.length);
      this.prefixSumValidIndex = new Int32Array(1);
      this.prefixSumValidIndex[0] = -1;
    }
    insertValues(insertIndex, insertValues) {
      insertIndex = (0,require$_DOT__DOT__SLASH__DOT__DOT__SLASH__DOT__DOT__SLASH_base_SLASH_common_SLASH_uint_DOT_js.toUint32)(insertIndex);
      const oldValues = this.values, oldPrefixSum = this.prefixSum, insertValuesLen = insertValues.length;
      if (insertValuesLen === 0) {
        return !1;
      }
      this.values = new Uint32Array(oldValues.length + insertValuesLen);
      this.values.set(oldValues.subarray(0, insertIndex), 0);
      this.values.set(oldValues.subarray(insertIndex), insertIndex + insertValuesLen);
      this.values.set(insertValues, insertIndex);
      insertIndex - 1 < this.prefixSumValidIndex[0] && (this.prefixSumValidIndex[0] = insertIndex - 1);
      this.prefixSum = new Uint32Array(this.values.length);
      this.prefixSumValidIndex[0] >= 0 && this.prefixSum.set(oldPrefixSum.subarray(0, this.prefixSumValidIndex[0] + 1));
      return !0;
    }
    setValue(index, value) {
      index = (0,require$_DOT__DOT__SLASH__DOT__DOT__SLASH__DOT__DOT__SLASH_base_SLASH_common_SLASH_uint_DOT_js.toUint32)(index);
      value = (0,require$_DOT__DOT__SLASH__DOT__DOT__SLASH__DOT__DOT__SLASH_base_SLASH_common_SLASH_uint_DOT_js.toUint32)(value);
      if (this.values[index] === value) {
        return !1;
      }
      this.values[index] = value;
      index - 1 < this.prefixSumValidIndex[0] && (this.prefixSumValidIndex[0] = index - 1);
      return !0;
    }
    removeValues(startIndex, count) {
      startIndex = (0,require$_DOT__DOT__SLASH__DOT__DOT__SLASH__DOT__DOT__SLASH_base_SLASH_common_SLASH_uint_DOT_js.toUint32)(startIndex);
      count = (0,require$_DOT__DOT__SLASH__DOT__DOT__SLASH__DOT__DOT__SLASH_base_SLASH_common_SLASH_uint_DOT_js.toUint32)(count);
      const oldValues = this.values, oldPrefixSum = this.prefixSum;
      if (startIndex >= oldValues.length) {
        return !1;
      }
      const maxCount = oldValues.length - startIndex;
      count >= maxCount && (count = maxCount);
      if (count === 0) {
        return !1;
      }
      this.values = new Uint32Array(oldValues.length - count);
      this.values.set(oldValues.subarray(0, startIndex), 0);
      this.values.set(oldValues.subarray(startIndex + count), startIndex);
      this.prefixSum = new Uint32Array(this.values.length);
      startIndex - 1 < this.prefixSumValidIndex[0] && (this.prefixSumValidIndex[0] = startIndex - 1);
      this.prefixSumValidIndex[0] >= 0 && this.prefixSum.set(oldPrefixSum.subarray(0, this.prefixSumValidIndex[0] + 1));
      return !0;
    }
    getTotalSum() {
      return this.values.length === 0 ? 0 : this._getPrefixSum(this.values.length - 1);
    }
    getPrefixSum(index) {
      if (index < 0) {
        return 0;
      }
      index = (0,require$_DOT__DOT__SLASH__DOT__DOT__SLASH__DOT__DOT__SLASH_base_SLASH_common_SLASH_uint_DOT_js.toUint32)(index);
      return this._getPrefixSum(index);
    }
    _getPrefixSum(index) {
      if (index <= this.prefixSumValidIndex[0]) {
        return this.prefixSum[index];
      }
      var startIndex = this.prefixSumValidIndex[0] + 1;
      startIndex === 0 && (this.prefixSum[0] = this.values[0], startIndex++);
      for (index >= this.values.length && (index = this.values.length - 1); startIndex <= index; startIndex++) {
        this.prefixSum[startIndex] = this.prefixSum[startIndex - 1] + this.values[startIndex];
      }
      this.prefixSumValidIndex[0] = Math.max(this.prefixSumValidIndex[0], index);
      return this.prefixSum[index];
    }
    getIndexOf(sum) {
      sum = Math.floor(sum);
      this.getTotalSum();
      let low = 0, high = this.values.length - 1, mid = 0, midStop, midStart = 0;
      for (; low <= high;) {
        if (mid = low + (high - low) / 2 | 0, midStop = this.prefixSum[mid], midStart = midStop - this.values[mid], sum < midStart) {
          high = mid - 1;
        } else if (sum >= midStop) {
          low = mid + 1;
        } else {
          break;
        }
      }
      return new PrefixSumIndexOfResult(mid, sum - midStart);
    }
  }
  class ConstantTimePrefixSumComputer {
    constructor(values) {
      this._values = values;
      this._isValid = !1;
      this._validEndIndex = -1;
      this._prefixSum = [];
      this._indexBySum = [];
    }
    getTotalSum() {
      this._ensureValid();
      return this._indexBySum.length;
    }
    getPrefixSum(count) {
      this._ensureValid();
      return count === 0 ? 0 : this._prefixSum[count - 1];
    }
    getIndexOf(sum) {
      this._ensureValid();
      const idx = this._indexBySum[sum];
      return new PrefixSumIndexOfResult(idx, sum - (idx > 0 ? this._prefixSum[idx - 1] : 0));
    }
    removeValues(start, deleteCount) {
      this._values.splice(start, deleteCount);
      this._invalidate(start);
    }
    insertValues(insertIndex, insertArr) {
      this._values = (0,require$_DOT__DOT__SLASH__DOT__DOT__SLASH__DOT__DOT__SLASH_base_SLASH_common_SLASH_arrays_DOT_js.arrayInsert)(this._values, insertIndex, insertArr);
      this._invalidate(insertIndex);
    }
    _invalidate(index) {
      this._isValid = !1;
      this._validEndIndex = Math.min(this._validEndIndex, index - 1);
    }
    _ensureValid() {
      if (!this._isValid) {
        for (let i = this._validEndIndex + 1, len = this._values.length; i < len; i++) {
          const value = this._values[i], sumAbove = i > 0 ? this._prefixSum[i - 1] : 0;
          this._prefixSum[i] = sumAbove + value;
          for (let j = 0; j < value; j++) {
            this._indexBySum[sumAbove + j] = i;
          }
        }
        this._prefixSum.length = this._values.length;
        this._indexBySum.length = this._prefixSum[this._prefixSum.length - 1];
        this._isValid = !0;
        this._validEndIndex = this._values.length - 1;
      }
    }
    setValue(index, value) {
      this._values[index] !== value && (this._values[index] = value, this._invalidate(index));
    }
  }
  class PrefixSumIndexOfResult {
    constructor(index, remainder) {
      this.index = index;
      this.remainder = remainder;
      this._prefixSumIndexOfResultBrand = void 0;
      this.index = index;
      this.remainder = remainder;
    }
  }
};

//# sourceMappingURL=module$node_modules$monaco_editor$esm$vs$editor$common$model$prefixSumComputer.js.map
