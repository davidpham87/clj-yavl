shadow$provide.module$node_modules$monaco_editor$esm$vs$editor$common$languages$languageConfigurationRegistry = function(require, module, exports) {
  function validateBracketPairs(data) {
    if (Array.isArray(data)) {
      return data.map(pair => {
        if (Array.isArray(pair) && pair.length === 2) {
          return [pair[0], pair[1]];
        }
      }).filter(p => !!p);
    }
  }
  function getIndentationAtPosition(model, lineNumber, column) {
    model = model.getLineContent(lineNumber);
    model = strings.getLeadingWhitespace(model);
    model.length > column - 1 && (model = model.substring(0, column - 1));
    return model;
  }
  function getScopedLineTokens(model, lineNumber, columnNumber) {
    model.tokenization.forceTokenization(lineNumber);
    const lineTokens = model.tokenization.getLineTokens(lineNumber);
    model = typeof columnNumber === "undefined" ? model.getLineMaxColumn(lineNumber) - 1 : columnNumber - 1;
    return (0,require$_DOT__SLASH_supports_DOT_js.createScopedLineTokens)(lineTokens, model);
  }
  function combineLanguageConfigurations(configs) {
    let result = {comments:void 0, brackets:void 0, wordPattern:void 0, indentationRules:void 0, onEnterRules:void 0, autoClosingPairs:void 0, surroundingPairs:void 0, autoCloseBefore:void 0, folding:void 0, colorizedBracketPairs:void 0, __electricCharacterSupport:void 0};
    for (const entry of configs) {
      result = {comments:entry.comments || result.comments, brackets:entry.brackets || result.brackets, wordPattern:entry.wordPattern || result.wordPattern, indentationRules:entry.indentationRules || result.indentationRules, onEnterRules:entry.onEnterRules || result.onEnterRules, autoClosingPairs:entry.autoClosingPairs || result.autoClosingPairs, surroundingPairs:entry.surroundingPairs || result.surroundingPairs, autoCloseBefore:entry.autoCloseBefore || result.autoCloseBefore, folding:entry.folding || 
      result.folding, colorizedBracketPairs:entry.colorizedBracketPairs || result.colorizedBracketPairs, __electricCharacterSupport:entry.__electricCharacterSupport || result.__electricCharacterSupport};
    }
    return result;
  }
  Object.defineProperties(exports, {__esModule:{enumerable:!0, value:!0}, ILanguageConfigurationService:{enumerable:!0, get:function() {
    return ILanguageConfigurationService;
  }}, LanguageConfigurationChangeEvent:{enumerable:!0, get:function() {
    return LanguageConfigurationChangeEvent;
  }}, LanguageConfigurationRegistry:{enumerable:!0, get:function() {
    return LanguageConfigurationRegistry;
  }}, LanguageConfigurationService:{enumerable:!0, get:function() {
    return LanguageConfigurationService;
  }}, LanguageConfigurationServiceChangeEvent:{enumerable:!0, get:function() {
    return LanguageConfigurationServiceChangeEvent;
  }}, ResolvedLanguageConfiguration:{enumerable:!0, get:function() {
    return ResolvedLanguageConfiguration;
  }}, getIndentationAtPosition:{enumerable:!0, get:function() {
    return getIndentationAtPosition;
  }}, getScopedLineTokens:{enumerable:!0, get:function() {
    return getScopedLineTokens;
  }}});
  var require$_DOT__DOT__SLASH__DOT__DOT__SLASH__DOT__DOT__SLASH_base_SLASH_common_SLASH_event_DOT_js = require("module$node_modules$monaco_editor$esm$vs$base$common$event"), require$_DOT__DOT__SLASH__DOT__DOT__SLASH__DOT__DOT__SLASH_base_SLASH_common_SLASH_lifecycle_DOT_js = require("module$node_modules$monaco_editor$esm$vs$base$common$lifecycle"), strings = require("module$node_modules$monaco_editor$esm$vs$base$common$strings"), require$_DOT__DOT__SLASH_core_SLASH_wordHelper_DOT_js = require("module$node_modules$monaco_editor$esm$vs$editor$common$core$wordHelper"), 
  require$_DOT__SLASH_languageConfiguration_DOT_js = require("module$node_modules$monaco_editor$esm$vs$editor$common$languages$languageConfiguration"), require$_DOT__SLASH_supports_DOT_js = require("module$node_modules$monaco_editor$esm$vs$editor$common$languages$supports"), require$_DOT__SLASH_supports_SLASH_characterPair_DOT_js = require("module$node_modules$monaco_editor$esm$vs$editor$common$languages$supports$characterPair"), require$_DOT__SLASH_supports_SLASH_electricCharacter_DOT_js = require("module$node_modules$monaco_editor$esm$vs$editor$common$languages$supports$electricCharacter"), 
  require$_DOT__SLASH_supports_SLASH_indentRules_DOT_js = require("module$node_modules$monaco_editor$esm$vs$editor$common$languages$supports$indentRules"), require$_DOT__SLASH_supports_SLASH_onEnter_DOT_js = require("module$node_modules$monaco_editor$esm$vs$editor$common$languages$supports$onEnter"), require$_DOT__SLASH_supports_SLASH_richEditBrackets_DOT_js = require("module$node_modules$monaco_editor$esm$vs$editor$common$languages$supports$richEditBrackets");
  module = require("module$node_modules$monaco_editor$esm$vs$platform$instantiation$common$instantiation");
  exports = require("module$node_modules$monaco_editor$esm$vs$platform$configuration$common$configuration");
  var require$_DOT__SLASH_language_DOT_js = require("module$node_modules$monaco_editor$esm$vs$editor$common$languages$language"), require$_DOT__DOT__SLASH__DOT__DOT__SLASH__DOT__DOT__SLASH_platform_SLASH_instantiation_SLASH_common_SLASH_extensions_DOT_js = require("module$node_modules$monaco_editor$esm$vs$platform$instantiation$common$extensions"), require$_DOT__SLASH_modesRegistry_DOT_js = require("module$node_modules$monaco_editor$esm$vs$editor$common$languages$modesRegistry"), require$_DOT__SLASH_supports_SLASH_languageBracketsConfiguration_DOT_js = 
  require("module$node_modules$monaco_editor$esm$vs$editor$common$languages$supports$languageBracketsConfiguration");
  require = this && this.__decorate || function(decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") {
      r = Reflect.decorate(decorators, target, key, desc);
    } else {
      for (var i = decorators.length - 1; i >= 0; i--) {
        if (d = decorators[i]) {
          r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
        }
      }
    }
    return c > 3 && r && Object.defineProperty(target, key, r), r;
  };
  var __param = this && this.__param || function(paramIndex, decorator) {
    return function(target, key) {
      decorator(target, key, paramIndex);
    };
  };
  class LanguageConfigurationServiceChangeEvent {
    constructor(languageId) {
      this.languageId = languageId;
    }
    affects(languageId) {
      return this.languageId ? this.languageId === languageId : !0;
    }
  }
  const ILanguageConfigurationService = (0,module.createDecorator)("languageConfigurationService");
  let LanguageConfigurationService = class extends require$_DOT__DOT__SLASH__DOT__DOT__SLASH__DOT__DOT__SLASH_base_SLASH_common_SLASH_lifecycle_DOT_js.Disposable {
    constructor(configurationService, languageService) {
      super();
      this.configurationService = configurationService;
      this.languageService = languageService;
      this._registry = this._register(new LanguageConfigurationRegistry());
      this.onDidChangeEmitter = this._register(new require$_DOT__DOT__SLASH__DOT__DOT__SLASH__DOT__DOT__SLASH_base_SLASH_common_SLASH_event_DOT_js.Emitter());
      this.onDidChange = this.onDidChangeEmitter.event;
      this.configurations = new Map();
      const languageConfigKeys = new Set(Object.values(customizedLanguageConfigKeys));
      this._register(this.configurationService.onDidChangeConfiguration(e => {
        const globalConfigChanged = e.change.keys.some(k => languageConfigKeys.has(k));
        e = e.change.overrides.filter(([, keys]) => keys.some(k => languageConfigKeys.has(k))).map(([overrideLangName]) => overrideLangName);
        if (globalConfigChanged) {
          this.configurations.clear(), this.onDidChangeEmitter.fire(new LanguageConfigurationServiceChangeEvent(void 0));
        } else {
          for (const languageId of e) {
            this.languageService.isRegisteredLanguageId(languageId) && (this.configurations.delete(languageId), this.onDidChangeEmitter.fire(new LanguageConfigurationServiceChangeEvent(languageId)));
          }
        }
      }));
      this._register(this._registry.onDidChange(e => {
        this.configurations.delete(e.languageId);
        this.onDidChangeEmitter.fire(new LanguageConfigurationServiceChangeEvent(e.languageId));
      }));
    }
    register(languageId, configuration, priority) {
      return this._registry.register(languageId, configuration, priority);
    }
    getLanguageConfiguration(languageId$jscomp$0) {
      var result = this.configurations.get(languageId$jscomp$0);
      if (!result) {
        a: {
          var configurationService = this.configurationService, languageService = this.languageService;
          result = this._registry.getLanguageConfiguration(languageId$jscomp$0);
          if (!result) {
            if (!languageService.isRegisteredLanguageId(languageId$jscomp$0)) {
              result = new ResolvedLanguageConfiguration(languageId$jscomp$0, {});
              break a;
            }
            result = new ResolvedLanguageConfiguration(languageId$jscomp$0, {});
          }
          var languageId = result.languageId;
          languageService = configurationService.getValue(customizedLanguageConfigKeys.brackets, {overrideIdentifier:languageId});
          configurationService = configurationService.getValue(customizedLanguageConfigKeys.colorizedBracketPairs, {overrideIdentifier:languageId});
          configurationService = {brackets:validateBracketPairs(languageService), colorizedBracketPairs:validateBracketPairs(configurationService)};
          configurationService = combineLanguageConfigurations([result.underlyingConfig, configurationService]);
          result = new ResolvedLanguageConfiguration(result.languageId, configurationService);
        }
        this.configurations.set(languageId$jscomp$0, result);
      }
      return result;
    }
  };
  LanguageConfigurationService = require([__param(0, exports.IConfigurationService), __param(1, require$_DOT__SLASH_language_DOT_js.ILanguageService)], LanguageConfigurationService);
  const customizedLanguageConfigKeys = {brackets:"editor.language.brackets", colorizedBracketPairs:"editor.language.colorizedBracketPairs"};
  class ComposedLanguageConfiguration {
    constructor(languageId) {
      this.languageId = languageId;
      this._entries = [];
      this._order = 0;
      this._resolved = null;
    }
    register(configuration, priority) {
      const entry = new LanguageConfigurationContribution(configuration, priority, ++this._order);
      this._entries.push(entry);
      this._resolved = null;
      return (0,require$_DOT__DOT__SLASH__DOT__DOT__SLASH__DOT__DOT__SLASH_base_SLASH_common_SLASH_lifecycle_DOT_js.toDisposable)(() => {
        for (let i = 0; i < this._entries.length; i++) {
          if (this._entries[i] === entry) {
            this._entries.splice(i, 1);
            this._resolved = null;
            break;
          }
        }
      });
    }
    getResolvedConfiguration() {
      if (!this._resolved) {
        const config = this._resolve();
        config && (this._resolved = new ResolvedLanguageConfiguration(this.languageId, config));
      }
      return this._resolved;
    }
    _resolve() {
      if (this._entries.length === 0) {
        return null;
      }
      this._entries.sort(LanguageConfigurationContribution.cmp);
      return combineLanguageConfigurations(this._entries.map(e => e.configuration));
    }
  }
  class LanguageConfigurationContribution {
    constructor(configuration, priority, order) {
      this.configuration = configuration;
      this.priority = priority;
      this.order = order;
    }
    static cmp(a, b) {
      return a.priority === b.priority ? a.order - b.order : a.priority - b.priority;
    }
  }
  class LanguageConfigurationChangeEvent {
    constructor(languageId) {
      this.languageId = languageId;
    }
  }
  class LanguageConfigurationRegistry extends require$_DOT__DOT__SLASH__DOT__DOT__SLASH__DOT__DOT__SLASH_base_SLASH_common_SLASH_lifecycle_DOT_js.Disposable {
    constructor() {
      super();
      this._entries = new Map();
      this._onDidChange = this._register(new require$_DOT__DOT__SLASH__DOT__DOT__SLASH__DOT__DOT__SLASH_base_SLASH_common_SLASH_event_DOT_js.Emitter());
      this.onDidChange = this._onDidChange.event;
      this._register(this.register(require$_DOT__SLASH_modesRegistry_DOT_js.PLAINTEXT_LANGUAGE_ID, {brackets:[["(", ")"], ["[", "]"], ["{", "}"]], surroundingPairs:[{open:"{", close:"}"}, {open:"[", close:"]"}, {open:"(", close:")"}, {open:"\x3c", close:"\x3e"}, {open:'"', close:'"'}, {open:"'", close:"'"}, {open:"`", close:"`"}], colorizedBracketPairs:[], folding:{offSide:!0}}, 0));
    }
    register(languageId, configuration, priority = 0) {
      let entries = this._entries.get(languageId);
      entries || (entries = new ComposedLanguageConfiguration(languageId), this._entries.set(languageId, entries));
      const disposable = entries.register(configuration, priority);
      this._onDidChange.fire(new LanguageConfigurationChangeEvent(languageId));
      return (0,require$_DOT__DOT__SLASH__DOT__DOT__SLASH__DOT__DOT__SLASH_base_SLASH_common_SLASH_lifecycle_DOT_js.toDisposable)(() => {
        disposable.dispose();
        this._onDidChange.fire(new LanguageConfigurationChangeEvent(languageId));
      });
    }
    getLanguageConfiguration(languageId) {
      languageId = this._entries.get(languageId);
      return (languageId === null || languageId === void 0 ? void 0 : languageId.getResolvedConfiguration()) || null;
    }
  }
  class ResolvedLanguageConfiguration {
    constructor(languageId, underlyingConfig) {
      this.languageId = languageId;
      this.underlyingConfig = underlyingConfig;
      this._electricCharacter = this._brackets = null;
      this._onEnterSupport = this.underlyingConfig.brackets || this.underlyingConfig.indentationRules || this.underlyingConfig.onEnterRules ? new require$_DOT__SLASH_supports_SLASH_onEnter_DOT_js.OnEnterSupport(this.underlyingConfig) : null;
      this.comments = ResolvedLanguageConfiguration._handleComments(this.underlyingConfig);
      this.characterPair = new require$_DOT__SLASH_supports_SLASH_characterPair_DOT_js.CharacterPairSupport(this.underlyingConfig);
      this.wordDefinition = this.underlyingConfig.wordPattern || require$_DOT__DOT__SLASH_core_SLASH_wordHelper_DOT_js.DEFAULT_WORD_REGEXP;
      this.indentRulesSupport = (this.indentationRules = this.underlyingConfig.indentationRules) ? new require$_DOT__SLASH_supports_SLASH_indentRules_DOT_js.IndentRulesSupport(this.underlyingConfig.indentationRules) : null;
      this.foldingRules = this.underlyingConfig.folding || {};
      this.bracketsNew = new require$_DOT__SLASH_supports_SLASH_languageBracketsConfiguration_DOT_js.LanguageBracketsConfiguration(languageId, this.underlyingConfig);
    }
    getWordDefinition() {
      return (0,require$_DOT__DOT__SLASH_core_SLASH_wordHelper_DOT_js.ensureValidWordDefinition)(this.wordDefinition);
    }
    get brackets() {
      !this._brackets && this.underlyingConfig.brackets && (this._brackets = new require$_DOT__SLASH_supports_SLASH_richEditBrackets_DOT_js.RichEditBrackets(this.languageId, this.underlyingConfig.brackets));
      return this._brackets;
    }
    get electricCharacter() {
      this._electricCharacter || (this._electricCharacter = new require$_DOT__SLASH_supports_SLASH_electricCharacter_DOT_js.BracketElectricCharacterSupport(this.brackets));
      return this._electricCharacter;
    }
    onEnter(autoIndent, previousLineText, beforeEnterText, afterEnterText) {
      return this._onEnterSupport ? this._onEnterSupport.onEnter(autoIndent, previousLineText, beforeEnterText, afterEnterText) : null;
    }
    getAutoClosingPairs() {
      return new require$_DOT__SLASH_languageConfiguration_DOT_js.AutoClosingPairs(this.characterPair.getAutoClosingPairs());
    }
    getAutoCloseBeforeSet(forQuotes) {
      return this.characterPair.getAutoCloseBeforeSet(forQuotes);
    }
    getSurroundingPairs() {
      return this.characterPair.getSurroundingPairs();
    }
    static _handleComments(conf) {
      conf = conf.comments;
      if (!conf) {
        return null;
      }
      const comments = {};
      conf.lineComment && (comments.lineCommentToken = conf.lineComment);
      if (conf.blockComment) {
        const [blockStart, blockEnd] = conf.blockComment;
        comments.blockCommentStartToken = blockStart;
        comments.blockCommentEndToken = blockEnd;
      }
      return comments;
    }
  }
  (0,require$_DOT__DOT__SLASH__DOT__DOT__SLASH__DOT__DOT__SLASH_platform_SLASH_instantiation_SLASH_common_SLASH_extensions_DOT_js.registerSingleton)(ILanguageConfigurationService, LanguageConfigurationService, 1);
};

//# sourceMappingURL=module$node_modules$monaco_editor$esm$vs$editor$common$languages$languageConfigurationRegistry.js.map
