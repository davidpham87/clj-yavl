shadow$provide.module$node_modules$monaco_editor$esm$vs$editor$browser$viewParts$minimap$minimapCharRenderer = function(require, module, exports) {
  Object.defineProperties(exports, {__esModule:{enumerable:!0, value:!0}, MinimapCharRenderer:{enumerable:!0, get:function() {
    return MinimapCharRenderer;
  }}});
  var require$_DOT__SLASH_minimapCharSheet_DOT_js = require("module$node_modules$monaco_editor$esm$vs$editor$browser$viewParts$minimap$minimapCharSheet"), require$_DOT__DOT__SLASH__DOT__DOT__SLASH__DOT__DOT__SLASH__DOT__DOT__SLASH_base_SLASH_common_SLASH_uint_DOT_js = require("module$node_modules$monaco_editor$esm$vs$base$common$uint");
  class MinimapCharRenderer {
    constructor(charData, scale) {
      this.scale = scale;
      this._minimapCharRendererBrand = void 0;
      this.charDataNormal = MinimapCharRenderer.soften(charData, .8);
      this.charDataLight = MinimapCharRenderer.soften(charData, 50 / 60);
    }
    static soften(input, ratio) {
      const result = new Uint8ClampedArray(input.length);
      for (let i = 0, len = input.length; i < len; i++) {
        result[i] = (0,require$_DOT__DOT__SLASH__DOT__DOT__SLASH__DOT__DOT__SLASH__DOT__DOT__SLASH_base_SLASH_common_SLASH_uint_DOT_js.toUint8)(input[i] * ratio);
      }
      return result;
    }
    renderChar(target, dx, dy, chCode, color, foregroundAlpha, backgroundColor, backgroundAlpha, fontScale, useLighterFont, force1pxHeight) {
      const charWidth = 1 * this.scale;
      var charHeight = 2 * this.scale;
      force1pxHeight = force1pxHeight ? 1 : charHeight;
      if (dx + charWidth > target.width || dy + force1pxHeight > target.height) {
        console.warn("bad render request outside image data");
      } else {
        useLighterFont = useLighterFont ? this.charDataLight : this.charDataNormal;
        var charIndex = (0,require$_DOT__SLASH_minimapCharSheet_DOT_js.getCharIndex)(chCode, fontScale);
        chCode = target.width * 4;
        fontScale = backgroundColor.r;
        var backgroundG = backgroundColor.g;
        backgroundColor = backgroundColor.b;
        var deltaR = color.r - fontScale, deltaG = color.g - backgroundG;
        color = color.b - backgroundColor;
        backgroundAlpha = Math.max(foregroundAlpha, backgroundAlpha);
        target = target.data;
        charHeight *= charIndex * charWidth;
        dx = dy * chCode + dx * 4;
        for (dy = 0; dy < force1pxHeight; dy++) {
          charIndex = dx;
          for (let x = 0; x < charWidth; x++) {
            const c = useLighterFont[charHeight++] / 255 * (foregroundAlpha / 255);
            target[charIndex++] = fontScale + deltaR * c;
            target[charIndex++] = backgroundG + deltaG * c;
            target[charIndex++] = backgroundColor + color * c;
            target[charIndex++] = backgroundAlpha;
          }
          dx += chCode;
        }
      }
    }
    blockRenderChar(target, dx, dy, color, foregroundAlpha, backgroundColor, backgroundAlpha, force1pxHeight) {
      const charWidth = 1 * this.scale;
      var charHeight = 2 * this.scale;
      force1pxHeight = force1pxHeight ? 1 : charHeight;
      if (dx + charWidth > target.width || dy + force1pxHeight > target.height) {
        console.warn("bad render request outside image data");
      } else {
        charHeight = target.width * 4;
        var c = foregroundAlpha / 255 * 0.5, backgroundR = backgroundColor.r, backgroundG = backgroundColor.g, backgroundB = backgroundColor.b;
        backgroundColor = backgroundR + (color.r - backgroundR) * c;
        backgroundG += (color.g - backgroundG) * c;
        color = backgroundB + (color.b - backgroundB) * c;
        foregroundAlpha = Math.max(foregroundAlpha, backgroundAlpha);
        target = target.data;
        dx = dy * charHeight + dx * 4;
        for (dy = 0; dy < force1pxHeight; dy++) {
          backgroundAlpha = dx;
          for (c = 0; c < charWidth; c++) {
            target[backgroundAlpha++] = backgroundColor, target[backgroundAlpha++] = backgroundG, target[backgroundAlpha++] = color, target[backgroundAlpha++] = foregroundAlpha;
          }
          dx += charHeight;
        }
      }
    }
  }
};

//# sourceMappingURL=module$node_modules$monaco_editor$esm$vs$editor$browser$viewParts$minimap$minimapCharRenderer.js.map
