shadow$provide.module$node_modules$monaco_editor$esm$vs$editor$browser$widget$multiDiffEditorWidget$multiDiffEditorWidgetImpl = function(require, module, exports) {
  Object.defineProperties(exports, {__esModule:{enumerable:!0, value:!0}, MultiDiffEditorWidgetImpl:{enumerable:!0, get:function() {
    return MultiDiffEditorWidgetImpl;
  }}});
  var require$_DOT__DOT__SLASH__DOT__DOT__SLASH__DOT__DOT__SLASH__DOT__DOT__SLASH_base_SLASH_browser_SLASH_dom_DOT_js = require("module$node_modules$monaco_editor$esm$vs$base$browser$dom"), require$_DOT__DOT__SLASH__DOT__DOT__SLASH__DOT__DOT__SLASH__DOT__DOT__SLASH_base_SLASH_browser_SLASH_ui_SLASH_scrollbar_SLASH_scrollableElement_DOT_js = require("module$node_modules$monaco_editor$esm$vs$base$browser$ui$scrollbar$scrollableElement"), require$_DOT__DOT__SLASH__DOT__DOT__SLASH__DOT__DOT__SLASH__DOT__DOT__SLASH_base_SLASH_common_SLASH_arraysFind_DOT_js = 
  require("module$node_modules$monaco_editor$esm$vs$base$common$arraysFind"), require$_DOT__DOT__SLASH__DOT__DOT__SLASH__DOT__DOT__SLASH__DOT__DOT__SLASH_base_SLASH_common_SLASH_lifecycle_DOT_js = require("module$node_modules$monaco_editor$esm$vs$base$common$lifecycle"), require$_DOT__DOT__SLASH__DOT__DOT__SLASH__DOT__DOT__SLASH__DOT__DOT__SLASH_base_SLASH_common_SLASH_observable_DOT_js = require("module$node_modules$monaco_editor$esm$vs$base$common$observable"), require$_DOT__DOT__SLASH__DOT__DOT__SLASH__DOT__DOT__SLASH__DOT__DOT__SLASH_base_SLASH_common_SLASH_observableInternal_SLASH_base_DOT_js = 
  require("module$node_modules$monaco_editor$esm$vs$base$common$observableInternal$base"), require$_DOT__DOT__SLASH__DOT__DOT__SLASH__DOT__DOT__SLASH__DOT__DOT__SLASH_base_SLASH_common_SLASH_scrollable_DOT_js = require("module$node_modules$monaco_editor$esm$vs$base$common$scrollable");
  require("module$node_modules$monaco_editor$esm$vs$editor$browser$widget$multiDiffEditorWidget$style_css");
  var require$_DOT__DOT__SLASH_diffEditor_SLASH_utils_DOT_js = require("module$node_modules$monaco_editor$esm$vs$editor$browser$widget$diffEditor$utils"), require$_DOT__DOT__SLASH__DOT__DOT__SLASH__DOT__DOT__SLASH_common_SLASH_core_SLASH_offsetRange_DOT_js = require("module$node_modules$monaco_editor$esm$vs$editor$common$core$offsetRange");
  module = require("module$node_modules$monaco_editor$esm$vs$platform$instantiation$common$instantiation");
  var require$_DOT__SLASH_diffEditorItemTemplate_DOT_js = require("module$node_modules$monaco_editor$esm$vs$editor$browser$widget$multiDiffEditorWidget$diffEditorItemTemplate"), require$_DOT__SLASH_objectPool_DOT_js = require("module$node_modules$monaco_editor$esm$vs$editor$browser$widget$multiDiffEditorWidget$objectPool"), require$_DOT__DOT__SLASH__DOT__DOT__SLASH__DOT__DOT__SLASH__DOT__DOT__SLASH_platform_SLASH_contextkey_SLASH_common_SLASH_contextkey_DOT_js = require("module$node_modules$monaco_editor$esm$vs$platform$contextkey$common$contextkey"), 
  require$_DOT__DOT__SLASH__DOT__DOT__SLASH__DOT__DOT__SLASH__DOT__DOT__SLASH_platform_SLASH_instantiation_SLASH_common_SLASH_serviceCollection_DOT_js = require("module$node_modules$monaco_editor$esm$vs$platform$instantiation$common$serviceCollection"), require$_DOT__DOT__SLASH__DOT__DOT__SLASH__DOT__DOT__SLASH_common_SLASH_editorContextKeys_DOT_js = require("module$node_modules$monaco_editor$esm$vs$editor$common$editorContextKeys");
  require = this && this.__param || function(paramIndex, decorator) {
    return function(target, key) {
      decorator(target, key, paramIndex);
    };
  };
  let MultiDiffEditorWidgetImpl = class extends require$_DOT__DOT__SLASH__DOT__DOT__SLASH__DOT__DOT__SLASH__DOT__DOT__SLASH_base_SLASH_common_SLASH_lifecycle_DOT_js.Disposable {
    constructor(_element, _dimension, _viewModel, _workbenchUIElementFactory, _parentContextKeyService, _parentInstantiationService) {
      super();
      this._element = _element;
      this._dimension = _dimension;
      this._viewModel = _viewModel;
      this._workbenchUIElementFactory = _workbenchUIElementFactory;
      this._parentContextKeyService = _parentContextKeyService;
      this._parentInstantiationService = _parentInstantiationService;
      this._elements = (0,require$_DOT__DOT__SLASH__DOT__DOT__SLASH__DOT__DOT__SLASH__DOT__DOT__SLASH_base_SLASH_browser_SLASH_dom_DOT_js.h)("div", {style:{overflowY:"hidden"}}, [(0,require$_DOT__DOT__SLASH__DOT__DOT__SLASH__DOT__DOT__SLASH__DOT__DOT__SLASH_base_SLASH_browser_SLASH_dom_DOT_js.h)("div@content", {style:{overflow:"hidden"}}), (0,require$_DOT__DOT__SLASH__DOT__DOT__SLASH__DOT__DOT__SLASH__DOT__DOT__SLASH_base_SLASH_browser_SLASH_dom_DOT_js.h)("div.monaco-editor@overflowWidgetsDomNode", 
      {})]);
      this._sizeObserver = this._register(new require$_DOT__DOT__SLASH_diffEditor_SLASH_utils_DOT_js.ObservableElementSizeObserver(this._element, void 0));
      this._objectPool = this._register(new require$_DOT__SLASH_objectPool_DOT_js.ObjectPool(data => {
        const template = this._instantiationService.createInstance(require$_DOT__SLASH_diffEditorItemTemplate_DOT_js.DiffEditorItemTemplate, this._elements.content, this._elements.overflowWidgetsDomNode, this._workbenchUIElementFactory);
        template.setData(data);
        return template;
      }));
      this._scrollable = this._register(new require$_DOT__DOT__SLASH__DOT__DOT__SLASH__DOT__DOT__SLASH__DOT__DOT__SLASH_base_SLASH_common_SLASH_scrollable_DOT_js.Scrollable({forceIntegerValues:!1, scheduleAtNextAnimationFrame:cb => (0,require$_DOT__DOT__SLASH__DOT__DOT__SLASH__DOT__DOT__SLASH__DOT__DOT__SLASH_base_SLASH_browser_SLASH_dom_DOT_js.scheduleAtNextAnimationFrame)((0,require$_DOT__DOT__SLASH__DOT__DOT__SLASH__DOT__DOT__SLASH__DOT__DOT__SLASH_base_SLASH_browser_SLASH_dom_DOT_js.getWindow)(this._element), 
      cb), smoothScrollDuration:100}));
      this._scrollableElement = this._register(new require$_DOT__DOT__SLASH__DOT__DOT__SLASH__DOT__DOT__SLASH__DOT__DOT__SLASH_base_SLASH_browser_SLASH_ui_SLASH_scrollbar_SLASH_scrollableElement_DOT_js.SmoothScrollableElement(this._elements.root, {vertical:1, horizontal:1, className:"monaco-component", useShadows:!1}, this._scrollable));
      this.scrollTop = (0,require$_DOT__DOT__SLASH__DOT__DOT__SLASH__DOT__DOT__SLASH__DOT__DOT__SLASH_base_SLASH_common_SLASH_observable_DOT_js.observableFromEvent)(this._scrollableElement.onScroll, () => this._scrollableElement.getScrollPosition().scrollTop);
      this.scrollLeft = (0,require$_DOT__DOT__SLASH__DOT__DOT__SLASH__DOT__DOT__SLASH__DOT__DOT__SLASH_base_SLASH_common_SLASH_observable_DOT_js.observableFromEvent)(this._scrollableElement.onScroll, () => this._scrollableElement.getScrollPosition().scrollLeft);
      this._viewItems = (0,require$_DOT__DOT__SLASH__DOT__DOT__SLASH__DOT__DOT__SLASH__DOT__DOT__SLASH_base_SLASH_common_SLASH_observable_DOT_js.derivedWithStore)(this, (reader, store) => {
        const vm = this._viewModel.read(reader);
        return vm ? vm.items.read(reader).map(d => store.add(new VirtualizedViewItem(d, this._objectPool, this.scrollLeft))) : [];
      });
      this._totalHeight = this._viewItems.map(this, (items, reader) => items.reduce((r, i) => r + i.contentHeight.read(reader), 0));
      this.activeDiffItem = (0,require$_DOT__DOT__SLASH__DOT__DOT__SLASH__DOT__DOT__SLASH__DOT__DOT__SLASH_base_SLASH_common_SLASH_observable_DOT_js.derived)(this, reader => this._viewItems.read(reader).find(i => {
        var _a;
        return (_a = i.template.read(reader)) === null || _a === void 0 ? void 0 : _a.isFocused.read(reader);
      }));
      this.lastActiveDiffItem = (0,require$_DOT__DOT__SLASH__DOT__DOT__SLASH__DOT__DOT__SLASH__DOT__DOT__SLASH_base_SLASH_common_SLASH_observable_DOT_js.derivedObservableWithCache)((reader, lastValue) => {
        var _a;
        return (_a = this.activeDiffItem.read(reader)) !== null && _a !== void 0 ? _a : lastValue;
      });
      this._contextKeyService = this._register(this._parentContextKeyService.createScoped(this._element));
      this._instantiationService = this._parentInstantiationService.createChild(new require$_DOT__DOT__SLASH__DOT__DOT__SLASH__DOT__DOT__SLASH__DOT__DOT__SLASH_platform_SLASH_instantiation_SLASH_common_SLASH_serviceCollection_DOT_js.ServiceCollection([require$_DOT__DOT__SLASH__DOT__DOT__SLASH__DOT__DOT__SLASH__DOT__DOT__SLASH_platform_SLASH_contextkey_SLASH_common_SLASH_contextkey_DOT_js.IContextKeyService, this._contextKeyService]));
      this._contextKeyService.createKey(require$_DOT__DOT__SLASH__DOT__DOT__SLASH__DOT__DOT__SLASH_common_SLASH_editorContextKeys_DOT_js.EditorContextKeys.inMultiDiffEditor.key, !0);
      const ctxAllCollapsed = this._parentContextKeyService.createKey(require$_DOT__DOT__SLASH__DOT__DOT__SLASH__DOT__DOT__SLASH_common_SLASH_editorContextKeys_DOT_js.EditorContextKeys.multiDiffEditorAllCollapsed.key, !1);
      this._register((0,require$_DOT__DOT__SLASH__DOT__DOT__SLASH__DOT__DOT__SLASH__DOT__DOT__SLASH_base_SLASH_common_SLASH_observable_DOT_js.autorun)(reader => {
        var viewModel = this._viewModel.read(reader);
        viewModel && (viewModel = viewModel.items.read(reader).every(item => item.collapsed.read(reader)), ctxAllCollapsed.set(viewModel));
      }));
      this._register((0,require$_DOT__DOT__SLASH__DOT__DOT__SLASH__DOT__DOT__SLASH__DOT__DOT__SLASH_base_SLASH_common_SLASH_observable_DOT_js.autorun)(reader => {
        const lastActiveDiffItem = this.lastActiveDiffItem.read(reader);
        (0,require$_DOT__DOT__SLASH__DOT__DOT__SLASH__DOT__DOT__SLASH__DOT__DOT__SLASH_base_SLASH_common_SLASH_observableInternal_SLASH_base_DOT_js.transaction)(tx => {
          var _a;
          (_a = this._viewModel.read(reader)) === null || _a === void 0 || _a.activeDiffItem.set(lastActiveDiffItem === null || lastActiveDiffItem === void 0 ? void 0 : lastActiveDiffItem.viewModel, tx);
        });
      }));
      this._register((0,require$_DOT__DOT__SLASH__DOT__DOT__SLASH__DOT__DOT__SLASH__DOT__DOT__SLASH_base_SLASH_common_SLASH_observable_DOT_js.autorun)(reader => {
        reader = this._dimension.read(reader);
        this._sizeObserver.observe(reader);
      }));
      this._elements.content.style.position = "relative";
      this._register((0,require$_DOT__DOT__SLASH__DOT__DOT__SLASH__DOT__DOT__SLASH__DOT__DOT__SLASH_base_SLASH_common_SLASH_observable_DOT_js.autorun)(reader => {
        const height = this._sizeObserver.height.read(reader);
        this._elements.root.style.height = `${height}px`;
        const totalHeight = this._totalHeight.read(reader);
        this._elements.content.style.height = `${totalHeight}px`;
        const width = this._sizeObserver.width.read(reader);
        var scrollWidth = width, viewItems = this._viewItems.read(reader);
        if (viewItems = (0,require$_DOT__DOT__SLASH__DOT__DOT__SLASH__DOT__DOT__SLASH__DOT__DOT__SLASH_base_SLASH_common_SLASH_arraysFind_DOT_js.findFirstMaxBy)(viewItems, i => i.maxScroll.read(reader).maxScroll)) {
          scrollWidth = viewItems.maxScroll.read(reader), scrollWidth = width + scrollWidth.maxScroll;
        }
        this._scrollableElement.setScrollDimensions({width, height, scrollHeight:totalHeight, scrollWidth});
      }));
      _element.replaceChildren(this._scrollableElement.getDomNode());
      this._register((0,require$_DOT__DOT__SLASH__DOT__DOT__SLASH__DOT__DOT__SLASH__DOT__DOT__SLASH_base_SLASH_common_SLASH_lifecycle_DOT_js.toDisposable)(() => {
        _element.replaceChildren();
      }));
      this._register(this._register((0,require$_DOT__DOT__SLASH__DOT__DOT__SLASH__DOT__DOT__SLASH__DOT__DOT__SLASH_base_SLASH_common_SLASH_observable_DOT_js.autorun)(reader => {
        (0,require$_DOT__DOT__SLASH__DOT__DOT__SLASH__DOT__DOT__SLASH__DOT__DOT__SLASH_base_SLASH_common_SLASH_observableInternal_SLASH_base_DOT_js.globalTransaction)(tx => {
          this.render(reader);
        });
      })));
    }
    render(reader) {
      const scrollTop = this.scrollTop.read(reader);
      let contentScrollOffsetToScrollOffset = 0, itemHeightSumBefore = 0, itemContentHeightSumBefore = 0;
      const viewPortHeight = this._sizeObserver.height.read(reader), contentViewPort = require$_DOT__DOT__SLASH__DOT__DOT__SLASH__DOT__DOT__SLASH_common_SLASH_core_SLASH_offsetRange_DOT_js.OffsetRange.ofStartAndLength(scrollTop, viewPortHeight), width = this._sizeObserver.width.read(reader);
      for (const v of this._viewItems.read(reader)) {
        const itemContentHeight = v.contentHeight.read(reader), itemHeight = Math.min(itemContentHeight, viewPortHeight), itemRange = require$_DOT__DOT__SLASH__DOT__DOT__SLASH__DOT__DOT__SLASH_common_SLASH_core_SLASH_offsetRange_DOT_js.OffsetRange.ofStartAndLength(itemHeightSumBefore, itemHeight);
        var itemContentRange = require$_DOT__DOT__SLASH__DOT__DOT__SLASH__DOT__DOT__SLASH_common_SLASH_core_SLASH_offsetRange_DOT_js.OffsetRange.ofStartAndLength(itemContentHeightSumBefore, itemContentHeight);
        if (itemContentRange.isBefore(contentViewPort)) {
          contentScrollOffsetToScrollOffset -= itemContentHeight - itemHeight, v.hide();
        } else if (itemContentRange.isAfter(contentViewPort)) {
          v.hide();
        } else {
          itemContentRange = Math.max(0, Math.min(contentViewPort.start - itemContentRange.start, itemContentHeight - itemHeight));
          contentScrollOffsetToScrollOffset -= itemContentRange;
          const viewPort = require$_DOT__DOT__SLASH__DOT__DOT__SLASH__DOT__DOT__SLASH_common_SLASH_core_SLASH_offsetRange_DOT_js.OffsetRange.ofStartAndLength(scrollTop + contentScrollOffsetToScrollOffset, viewPortHeight);
          v.render(itemRange, itemContentRange, width, viewPort);
        }
        itemHeightSumBefore += itemHeight;
        itemContentHeightSumBefore += itemContentHeight;
      }
      this._elements.content.style.transform = `translateY(${-(scrollTop + contentScrollOffsetToScrollOffset)}px)`;
    }
  };
  MultiDiffEditorWidgetImpl = (this && this.__decorate || function(decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") {
      r = Reflect.decorate(decorators, target, key, desc);
    } else {
      for (var i = decorators.length - 1; i >= 0; i--) {
        if (d = decorators[i]) {
          r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
        }
      }
    }
    return c > 3 && r && Object.defineProperty(target, key, r), r;
  })([require(4, require$_DOT__DOT__SLASH__DOT__DOT__SLASH__DOT__DOT__SLASH__DOT__DOT__SLASH_platform_SLASH_contextkey_SLASH_common_SLASH_contextkey_DOT_js.IContextKeyService), require(5, module.IInstantiationService)], MultiDiffEditorWidgetImpl);
  class VirtualizedViewItem extends require$_DOT__DOT__SLASH__DOT__DOT__SLASH__DOT__DOT__SLASH__DOT__DOT__SLASH_base_SLASH_common_SLASH_lifecycle_DOT_js.Disposable {
    constructor(viewModel, _objectPool, _scrollLeft) {
      super();
      this.viewModel = viewModel;
      this._objectPool = _objectPool;
      this._scrollLeft = _scrollLeft;
      this._lastTemplateData = (0,require$_DOT__DOT__SLASH__DOT__DOT__SLASH__DOT__DOT__SLASH__DOT__DOT__SLASH_base_SLASH_common_SLASH_observable_DOT_js.observableValue)(this, {contentHeight:500, maxScroll:{maxScroll:0, width:0}});
      this._templateRef = this._register((0,require$_DOT__DOT__SLASH__DOT__DOT__SLASH__DOT__DOT__SLASH__DOT__DOT__SLASH_base_SLASH_common_SLASH_observableInternal_SLASH_base_DOT_js.disposableObservableValue)(this, void 0));
      this.contentHeight = (0,require$_DOT__DOT__SLASH__DOT__DOT__SLASH__DOT__DOT__SLASH__DOT__DOT__SLASH_base_SLASH_common_SLASH_observable_DOT_js.derived)(this, reader => {
        var _a, _b, _c;
        return (_c = (_b = (_a = this._templateRef.read(reader)) === null || _a === void 0 ? void 0 : _a.object.height) === null || _b === void 0 ? void 0 : _b.read(reader)) !== null && _c !== void 0 ? _c : this._lastTemplateData.read(reader).contentHeight;
      });
      this.maxScroll = (0,require$_DOT__DOT__SLASH__DOT__DOT__SLASH__DOT__DOT__SLASH__DOT__DOT__SLASH_base_SLASH_common_SLASH_observable_DOT_js.derived)(this, reader => {
        var _a, _b;
        return (_b = (_a = this._templateRef.read(reader)) === null || _a === void 0 ? void 0 : _a.object.maxScroll.read(reader)) !== null && _b !== void 0 ? _b : this._lastTemplateData.read(reader).maxScroll;
      });
      this.template = (0,require$_DOT__DOT__SLASH__DOT__DOT__SLASH__DOT__DOT__SLASH__DOT__DOT__SLASH_base_SLASH_common_SLASH_observable_DOT_js.derived)(this, reader => {
        var _a;
        return (_a = this._templateRef.read(reader)) === null || _a === void 0 ? void 0 : _a.object;
      });
      this._isHidden = (0,require$_DOT__DOT__SLASH__DOT__DOT__SLASH__DOT__DOT__SLASH__DOT__DOT__SLASH_base_SLASH_common_SLASH_observable_DOT_js.observableValue)(this, !1);
      this._register((0,require$_DOT__DOT__SLASH__DOT__DOT__SLASH__DOT__DOT__SLASH__DOT__DOT__SLASH_base_SLASH_common_SLASH_observable_DOT_js.autorun)(reader => {
        var _a;
        const scrollLeft = this._scrollLeft.read(reader);
        (_a = this._templateRef.read(reader)) === null || _a === void 0 || _a.object.setScrollLeft(scrollLeft);
      }));
      this._register((0,require$_DOT__DOT__SLASH__DOT__DOT__SLASH__DOT__DOT__SLASH__DOT__DOT__SLASH_base_SLASH_common_SLASH_observable_DOT_js.autorun)(reader => {
        const ref = this._templateRef.read(reader);
        ref && this._isHidden.read(reader) && (ref.object.isFocused.read(reader) || (0,require$_DOT__DOT__SLASH__DOT__DOT__SLASH__DOT__DOT__SLASH__DOT__DOT__SLASH_base_SLASH_common_SLASH_observableInternal_SLASH_base_DOT_js.transaction)(tx => {
          this._lastTemplateData.set({contentHeight:ref.object.height.get(), maxScroll:{maxScroll:0, width:0}}, tx);
          ref.object.hide();
          this._templateRef.set(void 0, tx);
        }));
      }));
    }
    dispose() {
      this.hide();
      super.dispose();
    }
    toString() {
      return `VirtualViewItem(${this.viewModel.entry.value.title})`;
    }
    hide() {
      this._isHidden.set(!0, void 0);
    }
    render(verticalSpace, offset, width, viewPort) {
      this._isHidden.set(!1, void 0);
      let ref = this._templateRef.get();
      ref || (ref = this._objectPool.getUnusedObj(new require$_DOT__SLASH_diffEditorItemTemplate_DOT_js.TemplateData(this.viewModel)), this._templateRef.set(ref, void 0));
      ref.object.render(verticalSpace, width, offset, viewPort);
    }
  }
};

//# sourceMappingURL=module$node_modules$monaco_editor$esm$vs$editor$browser$widget$multiDiffEditorWidget$multiDiffEditorWidgetImpl.js.map
