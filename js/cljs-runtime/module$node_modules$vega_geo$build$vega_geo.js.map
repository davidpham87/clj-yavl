{
"version":3,
"file":"module$node_modules$vega_geo$build$vega_geo.js",
"lineCount":832,
"mappings":"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",
"sources":["node_modules/vega-geo/build/vega-geo.js"],
"sourcesContent":["shadow$provide[\"module$node_modules$vega_geo$build$vega_geo\"] = function(require,module,exports) {\n(function (global, factory) {\n  typeof exports === 'object' && typeof module !== 'undefined' ? factory(exports, require('vega-dataflow'), require('vega-util'), require('vega-statistics'), require('vega-projection'), require('vega-canvas')) :\n  typeof define === 'function' && define.amd ? define(['exports', 'vega-dataflow', 'vega-util', 'vega-statistics', 'vega-projection', 'vega-canvas'], factory) :\n  (global = typeof globalThis !== 'undefined' ? globalThis : global || self, factory((global.vega = global.vega || {}, global.vega.transforms = {}), global.vega, global.vega, global.vega, global.vega, global.vega));\n})(this, (function (exports, vegaDataflow, vegaUtil, vegaStatistics, vegaProjection, vegaCanvas) { 'use strict';\n\n  const e10 = Math.sqrt(50),\n    e5 = Math.sqrt(10),\n    e2 = Math.sqrt(2);\n  function tickSpec(start, stop, count) {\n    const step = (stop - start) / Math.max(0, count),\n      power = Math.floor(Math.log10(step)),\n      error = step / Math.pow(10, power),\n      factor = error >= e10 ? 10 : error >= e5 ? 5 : error >= e2 ? 2 : 1;\n    let i1, i2, inc;\n    if (power < 0) {\n      inc = Math.pow(10, -power) / factor;\n      i1 = Math.round(start * inc);\n      i2 = Math.round(stop * inc);\n      if (i1 / inc < start) ++i1;\n      if (i2 / inc > stop) --i2;\n      inc = -inc;\n    } else {\n      inc = Math.pow(10, power) * factor;\n      i1 = Math.round(start / inc);\n      i2 = Math.round(stop / inc);\n      if (i1 * inc < start) ++i1;\n      if (i2 * inc > stop) --i2;\n    }\n    if (i2 < i1 && 0.5 <= count && count < 2) return tickSpec(start, stop, count * 2);\n    return [i1, i2, inc];\n  }\n  function tickIncrement(start, stop, count) {\n    stop = +stop, start = +start, count = +count;\n    return tickSpec(start, stop, count)[2];\n  }\n  function tickStep(start, stop, count) {\n    stop = +stop, start = +start, count = +count;\n    const reverse = stop < start,\n      inc = reverse ? tickIncrement(stop, start, count) : tickIncrement(start, stop, count);\n    return (reverse ? -1 : 1) * (inc < 0 ? 1 / -inc : inc);\n  }\n\n  function max(values, valueof) {\n    let max;\n    {\n      for (const value of values) {\n        if (value != null && (max < value || max === undefined && value >= value)) {\n          max = value;\n        }\n      }\n    }\n    return max;\n  }\n\n  function range(start, stop, step) {\n    start = +start, stop = +stop, step = (n = arguments.length) < 2 ? (stop = start, start = 0, 1) : n < 3 ? 1 : +step;\n    var i = -1,\n      n = Math.max(0, Math.ceil((stop - start) / step)) | 0,\n      range = new Array(n);\n    while (++i < n) {\n      range[i] = start + i * step;\n    }\n    return range;\n  }\n\n  function sum(values, valueof) {\n    let sum = 0;\n    {\n      for (let value of values) {\n        if (value = +value) {\n          sum += value;\n        }\n      }\n    }\n    return sum;\n  }\n\n  function noop() {}\n  const cases = [[], [[[1.0, 1.5], [0.5, 1.0]]], [[[1.5, 1.0], [1.0, 1.5]]], [[[1.5, 1.0], [0.5, 1.0]]], [[[1.0, 0.5], [1.5, 1.0]]], [[[1.0, 1.5], [0.5, 1.0]], [[1.0, 0.5], [1.5, 1.0]]], [[[1.0, 0.5], [1.0, 1.5]]], [[[1.0, 0.5], [0.5, 1.0]]], [[[0.5, 1.0], [1.0, 0.5]]], [[[1.0, 1.5], [1.0, 0.5]]], [[[0.5, 1.0], [1.0, 0.5]], [[1.5, 1.0], [1.0, 1.5]]], [[[1.5, 1.0], [1.0, 0.5]]], [[[0.5, 1.0], [1.5, 1.0]]], [[[1.0, 1.5], [1.5, 1.0]]], [[[0.5, 1.0], [1.0, 1.5]]], []];\n\n  // Implementation adapted from d3/d3-contour. Thanks!\n  function contours () {\n    var dx = 1,\n      dy = 1,\n      smooth = smoothLinear;\n    function contours(values, tz) {\n      return tz.map(value => contour(values, value));\n    }\n\n    // Accumulate, smooth contour rings, assign holes to exterior rings.\n    // Based on https://github.com/mbostock/shapefile/blob/v0.6.2/shp/polygon.js\n    function contour(values, value) {\n      var polygons = [],\n        holes = [];\n      isorings(values, value, ring => {\n        smooth(ring, values, value);\n        if (area(ring) > 0) polygons.push([ring]);else holes.push(ring);\n      });\n      holes.forEach(hole => {\n        for (var i = 0, n = polygons.length, polygon; i < n; ++i) {\n          if (contains((polygon = polygons[i])[0], hole) !== -1) {\n            polygon.push(hole);\n            return;\n          }\n        }\n      });\n      return {\n        type: 'MultiPolygon',\n        value: value,\n        coordinates: polygons\n      };\n    }\n\n    // Marching squares with isolines stitched into rings.\n    // Based on https://github.com/topojson/topojson-client/blob/v3.0.0/src/stitch.js\n    function isorings(values, value, callback) {\n      var fragmentByStart = [],\n        fragmentByEnd = [],\n        x,\n        y,\n        t0,\n        t1,\n        t2,\n        t3;\n\n      // Special case for the first row (y = -1, t2 = t3 = 0).\n      x = y = -1;\n      t1 = values[0] >= value;\n      cases[t1 << 1].forEach(stitch);\n      while (++x < dx - 1) {\n        t0 = t1, t1 = values[x + 1] >= value;\n        cases[t0 | t1 << 1].forEach(stitch);\n      }\n      cases[t1 << 0].forEach(stitch);\n\n      // General case for the intermediate rows.\n      while (++y < dy - 1) {\n        x = -1;\n        t1 = values[y * dx + dx] >= value;\n        t2 = values[y * dx] >= value;\n        cases[t1 << 1 | t2 << 2].forEach(stitch);\n        while (++x < dx - 1) {\n          t0 = t1, t1 = values[y * dx + dx + x + 1] >= value;\n          t3 = t2, t2 = values[y * dx + x + 1] >= value;\n          cases[t0 | t1 << 1 | t2 << 2 | t3 << 3].forEach(stitch);\n        }\n        cases[t1 | t2 << 3].forEach(stitch);\n      }\n\n      // Special case for the last row (y = dy - 1, t0 = t1 = 0).\n      x = -1;\n      t2 = values[y * dx] >= value;\n      cases[t2 << 2].forEach(stitch);\n      while (++x < dx - 1) {\n        t3 = t2, t2 = values[y * dx + x + 1] >= value;\n        cases[t2 << 2 | t3 << 3].forEach(stitch);\n      }\n      cases[t2 << 3].forEach(stitch);\n      function stitch(line) {\n        var start = [line[0][0] + x, line[0][1] + y],\n          end = [line[1][0] + x, line[1][1] + y],\n          startIndex = index(start),\n          endIndex = index(end),\n          f,\n          g;\n        if (f = fragmentByEnd[startIndex]) {\n          if (g = fragmentByStart[endIndex]) {\n            delete fragmentByEnd[f.end];\n            delete fragmentByStart[g.start];\n            if (f === g) {\n              f.ring.push(end);\n              callback(f.ring);\n            } else {\n              fragmentByStart[f.start] = fragmentByEnd[g.end] = {\n                start: f.start,\n                end: g.end,\n                ring: f.ring.concat(g.ring)\n              };\n            }\n          } else {\n            delete fragmentByEnd[f.end];\n            f.ring.push(end);\n            fragmentByEnd[f.end = endIndex] = f;\n          }\n        } else if (f = fragmentByStart[endIndex]) {\n          if (g = fragmentByEnd[startIndex]) {\n            delete fragmentByStart[f.start];\n            delete fragmentByEnd[g.end];\n            if (f === g) {\n              f.ring.push(end);\n              callback(f.ring);\n            } else {\n              fragmentByStart[g.start] = fragmentByEnd[f.end] = {\n                start: g.start,\n                end: f.end,\n                ring: g.ring.concat(f.ring)\n              };\n            }\n          } else {\n            delete fragmentByStart[f.start];\n            f.ring.unshift(start);\n            fragmentByStart[f.start = startIndex] = f;\n          }\n        } else {\n          fragmentByStart[startIndex] = fragmentByEnd[endIndex] = {\n            start: startIndex,\n            end: endIndex,\n            ring: [start, end]\n          };\n        }\n      }\n    }\n    function index(point) {\n      return point[0] * 2 + point[1] * (dx + 1) * 4;\n    }\n    function smoothLinear(ring, values, value) {\n      ring.forEach(point => {\n        var x = point[0],\n          y = point[1],\n          xt = x | 0,\n          yt = y | 0,\n          v0,\n          v1 = values[yt * dx + xt];\n        if (x > 0 && x < dx && xt === x) {\n          v0 = values[yt * dx + xt - 1];\n          point[0] = x + (value - v0) / (v1 - v0) - 0.5;\n        }\n        if (y > 0 && y < dy && yt === y) {\n          v0 = values[(yt - 1) * dx + xt];\n          point[1] = y + (value - v0) / (v1 - v0) - 0.5;\n        }\n      });\n    }\n    contours.contour = contour;\n    contours.size = function (_) {\n      if (!arguments.length) return [dx, dy];\n      var _0 = Math.floor(_[0]),\n        _1 = Math.floor(_[1]);\n      if (!(_0 >= 0 && _1 >= 0)) vegaUtil.error('invalid size');\n      return dx = _0, dy = _1, contours;\n    };\n    contours.smooth = function (_) {\n      return arguments.length ? (smooth = _ ? smoothLinear : noop, contours) : smooth === smoothLinear;\n    };\n    return contours;\n  }\n  function area(ring) {\n    var i = 0,\n      n = ring.length,\n      area = ring[n - 1][1] * ring[0][0] - ring[n - 1][0] * ring[0][1];\n    while (++i < n) area += ring[i - 1][1] * ring[i][0] - ring[i - 1][0] * ring[i][1];\n    return area;\n  }\n  function contains(ring, hole) {\n    var i = -1,\n      n = hole.length,\n      c;\n    while (++i < n) if (c = ringContains(ring, hole[i])) return c;\n    return 0;\n  }\n  function ringContains(ring, point) {\n    var x = point[0],\n      y = point[1],\n      contains = -1;\n    for (var i = 0, n = ring.length, j = n - 1; i < n; j = i++) {\n      var pi = ring[i],\n        xi = pi[0],\n        yi = pi[1],\n        pj = ring[j],\n        xj = pj[0],\n        yj = pj[1];\n      if (segmentContains(pi, pj, point)) return 0;\n      if (yi > y !== yj > y && x < (xj - xi) * (y - yi) / (yj - yi) + xi) contains = -contains;\n    }\n    return contains;\n  }\n  function segmentContains(a, b, c) {\n    var i;\n    return collinear(a, b, c) && within(a[i = +(a[0] === b[0])], c[i], b[i]);\n  }\n  function collinear(a, b, c) {\n    return (b[0] - a[0]) * (c[1] - a[1]) === (c[0] - a[0]) * (b[1] - a[1]);\n  }\n  function within(p, q, r) {\n    return p <= q && q <= r || r <= q && q <= p;\n  }\n\n  function quantize (k, nice, zero) {\n    return function (values) {\n      var ex = vegaUtil.extent(values),\n        start = zero ? Math.min(ex[0], 0) : ex[0],\n        stop = ex[1],\n        span = stop - start,\n        step = nice ? tickStep(start, stop, k) : span / (k + 1);\n      return range(start + step, stop, step);\n    };\n  }\n\n  /**\n   * Generate isocontours (level sets) based on input raster grid data.\n   * @constructor\n   * @param {object} params - The parameters for this operator.\n   * @param {function(object): *} [params.field] - The field with raster grid\n   *   data. If unspecified, the tuple itself is interpreted as a raster grid.\n   * @param {Array<number>} [params.thresholds] - Contour threshold array. If\n   *   specified, the levels, nice, resolve, and zero parameters are ignored.\n   * @param {number} [params.levels] - The desired number of contour levels.\n   * @param {boolean} [params.nice] - Boolean flag indicating if the contour\n   *   threshold values should be automatically aligned to \"nice\"\n   *   human-friendly values. Setting this flag may cause the number of\n   *   thresholds to deviate from the specified levels.\n   * @param {string} [params.resolve] - The method for resolving thresholds\n   *   across multiple input grids. If 'independent' (the default), threshold\n   *   calculation will be performed separately for each grid. If 'shared', a\n   *   single set of threshold values will be used for all input grids.\n   * @param {boolean} [params.zero] - Boolean flag indicating if the contour\n   *   threshold values should include zero.\n   * @param {boolean} [params.smooth] - Boolean flag indicating if the contour\n   *   polygons should be smoothed using linear interpolation. The default is\n   *   true. The parameter is ignored when using density estimation.\n   * @param {boolean} [params.scale] - Optional numerical value by which to\n   *   scale the output isocontour coordinates. This parameter can be useful\n   *   to scale the contours to match a desired output resolution.\n   * @param {string} [params.as='contour'] - The output field in which to store\n   *   the generated isocontour data (default 'contour').\n   */\n  function Isocontour(params) {\n    vegaDataflow.Transform.call(this, null, params);\n  }\n  Isocontour.Definition = {\n    'type': 'Isocontour',\n    'metadata': {\n      'generates': true\n    },\n    'params': [{\n      'name': 'field',\n      'type': 'field'\n    }, {\n      'name': 'thresholds',\n      'type': 'number',\n      'array': true\n    }, {\n      'name': 'levels',\n      'type': 'number'\n    }, {\n      'name': 'nice',\n      'type': 'boolean',\n      'default': false\n    }, {\n      'name': 'resolve',\n      'type': 'enum',\n      'values': ['shared', 'independent'],\n      'default': 'independent'\n    }, {\n      'name': 'zero',\n      'type': 'boolean',\n      'default': true\n    }, {\n      'name': 'smooth',\n      'type': 'boolean',\n      'default': true\n    }, {\n      'name': 'scale',\n      'type': 'number',\n      'expr': true\n    }, {\n      'name': 'translate',\n      'type': 'number',\n      'array': true,\n      'expr': true\n    }, {\n      'name': 'as',\n      'type': 'string',\n      'null': true,\n      'default': 'contour'\n    }]\n  };\n  vegaUtil.inherits(Isocontour, vegaDataflow.Transform, {\n    transform(_, pulse) {\n      if (this.value && !pulse.changed() && !_.modified()) {\n        return pulse.StopPropagation;\n      }\n      var out = pulse.fork(pulse.NO_SOURCE | pulse.NO_FIELDS),\n        source = pulse.materialize(pulse.SOURCE).source,\n        field = _.field || vegaUtil.identity,\n        contour = contours().smooth(_.smooth !== false),\n        tz = _.thresholds || levels(source, field, _),\n        as = _.as === null ? null : _.as || 'contour',\n        values = [];\n      source.forEach(t => {\n        const grid = field(t);\n\n        // generate contour paths in GeoJSON format\n        const paths = contour.size([grid.width, grid.height])(grid.values, vegaUtil.isArray(tz) ? tz : tz(grid.values));\n\n        // adjust contour path coordinates as needed\n        transformPaths(paths, grid, t, _);\n\n        // ingest; copy source data properties to output\n        paths.forEach(p => {\n          values.push(vegaDataflow.rederive(t, vegaDataflow.ingest(as != null ? {\n            [as]: p\n          } : p)));\n        });\n      });\n      if (this.value) out.rem = this.value;\n      this.value = out.source = out.add = values;\n      return out;\n    }\n  });\n  function levels(values, f, _) {\n    const q = quantize(_.levels || 10, _.nice, _.zero !== false);\n    return _.resolve !== 'shared' ? q : q(values.map(t => max(f(t).values)));\n  }\n  function transformPaths(paths, grid, datum, _) {\n    let s = _.scale || grid.scale,\n      t = _.translate || grid.translate;\n    if (vegaUtil.isFunction(s)) s = s(datum, _);\n    if (vegaUtil.isFunction(t)) t = t(datum, _);\n    if ((s === 1 || s == null) && !t) return;\n    const sx = (vegaUtil.isNumber(s) ? s : s[0]) || 1,\n      sy = (vegaUtil.isNumber(s) ? s : s[1]) || 1,\n      tx = t && t[0] || 0,\n      ty = t && t[1] || 0;\n    paths.forEach(transform(grid, sx, sy, tx, ty));\n  }\n  function transform(grid, sx, sy, tx, ty) {\n    const x1 = grid.x1 || 0,\n      y1 = grid.y1 || 0,\n      flip = sx * sy < 0;\n    function transformPolygon(coordinates) {\n      coordinates.forEach(transformRing);\n    }\n    function transformRing(coordinates) {\n      if (flip) coordinates.reverse(); // maintain winding order\n      coordinates.forEach(transformPoint);\n    }\n    function transformPoint(coordinates) {\n      coordinates[0] = (coordinates[0] - x1) * sx + tx;\n      coordinates[1] = (coordinates[1] - y1) * sy + ty;\n    }\n    return function (geometry) {\n      geometry.coordinates.forEach(transformPolygon);\n      return geometry;\n    };\n  }\n\n  function radius(bw, data, f) {\n    const v = bw >= 0 ? bw : vegaStatistics.bandwidthNRD(data, f);\n    return Math.round((Math.sqrt(4 * v * v + 1) - 1) / 2);\n  }\n  function number(_) {\n    return vegaUtil.isFunction(_) ? _ : vegaUtil.constant(+_);\n  }\n\n  // Implementation adapted from d3/d3-contour. Thanks!\n  function density2D () {\n    var x = d => d[0],\n      y = d => d[1],\n      weight = vegaUtil.one,\n      bandwidth = [-1, -1],\n      dx = 960,\n      dy = 500,\n      k = 2; // log2(cellSize)\n\n    function density(data, counts) {\n      const rx = radius(bandwidth[0], data, x) >> k,\n        // blur x-radius\n        ry = radius(bandwidth[1], data, y) >> k,\n        // blur y-radius\n        ox = rx ? rx + 2 : 0,\n        // x-offset padding for blur\n        oy = ry ? ry + 2 : 0,\n        // y-offset padding for blur\n        n = 2 * ox + (dx >> k),\n        // grid width\n        m = 2 * oy + (dy >> k),\n        // grid height\n        values0 = new Float32Array(n * m),\n        values1 = new Float32Array(n * m);\n      let values = values0;\n      data.forEach(d => {\n        const xi = ox + (+x(d) >> k),\n          yi = oy + (+y(d) >> k);\n        if (xi >= 0 && xi < n && yi >= 0 && yi < m) {\n          values0[xi + yi * n] += +weight(d);\n        }\n      });\n      if (rx > 0 && ry > 0) {\n        blurX(n, m, values0, values1, rx);\n        blurY(n, m, values1, values0, ry);\n        blurX(n, m, values0, values1, rx);\n        blurY(n, m, values1, values0, ry);\n        blurX(n, m, values0, values1, rx);\n        blurY(n, m, values1, values0, ry);\n      } else if (rx > 0) {\n        blurX(n, m, values0, values1, rx);\n        blurX(n, m, values1, values0, rx);\n        blurX(n, m, values0, values1, rx);\n        values = values1;\n      } else if (ry > 0) {\n        blurY(n, m, values0, values1, ry);\n        blurY(n, m, values1, values0, ry);\n        blurY(n, m, values0, values1, ry);\n        values = values1;\n      }\n\n      // scale density estimates\n      // density in points per square pixel or probability density\n      const s = counts ? Math.pow(2, -2 * k) : 1 / sum(values);\n      for (let i = 0, sz = n * m; i < sz; ++i) values[i] *= s;\n      return {\n        values: values,\n        scale: 1 << k,\n        width: n,\n        height: m,\n        x1: ox,\n        y1: oy,\n        x2: ox + (dx >> k),\n        y2: oy + (dy >> k)\n      };\n    }\n    density.x = function (_) {\n      return arguments.length ? (x = number(_), density) : x;\n    };\n    density.y = function (_) {\n      return arguments.length ? (y = number(_), density) : y;\n    };\n    density.weight = function (_) {\n      return arguments.length ? (weight = number(_), density) : weight;\n    };\n    density.size = function (_) {\n      if (!arguments.length) return [dx, dy];\n      var _0 = +_[0],\n        _1 = +_[1];\n      if (!(_0 >= 0 && _1 >= 0)) vegaUtil.error('invalid size');\n      return dx = _0, dy = _1, density;\n    };\n    density.cellSize = function (_) {\n      if (!arguments.length) return 1 << k;\n      if (!((_ = +_) >= 1)) vegaUtil.error('invalid cell size');\n      k = Math.floor(Math.log(_) / Math.LN2);\n      return density;\n    };\n    density.bandwidth = function (_) {\n      if (!arguments.length) return bandwidth;\n      _ = vegaUtil.array(_);\n      if (_.length === 1) _ = [+_[0], +_[0]];\n      if (_.length !== 2) vegaUtil.error('invalid bandwidth');\n      return bandwidth = _, density;\n    };\n    return density;\n  }\n  function blurX(n, m, source, target, r) {\n    const w = (r << 1) + 1;\n    for (let j = 0; j < m; ++j) {\n      for (let i = 0, sr = 0; i < n + r; ++i) {\n        if (i < n) {\n          sr += source[i + j * n];\n        }\n        if (i >= r) {\n          if (i >= w) {\n            sr -= source[i - w + j * n];\n          }\n          target[i - r + j * n] = sr / Math.min(i + 1, n - 1 + w - i, w);\n        }\n      }\n    }\n  }\n  function blurY(n, m, source, target, r) {\n    const w = (r << 1) + 1;\n    for (let i = 0; i < n; ++i) {\n      for (let j = 0, sr = 0; j < m + r; ++j) {\n        if (j < m) {\n          sr += source[i + j * n];\n        }\n        if (j >= r) {\n          if (j >= w) {\n            sr -= source[i + (j - w) * n];\n          }\n          target[i + (j - r) * n] = sr / Math.min(j + 1, m - 1 + w - j, w);\n        }\n      }\n    }\n  }\n\n  /**\n   * Perform 2D kernel-density estimation of point data.\n   * @constructor\n   * @param {object} params - The parameters for this operator.\n   * @param {Array<number>} params.size - The [width, height] extent (in\n   *   units of input pixels) over which to perform density estimation.\n   * @param {function(object): number} params.x - The x-coordinate accessor.\n   * @param {function(object): number} params.y - The y-coordinate accessor.\n   * @param {function(object): number} [params.weight] - The weight accessor.\n   * @param {Array<function(object): *>} [params.groupby] - An array of accessors\n   *   to groupby.\n   * @param {number} [params.cellSize] - Contour density calculation cell size.\n   *   This parameter determines the level of spatial approximation. For example,\n   *   the default value of 4 maps to 2x reductions in both x- and y- dimensions.\n   *   A value of 1 will result in an output raster grid whose dimensions exactly\n   *   matches the size parameter.\n   * @param {Array<number>} [params.bandwidth] - The KDE kernel bandwidths,\n   *   in pixels. The input can be a two-element array specifying separate\n   *   x and y bandwidths, or a single-element array specifying both. If the\n   *   bandwidth is unspecified or less than zero, the bandwidth will be\n   *   automatically determined.\n   * @param {boolean} [params.counts=false] - A boolean flag indicating if the\n   *   output values should be probability estimates (false, default) or\n   *   smoothed counts (true).\n   * @param {string} [params.as='grid'] - The output field in which to store\n   *   the generated raster grid (default 'grid').\n   */\n  function KDE2D(params) {\n    vegaDataflow.Transform.call(this, null, params);\n  }\n  KDE2D.Definition = {\n    'type': 'KDE2D',\n    'metadata': {\n      'generates': true\n    },\n    'params': [{\n      'name': 'size',\n      'type': 'number',\n      'array': true,\n      'length': 2,\n      'required': true\n    }, {\n      'name': 'x',\n      'type': 'field',\n      'required': true\n    }, {\n      'name': 'y',\n      'type': 'field',\n      'required': true\n    }, {\n      'name': 'weight',\n      'type': 'field'\n    }, {\n      'name': 'groupby',\n      'type': 'field',\n      'array': true\n    }, {\n      'name': 'cellSize',\n      'type': 'number'\n    }, {\n      'name': 'bandwidth',\n      'type': 'number',\n      'array': true,\n      'length': 2\n    }, {\n      'name': 'counts',\n      'type': 'boolean',\n      'default': false\n    }, {\n      'name': 'as',\n      'type': 'string',\n      'default': 'grid'\n    }]\n  };\n  const PARAMS = ['x', 'y', 'weight', 'size', 'cellSize', 'bandwidth'];\n  function params(obj, _) {\n    PARAMS.forEach(param => _[param] != null ? obj[param](_[param]) : 0);\n    return obj;\n  }\n  vegaUtil.inherits(KDE2D, vegaDataflow.Transform, {\n    transform(_, pulse) {\n      if (this.value && !pulse.changed() && !_.modified()) return pulse.StopPropagation;\n      var out = pulse.fork(pulse.NO_SOURCE | pulse.NO_FIELDS),\n        source = pulse.materialize(pulse.SOURCE).source,\n        groups = partition(source, _.groupby),\n        names = (_.groupby || []).map(vegaUtil.accessorName),\n        kde = params(density2D(), _),\n        as = _.as || 'grid',\n        values = [];\n      function set(t, vals) {\n        for (let i = 0; i < names.length; ++i) t[names[i]] = vals[i];\n        return t;\n      }\n\n      // generate density raster grids\n      values = groups.map(g => vegaDataflow.ingest(set({\n        [as]: kde(g, _.counts)\n      }, g.dims)));\n      if (this.value) out.rem = this.value;\n      this.value = out.source = out.add = values;\n      return out;\n    }\n  });\n  function partition(data, groupby) {\n    var groups = [],\n      get = f => f(t),\n      map,\n      i,\n      n,\n      t,\n      k,\n      g;\n\n    // partition data points into groups\n    if (groupby == null) {\n      groups.push(data);\n    } else {\n      for (map = {}, i = 0, n = data.length; i < n; ++i) {\n        t = data[i];\n        k = groupby.map(get);\n        g = map[k];\n        if (!g) {\n          map[k] = g = [];\n          g.dims = k;\n          groups.push(g);\n        }\n        g.push(t);\n      }\n    }\n    return groups;\n  }\n\n  /**\n   * Generate contours based on kernel-density estimation of point data.\n   * @constructor\n   * @param {object} params - The parameters for this operator.\n   * @param {Array<number>} params.size - The dimensions [width, height] over which to compute contours.\n   *  If the values parameter is provided, this must be the dimensions of the input data.\n   *  If density estimation is performed, this is the output view dimensions in pixels.\n   * @param {Array<number>} [params.values] - An array of numeric values representing an\n   *  width x height grid of values over which to compute contours. If unspecified, this\n   *  transform will instead attempt to compute contours for the kernel density estimate\n   *  using values drawn from data tuples in the input pulse.\n   * @param {function(object): number} [params.x] - The pixel x-coordinate accessor for density estimation.\n   * @param {function(object): number} [params.y] - The pixel y-coordinate accessor for density estimation.\n   * @param {function(object): number} [params.weight] - The data point weight accessor for density estimation.\n   * @param {number} [params.cellSize] - Contour density calculation cell size.\n   * @param {number} [params.bandwidth] - Kernel density estimation bandwidth.\n   * @param {Array<number>} [params.thresholds] - Contour threshold array. If\n   *   this parameter is set, the count and nice parameters will be ignored.\n   * @param {number} [params.count] - The desired number of contours.\n   * @param {boolean} [params.nice] - Boolean flag indicating if the contour\n   *   threshold values should be automatically aligned to \"nice\"\n   *   human-friendly values. Setting this flag may cause the number of\n   *   thresholds to deviate from the specified count.\n   * @param {boolean} [params.smooth] - Boolean flag indicating if the contour\n   *   polygons should be smoothed using linear interpolation. The default is\n   *   true. The parameter is ignored when using density estimation.\n   */\n  function Contour(params) {\n    vegaDataflow.Transform.call(this, null, params);\n  }\n  Contour.Definition = {\n    'type': 'Contour',\n    'metadata': {\n      'generates': true\n    },\n    'params': [{\n      'name': 'size',\n      'type': 'number',\n      'array': true,\n      'length': 2,\n      'required': true\n    }, {\n      'name': 'values',\n      'type': 'number',\n      'array': true\n    }, {\n      'name': 'x',\n      'type': 'field'\n    }, {\n      'name': 'y',\n      'type': 'field'\n    }, {\n      'name': 'weight',\n      'type': 'field'\n    }, {\n      'name': 'cellSize',\n      'type': 'number'\n    }, {\n      'name': 'bandwidth',\n      'type': 'number'\n    }, {\n      'name': 'count',\n      'type': 'number'\n    }, {\n      'name': 'nice',\n      'type': 'boolean',\n      'default': false\n    }, {\n      'name': 'thresholds',\n      'type': 'number',\n      'array': true\n    }, {\n      'name': 'smooth',\n      'type': 'boolean',\n      'default': true\n    }]\n  };\n  vegaUtil.inherits(Contour, vegaDataflow.Transform, {\n    transform(_, pulse) {\n      if (this.value && !pulse.changed() && !_.modified()) {\n        return pulse.StopPropagation;\n      }\n      var out = pulse.fork(pulse.NO_SOURCE | pulse.NO_FIELDS),\n        contour = contours().smooth(_.smooth !== false),\n        values = _.values,\n        thresh = _.thresholds || quantize(_.count || 10, _.nice, !!values),\n        size = _.size,\n        grid,\n        post;\n      if (!values) {\n        values = pulse.materialize(pulse.SOURCE).source;\n        grid = params(density2D(), _)(values, true);\n        post = transform(grid, grid.scale || 1, grid.scale || 1, 0, 0);\n        size = [grid.width, grid.height];\n        values = grid.values;\n      }\n      thresh = vegaUtil.isArray(thresh) ? thresh : thresh(values);\n      values = contour.size(size)(values, thresh);\n      if (post) values.forEach(post);\n      if (this.value) out.rem = this.value;\n      this.value = out.source = out.add = (values || []).map(vegaDataflow.ingest);\n      return out;\n    }\n  });\n\n  const Feature = 'Feature';\n  const FeatureCollection = 'FeatureCollection';\n  const MultiPoint = 'MultiPoint';\n\n  /**\n   * Consolidate an array of [longitude, latitude] points or GeoJSON features\n   * into a combined GeoJSON object. This transform is particularly useful for\n   * combining geo data for a Projection's fit argument. The resulting GeoJSON\n   * data is available as this transform's value. Input pulses are unchanged.\n   * @constructor\n   * @param {object} params - The parameters for this operator.\n   * @param {Array<function(object): *>} [params.fields] - A two-element array\n   *   of field accessors for the longitude and latitude values.\n   * @param {function(object): *} params.geojson - A field accessor for\n   *   retrieving GeoJSON feature data.\n   */\n  function GeoJSON(params) {\n    vegaDataflow.Transform.call(this, null, params);\n  }\n  GeoJSON.Definition = {\n    'type': 'GeoJSON',\n    'metadata': {},\n    'params': [{\n      'name': 'fields',\n      'type': 'field',\n      'array': true,\n      'length': 2\n    }, {\n      'name': 'geojson',\n      'type': 'field'\n    }]\n  };\n  vegaUtil.inherits(GeoJSON, vegaDataflow.Transform, {\n    transform(_, pulse) {\n      var features = this._features,\n        points = this._points,\n        fields = _.fields,\n        lon = fields && fields[0],\n        lat = fields && fields[1],\n        geojson = _.geojson || !fields && vegaUtil.identity,\n        flag = pulse.ADD,\n        mod;\n      mod = _.modified() || pulse.changed(pulse.REM) || pulse.modified(vegaUtil.accessorFields(geojson)) || lon && pulse.modified(vegaUtil.accessorFields(lon)) || lat && pulse.modified(vegaUtil.accessorFields(lat));\n      if (!this.value || mod) {\n        flag = pulse.SOURCE;\n        this._features = features = [];\n        this._points = points = [];\n      }\n      if (geojson) {\n        pulse.visit(flag, t => features.push(geojson(t)));\n      }\n      if (lon && lat) {\n        pulse.visit(flag, t => {\n          var x = lon(t),\n            y = lat(t);\n          if (x != null && y != null && (x = +x) === x && (y = +y) === y) {\n            points.push([x, y]);\n          }\n        });\n        features = features.concat({\n          type: Feature,\n          geometry: {\n            type: MultiPoint,\n            coordinates: points\n          }\n        });\n      }\n      this.value = {\n        type: FeatureCollection,\n        features: features\n      };\n    }\n  });\n\n  /**\n   * Map GeoJSON data to an SVG path string.\n   * @constructor\n   * @param {object} params - The parameters for this operator.\n   * @param {function(number, number): *} params.projection - The cartographic\n   *   projection to apply.\n   * @param {function(object): *} [params.field] - The field with GeoJSON data,\n   *   or null if the tuple itself is a GeoJSON feature.\n   * @param {string} [params.as='path'] - The output field in which to store\n   *   the generated path data (default 'path').\n   */\n  function GeoPath(params) {\n    vegaDataflow.Transform.call(this, null, params);\n  }\n  GeoPath.Definition = {\n    'type': 'GeoPath',\n    'metadata': {\n      'modifies': true\n    },\n    'params': [{\n      'name': 'projection',\n      'type': 'projection'\n    }, {\n      'name': 'field',\n      'type': 'field'\n    }, {\n      'name': 'pointRadius',\n      'type': 'number',\n      'expr': true\n    }, {\n      'name': 'as',\n      'type': 'string',\n      'default': 'path'\n    }]\n  };\n  vegaUtil.inherits(GeoPath, vegaDataflow.Transform, {\n    transform(_, pulse) {\n      var out = pulse.fork(pulse.ALL),\n        path = this.value,\n        field = _.field || vegaUtil.identity,\n        as = _.as || 'path',\n        flag = out.SOURCE;\n      if (!path || _.modified()) {\n        // parameters updated, reset and reflow\n        this.value = path = vegaProjection.getProjectionPath(_.projection);\n        out.materialize().reflow();\n      } else {\n        flag = field === vegaUtil.identity || pulse.modified(field.fields) ? out.ADD_MOD : out.ADD;\n      }\n      const prev = initPath(path, _.pointRadius);\n      out.visit(flag, t => t[as] = path(field(t)));\n      path.pointRadius(prev);\n      return out.modifies(as);\n    }\n  });\n  function initPath(path, pointRadius) {\n    const prev = path.pointRadius();\n    path.context(null);\n    if (pointRadius != null) {\n      path.pointRadius(pointRadius);\n    }\n    return prev;\n  }\n\n  /**\n   * Geo-code a longitude/latitude point to an x/y coordinate.\n   * @constructor\n   * @param {object} params - The parameters for this operator.\n   * @param {function(number, number): *} params.projection - The cartographic\n   *   projection to apply.\n   * @param {Array<function(object): *>} params.fields - A two-element array of\n   *   field accessors for the longitude and latitude values.\n   * @param {Array<string>} [params.as] - A two-element array of field names\n   *   under which to store the result. Defaults to ['x','y'].\n   */\n  function GeoPoint(params) {\n    vegaDataflow.Transform.call(this, null, params);\n  }\n  GeoPoint.Definition = {\n    'type': 'GeoPoint',\n    'metadata': {\n      'modifies': true\n    },\n    'params': [{\n      'name': 'projection',\n      'type': 'projection',\n      'required': true\n    }, {\n      'name': 'fields',\n      'type': 'field',\n      'array': true,\n      'required': true,\n      'length': 2\n    }, {\n      'name': 'as',\n      'type': 'string',\n      'array': true,\n      'length': 2,\n      'default': ['x', 'y']\n    }]\n  };\n  vegaUtil.inherits(GeoPoint, vegaDataflow.Transform, {\n    transform(_, pulse) {\n      var proj = _.projection,\n        lon = _.fields[0],\n        lat = _.fields[1],\n        as = _.as || ['x', 'y'],\n        x = as[0],\n        y = as[1],\n        mod;\n      function set(t) {\n        const xy = proj([lon(t), lat(t)]);\n        if (xy) {\n          t[x] = xy[0];\n          t[y] = xy[1];\n        } else {\n          t[x] = undefined;\n          t[y] = undefined;\n        }\n      }\n      if (_.modified()) {\n        // parameters updated, reflow\n        pulse = pulse.materialize().reflow(true).visit(pulse.SOURCE, set);\n      } else {\n        mod = pulse.modified(lon.fields) || pulse.modified(lat.fields);\n        pulse.visit(mod ? pulse.ADD_MOD : pulse.ADD, set);\n      }\n      return pulse.modifies(as);\n    }\n  });\n\n  /**\n   * Annotate items with a geopath shape generator.\n   * @constructor\n   * @param {object} params - The parameters for this operator.\n   * @param {function(number, number): *} params.projection - The cartographic\n   *   projection to apply.\n   * @param {function(object): *} [params.field] - The field with GeoJSON data,\n   *   or null if the tuple itself is a GeoJSON feature.\n   * @param {string} [params.as='shape'] - The output field in which to store\n   *   the generated path data (default 'shape').\n   */\n  function GeoShape(params) {\n    vegaDataflow.Transform.call(this, null, params);\n  }\n  GeoShape.Definition = {\n    'type': 'GeoShape',\n    'metadata': {\n      'modifies': true,\n      'nomod': true\n    },\n    'params': [{\n      'name': 'projection',\n      'type': 'projection'\n    }, {\n      'name': 'field',\n      'type': 'field',\n      'default': 'datum'\n    }, {\n      'name': 'pointRadius',\n      'type': 'number',\n      'expr': true\n    }, {\n      'name': 'as',\n      'type': 'string',\n      'default': 'shape'\n    }]\n  };\n  vegaUtil.inherits(GeoShape, vegaDataflow.Transform, {\n    transform(_, pulse) {\n      var out = pulse.fork(pulse.ALL),\n        shape = this.value,\n        as = _.as || 'shape',\n        flag = out.ADD;\n      if (!shape || _.modified()) {\n        // parameters updated, reset and reflow\n        this.value = shape = shapeGenerator(vegaProjection.getProjectionPath(_.projection), _.field || vegaUtil.field('datum'), _.pointRadius);\n        out.materialize().reflow();\n        flag = out.SOURCE;\n      }\n      out.visit(flag, t => t[as] = shape);\n      return out.modifies(as);\n    }\n  });\n  function shapeGenerator(path, field, pointRadius) {\n    const shape = pointRadius == null ? _ => path(field(_)) : _ => {\n      var prev = path.pointRadius(),\n        value = path.pointRadius(pointRadius)(field(_));\n      path.pointRadius(prev);\n      return value;\n    };\n    shape.context = _ => {\n      path.context(_);\n      return shape;\n    };\n    return shape;\n  }\n\n  var epsilon = 1e-6;\n  var abs = Math.abs;\n  var ceil = Math.ceil;\n\n  function graticuleX(y0, y1, dy) {\n    var y = range(y0, y1 - epsilon, dy).concat(y1);\n    return function (x) {\n      return y.map(function (y) {\n        return [x, y];\n      });\n    };\n  }\n  function graticuleY(x0, x1, dx) {\n    var x = range(x0, x1 - epsilon, dx).concat(x1);\n    return function (y) {\n      return x.map(function (x) {\n        return [x, y];\n      });\n    };\n  }\n  function graticule() {\n    var x1,\n      x0,\n      X1,\n      X0,\n      y1,\n      y0,\n      Y1,\n      Y0,\n      dx = 10,\n      dy = dx,\n      DX = 90,\n      DY = 360,\n      x,\n      y,\n      X,\n      Y,\n      precision = 2.5;\n    function graticule() {\n      return {\n        type: \"MultiLineString\",\n        coordinates: lines()\n      };\n    }\n    function lines() {\n      return range(ceil(X0 / DX) * DX, X1, DX).map(X).concat(range(ceil(Y0 / DY) * DY, Y1, DY).map(Y)).concat(range(ceil(x0 / dx) * dx, x1, dx).filter(function (x) {\n        return abs(x % DX) > epsilon;\n      }).map(x)).concat(range(ceil(y0 / dy) * dy, y1, dy).filter(function (y) {\n        return abs(y % DY) > epsilon;\n      }).map(y));\n    }\n    graticule.lines = function () {\n      return lines().map(function (coordinates) {\n        return {\n          type: \"LineString\",\n          coordinates: coordinates\n        };\n      });\n    };\n    graticule.outline = function () {\n      return {\n        type: \"Polygon\",\n        coordinates: [X(X0).concat(Y(Y1).slice(1), X(X1).reverse().slice(1), Y(Y0).reverse().slice(1))]\n      };\n    };\n    graticule.extent = function (_) {\n      if (!arguments.length) return graticule.extentMinor();\n      return graticule.extentMajor(_).extentMinor(_);\n    };\n    graticule.extentMajor = function (_) {\n      if (!arguments.length) return [[X0, Y0], [X1, Y1]];\n      X0 = +_[0][0], X1 = +_[1][0];\n      Y0 = +_[0][1], Y1 = +_[1][1];\n      if (X0 > X1) _ = X0, X0 = X1, X1 = _;\n      if (Y0 > Y1) _ = Y0, Y0 = Y1, Y1 = _;\n      return graticule.precision(precision);\n    };\n    graticule.extentMinor = function (_) {\n      if (!arguments.length) return [[x0, y0], [x1, y1]];\n      x0 = +_[0][0], x1 = +_[1][0];\n      y0 = +_[0][1], y1 = +_[1][1];\n      if (x0 > x1) _ = x0, x0 = x1, x1 = _;\n      if (y0 > y1) _ = y0, y0 = y1, y1 = _;\n      return graticule.precision(precision);\n    };\n    graticule.step = function (_) {\n      if (!arguments.length) return graticule.stepMinor();\n      return graticule.stepMajor(_).stepMinor(_);\n    };\n    graticule.stepMajor = function (_) {\n      if (!arguments.length) return [DX, DY];\n      DX = +_[0], DY = +_[1];\n      return graticule;\n    };\n    graticule.stepMinor = function (_) {\n      if (!arguments.length) return [dx, dy];\n      dx = +_[0], dy = +_[1];\n      return graticule;\n    };\n    graticule.precision = function (_) {\n      if (!arguments.length) return precision;\n      precision = +_;\n      x = graticuleX(y0, y1, 90);\n      y = graticuleY(x0, x1, precision);\n      X = graticuleX(Y0, Y1, 90);\n      Y = graticuleY(X0, X1, precision);\n      return graticule;\n    };\n    return graticule.extentMajor([[-180, -90 + epsilon], [180, 90 - epsilon]]).extentMinor([[-180, -80 - epsilon], [180, 80 + epsilon]]);\n  }\n\n  /**\n   * GeoJSON feature generator for creating graticules.\n   * @constructor\n   */\n  function Graticule(params) {\n    vegaDataflow.Transform.call(this, [], params);\n    this.generator = graticule();\n  }\n  Graticule.Definition = {\n    'type': 'Graticule',\n    'metadata': {\n      'changes': true,\n      'generates': true\n    },\n    'params': [{\n      'name': 'extent',\n      'type': 'array',\n      'array': true,\n      'length': 2,\n      'content': {\n        'type': 'number',\n        'array': true,\n        'length': 2\n      }\n    }, {\n      'name': 'extentMajor',\n      'type': 'array',\n      'array': true,\n      'length': 2,\n      'content': {\n        'type': 'number',\n        'array': true,\n        'length': 2\n      }\n    }, {\n      'name': 'extentMinor',\n      'type': 'array',\n      'array': true,\n      'length': 2,\n      'content': {\n        'type': 'number',\n        'array': true,\n        'length': 2\n      }\n    }, {\n      'name': 'step',\n      'type': 'number',\n      'array': true,\n      'length': 2\n    }, {\n      'name': 'stepMajor',\n      'type': 'number',\n      'array': true,\n      'length': 2,\n      'default': [90, 360]\n    }, {\n      'name': 'stepMinor',\n      'type': 'number',\n      'array': true,\n      'length': 2,\n      'default': [10, 10]\n    }, {\n      'name': 'precision',\n      'type': 'number',\n      'default': 2.5\n    }]\n  };\n  vegaUtil.inherits(Graticule, vegaDataflow.Transform, {\n    transform(_, pulse) {\n      var src = this.value,\n        gen = this.generator,\n        t;\n      if (!src.length || _.modified()) {\n        for (const prop in _) {\n          if (vegaUtil.isFunction(gen[prop])) {\n            gen[prop](_[prop]);\n          }\n        }\n      }\n      t = gen();\n      if (src.length) {\n        pulse.mod.push(vegaDataflow.replace(src[0], t));\n      } else {\n        pulse.add.push(vegaDataflow.ingest(t));\n      }\n      src[0] = t;\n      return pulse;\n    }\n  });\n\n  function define (constructor, factory, prototype) {\n    constructor.prototype = factory.prototype = prototype;\n    prototype.constructor = constructor;\n  }\n  function extend(parent, definition) {\n    var prototype = Object.create(parent.prototype);\n    for (var key in definition) prototype[key] = definition[key];\n    return prototype;\n  }\n\n  function Color() {}\n  var darker = 0.7;\n  var brighter = 1 / darker;\n  var reI = \"\\\\s*([+-]?\\\\d+)\\\\s*\",\n    reN = \"\\\\s*([+-]?(?:\\\\d*\\\\.)?\\\\d+(?:[eE][+-]?\\\\d+)?)\\\\s*\",\n    reP = \"\\\\s*([+-]?(?:\\\\d*\\\\.)?\\\\d+(?:[eE][+-]?\\\\d+)?)%\\\\s*\",\n    reHex = /^#([0-9a-f]{3,8})$/,\n    reRgbInteger = new RegExp(`^rgb\\\\(${reI},${reI},${reI}\\\\)$`),\n    reRgbPercent = new RegExp(`^rgb\\\\(${reP},${reP},${reP}\\\\)$`),\n    reRgbaInteger = new RegExp(`^rgba\\\\(${reI},${reI},${reI},${reN}\\\\)$`),\n    reRgbaPercent = new RegExp(`^rgba\\\\(${reP},${reP},${reP},${reN}\\\\)$`),\n    reHslPercent = new RegExp(`^hsl\\\\(${reN},${reP},${reP}\\\\)$`),\n    reHslaPercent = new RegExp(`^hsla\\\\(${reN},${reP},${reP},${reN}\\\\)$`);\n  var named = {\n    aliceblue: 0xf0f8ff,\n    antiquewhite: 0xfaebd7,\n    aqua: 0x00ffff,\n    aquamarine: 0x7fffd4,\n    azure: 0xf0ffff,\n    beige: 0xf5f5dc,\n    bisque: 0xffe4c4,\n    black: 0x000000,\n    blanchedalmond: 0xffebcd,\n    blue: 0x0000ff,\n    blueviolet: 0x8a2be2,\n    brown: 0xa52a2a,\n    burlywood: 0xdeb887,\n    cadetblue: 0x5f9ea0,\n    chartreuse: 0x7fff00,\n    chocolate: 0xd2691e,\n    coral: 0xff7f50,\n    cornflowerblue: 0x6495ed,\n    cornsilk: 0xfff8dc,\n    crimson: 0xdc143c,\n    cyan: 0x00ffff,\n    darkblue: 0x00008b,\n    darkcyan: 0x008b8b,\n    darkgoldenrod: 0xb8860b,\n    darkgray: 0xa9a9a9,\n    darkgreen: 0x006400,\n    darkgrey: 0xa9a9a9,\n    darkkhaki: 0xbdb76b,\n    darkmagenta: 0x8b008b,\n    darkolivegreen: 0x556b2f,\n    darkorange: 0xff8c00,\n    darkorchid: 0x9932cc,\n    darkred: 0x8b0000,\n    darksalmon: 0xe9967a,\n    darkseagreen: 0x8fbc8f,\n    darkslateblue: 0x483d8b,\n    darkslategray: 0x2f4f4f,\n    darkslategrey: 0x2f4f4f,\n    darkturquoise: 0x00ced1,\n    darkviolet: 0x9400d3,\n    deeppink: 0xff1493,\n    deepskyblue: 0x00bfff,\n    dimgray: 0x696969,\n    dimgrey: 0x696969,\n    dodgerblue: 0x1e90ff,\n    firebrick: 0xb22222,\n    floralwhite: 0xfffaf0,\n    forestgreen: 0x228b22,\n    fuchsia: 0xff00ff,\n    gainsboro: 0xdcdcdc,\n    ghostwhite: 0xf8f8ff,\n    gold: 0xffd700,\n    goldenrod: 0xdaa520,\n    gray: 0x808080,\n    green: 0x008000,\n    greenyellow: 0xadff2f,\n    grey: 0x808080,\n    honeydew: 0xf0fff0,\n    hotpink: 0xff69b4,\n    indianred: 0xcd5c5c,\n    indigo: 0x4b0082,\n    ivory: 0xfffff0,\n    khaki: 0xf0e68c,\n    lavender: 0xe6e6fa,\n    lavenderblush: 0xfff0f5,\n    lawngreen: 0x7cfc00,\n    lemonchiffon: 0xfffacd,\n    lightblue: 0xadd8e6,\n    lightcoral: 0xf08080,\n    lightcyan: 0xe0ffff,\n    lightgoldenrodyellow: 0xfafad2,\n    lightgray: 0xd3d3d3,\n    lightgreen: 0x90ee90,\n    lightgrey: 0xd3d3d3,\n    lightpink: 0xffb6c1,\n    lightsalmon: 0xffa07a,\n    lightseagreen: 0x20b2aa,\n    lightskyblue: 0x87cefa,\n    lightslategray: 0x778899,\n    lightslategrey: 0x778899,\n    lightsteelblue: 0xb0c4de,\n    lightyellow: 0xffffe0,\n    lime: 0x00ff00,\n    limegreen: 0x32cd32,\n    linen: 0xfaf0e6,\n    magenta: 0xff00ff,\n    maroon: 0x800000,\n    mediumaquamarine: 0x66cdaa,\n    mediumblue: 0x0000cd,\n    mediumorchid: 0xba55d3,\n    mediumpurple: 0x9370db,\n    mediumseagreen: 0x3cb371,\n    mediumslateblue: 0x7b68ee,\n    mediumspringgreen: 0x00fa9a,\n    mediumturquoise: 0x48d1cc,\n    mediumvioletred: 0xc71585,\n    midnightblue: 0x191970,\n    mintcream: 0xf5fffa,\n    mistyrose: 0xffe4e1,\n    moccasin: 0xffe4b5,\n    navajowhite: 0xffdead,\n    navy: 0x000080,\n    oldlace: 0xfdf5e6,\n    olive: 0x808000,\n    olivedrab: 0x6b8e23,\n    orange: 0xffa500,\n    orangered: 0xff4500,\n    orchid: 0xda70d6,\n    palegoldenrod: 0xeee8aa,\n    palegreen: 0x98fb98,\n    paleturquoise: 0xafeeee,\n    palevioletred: 0xdb7093,\n    papayawhip: 0xffefd5,\n    peachpuff: 0xffdab9,\n    peru: 0xcd853f,\n    pink: 0xffc0cb,\n    plum: 0xdda0dd,\n    powderblue: 0xb0e0e6,\n    purple: 0x800080,\n    rebeccapurple: 0x663399,\n    red: 0xff0000,\n    rosybrown: 0xbc8f8f,\n    royalblue: 0x4169e1,\n    saddlebrown: 0x8b4513,\n    salmon: 0xfa8072,\n    sandybrown: 0xf4a460,\n    seagreen: 0x2e8b57,\n    seashell: 0xfff5ee,\n    sienna: 0xa0522d,\n    silver: 0xc0c0c0,\n    skyblue: 0x87ceeb,\n    slateblue: 0x6a5acd,\n    slategray: 0x708090,\n    slategrey: 0x708090,\n    snow: 0xfffafa,\n    springgreen: 0x00ff7f,\n    steelblue: 0x4682b4,\n    tan: 0xd2b48c,\n    teal: 0x008080,\n    thistle: 0xd8bfd8,\n    tomato: 0xff6347,\n    turquoise: 0x40e0d0,\n    violet: 0xee82ee,\n    wheat: 0xf5deb3,\n    white: 0xffffff,\n    whitesmoke: 0xf5f5f5,\n    yellow: 0xffff00,\n    yellowgreen: 0x9acd32\n  };\n  define(Color, color, {\n    copy(channels) {\n      return Object.assign(new this.constructor(), this, channels);\n    },\n    displayable() {\n      return this.rgb().displayable();\n    },\n    hex: color_formatHex,\n    // Deprecated! Use color.formatHex.\n    formatHex: color_formatHex,\n    formatHex8: color_formatHex8,\n    formatHsl: color_formatHsl,\n    formatRgb: color_formatRgb,\n    toString: color_formatRgb\n  });\n  function color_formatHex() {\n    return this.rgb().formatHex();\n  }\n  function color_formatHex8() {\n    return this.rgb().formatHex8();\n  }\n  function color_formatHsl() {\n    return hslConvert(this).formatHsl();\n  }\n  function color_formatRgb() {\n    return this.rgb().formatRgb();\n  }\n  function color(format) {\n    var m, l;\n    format = (format + \"\").trim().toLowerCase();\n    return (m = reHex.exec(format)) ? (l = m[1].length, m = parseInt(m[1], 16), l === 6 ? rgbn(m) // #ff0000\n    : l === 3 ? new Rgb(m >> 8 & 0xf | m >> 4 & 0xf0, m >> 4 & 0xf | m & 0xf0, (m & 0xf) << 4 | m & 0xf, 1) // #f00\n    : l === 8 ? rgba(m >> 24 & 0xff, m >> 16 & 0xff, m >> 8 & 0xff, (m & 0xff) / 0xff) // #ff000000\n    : l === 4 ? rgba(m >> 12 & 0xf | m >> 8 & 0xf0, m >> 8 & 0xf | m >> 4 & 0xf0, m >> 4 & 0xf | m & 0xf0, ((m & 0xf) << 4 | m & 0xf) / 0xff) // #f000\n    : null // invalid hex\n    ) : (m = reRgbInteger.exec(format)) ? new Rgb(m[1], m[2], m[3], 1) // rgb(255, 0, 0)\n    : (m = reRgbPercent.exec(format)) ? new Rgb(m[1] * 255 / 100, m[2] * 255 / 100, m[3] * 255 / 100, 1) // rgb(100%, 0%, 0%)\n    : (m = reRgbaInteger.exec(format)) ? rgba(m[1], m[2], m[3], m[4]) // rgba(255, 0, 0, 1)\n    : (m = reRgbaPercent.exec(format)) ? rgba(m[1] * 255 / 100, m[2] * 255 / 100, m[3] * 255 / 100, m[4]) // rgb(100%, 0%, 0%, 1)\n    : (m = reHslPercent.exec(format)) ? hsla(m[1], m[2] / 100, m[3] / 100, 1) // hsl(120, 50%, 50%)\n    : (m = reHslaPercent.exec(format)) ? hsla(m[1], m[2] / 100, m[3] / 100, m[4]) // hsla(120, 50%, 50%, 1)\n    : named.hasOwnProperty(format) ? rgbn(named[format]) // eslint-disable-line no-prototype-builtins\n    : format === \"transparent\" ? new Rgb(NaN, NaN, NaN, 0) : null;\n  }\n  function rgbn(n) {\n    return new Rgb(n >> 16 & 0xff, n >> 8 & 0xff, n & 0xff, 1);\n  }\n  function rgba(r, g, b, a) {\n    if (a <= 0) r = g = b = NaN;\n    return new Rgb(r, g, b, a);\n  }\n  function rgbConvert(o) {\n    if (!(o instanceof Color)) o = color(o);\n    if (!o) return new Rgb();\n    o = o.rgb();\n    return new Rgb(o.r, o.g, o.b, o.opacity);\n  }\n  function rgb(r, g, b, opacity) {\n    return arguments.length === 1 ? rgbConvert(r) : new Rgb(r, g, b, opacity == null ? 1 : opacity);\n  }\n  function Rgb(r, g, b, opacity) {\n    this.r = +r;\n    this.g = +g;\n    this.b = +b;\n    this.opacity = +opacity;\n  }\n  define(Rgb, rgb, extend(Color, {\n    brighter(k) {\n      k = k == null ? brighter : Math.pow(brighter, k);\n      return new Rgb(this.r * k, this.g * k, this.b * k, this.opacity);\n    },\n    darker(k) {\n      k = k == null ? darker : Math.pow(darker, k);\n      return new Rgb(this.r * k, this.g * k, this.b * k, this.opacity);\n    },\n    rgb() {\n      return this;\n    },\n    clamp() {\n      return new Rgb(clampi(this.r), clampi(this.g), clampi(this.b), clampa(this.opacity));\n    },\n    displayable() {\n      return -0.5 <= this.r && this.r < 255.5 && -0.5 <= this.g && this.g < 255.5 && -0.5 <= this.b && this.b < 255.5 && 0 <= this.opacity && this.opacity <= 1;\n    },\n    hex: rgb_formatHex,\n    // Deprecated! Use color.formatHex.\n    formatHex: rgb_formatHex,\n    formatHex8: rgb_formatHex8,\n    formatRgb: rgb_formatRgb,\n    toString: rgb_formatRgb\n  }));\n  function rgb_formatHex() {\n    return `#${hex(this.r)}${hex(this.g)}${hex(this.b)}`;\n  }\n  function rgb_formatHex8() {\n    return `#${hex(this.r)}${hex(this.g)}${hex(this.b)}${hex((isNaN(this.opacity) ? 1 : this.opacity) * 255)}`;\n  }\n  function rgb_formatRgb() {\n    const a = clampa(this.opacity);\n    return `${a === 1 ? \"rgb(\" : \"rgba(\"}${clampi(this.r)}, ${clampi(this.g)}, ${clampi(this.b)}${a === 1 ? \")\" : `, ${a})`}`;\n  }\n  function clampa(opacity) {\n    return isNaN(opacity) ? 1 : Math.max(0, Math.min(1, opacity));\n  }\n  function clampi(value) {\n    return Math.max(0, Math.min(255, Math.round(value) || 0));\n  }\n  function hex(value) {\n    value = clampi(value);\n    return (value < 16 ? \"0\" : \"\") + value.toString(16);\n  }\n  function hsla(h, s, l, a) {\n    if (a <= 0) h = s = l = NaN;else if (l <= 0 || l >= 1) h = s = NaN;else if (s <= 0) h = NaN;\n    return new Hsl(h, s, l, a);\n  }\n  function hslConvert(o) {\n    if (o instanceof Hsl) return new Hsl(o.h, o.s, o.l, o.opacity);\n    if (!(o instanceof Color)) o = color(o);\n    if (!o) return new Hsl();\n    if (o instanceof Hsl) return o;\n    o = o.rgb();\n    var r = o.r / 255,\n      g = o.g / 255,\n      b = o.b / 255,\n      min = Math.min(r, g, b),\n      max = Math.max(r, g, b),\n      h = NaN,\n      s = max - min,\n      l = (max + min) / 2;\n    if (s) {\n      if (r === max) h = (g - b) / s + (g < b) * 6;else if (g === max) h = (b - r) / s + 2;else h = (r - g) / s + 4;\n      s /= l < 0.5 ? max + min : 2 - max - min;\n      h *= 60;\n    } else {\n      s = l > 0 && l < 1 ? 0 : h;\n    }\n    return new Hsl(h, s, l, o.opacity);\n  }\n  function hsl(h, s, l, opacity) {\n    return arguments.length === 1 ? hslConvert(h) : new Hsl(h, s, l, opacity == null ? 1 : opacity);\n  }\n  function Hsl(h, s, l, opacity) {\n    this.h = +h;\n    this.s = +s;\n    this.l = +l;\n    this.opacity = +opacity;\n  }\n  define(Hsl, hsl, extend(Color, {\n    brighter(k) {\n      k = k == null ? brighter : Math.pow(brighter, k);\n      return new Hsl(this.h, this.s, this.l * k, this.opacity);\n    },\n    darker(k) {\n      k = k == null ? darker : Math.pow(darker, k);\n      return new Hsl(this.h, this.s, this.l * k, this.opacity);\n    },\n    rgb() {\n      var h = this.h % 360 + (this.h < 0) * 360,\n        s = isNaN(h) || isNaN(this.s) ? 0 : this.s,\n        l = this.l,\n        m2 = l + (l < 0.5 ? l : 1 - l) * s,\n        m1 = 2 * l - m2;\n      return new Rgb(hsl2rgb(h >= 240 ? h - 240 : h + 120, m1, m2), hsl2rgb(h, m1, m2), hsl2rgb(h < 120 ? h + 240 : h - 120, m1, m2), this.opacity);\n    },\n    clamp() {\n      return new Hsl(clamph(this.h), clampt(this.s), clampt(this.l), clampa(this.opacity));\n    },\n    displayable() {\n      return (0 <= this.s && this.s <= 1 || isNaN(this.s)) && 0 <= this.l && this.l <= 1 && 0 <= this.opacity && this.opacity <= 1;\n    },\n    formatHsl() {\n      const a = clampa(this.opacity);\n      return `${a === 1 ? \"hsl(\" : \"hsla(\"}${clamph(this.h)}, ${clampt(this.s) * 100}%, ${clampt(this.l) * 100}%${a === 1 ? \")\" : `, ${a})`}`;\n    }\n  }));\n  function clamph(value) {\n    value = (value || 0) % 360;\n    return value < 0 ? value + 360 : value;\n  }\n  function clampt(value) {\n    return Math.max(0, Math.min(1, value || 0));\n  }\n\n  /* From FvD 13.37, CSS Color Module Level 3 */\n  function hsl2rgb(h, m1, m2) {\n    return (h < 60 ? m1 + (m2 - m1) * h / 60 : h < 180 ? m2 : h < 240 ? m1 + (m2 - m1) * (240 - h) / 60 : m1) * 255;\n  }\n\n  /**\n   * Render a heatmap image for input raster grid data.\n   * @constructor\n   * @param {object} params - The parameters for this operator.\n   * @param {function(object): *} [params.field] - The field with raster grid\n   *   data. If unspecified, the tuple itself is interpreted as a raster grid.\n   * @param {string} [params.color] - A constant color value or function for\n   *   individual pixel color. If a function, it will be invoked with an input\n   *   object that includes $x, $y, $value, and $max fields for the grid.\n   * @param {number} [params.opacity] - A constant opacity value or function for\n   *   individual pixel opacity. If a function, it will be invoked with an input\n   *   object that includes $x, $y, $value, and $max fields for the grid.\n   * @param {string} [params.resolve] - The method for resolving maximum values\n   *   across multiple input grids. If 'independent' (the default), maximum\n   *   calculation will be performed separately for each grid. If 'shared',\n   *   a single global maximum will be used for all input grids.\n   * @param {string} [params.as='image'] - The output field in which to store\n   *   the generated bitmap canvas images (default 'image').\n   */\n  function Heatmap(params) {\n    vegaDataflow.Transform.call(this, null, params);\n  }\n  Heatmap.Definition = {\n    'type': 'heatmap',\n    'metadata': {\n      'modifies': true\n    },\n    'params': [{\n      'name': 'field',\n      'type': 'field'\n    }, {\n      'name': 'color',\n      'type': 'string',\n      'expr': true\n    }, {\n      'name': 'opacity',\n      'type': 'number',\n      'expr': true\n    }, {\n      'name': 'resolve',\n      'type': 'enum',\n      'values': ['shared', 'independent'],\n      'default': 'independent'\n    }, {\n      'name': 'as',\n      'type': 'string',\n      'default': 'image'\n    }]\n  };\n  vegaUtil.inherits(Heatmap, vegaDataflow.Transform, {\n    transform(_, pulse) {\n      if (!pulse.changed() && !_.modified()) {\n        return pulse.StopPropagation;\n      }\n      var source = pulse.materialize(pulse.SOURCE).source,\n        shared = _.resolve === 'shared',\n        field = _.field || vegaUtil.identity,\n        opacity = opacity_(_.opacity, _),\n        color = color_(_.color, _),\n        as = _.as || 'image',\n        obj = {\n          $x: 0,\n          $y: 0,\n          $value: 0,\n          $max: shared ? max(source.map(t => max(field(t).values))) : 0\n        };\n      source.forEach(t => {\n        const v = field(t);\n\n        // build proxy data object\n        const o = vegaUtil.extend({}, t, obj);\n        // set maximum value if not globally shared\n        if (!shared) o.$max = max(v.values || []);\n\n        // generate canvas image\n        // optimize color/opacity if not pixel-dependent\n        t[as] = toCanvas(v, o, color.dep ? color : vegaUtil.constant(color(o)), opacity.dep ? opacity : vegaUtil.constant(opacity(o)));\n      });\n      return pulse.reflow(true).modifies(as);\n    }\n  });\n\n  // get image color function\n  function color_(color, _) {\n    let f;\n    if (vegaUtil.isFunction(color)) {\n      f = obj => rgb(color(obj, _));\n      f.dep = dependency(color);\n    } else {\n      // default to mid-grey\n      f = vegaUtil.constant(rgb(color || '#888'));\n    }\n    return f;\n  }\n\n  // get image opacity function\n  function opacity_(opacity, _) {\n    let f;\n    if (vegaUtil.isFunction(opacity)) {\n      f = obj => opacity(obj, _);\n      f.dep = dependency(opacity);\n    } else if (opacity) {\n      f = vegaUtil.constant(opacity);\n    } else {\n      // default to [0, max] opacity gradient\n      f = obj => obj.$value / obj.$max || 0;\n      f.dep = true;\n    }\n    return f;\n  }\n\n  // check if function depends on individual pixel data\n  function dependency(f) {\n    if (!vegaUtil.isFunction(f)) return false;\n    const set = vegaUtil.toSet(vegaUtil.accessorFields(f));\n    return set.$x || set.$y || set.$value || set.$max;\n  }\n\n  // render raster grid to canvas\n  function toCanvas(grid, obj, color, opacity) {\n    const n = grid.width,\n      m = grid.height,\n      x1 = grid.x1 || 0,\n      y1 = grid.y1 || 0,\n      x2 = grid.x2 || n,\n      y2 = grid.y2 || m,\n      val = grid.values,\n      value = val ? i => val[i] : vegaUtil.zero,\n      can = vegaCanvas.canvas(x2 - x1, y2 - y1),\n      ctx = can.getContext('2d'),\n      img = ctx.getImageData(0, 0, x2 - x1, y2 - y1),\n      pix = img.data;\n    for (let j = y1, k = 0; j < y2; ++j) {\n      obj.$y = j - y1;\n      for (let i = x1, r = j * n; i < x2; ++i, k += 4) {\n        obj.$x = i - x1;\n        obj.$value = value(i + r);\n        const v = color(obj);\n        pix[k + 0] = v.r;\n        pix[k + 1] = v.g;\n        pix[k + 2] = v.b;\n        pix[k + 3] = ~~(255 * opacity(obj));\n      }\n    }\n    ctx.putImageData(img, 0, 0);\n    return can;\n  }\n\n  /**\n   * Maintains a cartographic projection.\n   * @constructor\n   * @param {object} params - The parameters for this operator.\n   */\n  function Projection(params) {\n    vegaDataflow.Transform.call(this, null, params);\n    this.modified(true); // always treat as modified\n  }\n  vegaUtil.inherits(Projection, vegaDataflow.Transform, {\n    transform(_, pulse) {\n      let proj = this.value;\n      if (!proj || _.modified('type')) {\n        this.value = proj = create(_.type);\n        vegaProjection.projectionProperties.forEach(prop => {\n          if (_[prop] != null) set(proj, prop, _[prop]);\n        });\n      } else {\n        vegaProjection.projectionProperties.forEach(prop => {\n          if (_.modified(prop)) set(proj, prop, _[prop]);\n        });\n      }\n      if (_.pointRadius != null) proj.path.pointRadius(_.pointRadius);\n      if (_.fit) fit(proj, _);\n      return pulse.fork(pulse.NO_SOURCE | pulse.NO_FIELDS);\n    }\n  });\n  function fit(proj, _) {\n    const data = collectGeoJSON(_.fit);\n    _.extent ? proj.fitExtent(_.extent, data) : _.size ? proj.fitSize(_.size, data) : 0;\n  }\n  function create(type) {\n    const constructor = vegaProjection.projection((type || 'mercator').toLowerCase());\n    if (!constructor) vegaUtil.error('Unrecognized projection type: ' + type);\n    return constructor();\n  }\n  function set(proj, key, value) {\n    if (vegaUtil.isFunction(proj[key])) proj[key](value);\n  }\n  function collectGeoJSON(data) {\n    data = vegaUtil.array(data);\n    return data.length === 1 ? data[0] : {\n      type: FeatureCollection,\n      features: data.reduce((a, f) => a.concat(featurize(f)), [])\n    };\n  }\n  function featurize(f) {\n    return f.type === FeatureCollection ? f.features : vegaUtil.array(f).filter(d => d != null).map(d => d.type === Feature ? d : {\n      type: Feature,\n      geometry: d\n    });\n  }\n\n  exports.contour = Contour;\n  exports.geojson = GeoJSON;\n  exports.geopath = GeoPath;\n  exports.geopoint = GeoPoint;\n  exports.geoshape = GeoShape;\n  exports.graticule = Graticule;\n  exports.heatmap = Heatmap;\n  exports.isocontour = Isocontour;\n  exports.kde2d = KDE2D;\n  exports.projection = Projection;\n\n}));\n\n};"],
"names":["shadow$provide","require","module","exports","global","factory","define","amd","globalThis","self","vega","transforms","vegaDataflow","vegaUtil","vegaStatistics","vegaProjection","vegaCanvas","tickSpec","start","stop","count","step","Math","max","power","floor","log10","error","pow","factor","e10","e5","e2","inc","i1","round","i2","tickIncrement","values","valueof","value","undefined","range","n","arguments","length","i","ceil","Array","sum","noop","contours","tz","map","contour","polygons","holes","isorings","ring","smooth","area","push","forEach","hole","polygon","x","point","y","contains","j","pi","xi","yi","pj","xj","yj","b","a","c","p","q","r","type","coordinates","callback","stitch","line","end","startIndex","dx","endIndex","f","g","fragmentByEnd","fragmentByStart","concat","unshift","t1","cases","t0","dy","t2","t3","smoothLinear","xt","yt","v1","v0","size","contours.size","_","_0","_1","contours.smooth","quantize","k","nice","zero","ex","extent","min","span","reverse","Isocontour","params","Transform","call","levels","resolve","t","transformPaths","paths","grid","datum","s","scale","translate","isFunction","sx","isNumber","sy","transform","tx","ty","transformPolygon","transformRing","flip","transformPoint","x1","y1","geometry","radius","bw","data","v","bandwidthNRD","sqrt","number","constant","density2D","density","counts","rx","bandwidth","ry","ox","oy","m","values0","Float32Array","values1","d","weight","blurX","blurY","sz","width","height","x2","y2","one","density.x","density.y","density.weight","density.size","cellSize","density.cellSize","log","LN2","density.bandwidth","array","source","target","w","sr","KDE2D","obj","PARAMS","param","partition","groupby","groups","get","dims","Contour","GeoJSON","GeoPath","initPath","path","pointRadius","prev","context","GeoPoint","GeoShape","shapeGenerator","field","shape","shape.context","graticuleX","y0","epsilon","graticuleY","x0","graticule","lines","X0","DX","X1","X","Y0","DY","Y1","Y","filter","abs","precision","graticule.lines","outline","graticule.outline","slice","graticule.extent","extentMajor","extentMinor","graticule.extentMajor","graticule.extentMinor","graticule.step","stepMajor","stepMinor","graticule.stepMajor","graticule.stepMinor","graticule.precision","Graticule","generator","constructor","prototype","extend","parent","definition","Object","create","key","Color","color_formatHex","rgb","formatHex","color_formatRgb","formatRgb","color","format","l","trim","toLowerCase","reHex","exec","parseInt","rgbn","Rgb","rgba","reRgbInteger","reRgbPercent","reRgbaInteger","reRgbaPercent","reHslPercent","hsla","reHslaPercent","named","hasOwnProperty","NaN","opacity","o","rgb_formatHex","hex","rgb_formatRgb","clampa","clampi","isNaN","toString","h","Hsl","hslConvert","clamph","clampt","hsl2rgb","m1","m2","Heatmap","color_","dep","dependency","opacity_","$value","$max","set","toSet","accessorFields","$x","$y","toCanvas","val","can","canvas","ctx","getContext","img","getImageData","pix","putImageData","Projection","modified","fit","proj","collectGeoJSON","fitExtent","fitSize","projection","FeatureCollection","features","reduce","featurize","Feature","Definition","inherits","pulse","changed","StopPropagation","out","fork","NO_SOURCE","NO_FIELDS","materialize","SOURCE","identity","thresholds","as","isArray","rederive","ingest","rem","add","names","accessorName","kde","vals","thresh","post","_features","points","_points","fields","lon","lat","geojson","flag","ADD","mod","REM","visit","MultiPoint","ALL","getProjectionPath","reflow","ADD_MOD","modifies","xy","src","gen","prop","replace","brighter","darker","RegExp","aliceblue","antiquewhite","aqua","aquamarine","azure","beige","bisque","black","blanchedalmond","blue","blueviolet","brown","burlywood","cadetblue","chartreuse","chocolate","coral","cornflowerblue","cornsilk","crimson","cyan","darkblue","darkcyan","darkgoldenrod","darkgray","darkgreen","darkgrey","darkkhaki","darkmagenta","darkolivegreen","darkorange","darkorchid","darkred","darksalmon","darkseagreen","darkslateblue","darkslategray","darkslategrey","darkturquoise","darkviolet","deeppink","deepskyblue","dimgray","dimgrey","dodgerblue","firebrick","floralwhite","forestgreen","fuchsia","gainsboro","ghostwhite","gold","goldenrod","gray","green","greenyellow","grey","honeydew","hotpink","indianred","indigo","ivory","khaki","lavender","lavenderblush","lawngreen","lemonchiffon","lightblue","lightcoral","lightcyan","lightgoldenrodyellow","lightgray","lightgreen","lightgrey","lightpink","lightsalmon","lightseagreen","lightskyblue","lightslategray","lightslategrey","lightsteelblue","lightyellow","lime","limegreen","linen","magenta","maroon","mediumaquamarine","mediumblue","mediumorchid","mediumpurple","mediumseagreen","mediumslateblue","mediumspringgreen","mediumturquoise","mediumvioletred","midnightblue","mintcream","mistyrose","moccasin","navajowhite","navy","oldlace","olive","olivedrab","orange","orangered","orchid","palegoldenrod","palegreen","paleturquoise","palevioletred","papayawhip","peachpuff","peru","pink","plum","powderblue","purple","rebeccapurple","red","rosybrown","royalblue","saddlebrown","salmon","sandybrown","seagreen","seashell","sienna","silver","skyblue","slateblue","slategray","slategrey","snow","springgreen","steelblue","tan","teal","thistle","tomato","turquoise","violet","wheat","white","whitesmoke","yellow","yellowgreen","copy","channels","assign","displayable","formatHex8","color_formatHex8","formatHsl","color_formatHsl","clamp","rgb_formatHex8","hsl","shared","projectionProperties","geopath","geopoint","geoshape","heatmap","isocontour","kde2d"]
}
