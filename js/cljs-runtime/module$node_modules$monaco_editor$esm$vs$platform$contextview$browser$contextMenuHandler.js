shadow$provide.module$node_modules$monaco_editor$esm$vs$platform$contextview$browser$contextMenuHandler = function(require, module, exports) {
  Object.defineProperties(exports, {__esModule:{enumerable:!0, value:!0}, ContextMenuHandler:{enumerable:!0, get:function() {
    return ContextMenuHandler;
  }}});
  var require$_DOT__DOT__SLASH__DOT__DOT__SLASH__DOT__DOT__SLASH_base_SLASH_browser_SLASH_dom_DOT_js = require("module$node_modules$monaco_editor$esm$vs$base$browser$dom"), require$_DOT__DOT__SLASH__DOT__DOT__SLASH__DOT__DOT__SLASH_base_SLASH_browser_SLASH_mouseEvent_DOT_js = require("module$node_modules$monaco_editor$esm$vs$base$browser$mouseEvent"), require$_DOT__DOT__SLASH__DOT__DOT__SLASH__DOT__DOT__SLASH_base_SLASH_browser_SLASH_ui_SLASH_menu_SLASH_menu_DOT_js = require("module$node_modules$monaco_editor$esm$vs$base$browser$ui$menu$menu"), 
  require$_DOT__DOT__SLASH__DOT__DOT__SLASH__DOT__DOT__SLASH_base_SLASH_common_SLASH_actions_DOT_js = require("module$node_modules$monaco_editor$esm$vs$base$common$actions"), require$_DOT__DOT__SLASH__DOT__DOT__SLASH__DOT__DOT__SLASH_base_SLASH_common_SLASH_errors_DOT_js = require("module$node_modules$monaco_editor$esm$vs$base$common$errors"), require$_DOT__DOT__SLASH__DOT__DOT__SLASH__DOT__DOT__SLASH_base_SLASH_common_SLASH_lifecycle_DOT_js = require("module$node_modules$monaco_editor$esm$vs$base$common$lifecycle"), 
  require$_DOT__DOT__SLASH__DOT__DOT__SLASH_theme_SLASH_browser_SLASH_defaultStyles_DOT_js = require("module$node_modules$monaco_editor$esm$vs$platform$theme$browser$defaultStyles");
  class ContextMenuHandler {
    constructor(contextViewService, telemetryService, notificationService, keybindingService) {
      this.contextViewService = contextViewService;
      this.telemetryService = telemetryService;
      this.notificationService = notificationService;
      this.keybindingService = keybindingService;
      this.blockDisposable = this.block = this.lastContainer = this.focusToReturn = null;
      this.options = {blockMouse:!0};
    }
    configure(options) {
      this.options = options;
    }
    showContextMenu(delegate) {
      const actions = delegate.getActions();
      if (actions.length) {
        this.focusToReturn = (0,require$_DOT__DOT__SLASH__DOT__DOT__SLASH__DOT__DOT__SLASH_base_SLASH_browser_SLASH_dom_DOT_js.getActiveElement)();
        var menu, shadowRootElement = delegate.domForShadowRoot instanceof HTMLElement ? delegate.domForShadowRoot : void 0;
        this.contextViewService.showContextView({getAnchor:() => delegate.getAnchor(), canRelayout:!1, anchorAlignment:delegate.anchorAlignment, anchorAxisAlignment:delegate.anchorAxisAlignment, render:container => {
          var _a;
          this.lastContainer = container;
          var className = delegate.getMenuClassName ? delegate.getMenuClassName() : "";
          className && (container.className += " " + className);
          this.options.blockMouse && (this.block = container.appendChild((0,require$_DOT__DOT__SLASH__DOT__DOT__SLASH__DOT__DOT__SLASH_base_SLASH_browser_SLASH_dom_DOT_js.$)(".context-view-block")), this.block.style.position = "fixed", this.block.style.cursor = "initial", this.block.style.left = "0", this.block.style.top = "0", this.block.style.width = "100%", this.block.style.height = "100%", this.block.style.zIndex = "-1", (_a = this.blockDisposable) === null || _a === void 0 || _a.dispose(), this.blockDisposable = 
          (0,require$_DOT__DOT__SLASH__DOT__DOT__SLASH__DOT__DOT__SLASH_base_SLASH_browser_SLASH_dom_DOT_js.addDisposableListener)(this.block, require$_DOT__DOT__SLASH__DOT__DOT__SLASH__DOT__DOT__SLASH_base_SLASH_browser_SLASH_dom_DOT_js.EventType.MOUSE_DOWN, e => e.stopPropagation()));
          _a = new require$_DOT__DOT__SLASH__DOT__DOT__SLASH__DOT__DOT__SLASH_base_SLASH_common_SLASH_lifecycle_DOT_js.DisposableStore();
          className = delegate.actionRunner || new require$_DOT__DOT__SLASH__DOT__DOT__SLASH__DOT__DOT__SLASH_base_SLASH_common_SLASH_actions_DOT_js.ActionRunner();
          className.onWillRun(evt => this.onActionRun(evt, !delegate.skipTelemetry), this, _a);
          className.onDidRun(this.onDidActionRun, this, _a);
          menu = new require$_DOT__DOT__SLASH__DOT__DOT__SLASH__DOT__DOT__SLASH_base_SLASH_browser_SLASH_ui_SLASH_menu_SLASH_menu_DOT_js.Menu(container, actions, {actionViewItemProvider:delegate.getActionViewItem, context:delegate.getActionsContext ? delegate.getActionsContext() : null, actionRunner:className, getKeyBinding:delegate.getKeyBinding ? delegate.getKeyBinding : action => this.keybindingService.lookupKeybinding(action.id)}, require$_DOT__DOT__SLASH__DOT__DOT__SLASH_theme_SLASH_browser_SLASH_defaultStyles_DOT_js.defaultMenuStyles);
          menu.onDidCancel(() => this.contextViewService.hideContextView(!0), null, _a);
          menu.onDidBlur(() => this.contextViewService.hideContextView(!0), null, _a);
          const targetWindow = (0,require$_DOT__DOT__SLASH__DOT__DOT__SLASH__DOT__DOT__SLASH_base_SLASH_browser_SLASH_dom_DOT_js.getWindow)(container);
          _a.add((0,require$_DOT__DOT__SLASH__DOT__DOT__SLASH__DOT__DOT__SLASH_base_SLASH_browser_SLASH_dom_DOT_js.addDisposableListener)(targetWindow, require$_DOT__DOT__SLASH__DOT__DOT__SLASH__DOT__DOT__SLASH_base_SLASH_browser_SLASH_dom_DOT_js.EventType.BLUR, () => this.contextViewService.hideContextView(!0)));
          _a.add((0,require$_DOT__DOT__SLASH__DOT__DOT__SLASH__DOT__DOT__SLASH_base_SLASH_browser_SLASH_dom_DOT_js.addDisposableListener)(targetWindow, require$_DOT__DOT__SLASH__DOT__DOT__SLASH__DOT__DOT__SLASH_base_SLASH_browser_SLASH_dom_DOT_js.EventType.MOUSE_DOWN, e => {
            if (!e.defaultPrevented) {
              e = new require$_DOT__DOT__SLASH__DOT__DOT__SLASH__DOT__DOT__SLASH_base_SLASH_browser_SLASH_mouseEvent_DOT_js.StandardMouseEvent(targetWindow, e);
              var element = e.target;
              if (!e.rightButton) {
                for (; element;) {
                  if (element === container) {
                    return;
                  }
                  element = element.parentElement;
                }
                this.contextViewService.hideContextView(!0);
              }
            }
          }));
          return (0,require$_DOT__DOT__SLASH__DOT__DOT__SLASH__DOT__DOT__SLASH_base_SLASH_common_SLASH_lifecycle_DOT_js.combinedDisposable)(_a, menu);
        }, focus:() => {
          menu === null || menu === void 0 || menu.focus(!!delegate.autoSelectFirstItem);
        }, onHide:didCancel => {
          var _a, _b, _c;
          (_a = delegate.onHide) === null || _a === void 0 || _a.call(delegate, !!didCancel);
          this.block && (this.block.remove(), this.block = null);
          (_b = this.blockDisposable) === null || _b === void 0 || _b.dispose();
          this.blockDisposable = null;
          !this.lastContainer || (0,require$_DOT__DOT__SLASH__DOT__DOT__SLASH__DOT__DOT__SLASH_base_SLASH_browser_SLASH_dom_DOT_js.getActiveElement)() !== this.lastContainer && !(0,require$_DOT__DOT__SLASH__DOT__DOT__SLASH__DOT__DOT__SLASH_base_SLASH_browser_SLASH_dom_DOT_js.isAncestor)((0,require$_DOT__DOT__SLASH__DOT__DOT__SLASH__DOT__DOT__SLASH_base_SLASH_browser_SLASH_dom_DOT_js.getActiveElement)(), this.lastContainer) || (_c = this.focusToReturn) !== null && _c !== void 0 && _c.focus();
          this.lastContainer = null;
        }}, shadowRootElement, !!shadowRootElement);
      }
    }
    onActionRun(e, logTelemetry) {
      logTelemetry && this.telemetryService.publicLog2("workbenchActionExecuted", {id:e.action.id, from:"contextMenu"});
      this.contextViewService.hideContextView(!1);
    }
    onDidActionRun(e) {
      e.error && !(0,require$_DOT__DOT__SLASH__DOT__DOT__SLASH__DOT__DOT__SLASH_base_SLASH_common_SLASH_errors_DOT_js.isCancellationError)(e.error) && this.notificationService.error(e.error);
    }
  }
};

//# sourceMappingURL=module$node_modules$monaco_editor$esm$vs$platform$contextview$browser$contextMenuHandler.js.map
