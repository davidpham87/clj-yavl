shadow$provide.module$node_modules$monaco_editor$esm$vs$editor$common$services$markerDecorationsService = function(require, module, exports) {
  Object.defineProperties(exports, {__esModule:{enumerable:!0, value:!0}, MarkerDecorationsService:{enumerable:!0, get:function() {
    return MarkerDecorationsService;
  }}});
  var require$_DOT__DOT__SLASH__DOT__DOT__SLASH__DOT__DOT__SLASH_platform_SLASH_markers_SLASH_common_SLASH_markers_DOT_js = require("module$node_modules$monaco_editor$esm$vs$platform$markers$common$markers"), require$_DOT__DOT__SLASH__DOT__DOT__SLASH__DOT__DOT__SLASH_base_SLASH_common_SLASH_lifecycle_DOT_js = require("module$node_modules$monaco_editor$esm$vs$base$common$lifecycle"), require$_DOT__DOT__SLASH_model_DOT_js = require("module$node_modules$monaco_editor$esm$vs$editor$common$model"), require$_DOT__DOT__SLASH__DOT__DOT__SLASH__DOT__DOT__SLASH_platform_SLASH_theme_SLASH_common_SLASH_themeService_DOT_js = 
  require("module$node_modules$monaco_editor$esm$vs$platform$theme$common$themeService"), require$_DOT__DOT__SLASH_core_SLASH_editorColorRegistry_DOT_js = require("module$node_modules$monaco_editor$esm$vs$editor$common$core$editorColorRegistry");
  module = require("module$node_modules$monaco_editor$esm$vs$editor$common$services$model");
  var require$_DOT__DOT__SLASH_core_SLASH_range_DOT_js = require("module$node_modules$monaco_editor$esm$vs$editor$common$core$range"), require$_DOT__DOT__SLASH__DOT__DOT__SLASH__DOT__DOT__SLASH_base_SLASH_common_SLASH_network_DOT_js = require("module$node_modules$monaco_editor$esm$vs$base$common$network"), require$_DOT__DOT__SLASH__DOT__DOT__SLASH__DOT__DOT__SLASH_base_SLASH_common_SLASH_event_DOT_js = require("module$node_modules$monaco_editor$esm$vs$base$common$event"), require$_DOT__DOT__SLASH__DOT__DOT__SLASH__DOT__DOT__SLASH_platform_SLASH_theme_SLASH_common_SLASH_colorRegistry_DOT_js = 
  require("module$node_modules$monaco_editor$esm$vs$platform$theme$common$colorRegistry"), require$_DOT__DOT__SLASH__DOT__DOT__SLASH__DOT__DOT__SLASH_base_SLASH_common_SLASH_map_DOT_js = require("module$node_modules$monaco_editor$esm$vs$base$common$map"), require$_DOT__DOT__SLASH__DOT__DOT__SLASH__DOT__DOT__SLASH_base_SLASH_common_SLASH_collections_DOT_js = require("module$node_modules$monaco_editor$esm$vs$base$common$collections");
  require = this && this.__param || function(paramIndex, decorator) {
    return function(target, key) {
      decorator(target, key, paramIndex);
    };
  };
  let MarkerDecorationsService = class extends require$_DOT__DOT__SLASH__DOT__DOT__SLASH__DOT__DOT__SLASH_base_SLASH_common_SLASH_lifecycle_DOT_js.Disposable {
    constructor(modelService, _markerService) {
      super();
      this._markerService = _markerService;
      this._onDidChangeMarker = this._register(new require$_DOT__DOT__SLASH__DOT__DOT__SLASH__DOT__DOT__SLASH_base_SLASH_common_SLASH_event_DOT_js.Emitter());
      this._markerDecorations = new require$_DOT__DOT__SLASH__DOT__DOT__SLASH__DOT__DOT__SLASH_base_SLASH_common_SLASH_map_DOT_js.ResourceMap();
      modelService.getModels().forEach(model => this._onModelAdded(model));
      this._register(modelService.onModelAdded(this._onModelAdded, this));
      this._register(modelService.onModelRemoved(this._onModelRemoved, this));
      this._register(this._markerService.onMarkerChanged(this._handleMarkerChange, this));
    }
    dispose() {
      super.dispose();
      this._markerDecorations.forEach(value => value.dispose());
      this._markerDecorations.clear();
    }
    getMarker(uri, decoration) {
      return (uri = this._markerDecorations.get(uri)) ? uri.getMarker(decoration) || null : null;
    }
    _handleMarkerChange(changedResources) {
      changedResources.forEach(resource => {
        (resource = this._markerDecorations.get(resource)) && this._updateDecorations(resource);
      });
    }
    _onModelAdded(model) {
      const markerDecorations = new MarkerDecorations(model);
      this._markerDecorations.set(model.uri, markerDecorations);
      this._updateDecorations(markerDecorations);
    }
    _onModelRemoved(model) {
      var _a;
      const markerDecorations = this._markerDecorations.get(model.uri);
      markerDecorations && (markerDecorations.dispose(), this._markerDecorations.delete(model.uri));
      if (model.uri.scheme === require$_DOT__DOT__SLASH__DOT__DOT__SLASH__DOT__DOT__SLASH_base_SLASH_common_SLASH_network_DOT_js.Schemas.inMemory || model.uri.scheme === require$_DOT__DOT__SLASH__DOT__DOT__SLASH__DOT__DOT__SLASH_base_SLASH_common_SLASH_network_DOT_js.Schemas.internal || model.uri.scheme === require$_DOT__DOT__SLASH__DOT__DOT__SLASH__DOT__DOT__SLASH_base_SLASH_common_SLASH_network_DOT_js.Schemas.vscode) {
        (_a = this._markerService) === null || _a === void 0 || _a.read({resource:model.uri}).map(marker => marker.owner).forEach(owner => this._markerService.remove(owner, [model.uri]));
      }
    }
    _updateDecorations(markerDecorations) {
      const markers = this._markerService.read({resource:markerDecorations.model.uri, take:500});
      markerDecorations.update(markers) && this._onDidChangeMarker.fire(markerDecorations.model);
    }
  };
  MarkerDecorationsService = (this && this.__decorate || function(decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") {
      r = Reflect.decorate(decorators, target, key, desc);
    } else {
      for (var i = decorators.length - 1; i >= 0; i--) {
        if (d = decorators[i]) {
          r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
        }
      }
    }
    return c > 3 && r && Object.defineProperty(target, key, r), r;
  })([require(0, module.IModelService), require(1, require$_DOT__DOT__SLASH__DOT__DOT__SLASH__DOT__DOT__SLASH_platform_SLASH_markers_SLASH_common_SLASH_markers_DOT_js.IMarkerService)], MarkerDecorationsService);
  class MarkerDecorations extends require$_DOT__DOT__SLASH__DOT__DOT__SLASH__DOT__DOT__SLASH_base_SLASH_common_SLASH_lifecycle_DOT_js.Disposable {
    constructor(model) {
      super();
      this.model = model;
      this._map = new require$_DOT__DOT__SLASH__DOT__DOT__SLASH__DOT__DOT__SLASH_base_SLASH_common_SLASH_map_DOT_js.BidirectionalMap();
      this._register((0,require$_DOT__DOT__SLASH__DOT__DOT__SLASH__DOT__DOT__SLASH_base_SLASH_common_SLASH_lifecycle_DOT_js.toDisposable)(() => {
        this.model.deltaDecorations([...this._map.values()], []);
        this._map.clear();
      }));
    }
    update(markers) {
      const {added, removed} = (0,require$_DOT__DOT__SLASH__DOT__DOT__SLASH__DOT__DOT__SLASH_base_SLASH_common_SLASH_collections_DOT_js.diffSets)(new Set(this._map.keys()), new Set(markers));
      if (added.length === 0 && removed.length === 0) {
        return !1;
      }
      markers = removed.map(marker => this._map.get(marker));
      const newDecorations = added.map(marker => ({range:this._createDecorationRange(this.model, marker), options:this._createDecorationOption(marker)}));
      markers = this.model.deltaDecorations(markers, newDecorations);
      for (var removedMarker of removed) {
        this._map.delete(removedMarker);
      }
      for (removedMarker = 0; removedMarker < markers.length; removedMarker++) {
        this._map.set(added[removedMarker], markers[removedMarker]);
      }
      return !0;
    }
    getMarker(decoration) {
      return this._map.getKey(decoration.id);
    }
    _createDecorationRange(model, rawMarker) {
      let ret = require$_DOT__DOT__SLASH_core_SLASH_range_DOT_js.Range.lift(rawMarker);
      rawMarker.severity !== require$_DOT__DOT__SLASH__DOT__DOT__SLASH__DOT__DOT__SLASH_platform_SLASH_markers_SLASH_common_SLASH_markers_DOT_js.MarkerSeverity.Hint || this._hasMarkerTag(rawMarker, 1) || this._hasMarkerTag(rawMarker, 2) || (ret = ret.setEndPosition(ret.startLineNumber, ret.startColumn + 2));
      ret = model.validateRange(ret);
      if (ret.isEmpty()) {
        rawMarker = model.getLineLastNonWhitespaceColumn(ret.startLineNumber) || model.getLineMaxColumn(ret.startLineNumber);
        if (rawMarker === 1 || ret.endColumn >= rawMarker) {
          return ret;
        }
        (model = model.getWordAtPosition(ret.getStartPosition())) && (ret = new require$_DOT__DOT__SLASH_core_SLASH_range_DOT_js.Range(ret.startLineNumber, model.startColumn, ret.endLineNumber, model.endColumn));
      } else {
        rawMarker.endColumn === Number.MAX_VALUE && rawMarker.startColumn === 1 && ret.startLineNumber === ret.endLineNumber && (model = model.getLineFirstNonWhitespaceColumn(rawMarker.startLineNumber), model < ret.endColumn && (ret = new require$_DOT__DOT__SLASH_core_SLASH_range_DOT_js.Range(ret.startLineNumber, model, ret.endLineNumber, ret.endColumn), rawMarker.startColumn = model));
      }
      return ret;
    }
    _createDecorationOption(marker) {
      let className, color = void 0, zIndex, inlineClassName = void 0, minimap;
      switch(marker.severity) {
        case require$_DOT__DOT__SLASH__DOT__DOT__SLASH__DOT__DOT__SLASH_platform_SLASH_markers_SLASH_common_SLASH_markers_DOT_js.MarkerSeverity.Hint:
          className = this._hasMarkerTag(marker, 2) ? void 0 : this._hasMarkerTag(marker, 1) ? "squiggly-unnecessary" : "squiggly-hint";
          zIndex = 0;
          break;
        case require$_DOT__DOT__SLASH__DOT__DOT__SLASH__DOT__DOT__SLASH_platform_SLASH_markers_SLASH_common_SLASH_markers_DOT_js.MarkerSeverity.Info:
          className = "squiggly-info";
          color = (0,require$_DOT__DOT__SLASH__DOT__DOT__SLASH__DOT__DOT__SLASH_platform_SLASH_theme_SLASH_common_SLASH_themeService_DOT_js.themeColorFromId)(require$_DOT__DOT__SLASH_core_SLASH_editorColorRegistry_DOT_js.overviewRulerInfo);
          zIndex = 10;
          minimap = {color:(0,require$_DOT__DOT__SLASH__DOT__DOT__SLASH__DOT__DOT__SLASH_platform_SLASH_theme_SLASH_common_SLASH_themeService_DOT_js.themeColorFromId)(require$_DOT__DOT__SLASH__DOT__DOT__SLASH__DOT__DOT__SLASH_platform_SLASH_theme_SLASH_common_SLASH_colorRegistry_DOT_js.minimapInfo), position:require$_DOT__DOT__SLASH_model_DOT_js.MinimapPosition.Inline};
          break;
        case require$_DOT__DOT__SLASH__DOT__DOT__SLASH__DOT__DOT__SLASH_platform_SLASH_markers_SLASH_common_SLASH_markers_DOT_js.MarkerSeverity.Warning:
          className = "squiggly-warning";
          color = (0,require$_DOT__DOT__SLASH__DOT__DOT__SLASH__DOT__DOT__SLASH_platform_SLASH_theme_SLASH_common_SLASH_themeService_DOT_js.themeColorFromId)(require$_DOT__DOT__SLASH_core_SLASH_editorColorRegistry_DOT_js.overviewRulerWarning);
          zIndex = 20;
          minimap = {color:(0,require$_DOT__DOT__SLASH__DOT__DOT__SLASH__DOT__DOT__SLASH_platform_SLASH_theme_SLASH_common_SLASH_themeService_DOT_js.themeColorFromId)(require$_DOT__DOT__SLASH__DOT__DOT__SLASH__DOT__DOT__SLASH_platform_SLASH_theme_SLASH_common_SLASH_colorRegistry_DOT_js.minimapWarning), position:require$_DOT__DOT__SLASH_model_DOT_js.MinimapPosition.Inline};
          break;
        default:
          className = "squiggly-error", color = (0,require$_DOT__DOT__SLASH__DOT__DOT__SLASH__DOT__DOT__SLASH_platform_SLASH_theme_SLASH_common_SLASH_themeService_DOT_js.themeColorFromId)(require$_DOT__DOT__SLASH_core_SLASH_editorColorRegistry_DOT_js.overviewRulerError), zIndex = 30, minimap = {color:(0,require$_DOT__DOT__SLASH__DOT__DOT__SLASH__DOT__DOT__SLASH_platform_SLASH_theme_SLASH_common_SLASH_themeService_DOT_js.themeColorFromId)(require$_DOT__DOT__SLASH__DOT__DOT__SLASH__DOT__DOT__SLASH_platform_SLASH_theme_SLASH_common_SLASH_colorRegistry_DOT_js.minimapError), 
          position:require$_DOT__DOT__SLASH_model_DOT_js.MinimapPosition.Inline};
      }
      marker.tags && (marker.tags.indexOf(1) !== -1 && (inlineClassName = "squiggly-inline-unnecessary"), marker.tags.indexOf(2) !== -1 && (inlineClassName = "squiggly-inline-deprecated"));
      return {description:"marker-decoration", stickiness:1, className, showIfCollapsed:!0, overviewRuler:{color, position:require$_DOT__DOT__SLASH_model_DOT_js.OverviewRulerLane.Right}, minimap, zIndex, inlineClassName};
    }
    _hasMarkerTag(marker, tag) {
      return marker.tags ? marker.tags.indexOf(tag) >= 0 : !1;
    }
  }
};

//# sourceMappingURL=module$node_modules$monaco_editor$esm$vs$editor$common$services$markerDecorationsService.js.map
