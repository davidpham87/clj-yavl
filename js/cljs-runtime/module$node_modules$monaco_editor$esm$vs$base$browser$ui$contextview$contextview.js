shadow$provide.module$node_modules$monaco_editor$esm$vs$base$browser$ui$contextview$contextview = function(require, module, exports) {
  function isAnchor(obj) {
    return !!obj && typeof obj.x === "number" && typeof obj.y === "number";
  }
  function layout(viewportSize, viewSize, anchor) {
    const layoutAfterAnchorBoundary = anchor.mode === LayoutAnchorMode.ALIGN ? anchor.offset : anchor.offset + anchor.size, layoutBeforeAnchorBoundary = anchor.mode === LayoutAnchorMode.ALIGN ? anchor.offset + anchor.size : anchor.offset;
    return anchor.position === 0 ? viewSize <= viewportSize - layoutAfterAnchorBoundary ? layoutAfterAnchorBoundary : viewSize <= layoutBeforeAnchorBoundary ? layoutBeforeAnchorBoundary - viewSize : Math.max(viewportSize - viewSize, 0) : viewSize <= layoutBeforeAnchorBoundary ? layoutBeforeAnchorBoundary - viewSize : viewSize <= viewportSize - layoutAfterAnchorBoundary ? layoutAfterAnchorBoundary : 0;
  }
  Object.defineProperties(exports, {__esModule:{enumerable:!0, value:!0}, ContextView:{enumerable:!0, get:function() {
    return ContextView;
  }}, LayoutAnchorMode:{enumerable:!0, get:function() {
    return LayoutAnchorMode;
  }}, isAnchor:{enumerable:!0, get:function() {
    return isAnchor;
  }}, layout:{enumerable:!0, get:function() {
    return layout;
  }}});
  var require$_DOT__DOT__SLASH__DOT__DOT__SLASH_canIUse_DOT_js = require("module$node_modules$monaco_editor$esm$vs$base$browser$canIUse"), DOM = require("module$node_modules$monaco_editor$esm$vs$base$browser$dom"), require$_DOT__DOT__SLASH__DOT__DOT__SLASH__DOT__DOT__SLASH_common_SLASH_lifecycle_DOT_js = require("module$node_modules$monaco_editor$esm$vs$base$common$lifecycle"), platform = require("module$node_modules$monaco_editor$esm$vs$base$common$platform"), require$_DOT__DOT__SLASH__DOT__DOT__SLASH__DOT__DOT__SLASH_common_SLASH_range_DOT_js = 
  require("module$node_modules$monaco_editor$esm$vs$base$common$range");
  require("module$node_modules$monaco_editor$esm$vs$base$browser$ui$contextview$contextview_css");
  var LayoutAnchorMode;
  (function(LayoutAnchorMode) {
    LayoutAnchorMode[LayoutAnchorMode.AVOID = 0] = "AVOID";
    LayoutAnchorMode[LayoutAnchorMode.ALIGN = 1] = "ALIGN";
  })(LayoutAnchorMode ||= {});
  class ContextView extends require$_DOT__DOT__SLASH__DOT__DOT__SLASH__DOT__DOT__SLASH_common_SLASH_lifecycle_DOT_js.Disposable {
    constructor(container, domPosition) {
      super();
      this.container = null;
      this.useShadowDOM = this.useFixedPosition = !1;
      this.delegate = null;
      this.toDisposeOnSetContainer = this.toDisposeOnClean = require$_DOT__DOT__SLASH__DOT__DOT__SLASH__DOT__DOT__SLASH_common_SLASH_lifecycle_DOT_js.Disposable.None;
      this.shadowRootHostElement = this.shadowRoot = null;
      this.view = DOM.$(".context-view");
      DOM.hide(this.view);
      this.setContainer(container, domPosition);
      this._register((0,require$_DOT__DOT__SLASH__DOT__DOT__SLASH__DOT__DOT__SLASH_common_SLASH_lifecycle_DOT_js.toDisposable)(() => this.setContainer(null, 1)));
    }
    setContainer(container, domPosition) {
      var _a;
      this.useFixedPosition = domPosition !== 1;
      const usedShadowDOM = this.useShadowDOM;
      this.useShadowDOM = domPosition === 3;
      if (container !== this.container || usedShadowDOM === this.useShadowDOM) {
        if (this.container && (this.toDisposeOnSetContainer.dispose(), this.shadowRoot ? (this.shadowRoot.removeChild(this.view), this.shadowRoot = null, (_a = this.shadowRootHostElement) === null || _a === void 0 || _a.remove(), this.shadowRootHostElement = null) : this.container.removeChild(this.view), this.container = null), container) {
          this.container = container;
          this.useShadowDOM ? (this.shadowRootHostElement = DOM.$(".shadow-root-host"), this.container.appendChild(this.shadowRootHostElement), this.shadowRoot = this.shadowRootHostElement.attachShadow({mode:"open"}), container = document.createElement("style"), container.textContent = '\n\t:host {\n\t\tall: initial; /* 1st rule so subsequent properties are reset. */\n\t}\n\n\t.codicon[class*\x3d\'codicon-\'] {\n\t\tfont: normal normal normal 16px/1 codicon;\n\t\tdisplay: inline-block;\n\t\ttext-decoration: none;\n\t\ttext-rendering: auto;\n\t\ttext-align: center;\n\t\t-webkit-font-smoothing: antialiased;\n\t\t-moz-osx-font-smoothing: grayscale;\n\t\tuser-select: none;\n\t\t-webkit-user-select: none;\n\t\t-ms-user-select: none;\n\t}\n\n\t:host {\n\t\tfont-family: -apple-system, BlinkMacSystemFont, "Segoe WPC", "Segoe UI", "HelveticaNeue-Light", system-ui, "Ubuntu", "Droid Sans", sans-serif;\n\t}\n\n\t:host-context(.mac) { font-family: -apple-system, BlinkMacSystemFont, sans-serif; }\n\t:host-context(.mac:lang(zh-Hans)) { font-family: -apple-system, BlinkMacSystemFont, "PingFang SC", "Hiragino Sans GB", sans-serif; }\n\t:host-context(.mac:lang(zh-Hant)) { font-family: -apple-system, BlinkMacSystemFont, "PingFang TC", sans-serif; }\n\t:host-context(.mac:lang(ja)) { font-family: -apple-system, BlinkMacSystemFont, "Hiragino Kaku Gothic Pro", sans-serif; }\n\t:host-context(.mac:lang(ko)) { font-family: -apple-system, BlinkMacSystemFont, "Nanum Gothic", "Apple SD Gothic Neo", "AppleGothic", sans-serif; }\n\n\t:host-context(.windows) { font-family: "Segoe WPC", "Segoe UI", sans-serif; }\n\t:host-context(.windows:lang(zh-Hans)) { font-family: "Segoe WPC", "Segoe UI", "Microsoft YaHei", sans-serif; }\n\t:host-context(.windows:lang(zh-Hant)) { font-family: "Segoe WPC", "Segoe UI", "Microsoft Jhenghei", sans-serif; }\n\t:host-context(.windows:lang(ja)) { font-family: "Segoe WPC", "Segoe UI", "Yu Gothic UI", "Meiryo UI", sans-serif; }\n\t:host-context(.windows:lang(ko)) { font-family: "Segoe WPC", "Segoe UI", "Malgun Gothic", "Dotom", sans-serif; }\n\n\t:host-context(.linux) { font-family: system-ui, "Ubuntu", "Droid Sans", sans-serif; }\n\t:host-context(.linux:lang(zh-Hans)) { font-family: system-ui, "Ubuntu", "Droid Sans", "Source Han Sans SC", "Source Han Sans CN", "Source Han Sans", sans-serif; }\n\t:host-context(.linux:lang(zh-Hant)) { font-family: system-ui, "Ubuntu", "Droid Sans", "Source Han Sans TC", "Source Han Sans TW", "Source Han Sans", sans-serif; }\n\t:host-context(.linux:lang(ja)) { font-family: system-ui, "Ubuntu", "Droid Sans", "Source Han Sans J", "Source Han Sans JP", "Source Han Sans", sans-serif; }\n\t:host-context(.linux:lang(ko)) { font-family: system-ui, "Ubuntu", "Droid Sans", "Source Han Sans K", "Source Han Sans JR", "Source Han Sans", "UnDotum", "FBaekmuk Gulim", sans-serif; }\n', 
          this.shadowRoot.appendChild(container), this.shadowRoot.appendChild(this.view), this.shadowRoot.appendChild(DOM.$("slot"))) : this.container.appendChild(this.view);
          const toDisposeOnSetContainer = new require$_DOT__DOT__SLASH__DOT__DOT__SLASH__DOT__DOT__SLASH_common_SLASH_lifecycle_DOT_js.DisposableStore();
          ContextView.BUBBLE_UP_EVENTS.forEach(event => {
            toDisposeOnSetContainer.add(DOM.addStandardDisposableListener(this.container, event, e => {
              this.onDOMEvent(e, !1);
            }));
          });
          ContextView.BUBBLE_DOWN_EVENTS.forEach(event => {
            toDisposeOnSetContainer.add(DOM.addStandardDisposableListener(this.container, event, e => {
              this.onDOMEvent(e, !0);
            }, !0));
          });
          this.toDisposeOnSetContainer = toDisposeOnSetContainer;
        }
      }
    }
    show(delegate) {
      var _a, _b;
      this.isVisible() && this.hide();
      DOM.clearNode(this.view);
      this.view.className = "context-view";
      this.view.style.top = "0px";
      this.view.style.left = "0px";
      this.view.style.zIndex = "2575";
      this.view.style.position = this.useFixedPosition ? "fixed" : "absolute";
      DOM.show(this.view);
      this.toDisposeOnClean = delegate.render(this.view) || require$_DOT__DOT__SLASH__DOT__DOT__SLASH__DOT__DOT__SLASH_common_SLASH_lifecycle_DOT_js.Disposable.None;
      this.delegate = delegate;
      this.doLayout();
      (_b = (_a = this.delegate).focus) === null || _b === void 0 || _b.call(_a);
    }
    getViewElement() {
      return this.view;
    }
    layout() {
      this.isVisible() && (this.delegate.canRelayout !== !1 || platform.isIOS && require$_DOT__DOT__SLASH__DOT__DOT__SLASH_canIUse_DOT_js.BrowserFeatures.pointerEvents ? (this.delegate.layout && this.delegate.layout(), this.doLayout()) : this.hide());
    }
    doLayout() {
      if (this.isVisible()) {
        var anchor = this.delegate.getAnchor();
        if (anchor instanceof HTMLElement) {
          var elementPosition = DOM.getDomNodePagePosition(anchor);
          anchor = DOM.getDomNodeZoomLevel(anchor);
          var JSCompiler_object_inline_top_2333 = elementPosition.top * anchor;
          var JSCompiler_object_inline_left_2334 = elementPosition.left * anchor;
          var JSCompiler_object_inline_width_2335 = elementPosition.width * anchor;
          var JSCompiler_object_inline_height_2336 = elementPosition.height * anchor;
        } else {
          isAnchor(anchor) ? (JSCompiler_object_inline_top_2333 = anchor.y, JSCompiler_object_inline_left_2334 = anchor.x, JSCompiler_object_inline_width_2335 = anchor.width || 1, JSCompiler_object_inline_height_2336 = anchor.height || 2) : (JSCompiler_object_inline_top_2333 = anchor.posy, JSCompiler_object_inline_left_2334 = anchor.posx, JSCompiler_object_inline_height_2336 = JSCompiler_object_inline_width_2335 = 2);
        }
        elementPosition = DOM.getTotalWidth(this.view);
        anchor = DOM.getTotalHeight(this.view);
        var anchorPosition = this.delegate.anchorPosition || 0, anchorAlignment = this.delegate.anchorAlignment || 0, anchorAxisAlignment = this.delegate.anchorAxisAlignment || 0, activeWindow = DOM.getActiveWindow();
        anchorAxisAlignment === 0 ? (JSCompiler_object_inline_height_2336 = {offset:JSCompiler_object_inline_top_2333 - activeWindow.pageYOffset, size:JSCompiler_object_inline_height_2336, position:anchorPosition === 0 ? 0 : 1}, JSCompiler_object_inline_left_2334 = {offset:JSCompiler_object_inline_left_2334, size:JSCompiler_object_inline_width_2335, position:anchorAlignment === 0 ? 0 : 1, mode:LayoutAnchorMode.ALIGN}, JSCompiler_object_inline_top_2333 = layout(activeWindow.innerHeight, anchor, JSCompiler_object_inline_height_2336) + 
        activeWindow.pageYOffset, require$_DOT__DOT__SLASH__DOT__DOT__SLASH__DOT__DOT__SLASH_common_SLASH_range_DOT_js.Range.intersects({start:JSCompiler_object_inline_top_2333, end:JSCompiler_object_inline_top_2333 + anchor}, {start:JSCompiler_object_inline_height_2336.offset, end:JSCompiler_object_inline_height_2336.offset + JSCompiler_object_inline_height_2336.size}) && (JSCompiler_object_inline_left_2334.mode = LayoutAnchorMode.AVOID), JSCompiler_object_inline_left_2334 = layout(activeWindow.innerWidth, 
        elementPosition, JSCompiler_object_inline_left_2334)) : (JSCompiler_object_inline_width_2335 = {offset:JSCompiler_object_inline_left_2334, size:JSCompiler_object_inline_width_2335, position:anchorAlignment === 0 ? 0 : 1}, JSCompiler_object_inline_top_2333 = {offset:JSCompiler_object_inline_top_2333, size:JSCompiler_object_inline_height_2336, position:anchorPosition === 0 ? 0 : 1, mode:LayoutAnchorMode.ALIGN}, JSCompiler_object_inline_left_2334 = layout(activeWindow.innerWidth, elementPosition, 
        JSCompiler_object_inline_width_2335), require$_DOT__DOT__SLASH__DOT__DOT__SLASH__DOT__DOT__SLASH_common_SLASH_range_DOT_js.Range.intersects({start:JSCompiler_object_inline_left_2334, end:JSCompiler_object_inline_left_2334 + elementPosition}, {start:JSCompiler_object_inline_width_2335.offset, end:JSCompiler_object_inline_width_2335.offset + JSCompiler_object_inline_width_2335.size}) && (JSCompiler_object_inline_top_2333.mode = LayoutAnchorMode.AVOID), JSCompiler_object_inline_top_2333 = layout(activeWindow.innerHeight, 
        anchor, JSCompiler_object_inline_top_2333) + activeWindow.pageYOffset);
        this.view.classList.remove("top", "bottom", "left", "right");
        this.view.classList.add(anchorPosition === 0 ? "bottom" : "top");
        this.view.classList.add(anchorAlignment === 0 ? "left" : "right");
        this.view.classList.toggle("fixed", this.useFixedPosition);
        elementPosition = DOM.getDomNodePagePosition(this.container);
        this.view.style.top = `${JSCompiler_object_inline_top_2333 - (this.useFixedPosition ? DOM.getDomNodePagePosition(this.view).top : elementPosition.top)}px`;
        this.view.style.left = `${JSCompiler_object_inline_left_2334 - (this.useFixedPosition ? DOM.getDomNodePagePosition(this.view).left : elementPosition.left)}px`;
        this.view.style.width = "initial";
      }
    }
    hide(data) {
      const delegate = this.delegate;
      this.delegate = null;
      if (delegate === null || delegate === void 0 ? 0 : delegate.onHide) {
        delegate.onHide(data);
      }
      this.toDisposeOnClean.dispose();
      DOM.hide(this.view);
    }
    isVisible() {
      return !!this.delegate;
    }
    onDOMEvent(e, onCapture) {
      if (this.delegate) {
        if (this.delegate.onDOMEvent) {
          this.delegate.onDOMEvent(e, DOM.getWindow(e).document.activeElement);
        } else {
          onCapture && !DOM.isAncestor(e.target, this.container) && this.hide();
        }
      }
    }
    dispose() {
      this.hide();
      super.dispose();
    }
  }
  ContextView.BUBBLE_UP_EVENTS = ["click", "keydown", "focus", "blur"];
  ContextView.BUBBLE_DOWN_EVENTS = ["click"];
};

//# sourceMappingURL=module$node_modules$monaco_editor$esm$vs$base$browser$ui$contextview$contextview.js.map
