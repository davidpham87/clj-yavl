shadow$provide.module$node_modules$monaco_editor$esm$vs$editor$browser$widget$diffEditor$inlineDiffDeletedCodeMargin = function(require, module, exports) {
  Object.defineProperties(exports, {__esModule:{enumerable:!0, value:!0}, InlineDiffDeletedCodeMargin:{enumerable:!0, get:function() {
    return InlineDiffDeletedCodeMargin;
  }}});
  var require$_DOT__DOT__SLASH__DOT__DOT__SLASH__DOT__DOT__SLASH__DOT__DOT__SLASH_base_SLASH_browser_SLASH_dom_DOT_js = require("module$node_modules$monaco_editor$esm$vs$base$browser$dom"), require$_DOT__DOT__SLASH__DOT__DOT__SLASH__DOT__DOT__SLASH__DOT__DOT__SLASH_base_SLASH_common_SLASH_actions_DOT_js = require("module$node_modules$monaco_editor$esm$vs$base$common$actions"), require$_DOT__DOT__SLASH__DOT__DOT__SLASH__DOT__DOT__SLASH__DOT__DOT__SLASH_base_SLASH_common_SLASH_codicons_DOT_js = require("module$node_modules$monaco_editor$esm$vs$base$common$codicons");
  module = require("module$node_modules$monaco_editor$esm$vs$base$common$lifecycle");
  var require$_DOT__DOT__SLASH__DOT__DOT__SLASH__DOT__DOT__SLASH__DOT__DOT__SLASH_base_SLASH_common_SLASH_platform_DOT_js = require("module$node_modules$monaco_editor$esm$vs$base$common$platform"), require$_DOT__DOT__SLASH__DOT__DOT__SLASH__DOT__DOT__SLASH__DOT__DOT__SLASH_base_SLASH_common_SLASH_themables_DOT_js = require("module$node_modules$monaco_editor$esm$vs$base$common$themables"), require$_DOT__DOT__SLASH__DOT__DOT__SLASH__DOT__DOT__SLASH__DOT__DOT__SLASH_nls_DOT_js = require("module$node_modules$monaco_editor$esm$vs$nls");
  class InlineDiffDeletedCodeMargin extends module.Disposable {
    get visibility() {
      return this._visibility;
    }
    set visibility(_visibility) {
      this._visibility !== _visibility && (this._visibility = _visibility, this._diffActions.style.visibility = _visibility ? "visible" : "hidden");
    }
    constructor(_getViewZoneId, _marginDomNode, _modifiedEditor, _diff, _editor, _viewLineCounts, _originalTextModel, _contextMenuService, _clipboardService) {
      super();
      this._getViewZoneId = _getViewZoneId;
      this._marginDomNode = _marginDomNode;
      this._modifiedEditor = _modifiedEditor;
      this._diff = _diff;
      this._editor = _editor;
      this._viewLineCounts = _viewLineCounts;
      this._originalTextModel = _originalTextModel;
      this._contextMenuService = _contextMenuService;
      this._clipboardService = _clipboardService;
      this._visibility = !1;
      this._marginDomNode.style.zIndex = "10";
      this._diffActions = document.createElement("div");
      this._diffActions.className = require$_DOT__DOT__SLASH__DOT__DOT__SLASH__DOT__DOT__SLASH__DOT__DOT__SLASH_base_SLASH_common_SLASH_themables_DOT_js.ThemeIcon.asClassName(require$_DOT__DOT__SLASH__DOT__DOT__SLASH__DOT__DOT__SLASH__DOT__DOT__SLASH_base_SLASH_common_SLASH_codicons_DOT_js.Codicon.lightBulb) + " lightbulb-glyph";
      this._diffActions.style.position = "absolute";
      const lineHeight = this._modifiedEditor.getOption(66);
      this._diffActions.style.right = "0px";
      this._diffActions.style.visibility = "hidden";
      this._diffActions.style.height = `${lineHeight}px`;
      this._diffActions.style.lineHeight = `${lineHeight}px`;
      this._marginDomNode.appendChild(this._diffActions);
      let currentLineNumberOffset = 0;
      const useShadowDOM = _modifiedEditor.getOption(126) && !require$_DOT__DOT__SLASH__DOT__DOT__SLASH__DOT__DOT__SLASH__DOT__DOT__SLASH_base_SLASH_common_SLASH_platform_DOT_js.isIOS, showContextMenu = (x, y) => {
        var _a;
        this._contextMenuService.showContextMenu({domForShadowRoot:useShadowDOM ? (_a = _modifiedEditor.getDomNode()) !== null && _a !== void 0 ? _a : void 0 : void 0, getAnchor:() => ({x, y}), getActions:() => {
          const actions = [], isDeletion = _diff.modified.isEmpty;
          actions.push(new require$_DOT__DOT__SLASH__DOT__DOT__SLASH__DOT__DOT__SLASH__DOT__DOT__SLASH_base_SLASH_common_SLASH_actions_DOT_js.Action("diff.clipboard.copyDeletedContent", isDeletion ? _diff.original.length > 1 ? (0,require$_DOT__DOT__SLASH__DOT__DOT__SLASH__DOT__DOT__SLASH__DOT__DOT__SLASH_nls_DOT_js.localize)("diff.clipboard.copyDeletedLinesContent.label", "Copy deleted lines") : (0,require$_DOT__DOT__SLASH__DOT__DOT__SLASH__DOT__DOT__SLASH__DOT__DOT__SLASH_nls_DOT_js.localize)("diff.clipboard.copyDeletedLinesContent.single.label", 
          "Copy deleted line") : _diff.original.length > 1 ? (0,require$_DOT__DOT__SLASH__DOT__DOT__SLASH__DOT__DOT__SLASH__DOT__DOT__SLASH_nls_DOT_js.localize)("diff.clipboard.copyChangedLinesContent.label", "Copy changed lines") : (0,require$_DOT__DOT__SLASH__DOT__DOT__SLASH__DOT__DOT__SLASH__DOT__DOT__SLASH_nls_DOT_js.localize)("diff.clipboard.copyChangedLinesContent.single.label", "Copy changed line"), void 0, !0, async() => {
            const originalText = this._originalTextModel.getValueInRange(_diff.original.toExclusiveRange());
            await this._clipboardService.writeText(originalText);
          }));
          _diff.original.length > 1 && actions.push(new require$_DOT__DOT__SLASH__DOT__DOT__SLASH__DOT__DOT__SLASH__DOT__DOT__SLASH_base_SLASH_common_SLASH_actions_DOT_js.Action("diff.clipboard.copyDeletedLineContent", isDeletion ? (0,require$_DOT__DOT__SLASH__DOT__DOT__SLASH__DOT__DOT__SLASH__DOT__DOT__SLASH_nls_DOT_js.localize)("diff.clipboard.copyDeletedLineContent.label", "Copy deleted line ({0})", _diff.original.startLineNumber + currentLineNumberOffset) : (0,require$_DOT__DOT__SLASH__DOT__DOT__SLASH__DOT__DOT__SLASH__DOT__DOT__SLASH_nls_DOT_js.localize)("diff.clipboard.copyChangedLineContent.label", 
          "Copy changed line ({0})", _diff.original.startLineNumber + currentLineNumberOffset), void 0, !0, async() => {
            let lineContent = this._originalTextModel.getLineContent(_diff.original.startLineNumber + currentLineNumberOffset);
            lineContent === "" && (lineContent = this._originalTextModel.getEndOfLineSequence() === 0 ? "\n" : "\r\n");
            await this._clipboardService.writeText(lineContent);
          }));
          _modifiedEditor.getOption(90) || actions.push(new require$_DOT__DOT__SLASH__DOT__DOT__SLASH__DOT__DOT__SLASH__DOT__DOT__SLASH_base_SLASH_common_SLASH_actions_DOT_js.Action("diff.inline.revertChange", (0,require$_DOT__DOT__SLASH__DOT__DOT__SLASH__DOT__DOT__SLASH__DOT__DOT__SLASH_nls_DOT_js.localize)("diff.inline.revertChange.label", "Revert this change"), void 0, !0, async() => {
            this._editor.revert(this._diff);
          }));
          return actions;
        }, autoSelectFirstItem:!0});
      };
      this._register((0,require$_DOT__DOT__SLASH__DOT__DOT__SLASH__DOT__DOT__SLASH__DOT__DOT__SLASH_base_SLASH_browser_SLASH_dom_DOT_js.addStandardDisposableListener)(this._diffActions, "mousedown", e => {
        if (e.leftButton) {
          var {top, height} = (0,require$_DOT__DOT__SLASH__DOT__DOT__SLASH__DOT__DOT__SLASH__DOT__DOT__SLASH_base_SLASH_browser_SLASH_dom_DOT_js.getDomNodePagePosition)(this._diffActions), pad = Math.floor(lineHeight / 3);
          e.preventDefault();
          showContextMenu(e.posx, top + height + pad);
        }
      }));
      this._register(_modifiedEditor.onMouseMove(e => {
        e.target.type !== 8 && e.target.type !== 5 || e.target.detail.viewZoneId !== this._getViewZoneId() ? this.visibility = !1 : (currentLineNumberOffset = this._updateLightBulbPosition(this._marginDomNode, e.event.browserEvent.y, lineHeight), this.visibility = !0);
      }));
      this._register(_modifiedEditor.onMouseDown(e => {
        !e.event.leftButton || e.target.type !== 8 && e.target.type !== 5 || e.target.detail.viewZoneId !== this._getViewZoneId() || (e.event.preventDefault(), currentLineNumberOffset = this._updateLightBulbPosition(this._marginDomNode, e.event.browserEvent.y, lineHeight), showContextMenu(e.event.posx, e.event.posy + lineHeight));
      }));
    }
    _updateLightBulbPosition(marginDomNode, y, lineHeight) {
      ({top:marginDomNode} = (0,require$_DOT__DOT__SLASH__DOT__DOT__SLASH__DOT__DOT__SLASH__DOT__DOT__SLASH_base_SLASH_browser_SLASH_dom_DOT_js.getDomNodePagePosition)(marginDomNode));
      y = Math.floor((y - marginDomNode) / lineHeight);
      this._diffActions.style.top = `${y * lineHeight}px`;
      if (this._viewLineCounts) {
        for (lineHeight = 0, marginDomNode = 0; marginDomNode < this._viewLineCounts.length; marginDomNode++) {
          if (lineHeight += this._viewLineCounts[marginDomNode], y < lineHeight) {
            return marginDomNode;
          }
        }
      }
      return y;
    }
  }
};

//# sourceMappingURL=module$node_modules$monaco_editor$esm$vs$editor$browser$widget$diffEditor$inlineDiffDeletedCodeMargin.js.map
