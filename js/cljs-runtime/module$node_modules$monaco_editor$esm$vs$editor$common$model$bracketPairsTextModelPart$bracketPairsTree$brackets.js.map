{
"version":3,
"file":"module$node_modules$monaco_editor$esm$vs$editor$common$model$bracketPairsTextModelPart$bracketPairsTree$brackets.js",
"lineCount":88,
"mappings":"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",
"sources":["node_modules/monaco-editor/esm/vs/editor/common/model/bracketPairsTextModelPart/bracketPairsTree/brackets.js"],
"sourcesContent":["shadow$provide[\"module$node_modules$monaco_editor$esm$vs$editor$common$model$bracketPairsTextModelPart$bracketPairsTree$brackets\"] = function(require,module,exports) {\nObject.defineProperties(exports, {__esModule:{enumerable:true, value:true}, BracketTokens:{enumerable:true, get:function() {\n  return BracketTokens;\n}}, LanguageAgnosticBracketTokens:{enumerable:true, get:function() {\n  return LanguageAgnosticBracketTokens;\n}}});\nvar require$_DOT__DOT__SLASH__DOT__DOT__SLASH__DOT__DOT__SLASH__DOT__DOT__SLASH__DOT__DOT__SLASH_base_SLASH_common_SLASH_strings_DOT_js = require(\"../../../../../base/common/strings.js\");\nvar require$_DOT__SLASH_ast_DOT_js = require(\"./ast.js\");\nvar require$_DOT__SLASH_length_DOT_js = require(\"./length.js\");\nvar require$_DOT__SLASH_smallImmutableSet_DOT_js = require(\"./smallImmutableSet.js\");\nvar require$_DOT__SLASH_tokenizer_DOT_js = require(\"./tokenizer.js\");\nclass BracketTokens {\n  static createFromLanguage(configuration, denseKeyProvider) {\n    function getId(bracketInfo) {\n      return denseKeyProvider.getKey(`${bracketInfo.languageId}:::${bracketInfo.bracketText}`);\n    }\n    const map = new Map();\n    for (const openingBracket of configuration.bracketsNew.openingBrackets) {\n      const length = (0,require$_DOT__SLASH_length_DOT_js.toLength)(0, openingBracket.bracketText.length);\n      const openingTextId = getId(openingBracket);\n      const bracketIds = require$_DOT__SLASH_smallImmutableSet_DOT_js.SmallImmutableSet.getEmpty().add(openingTextId, require$_DOT__SLASH_smallImmutableSet_DOT_js.identityKeyProvider);\n      map.set(openingBracket.bracketText, new require$_DOT__SLASH_tokenizer_DOT_js.Token(length, 1, openingTextId, bracketIds, require$_DOT__SLASH_ast_DOT_js.BracketAstNode.create(length, openingBracket, bracketIds)));\n    }\n    for (const closingBracket of configuration.bracketsNew.closingBrackets) {\n      const length = (0,require$_DOT__SLASH_length_DOT_js.toLength)(0, closingBracket.bracketText.length);\n      let bracketIds = require$_DOT__SLASH_smallImmutableSet_DOT_js.SmallImmutableSet.getEmpty();\n      const closingBrackets = closingBracket.getOpeningBrackets();\n      for (const bracket of closingBrackets) {\n        bracketIds = bracketIds.add(getId(bracket), require$_DOT__SLASH_smallImmutableSet_DOT_js.identityKeyProvider);\n      }\n      map.set(closingBracket.bracketText, new require$_DOT__SLASH_tokenizer_DOT_js.Token(length, 2, getId(closingBrackets[0]), bracketIds, require$_DOT__SLASH_ast_DOT_js.BracketAstNode.create(length, closingBracket, bracketIds)));\n    }\n    return new BracketTokens(map);\n  }\n  constructor(map) {\n    this.map = map;\n    this.hasRegExp = false;\n    this._regExpGlobal = null;\n  }\n  getRegExpStr() {\n    if (this.isEmpty) {\n      return null;\n    } else {\n      const keys = [...this.map.keys()];\n      keys.sort();\n      keys.reverse();\n      return keys.map(k => prepareBracketForRegExp(k)).join(\"|\");\n    }\n  }\n  get regExpGlobal() {\n    if (!this.hasRegExp) {\n      const regExpStr = this.getRegExpStr();\n      this._regExpGlobal = regExpStr ? new RegExp(regExpStr, \"gi\") : null;\n      this.hasRegExp = true;\n    }\n    return this._regExpGlobal;\n  }\n  getToken(value) {\n    return this.map.get(value.toLowerCase());\n  }\n  findClosingTokenText(openingBracketIds) {\n    for (const [closingText, info] of this.map) {\n      if (info.kind === 2 && info.bracketIds.intersects(openingBracketIds)) {\n        return closingText;\n      }\n    }\n    return undefined;\n  }\n  get isEmpty() {\n    return this.map.size === 0;\n  }\n}\nfunction prepareBracketForRegExp(str) {\n  let escaped = (0,require$_DOT__DOT__SLASH__DOT__DOT__SLASH__DOT__DOT__SLASH__DOT__DOT__SLASH__DOT__DOT__SLASH_base_SLASH_common_SLASH_strings_DOT_js.escapeRegExpCharacters)(str);\n  if (/^[\\w ]+/.test(str)) {\n    escaped = `\\\\b${escaped}`;\n  }\n  if (/[\\w ]+$/.test(str)) {\n    escaped = `${escaped}\\\\b`;\n  }\n  return escaped;\n}\nclass LanguageAgnosticBracketTokens {\n  constructor(denseKeyProvider, getLanguageConfiguration) {\n    this.denseKeyProvider = denseKeyProvider;\n    this.getLanguageConfiguration = getLanguageConfiguration;\n    this.languageIdToBracketTokens = new Map();\n  }\n  didLanguageChange(languageId) {\n    return this.languageIdToBracketTokens.has(languageId);\n  }\n  getSingleLanguageBracketTokens(languageId) {\n    let singleLanguageBracketTokens = this.languageIdToBracketTokens.get(languageId);\n    if (!singleLanguageBracketTokens) {\n      singleLanguageBracketTokens = BracketTokens.createFromLanguage(this.getLanguageConfiguration(languageId), this.denseKeyProvider);\n      this.languageIdToBracketTokens.set(languageId, singleLanguageBracketTokens);\n    }\n    return singleLanguageBracketTokens;\n  }\n}\n\n};"],
"names":["shadow$provide","require","module","exports","Object","defineProperties","__esModule","enumerable","value","BracketTokens","get","LanguageAgnosticBracketTokens","require$_DOT__DOT__SLASH__DOT__DOT__SLASH__DOT__DOT__SLASH__DOT__DOT__SLASH__DOT__DOT__SLASH_base_SLASH_common_SLASH_strings_DOT_js","require$_DOT__SLASH_ast_DOT_js","require$_DOT__SLASH_length_DOT_js","require$_DOT__SLASH_smallImmutableSet_DOT_js","require$_DOT__SLASH_tokenizer_DOT_js","createFromLanguage","configuration","denseKeyProvider","getId","bracketInfo","getKey","languageId","bracketText","map","Map","openingBracket","bracketsNew","openingBrackets","length","toLength","openingTextId","bracketIds","SmallImmutableSet","getEmpty","add","identityKeyProvider","set","Token","BracketAstNode","create","closingBracket","closingBrackets","getOpeningBrackets","bracket","constructor","hasRegExp","_regExpGlobal","getRegExpStr","isEmpty","keys","sort","reverse","k","escaped","escapeRegExpCharacters","test","join","regExpStr","RegExp","getToken","toLowerCase","findClosingTokenText","openingBracketIds","closingText","info","kind","intersects","size","getLanguageConfiguration","languageIdToBracketTokens","didLanguageChange","has","getSingleLanguageBracketTokens","singleLanguageBracketTokens"]
}
