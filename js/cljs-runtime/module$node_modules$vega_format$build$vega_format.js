shadow$provide.module$node_modules$vega_format$build$vega_format = function(require, module, exports) {
  (function(global, factory) {
    typeof exports === "object" && typeof module !== "undefined" ? factory(exports, require("module$node_modules$vega_time$build$vega_time"), require("module$node_modules$vega_util$build$vega_util")) : typeof define === "function" && define.amd ? define(["exports", "vega-time", "vega-util"], factory) : (global = typeof globalThis !== "undefined" ? globalThis : global || self, factory(global.vega = {}, global.vega, global.vega));
  })(this, function(exports, vegaTime, vegaUtil) {
    function memoize(method) {
      const cache = {};
      return spec => cache[spec] || (cache[spec] = method(spec));
    }
    function tickSpec(start, stop, count) {
      var step = (stop - start) / Math.max(0, count), power = Math.floor(Math.log10(step));
      step /= Math.pow(10, power);
      step = step >= e10 ? 10 : step >= e5 ? 5 : step >= e2 ? 2 : 1;
      let inc;
      power < 0 ? (inc = Math.pow(10, -power) / step, power = Math.round(start * inc), step = Math.round(stop * inc), power / inc < start && ++power, step / inc > stop && --step, inc = -inc) : (inc = Math.pow(10, power) * step, power = Math.round(start / inc), step = Math.round(stop / inc), power * inc < start && ++power, step * inc > stop && --step);
      return step < power && 0.5 <= count && count < 2 ? tickSpec(start, stop, count * 2) : [power, step, inc];
    }
    function tickIncrement(start, stop, count) {
      return tickSpec(+start, +stop, +count)[2];
    }
    function formatDecimalParts(x, p) {
      if ((p = (x = p ? x.toExponential(p - 1) : x.toExponential()).indexOf("e")) < 0) {
        return null;
      }
      var coefficient = x.slice(0, p);
      return [coefficient.length > 1 ? coefficient[0] + coefficient.slice(2) : coefficient, +x.slice(p + 1)];
    }
    function exponent(x) {
      return x = formatDecimalParts(Math.abs(x)), x ? x[1] : NaN;
    }
    function formatGroup(grouping, thousands) {
      return function(value, width) {
        for (var i = value.length, t = [], j = 0, g = grouping[0], length = 0; i > 0 && g > 0;) {
          length + g + 1 > width && (g = Math.max(1, width - length));
          t.push(value.substring(i -= g, i + g));
          if ((length += g + 1) > width) {
            break;
          }
          g = grouping[j = (j + 1) % grouping.length];
        }
        return t.reverse().join(thousands);
      };
    }
    function formatNumerals(numerals) {
      return function(value) {
        return value.replace(/[0-9]/g, function(i) {
          return numerals[+i];
        });
      };
    }
    function formatSpecifier(specifier) {
      if (!(match = re.exec(specifier))) {
        throw Error("invalid format: " + specifier);
      }
      var match;
      return new FormatSpecifier({fill:match[1], align:match[2], sign:match[3], symbol:match[4], zero:match[5], width:match[6], comma:match[7], precision:match[8] && match[8].slice(1), trim:match[9], type:match[10]});
    }
    function FormatSpecifier(specifier) {
      this.fill = specifier.fill === void 0 ? " " : specifier.fill + "";
      this.align = specifier.align === void 0 ? "\x3e" : specifier.align + "";
      this.sign = specifier.sign === void 0 ? "-" : specifier.sign + "";
      this.symbol = specifier.symbol === void 0 ? "" : specifier.symbol + "";
      this.zero = !!specifier.zero;
      this.width = specifier.width === void 0 ? void 0 : +specifier.width;
      this.comma = !!specifier.comma;
      this.precision = specifier.precision === void 0 ? void 0 : +specifier.precision;
      this.trim = !!specifier.trim;
      this.type = specifier.type === void 0 ? "" : specifier.type + "";
    }
    function formatRounded(x, p) {
      p = formatDecimalParts(x, p);
      if (!p) {
        return x + "";
      }
      x = p[0];
      p = p[1];
      return p < 0 ? "0." + Array(-p).join("0") + x : x.length > p + 1 ? x.slice(0, p + 1) + "." + x.slice(p + 1) : x + Array(p - x.length + 2).join("0");
    }
    function identity(x) {
      return x;
    }
    function d3_formatLocale(locale) {
      function newFormat(specifier) {
        function format(value) {
          var valuePrefix = prefix, valueSuffix = suffix, n, c;
          if (type === "c") {
            valueSuffix = formatType(value) + valueSuffix, value = "";
          } else {
            value = +value;
            var i = value < 0 || 1 / value < 0;
            value = isNaN(value) ? nan : formatType(Math.abs(value), precision);
            if (trim) {
              var n$jscomp$0 = value.length, i$jscomp$0 = 1, i0 = -1;
              a: for (; i$jscomp$0 < n$jscomp$0; ++i$jscomp$0) {
                switch(value[i$jscomp$0]) {
                  case ".":
                    i0 = n = i$jscomp$0;
                    break;
                  case "0":
                    i0 === 0 && (i0 = i$jscomp$0);
                    n = i$jscomp$0;
                    break;
                  default:
                    if (!+value[i$jscomp$0]) {
                      break a;
                    }
                    i0 > 0 && (i0 = 0);
                }
              }
              value = i0 > 0 ? value.slice(0, i0) + value.slice(n + 1) : value;
            }
            i && +value === 0 && sign !== "+" && (i = !1);
            valuePrefix = (i ? sign === "(" ? sign : minus : sign === "-" || sign === "(" ? "" : sign) + valuePrefix;
            valueSuffix = (type === "s" ? prefixes[8 + prefixExponent / 3] : "") + valueSuffix + (i && sign === "(" ? ")" : "");
            if (maybeSuffix) {
              for (i = -1, n = value.length; ++i < n;) {
                if (c = value.charCodeAt(i), 48 > c || c > 57) {
                  valueSuffix = (c === 46 ? decimal + value.slice(i + 1) : value.slice(i)) + valueSuffix;
                  value = value.slice(0, i);
                  break;
                }
              }
            }
          }
          comma && !zero && (value = group(value, Infinity));
          c = valuePrefix.length + value.length + valueSuffix.length;
          i = c < width ? Array(width - c + 1).join(fill) : "";
          comma && zero && (value = group(i + value, i.length ? width - valueSuffix.length : Infinity), i = "");
          switch(align) {
            case "\x3c":
              value = valuePrefix + value + valueSuffix + i;
              break;
            case "\x3d":
              value = valuePrefix + i + value + valueSuffix;
              break;
            case "^":
              value = i.slice(0, c = i.length >> 1) + valuePrefix + value + valueSuffix + i.slice(c);
              break;
            default:
              value = i + valuePrefix + value + valueSuffix;
          }
          return numerals(value);
        }
        specifier = formatSpecifier(specifier);
        var fill = specifier.fill, align = specifier.align, sign = specifier.sign, symbol = specifier.symbol, zero = specifier.zero, width = specifier.width, comma = specifier.comma, precision = specifier.precision, trim = specifier.trim, type = specifier.type;
        type === "n" ? (comma = !0, type = "g") : formatTypes[type] || (precision === void 0 && (precision = 12), trim = !0, type = "g");
        if (zero || fill === "0" && align === "\x3d") {
          zero = !0, fill = "0", align = "\x3d";
        }
        var prefix = symbol === "$" ? currencyPrefix : symbol === "#" && /[boxX]/.test(type) ? "0" + type.toLowerCase() : "", suffix = symbol === "$" ? currencySuffix : /[%p]/.test(type) ? percent : "", formatType = formatTypes[type], maybeSuffix = /[defgprs%]/.test(type);
        precision = precision === void 0 ? 6 : /[gprs]/.test(type) ? Math.max(1, Math.min(21, precision)) : Math.max(0, Math.min(20, precision));
        format.toString = function() {
          return specifier + "";
        };
        return format;
      }
      var group = locale.grouping === void 0 || locale.thousands === void 0 ? identity : formatGroup(map.call(locale.grouping, Number), locale.thousands + ""), currencyPrefix = locale.currency === void 0 ? "" : locale.currency[0] + "", currencySuffix = locale.currency === void 0 ? "" : locale.currency[1] + "", decimal = locale.decimal === void 0 ? "." : locale.decimal + "", numerals = locale.numerals === void 0 ? identity : formatNumerals(map.call(locale.numerals, String)), percent = locale.percent === 
      void 0 ? "%" : locale.percent + "", minus = locale.minus === void 0 ? "−" : locale.minus + "", nan = locale.nan === void 0 ? "NaN" : locale.nan + "";
      return {format:newFormat, formatPrefix:function(specifier, value) {
        var f = newFormat((specifier = formatSpecifier(specifier), specifier.type = "f", specifier));
        specifier = Math.max(-8, Math.min(8, Math.floor(exponent(value) / 3))) * 3;
        var k = Math.pow(10, -specifier), prefix = prefixes[8 + specifier / 3];
        return function(value) {
          return f(k * value) + prefix;
        };
      }};
    }
    function trimZeroes(numberFormat, decimalChar) {
      return x => {
        x = numberFormat(x);
        const dec = x.indexOf(decimalChar);
        if (dec < 0) {
          return x;
        }
        a: {
          var JSCompiler_inline_result = x.lastIndexOf("e");
          if (!(JSCompiler_inline_result > 0)) {
            for (JSCompiler_inline_result = x.length; --JSCompiler_inline_result > dec;) {
              var c = x.charCodeAt(JSCompiler_inline_result);
              if (c >= 48 && c <= 57) {
                JSCompiler_inline_result += 1;
                break a;
              }
            }
            JSCompiler_inline_result = void 0;
          }
        }
        for (c = JSCompiler_inline_result < x.length ? x.slice(JSCompiler_inline_result) : ""; --JSCompiler_inline_result > dec;) {
          if (x[JSCompiler_inline_result] !== "0") {
            ++JSCompiler_inline_result;
            break;
          }
        }
        return x.slice(0, JSCompiler_inline_result) + c;
      };
    }
    function numberLocale(locale) {
      const format = memoize(locale.format), formatPrefix = locale.formatPrefix;
      return {format, formatPrefix, formatFloat(spec) {
        spec = formatSpecifier(spec || ",");
        if (spec.precision == null) {
          spec.precision = 12;
          switch(spec.type) {
            case "%":
              spec.precision -= 2;
              break;
            case "e":
              --spec.precision;
          }
          return trimZeroes(format(spec), format(".1f")(1)[1]);
        }
        return format(spec);
      }, formatSpan(start, stop$jscomp$0, count$jscomp$0, specifier) {
        specifier = formatSpecifier(specifier == null ? ",f" : specifier);
        var stop = +stop$jscomp$0;
        var JSCompiler_inline_result = +start;
        var count = +count$jscomp$0;
        JSCompiler_inline_result = (count$jscomp$0 = stop < JSCompiler_inline_result) ? tickIncrement(stop, JSCompiler_inline_result, count) : tickIncrement(JSCompiler_inline_result, stop, count);
        JSCompiler_inline_result = (count$jscomp$0 ? -1 : 1) * (JSCompiler_inline_result < 0 ? 1 / -JSCompiler_inline_result : JSCompiler_inline_result);
        stop$jscomp$0 = Math.max(Math.abs(start), Math.abs(stop$jscomp$0));
        if (specifier.precision == null) {
          switch(specifier.type) {
            case "s":
              return isNaN(start = Math.max(0, Math.max(-8, Math.min(8, Math.floor(exponent(stop$jscomp$0) / 3))) * 3 - exponent(Math.abs(JSCompiler_inline_result)))) || (specifier.precision = start), formatPrefix(specifier, stop$jscomp$0);
            case "":
            case "e":
            case "g":
            case "p":
            case "r":
              start = isNaN;
              JSCompiler_inline_result = Math.abs(JSCompiler_inline_result);
              stop$jscomp$0 = Math.abs(stop$jscomp$0) - JSCompiler_inline_result;
              stop$jscomp$0 = Math.max(0, exponent(stop$jscomp$0) - exponent(JSCompiler_inline_result)) + 1;
              start(start = stop$jscomp$0) || (specifier.precision = start - (specifier.type === "e"));
              break;
            case "f":
            case "%":
              isNaN(start = Math.max(0, -exponent(Math.abs(JSCompiler_inline_result)))) || (specifier.precision = start - (specifier.type === "%") * 2);
          }
        }
        return format(specifier);
      }};
    }
    function resetNumberFormatDefaultLocale() {
      return defaultNumberLocale = numberLocale({format, formatPrefix});
    }
    function numberFormatLocale(definition) {
      return numberLocale(d3_formatLocale(definition));
    }
    function numberFormatDefaultLocale(definition) {
      return arguments.length ? defaultNumberLocale = numberFormatLocale(definition) : defaultNumberLocale;
    }
    function timeInterval(floori, offseti, count, field) {
      function interval(date) {
        return floori(date = arguments.length === 0 ? new Date() : new Date(+date)), date;
      }
      interval.floor = date => (floori(date = new Date(+date)), date);
      interval.ceil = date => (floori(date = new Date(date - 1)), offseti(date, 1), floori(date), date);
      interval.round = date => {
        const d0 = interval(date), d1 = interval.ceil(date);
        return date - d0 < d1 - date ? d0 : d1;
      };
      interval.offset = (date, step) => (offseti(date = new Date(+date), step == null ? 1 : Math.floor(step)), date);
      interval.range = (start, stop, step) => {
        const range = [];
        start = interval.ceil(start);
        step = step == null ? 1 : Math.floor(step);
        if (!(start < stop && step > 0)) {
          return range;
        }
        let previous;
        do {
          range.push(previous = new Date(+start)), offseti(start, step), floori(start);
        } while (previous < start && start < stop);
        return range;
      };
      interval.filter = test => timeInterval(date => {
        if (date >= date) {
          for (; floori(date), !test(date);) {
            date.setTime(date - 1);
          }
        }
      }, (date, step) => {
        if (date >= date) {
          if (step < 0) {
            for (; ++step <= 0;) {
              for (; offseti(date, -1), !test(date);) {
              }
            }
          } else {
            for (; --step >= 0;) {
              for (; offseti(date, 1), !test(date);) {
              }
            }
          }
        }
      });
      count && (interval.count = (start, end) => {
        t0.setTime(+start);
        t1.setTime(+end);
        floori(t0);
        floori(t1);
        return Math.floor(count(t0, t1));
      }, interval.every = step => {
        step = Math.floor(step);
        return isFinite(step) && step > 0 ? step > 1 ? interval.filter(field ? d => field(d) % step === 0 : d => interval.count(0, d) % step === 0) : interval : null;
      });
      return interval;
    }
    function timeWeekday(i) {
      return timeInterval(date => {
        date.setDate(date.getDate() - (date.getDay() + 7 - i) % 7);
        date.setHours(0, 0, 0, 0);
      }, (date, step) => {
        date.setDate(date.getDate() + step * 7);
      }, (start, end) => (end - start - (end.getTimezoneOffset() - start.getTimezoneOffset()) * 6E4) / 6048E5);
    }
    function utcWeekday(i) {
      return timeInterval(date => {
        date.setUTCDate(date.getUTCDate() - (date.getUTCDay() + 7 - i) % 7);
        date.setUTCHours(0, 0, 0, 0);
      }, (date, step) => {
        date.setUTCDate(date.getUTCDate() + step * 7);
      }, (start, end) => (end - start) / 6048E5);
    }
    function localDate(d) {
      if (0 <= d.y && d.y < 100) {
        var date = new Date(-1, d.m, d.d, d.H, d.M, d.S, d.L);
        date.setFullYear(d.y);
        return date;
      }
      return new Date(d.y, d.m, d.d, d.H, d.M, d.S, d.L);
    }
    function utcDate(d) {
      if (0 <= d.y && d.y < 100) {
        var date = new Date(Date.UTC(-1, d.m, d.d, d.H, d.M, d.S, d.L));
        date.setUTCFullYear(d.y);
        return date;
      }
      return new Date(Date.UTC(d.y, d.m, d.d, d.H, d.M, d.S, d.L));
    }
    function newDate(y, m, d) {
      return {y, m, d, H:0, M:0, S:0, L:0};
    }
    function formatLocale(locale) {
      function newFormat(specifier, formats) {
        return function(date) {
          var string = [], i = -1, j = 0, n = specifier.length, c, format;
          for (date instanceof Date || (date = new Date(+date)); ++i < n;) {
            if (specifier.charCodeAt(i) === 37) {
              string.push(specifier.slice(j, i));
              (j = pads[c = specifier.charAt(++i)]) != null ? c = specifier.charAt(++i) : j = c === "e" ? " " : "0";
              if (format = formats[c]) {
                c = format(date, j);
              }
              string.push(c);
              j = i + 1;
            }
          }
          string.push(specifier.slice(j, i));
          return string.join("");
        };
      }
      function newParse(specifier, Z) {
        return function(string) {
          var d = newDate(1900, void 0, 1);
          if (parseSpecifier(d, specifier, string += "", 0) != string.length) {
            return null;
          }
          if ("Q" in d) {
            return new Date(d.Q);
          }
          if ("s" in d) {
            return new Date(d.s * 1000 + ("L" in d ? d.L : 0));
          }
          !Z || "Z" in d || (d.Z = 0);
          "p" in d && (d.H = d.H % 12 + d.p * 12);
          d.m === void 0 && (d.m = "q" in d ? d.q : 0);
          if ("V" in d) {
            if (d.V < 1 || d.V > 53) {
              return null;
            }
            "w" in d || (d.w = 1);
            if ("Z" in d) {
              string = utcDate(newDate(d.y, 0, 1));
              var day = string.getUTCDay();
              string = day > 4 || day === 0 ? utcMonday.ceil(string) : utcMonday(string);
              string = utcDay.offset(string, (d.V - 1) * 7);
              d.y = string.getUTCFullYear();
              d.m = string.getUTCMonth();
              d.d = string.getUTCDate() + (d.w + 6) % 7;
            } else {
              string = localDate(newDate(d.y, 0, 1)), day = string.getDay(), string = day > 4 || day === 0 ? timeMonday.ceil(string) : timeMonday(string), string = timeDay.offset(string, (d.V - 1) * 7), d.y = string.getFullYear(), d.m = string.getMonth(), d.d = string.getDate() + (d.w + 6) % 7;
            }
          } else if ("W" in d || "U" in d) {
            "w" in d || (d.w = "u" in d ? d.u % 7 : "W" in d ? 1 : 0), day = "Z" in d ? utcDate(newDate(d.y, 0, 1)).getUTCDay() : localDate(newDate(d.y, 0, 1)).getDay(), d.m = 0, d.d = "W" in d ? (d.w + 6) % 7 + d.W * 7 - (day + 5) % 7 : d.w + d.U * 7 - (day + 6) % 7;
          }
          return "Z" in d ? (d.H += d.Z / 100 | 0, d.M += d.Z % 100, utcDate(d)) : localDate(d);
        };
      }
      function parseSpecifier(d, specifier, string, j) {
        for (var i = 0, n = specifier.length, m = string.length, c; i < n;) {
          if (j >= m) {
            return -1;
          }
          c = specifier.charCodeAt(i++);
          if (c === 37) {
            if (c = specifier.charAt(i++), c = parses[c in pads ? specifier.charAt(i++) : c], !c || (j = c(d, string, j)) < 0) {
              return -1;
            }
          } else if (c != string.charCodeAt(j++)) {
            return -1;
          }
        }
        return j;
      }
      var locale_dateTime = locale.dateTime, locale_date = locale.date, locale_time = locale.time, locale_periods = locale.periods, locale_weekdays = locale.days, locale_shortWeekdays = locale.shortDays, locale_months = locale.months, locale_shortMonths = locale.shortMonths, periodRe = formatRe(locale_periods), periodLookup = formatLookup(locale_periods), weekdayRe = formatRe(locale_weekdays), weekdayLookup = formatLookup(locale_weekdays), shortWeekdayRe = formatRe(locale_shortWeekdays), shortWeekdayLookup = 
      formatLookup(locale_shortWeekdays), monthRe = formatRe(locale_months), monthLookup = formatLookup(locale_months), shortMonthRe = formatRe(locale_shortMonths), shortMonthLookup = formatLookup(locale_shortMonths), formats = {a:function(d) {
        return locale_shortWeekdays[d.getDay()];
      }, A:function(d) {
        return locale_weekdays[d.getDay()];
      }, b:function(d) {
        return locale_shortMonths[d.getMonth()];
      }, B:function(d) {
        return locale_months[d.getMonth()];
      }, c:null, d:formatDayOfMonth, e:formatDayOfMonth, f:formatMicroseconds, g:formatYearISO, G:formatFullYearISO, H:formatHour24, I:formatHour12, j:formatDayOfYear, L:formatMilliseconds, m:formatMonthNumber, M:formatMinutes, p:function(d) {
        return locale_periods[+(d.getHours() >= 12)];
      }, q:function(d) {
        return 1 + ~~(d.getMonth() / 3);
      }, Q:formatUnixTimestamp, s:formatUnixTimestampSeconds, S:formatSeconds, u:formatWeekdayNumberMonday, U:formatWeekNumberSunday, V:formatWeekNumberISO, w:formatWeekdayNumberSunday, W:formatWeekNumberMonday, x:null, X:null, y:formatYear, Y:formatFullYear, Z:formatZone, "%":formatLiteralPercent}, utcFormats = {a:function(d) {
        return locale_shortWeekdays[d.getUTCDay()];
      }, A:function(d) {
        return locale_weekdays[d.getUTCDay()];
      }, b:function(d) {
        return locale_shortMonths[d.getUTCMonth()];
      }, B:function(d) {
        return locale_months[d.getUTCMonth()];
      }, c:null, d:formatUTCDayOfMonth, e:formatUTCDayOfMonth, f:formatUTCMicroseconds, g:formatUTCYearISO, G:formatUTCFullYearISO, H:formatUTCHour24, I:formatUTCHour12, j:formatUTCDayOfYear, L:formatUTCMilliseconds, m:formatUTCMonthNumber, M:formatUTCMinutes, p:function(d) {
        return locale_periods[+(d.getUTCHours() >= 12)];
      }, q:function(d) {
        return 1 + ~~(d.getUTCMonth() / 3);
      }, Q:formatUnixTimestamp, s:formatUnixTimestampSeconds, S:formatUTCSeconds, u:formatUTCWeekdayNumberMonday, U:formatUTCWeekNumberSunday, V:formatUTCWeekNumberISO, w:formatUTCWeekdayNumberSunday, W:formatUTCWeekNumberMonday, x:null, X:null, y:formatUTCYear, Y:formatUTCFullYear, Z:formatUTCZone, "%":formatLiteralPercent}, parses = {a:function(d, string, i) {
        return (string = shortWeekdayRe.exec(string.slice(i))) ? (d.w = shortWeekdayLookup.get(string[0].toLowerCase()), i + string[0].length) : -1;
      }, A:function(d, string, i) {
        return (string = weekdayRe.exec(string.slice(i))) ? (d.w = weekdayLookup.get(string[0].toLowerCase()), i + string[0].length) : -1;
      }, b:function(d, string, i) {
        return (string = shortMonthRe.exec(string.slice(i))) ? (d.m = shortMonthLookup.get(string[0].toLowerCase()), i + string[0].length) : -1;
      }, B:function(d, string, i) {
        return (string = monthRe.exec(string.slice(i))) ? (d.m = monthLookup.get(string[0].toLowerCase()), i + string[0].length) : -1;
      }, c:function(d, string, i) {
        return parseSpecifier(d, locale_dateTime, string, i);
      }, d:parseDayOfMonth, e:parseDayOfMonth, f:parseMicroseconds, g:parseYear, G:parseFullYear, H:parseHour24, I:parseHour24, j:parseDayOfYear, L:parseMilliseconds, m:parseMonthNumber, M:parseMinutes, p:function(d, string, i) {
        return (string = periodRe.exec(string.slice(i))) ? (d.p = periodLookup.get(string[0].toLowerCase()), i + string[0].length) : -1;
      }, q:parseQuarter, Q:parseUnixTimestamp, s:parseUnixTimestampSeconds, S:parseSeconds, u:parseWeekdayNumberMonday, U:parseWeekNumberSunday, V:parseWeekNumberISO, w:parseWeekdayNumberSunday, W:parseWeekNumberMonday, x:function(d, string, i) {
        return parseSpecifier(d, locale_date, string, i);
      }, X:function(d, string, i) {
        return parseSpecifier(d, locale_time, string, i);
      }, y:parseYear, Y:parseFullYear, Z:parseZone, "%":parseLiteralPercent};
      formats.x = newFormat(locale_date, formats);
      formats.X = newFormat(locale_time, formats);
      formats.c = newFormat(locale_dateTime, formats);
      utcFormats.x = newFormat(locale_date, utcFormats);
      utcFormats.X = newFormat(locale_time, utcFormats);
      utcFormats.c = newFormat(locale_dateTime, utcFormats);
      return {format:function(specifier) {
        var f = newFormat(specifier += "", formats);
        f.toString = function() {
          return specifier;
        };
        return f;
      }, parse:function(specifier) {
        var p = newParse(specifier += "", !1);
        p.toString = function() {
          return specifier;
        };
        return p;
      }, utcFormat:function(specifier) {
        var f = newFormat(specifier += "", utcFormats);
        f.toString = function() {
          return specifier;
        };
        return f;
      }, utcParse:function(specifier) {
        var p = newParse(specifier += "", !0);
        p.toString = function() {
          return specifier;
        };
        return p;
      }};
    }
    function pad(value, fill, width) {
      var sign = value < 0 ? "-" : "";
      value = (sign ? -value : value) + "";
      var length = value.length;
      return sign + (length < width ? Array(width - length + 1).join(fill) + value : value);
    }
    function requote(s) {
      return s.replace(requoteRe, "\\$\x26");
    }
    function formatRe(names) {
      return new RegExp("^(?:" + names.map(requote).join("|") + ")", "i");
    }
    function formatLookup(names) {
      return new Map(names.map((name, i) => [name.toLowerCase(), i]));
    }
    function parseWeekdayNumberSunday(d, string, i) {
      return (string = numberRe.exec(string.slice(i, i + 1))) ? (d.w = +string[0], i + string[0].length) : -1;
    }
    function parseWeekdayNumberMonday(d, string, i) {
      return (string = numberRe.exec(string.slice(i, i + 1))) ? (d.u = +string[0], i + string[0].length) : -1;
    }
    function parseWeekNumberSunday(d, string, i) {
      return (string = numberRe.exec(string.slice(i, i + 2))) ? (d.U = +string[0], i + string[0].length) : -1;
    }
    function parseWeekNumberISO(d, string, i) {
      return (string = numberRe.exec(string.slice(i, i + 2))) ? (d.V = +string[0], i + string[0].length) : -1;
    }
    function parseWeekNumberMonday(d, string, i) {
      return (string = numberRe.exec(string.slice(i, i + 2))) ? (d.W = +string[0], i + string[0].length) : -1;
    }
    function parseFullYear(d, string, i) {
      return (string = numberRe.exec(string.slice(i, i + 4))) ? (d.y = +string[0], i + string[0].length) : -1;
    }
    function parseYear(d, string, i) {
      return (string = numberRe.exec(string.slice(i, i + 2))) ? (d.y = +string[0] + (+string[0] > 68 ? 1900 : 2000), i + string[0].length) : -1;
    }
    function parseZone(d, string, i) {
      return (string = /^(Z)|([+-]\d\d)(?::?(\d\d))?/.exec(string.slice(i, i + 6))) ? (d.Z = string[1] ? 0 : -(string[2] + (string[3] || "00")), i + string[0].length) : -1;
    }
    function parseQuarter(d, string, i) {
      return (string = numberRe.exec(string.slice(i, i + 1))) ? (d.q = string[0] * 3 - 3, i + string[0].length) : -1;
    }
    function parseMonthNumber(d, string, i) {
      return (string = numberRe.exec(string.slice(i, i + 2))) ? (d.m = string[0] - 1, i + string[0].length) : -1;
    }
    function parseDayOfMonth(d, string, i) {
      return (string = numberRe.exec(string.slice(i, i + 2))) ? (d.d = +string[0], i + string[0].length) : -1;
    }
    function parseDayOfYear(d, string, i) {
      return (string = numberRe.exec(string.slice(i, i + 3))) ? (d.m = 0, d.d = +string[0], i + string[0].length) : -1;
    }
    function parseHour24(d, string, i) {
      return (string = numberRe.exec(string.slice(i, i + 2))) ? (d.H = +string[0], i + string[0].length) : -1;
    }
    function parseMinutes(d, string, i) {
      return (string = numberRe.exec(string.slice(i, i + 2))) ? (d.M = +string[0], i + string[0].length) : -1;
    }
    function parseSeconds(d, string, i) {
      return (string = numberRe.exec(string.slice(i, i + 2))) ? (d.S = +string[0], i + string[0].length) : -1;
    }
    function parseMilliseconds(d, string, i) {
      return (string = numberRe.exec(string.slice(i, i + 3))) ? (d.L = +string[0], i + string[0].length) : -1;
    }
    function parseMicroseconds(d, string, i) {
      return (string = numberRe.exec(string.slice(i, i + 6))) ? (d.L = Math.floor(string[0] / 1000), i + string[0].length) : -1;
    }
    function parseLiteralPercent(d, string, i) {
      return (d = percentRe.exec(string.slice(i, i + 1))) ? i + d[0].length : -1;
    }
    function parseUnixTimestamp(d, string, i) {
      return (string = numberRe.exec(string.slice(i))) ? (d.Q = +string[0], i + string[0].length) : -1;
    }
    function parseUnixTimestampSeconds(d, string, i) {
      return (string = numberRe.exec(string.slice(i))) ? (d.s = +string[0], i + string[0].length) : -1;
    }
    function formatDayOfMonth(d, p) {
      return pad(d.getDate(), p, 2);
    }
    function formatHour24(d, p) {
      return pad(d.getHours(), p, 2);
    }
    function formatHour12(d, p) {
      return pad(d.getHours() % 12 || 12, p, 2);
    }
    function formatDayOfYear(d, p) {
      return pad(1 + timeDay.count(timeYear(d), d), p, 3);
    }
    function formatMilliseconds(d, p) {
      return pad(d.getMilliseconds(), p, 3);
    }
    function formatMicroseconds(d, p) {
      return formatMilliseconds(d, p) + "000";
    }
    function formatMonthNumber(d, p) {
      return pad(d.getMonth() + 1, p, 2);
    }
    function formatMinutes(d, p) {
      return pad(d.getMinutes(), p, 2);
    }
    function formatSeconds(d, p) {
      return pad(d.getSeconds(), p, 2);
    }
    function formatWeekdayNumberMonday(d) {
      d = d.getDay();
      return d === 0 ? 7 : d;
    }
    function formatWeekNumberSunday(d, p) {
      return pad(timeSunday.count(timeYear(d) - 1, d), p, 2);
    }
    function dISO(d) {
      var day = d.getDay();
      return day >= 4 || day === 0 ? timeThursday(d) : timeThursday.ceil(d);
    }
    function formatWeekNumberISO(d, p) {
      d = dISO(d);
      return pad(timeThursday.count(timeYear(d), d) + (timeYear(d).getDay() === 4), p, 2);
    }
    function formatWeekdayNumberSunday(d) {
      return d.getDay();
    }
    function formatWeekNumberMonday(d, p) {
      return pad(timeMonday.count(timeYear(d) - 1, d), p, 2);
    }
    function formatYear(d, p) {
      return pad(d.getFullYear() % 100, p, 2);
    }
    function formatYearISO(d, p) {
      d = dISO(d);
      return pad(d.getFullYear() % 100, p, 2);
    }
    function formatFullYear(d, p) {
      return pad(d.getFullYear() % 10000, p, 4);
    }
    function formatFullYearISO(d, p) {
      var day = d.getDay();
      d = day >= 4 || day === 0 ? timeThursday(d) : timeThursday.ceil(d);
      return pad(d.getFullYear() % 10000, p, 4);
    }
    function formatZone(d) {
      d = d.getTimezoneOffset();
      return (d > 0 ? "-" : (d *= -1, "+")) + pad(d / 60 | 0, "0", 2) + pad(d % 60, "0", 2);
    }
    function formatUTCDayOfMonth(d, p) {
      return pad(d.getUTCDate(), p, 2);
    }
    function formatUTCHour24(d, p) {
      return pad(d.getUTCHours(), p, 2);
    }
    function formatUTCHour12(d, p) {
      return pad(d.getUTCHours() % 12 || 12, p, 2);
    }
    function formatUTCDayOfYear(d, p) {
      return pad(1 + utcDay.count(utcYear(d), d), p, 3);
    }
    function formatUTCMilliseconds(d, p) {
      return pad(d.getUTCMilliseconds(), p, 3);
    }
    function formatUTCMicroseconds(d, p) {
      return formatUTCMilliseconds(d, p) + "000";
    }
    function formatUTCMonthNumber(d, p) {
      return pad(d.getUTCMonth() + 1, p, 2);
    }
    function formatUTCMinutes(d, p) {
      return pad(d.getUTCMinutes(), p, 2);
    }
    function formatUTCSeconds(d, p) {
      return pad(d.getUTCSeconds(), p, 2);
    }
    function formatUTCWeekdayNumberMonday(d) {
      d = d.getUTCDay();
      return d === 0 ? 7 : d;
    }
    function formatUTCWeekNumberSunday(d, p) {
      return pad(utcSunday.count(utcYear(d) - 1, d), p, 2);
    }
    function UTCdISO(d) {
      var day = d.getUTCDay();
      return day >= 4 || day === 0 ? utcThursday(d) : utcThursday.ceil(d);
    }
    function formatUTCWeekNumberISO(d, p) {
      d = UTCdISO(d);
      return pad(utcThursday.count(utcYear(d), d) + (utcYear(d).getUTCDay() === 4), p, 2);
    }
    function formatUTCWeekdayNumberSunday(d) {
      return d.getUTCDay();
    }
    function formatUTCWeekNumberMonday(d, p) {
      return pad(utcMonday.count(utcYear(d) - 1, d), p, 2);
    }
    function formatUTCYear(d, p) {
      return pad(d.getUTCFullYear() % 100, p, 2);
    }
    function formatUTCYearISO(d, p) {
      d = UTCdISO(d);
      return pad(d.getUTCFullYear() % 100, p, 2);
    }
    function formatUTCFullYear(d, p) {
      return pad(d.getUTCFullYear() % 10000, p, 4);
    }
    function formatUTCFullYearISO(d, p) {
      var day = d.getUTCDay();
      d = day >= 4 || day === 0 ? utcThursday(d) : utcThursday.ceil(d);
      return pad(d.getUTCFullYear() % 10000, p, 4);
    }
    function formatUTCZone() {
      return "+0000";
    }
    function formatLiteralPercent() {
      return "%";
    }
    function formatUnixTimestamp(d) {
      return +d;
    }
    function formatUnixTimestampSeconds(d) {
      return Math.floor(+d / 1000);
    }
    function timeMultiFormat(format, interval, spec) {
      spec = spec || {};
      vegaUtil.isObject(spec) || vegaUtil.error(`Invalid time multi-format specifier: ${spec}`);
      const second = interval(vegaTime.SECONDS), minute = interval(vegaTime.MINUTES), hour = interval(vegaTime.HOURS), day = interval(vegaTime.DATE), week = interval(vegaTime.WEEK), month = interval(vegaTime.MONTH), quarter = interval(vegaTime.QUARTER), year = interval(vegaTime.YEAR), L = format(spec[vegaTime.MILLISECONDS] || ".%L"), S = format(spec[vegaTime.SECONDS] || ":%S"), M = format(spec[vegaTime.MINUTES] || "%I:%M"), H = format(spec[vegaTime.HOURS] || "%I %p"), d = format(spec[vegaTime.DATE] || 
      spec[vegaTime.DAY] || "%a %d"), w = format(spec[vegaTime.WEEK] || "%b %d"), m = format(spec[vegaTime.MONTH] || "%B"), q = format(spec[vegaTime.QUARTER] || "%B"), y = format(spec[vegaTime.YEAR] || "%Y");
      return date => (second(date) < date ? L : minute(date) < date ? S : hour(date) < date ? M : day(date) < date ? H : month(date) < date ? week(date) < date ? d : w : year(date) < date ? quarter(date) < date ? m : q : y)(date);
    }
    function timeLocale(locale) {
      const timeFormat = memoize(locale.format), utcFormat = memoize(locale.utcFormat);
      return {timeFormat:spec => vegaUtil.isString(spec) ? timeFormat(spec) : timeMultiFormat(timeFormat, vegaTime.timeInterval, spec), utcFormat:spec => vegaUtil.isString(spec) ? utcFormat(spec) : timeMultiFormat(utcFormat, vegaTime.utcInterval, spec), timeParse:memoize(locale.parse), utcParse:memoize(locale.utcParse)};
    }
    function resetTimeFormatDefaultLocale() {
      return defaultTimeLocale = timeLocale({format:timeFormat, parse:timeParse, utcFormat, utcParse});
    }
    function timeFormatLocale(definition) {
      return timeLocale(formatLocale(definition));
    }
    function timeFormatDefaultLocale(definition) {
      return arguments.length ? defaultTimeLocale = timeFormatLocale(definition) : defaultTimeLocale;
    }
    function defaultLocale(numberSpec, timeSpec) {
      var args = arguments.length;
      args && args !== 2 && vegaUtil.error("defaultLocale expects either zero or two arguments.");
      if (args) {
        args = numberFormatDefaultLocale(numberSpec);
        var time = timeFormatDefaultLocale(timeSpec);
        args = vegaUtil.extend({}, args, time);
      } else {
        args = numberFormatDefaultLocale(), time = timeFormatDefaultLocale(), args = vegaUtil.extend({}, args, time);
      }
      return args;
    }
    const e10 = Math.sqrt(50), e5 = Math.sqrt(10), e2 = Math.sqrt(2);
    var re = /^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;
    formatSpecifier.prototype = FormatSpecifier.prototype;
    FormatSpecifier.prototype.toString = function() {
      return this.fill + this.align + this.sign + this.symbol + (this.zero ? "0" : "") + (this.width === void 0 ? "" : Math.max(1, this.width | 0)) + (this.comma ? "," : "") + (this.precision === void 0 ? "" : "." + Math.max(0, this.precision | 0)) + (this.trim ? "~" : "") + this.type;
    };
    var prefixExponent, formatTypes = {"%":(x, p) => (x * 100).toFixed(p), b:x => Math.round(x).toString(2), c:x => x + "", d:function(x) {
      return Math.abs(x = Math.round(x)) >= 1e21 ? x.toLocaleString("en").replace(/,/g, "") : x.toString(10);
    }, e:(x, p) => x.toExponential(p), f:(x, p) => x.toFixed(p), g:(x, p) => x.toPrecision(p), o:x => Math.round(x).toString(8), p:(x, p) => formatRounded(x * 100, p), r:formatRounded, s:function(x, p) {
      var d = formatDecimalParts(x, p);
      if (!d) {
        return x + "";
      }
      var coefficient = d[0];
      d = d[1];
      d = d - (prefixExponent = Math.max(-8, Math.min(8, Math.floor(d / 3))) * 3) + 1;
      var n = coefficient.length;
      return d === n ? coefficient : d > n ? coefficient + Array(d - n + 1).join("0") : d > 0 ? coefficient.slice(0, d) + "." + coefficient.slice(d) : "0." + Array(1 - d).join("0") + formatDecimalParts(x, Math.max(0, p + d - 1))[0];
    }, X:x => Math.round(x).toString(16).toUpperCase(), x:x => Math.round(x).toString(16)}, map = Array.prototype.map, prefixes = "y z a f p n µ m  k M G T P E Z Y".split(" "), locale$2, format, formatPrefix;
    (function(definition) {
      locale$2 = d3_formatLocale(definition);
      format = locale$2.format;
      formatPrefix = locale$2.formatPrefix;
      return locale$2;
    })({thousands:",", grouping:[3], currency:["$", ""]});
    let defaultNumberLocale;
    resetNumberFormatDefaultLocale();
    const t0 = new Date(), t1 = new Date(), timeDay = timeInterval(date => date.setHours(0, 0, 0, 0), (date, step) => date.setDate(date.getDate() + step), (start, end) => (end - start - (end.getTimezoneOffset() - start.getTimezoneOffset()) * 6E4) / 864E5, date => date.getDate() - 1);
    timeDay.range;
    const utcDay = timeInterval(date => {
      date.setUTCHours(0, 0, 0, 0);
    }, (date, step) => {
      date.setUTCDate(date.getUTCDate() + step);
    }, (start, end) => (end - start) / 864E5, date => date.getUTCDate() - 1);
    utcDay.range;
    const unixDay = timeInterval(date => {
      date.setUTCHours(0, 0, 0, 0);
    }, (date, step) => {
      date.setUTCDate(date.getUTCDate() + step);
    }, (start, end) => (end - start) / 864E5, date => Math.floor(date / 864E5));
    unixDay.range;
    const timeSunday = timeWeekday(0), timeMonday = timeWeekday(1), timeTuesday = timeWeekday(2), timeWednesday = timeWeekday(3), timeThursday = timeWeekday(4), timeFriday = timeWeekday(5), timeSaturday = timeWeekday(6);
    timeSunday.range;
    timeMonday.range;
    timeTuesday.range;
    timeWednesday.range;
    timeThursday.range;
    timeFriday.range;
    timeSaturday.range;
    const utcSunday = utcWeekday(0), utcMonday = utcWeekday(1), utcTuesday = utcWeekday(2), utcWednesday = utcWeekday(3), utcThursday = utcWeekday(4), utcFriday = utcWeekday(5), utcSaturday = utcWeekday(6);
    utcSunday.range;
    utcMonday.range;
    utcTuesday.range;
    utcWednesday.range;
    utcThursday.range;
    utcFriday.range;
    utcSaturday.range;
    const timeYear = timeInterval(date => {
      date.setMonth(0, 1);
      date.setHours(0, 0, 0, 0);
    }, (date, step) => {
      date.setFullYear(date.getFullYear() + step);
    }, (start, end) => end.getFullYear() - start.getFullYear(), date => date.getFullYear());
    timeYear.every = k => isFinite(k = Math.floor(k)) && k > 0 ? timeInterval(date => {
      date.setFullYear(Math.floor(date.getFullYear() / k) * k);
      date.setMonth(0, 1);
      date.setHours(0, 0, 0, 0);
    }, (date, step) => {
      date.setFullYear(date.getFullYear() + step * k);
    }) : null;
    timeYear.range;
    const utcYear = timeInterval(date => {
      date.setUTCMonth(0, 1);
      date.setUTCHours(0, 0, 0, 0);
    }, (date, step) => {
      date.setUTCFullYear(date.getUTCFullYear() + step);
    }, (start, end) => end.getUTCFullYear() - start.getUTCFullYear(), date => date.getUTCFullYear());
    utcYear.every = k => isFinite(k = Math.floor(k)) && k > 0 ? timeInterval(date => {
      date.setUTCFullYear(Math.floor(date.getUTCFullYear() / k) * k);
      date.setUTCMonth(0, 1);
      date.setUTCHours(0, 0, 0, 0);
    }, (date, step) => {
      date.setUTCFullYear(date.getUTCFullYear() + step * k);
    }) : null;
    utcYear.range;
    var pads = {"-":"", _:" ", 0:"0"}, numberRe = /^\s*\d+/, percentRe = /^%/, requoteRe = /[\\^$*+?|[\]().{}]/g, locale$1, timeFormat, timeParse, utcFormat, utcParse;
    (function(definition) {
      locale$1 = formatLocale(definition);
      timeFormat = locale$1.format;
      timeParse = locale$1.parse;
      utcFormat = locale$1.utcFormat;
      utcParse = locale$1.utcParse;
      return locale$1;
    })({dateTime:"%x, %X", date:"%-m/%-d/%Y", time:"%-I:%M:%S %p", periods:["AM", "PM"], days:"Sunday Monday Tuesday Wednesday Thursday Friday Saturday".split(" "), shortDays:"Sun Mon Tue Wed Thu Fri Sat".split(" "), months:"January February March April May June July August September October November December".split(" "), shortMonths:"Jan Feb Mar Apr May Jun Jul Aug Sep Oct Nov Dec".split(" ")});
    let defaultTimeLocale;
    resetTimeFormatDefaultLocale();
    exports.defaultLocale = defaultLocale;
    exports.locale = function(numberSpec, timeSpec) {
      numberSpec = numberSpec ? numberFormatLocale(numberSpec) : numberFormatDefaultLocale();
      timeSpec = timeSpec ? timeFormatLocale(timeSpec) : timeFormatDefaultLocale();
      return vegaUtil.extend({}, numberSpec, timeSpec);
    };
    exports.numberFormatDefaultLocale = numberFormatDefaultLocale;
    exports.numberFormatLocale = numberFormatLocale;
    exports.resetDefaultLocale = function() {
      resetNumberFormatDefaultLocale();
      resetTimeFormatDefaultLocale();
      return defaultLocale();
    };
    exports.resetNumberFormatDefaultLocale = resetNumberFormatDefaultLocale;
    exports.resetTimeFormatDefaultLocale = resetTimeFormatDefaultLocale;
    exports.timeFormatDefaultLocale = timeFormatDefaultLocale;
    exports.timeFormatLocale = timeFormatLocale;
  });
};

//# sourceMappingURL=module$node_modules$vega_format$build$vega_format.js.map
