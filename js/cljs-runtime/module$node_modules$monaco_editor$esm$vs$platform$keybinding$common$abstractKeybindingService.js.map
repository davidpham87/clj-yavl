{
"version":3,
"file":"module$node_modules$monaco_editor$esm$vs$platform$keybinding$common$abstractKeybindingService.js",
"lineCount":174,
"mappings":"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",
"sources":["node_modules/monaco-editor/esm/vs/platform/keybinding/common/abstractKeybindingService.js"],
"sourcesContent":["shadow$provide[\"module$node_modules$monaco_editor$esm$vs$platform$keybinding$common$abstractKeybindingService\"] = function(require,module,exports) {\nObject.defineProperties(exports, {__esModule:{enumerable:true, value:true}, AbstractKeybindingService:{enumerable:true, get:function() {\n  return AbstractKeybindingService;\n}}});\nvar require$_DOT__DOT__SLASH__DOT__DOT__SLASH__DOT__DOT__SLASH_base_SLASH_common_SLASH_async_DOT_js = require(\"../../../base/common/async.js\");\nvar require$_DOT__DOT__SLASH__DOT__DOT__SLASH__DOT__DOT__SLASH_base_SLASH_common_SLASH_errors_DOT_js = require(\"../../../base/common/errors.js\");\nvar require$_DOT__DOT__SLASH__DOT__DOT__SLASH__DOT__DOT__SLASH_base_SLASH_common_SLASH_event_DOT_js = require(\"../../../base/common/event.js\");\nvar require$_DOT__DOT__SLASH__DOT__DOT__SLASH__DOT__DOT__SLASH_base_SLASH_common_SLASH_ime_DOT_js = require(\"../../../base/common/ime.js\");\nvar require$_DOT__DOT__SLASH__DOT__DOT__SLASH__DOT__DOT__SLASH_base_SLASH_common_SLASH_lifecycle_DOT_js = require(\"../../../base/common/lifecycle.js\");\nvar nls = require(\"../../../nls.js\");\nvar require$_DOT__SLASH_keybindingResolver_DOT_js = require(\"./keybindingResolver.js\");\nconst HIGH_FREQ_COMMANDS = /^(cursor|delete|undo|redo|tab|editor\\.action\\.clipboard)/;\nclass AbstractKeybindingService extends require$_DOT__DOT__SLASH__DOT__DOT__SLASH__DOT__DOT__SLASH_base_SLASH_common_SLASH_lifecycle_DOT_js.Disposable {\n  get onDidUpdateKeybindings() {\n    return this._onDidUpdateKeybindings ? this._onDidUpdateKeybindings.event : require$_DOT__DOT__SLASH__DOT__DOT__SLASH__DOT__DOT__SLASH_base_SLASH_common_SLASH_event_DOT_js.Event.None;\n  }\n  get inChordMode() {\n    return this._currentChords.length > 0;\n  }\n  constructor(_contextKeyService, _commandService, _telemetryService, _notificationService, _logService) {\n    super();\n    this._contextKeyService = _contextKeyService;\n    this._commandService = _commandService;\n    this._telemetryService = _telemetryService;\n    this._notificationService = _notificationService;\n    this._logService = _logService;\n    this._onDidUpdateKeybindings = this._register(new require$_DOT__DOT__SLASH__DOT__DOT__SLASH__DOT__DOT__SLASH_base_SLASH_common_SLASH_event_DOT_js.Emitter());\n    this._currentChords = [];\n    this._currentChordChecker = new require$_DOT__DOT__SLASH__DOT__DOT__SLASH__DOT__DOT__SLASH_base_SLASH_common_SLASH_async_DOT_js.IntervalTimer();\n    this._currentChordStatusMessage = null;\n    this._ignoreSingleModifiers = KeybindingModifierSet.EMPTY;\n    this._currentSingleModifier = null;\n    this._currentSingleModifierClearTimeout = new require$_DOT__DOT__SLASH__DOT__DOT__SLASH__DOT__DOT__SLASH_base_SLASH_common_SLASH_async_DOT_js.TimeoutTimer();\n    this._logging = false;\n  }\n  dispose() {\n    super.dispose();\n  }\n  _log(str) {\n    if (this._logging) {\n      this._logService.info(`[KeybindingService]: ${str}`);\n    }\n  }\n  getKeybindings() {\n    return this._getResolver().getKeybindings();\n  }\n  lookupKeybinding(commandId, context) {\n    const result = this._getResolver().lookupPrimaryKeybinding(commandId, context || this._contextKeyService);\n    if (!result) {\n      return undefined;\n    }\n    return result.resolvedKeybinding;\n  }\n  dispatchEvent(e, target) {\n    return this._dispatch(e, target);\n  }\n  softDispatch(e, target) {\n    this._log(`/ Soft dispatching keyboard event`);\n    const keybinding = this.resolveKeyboardEvent(e);\n    if (keybinding.hasMultipleChords()) {\n      console.warn(\"keyboard event should not be mapped to multiple chords\");\n      return require$_DOT__SLASH_keybindingResolver_DOT_js.NoMatchingKb;\n    }\n    const [firstChord] = keybinding.getDispatchChords();\n    if (firstChord === null) {\n      this._log(`\\\\ Keyboard event cannot be dispatched`);\n      return require$_DOT__SLASH_keybindingResolver_DOT_js.NoMatchingKb;\n    }\n    const contextValue = this._contextKeyService.getContext(target);\n    const currentChords = this._currentChords.map(({keypress}) => keypress);\n    return this._getResolver().resolve(contextValue, currentChords, firstChord);\n  }\n  _scheduleLeaveChordMode() {\n    const chordLastInteractedTime = Date.now();\n    this._currentChordChecker.cancelAndSet(() => {\n      if (!this._documentHasFocus()) {\n        this._leaveChordMode();\n        return;\n      }\n      if (Date.now() - chordLastInteractedTime > 5000) {\n        this._leaveChordMode();\n      }\n    }, 500);\n  }\n  _expectAnotherChord(firstChord, keypressLabel) {\n    this._currentChords.push({keypress:firstChord, label:keypressLabel});\n    switch(this._currentChords.length) {\n      case 0:\n        throw (0,require$_DOT__DOT__SLASH__DOT__DOT__SLASH__DOT__DOT__SLASH_base_SLASH_common_SLASH_errors_DOT_js.illegalState)(\"impossible\");\n      case 1:\n        this._currentChordStatusMessage = this._notificationService.status(nls.localize(\"first.chord\", \"({0}) was pressed. Waiting for second key of chord...\", keypressLabel));\n        break;\n      default:\n        {\n          const fullKeypressLabel = this._currentChords.map(({label}) => label).join(\", \");\n          this._currentChordStatusMessage = this._notificationService.status(nls.localize(\"next.chord\", \"({0}) was pressed. Waiting for next key of chord...\", fullKeypressLabel));\n        }\n    }\n    this._scheduleLeaveChordMode();\n    if (require$_DOT__DOT__SLASH__DOT__DOT__SLASH__DOT__DOT__SLASH_base_SLASH_common_SLASH_ime_DOT_js.IME.enabled) {\n      require$_DOT__DOT__SLASH__DOT__DOT__SLASH__DOT__DOT__SLASH_base_SLASH_common_SLASH_ime_DOT_js.IME.disable();\n    }\n  }\n  _leaveChordMode() {\n    if (this._currentChordStatusMessage) {\n      this._currentChordStatusMessage.dispose();\n      this._currentChordStatusMessage = null;\n    }\n    this._currentChordChecker.cancel();\n    this._currentChords = [];\n    require$_DOT__DOT__SLASH__DOT__DOT__SLASH__DOT__DOT__SLASH_base_SLASH_common_SLASH_ime_DOT_js.IME.enable();\n  }\n  _dispatch(e, target) {\n    return this._doDispatch(this.resolveKeyboardEvent(e), target, false);\n  }\n  _singleModifierDispatch(e, target) {\n    const keybinding = this.resolveKeyboardEvent(e);\n    const [singleModifier] = keybinding.getSingleModifierDispatchChords();\n    if (singleModifier) {\n      if (this._ignoreSingleModifiers.has(singleModifier)) {\n        this._log(`+ Ignoring single modifier ${singleModifier} due to it being pressed together with other keys.`);\n        this._ignoreSingleModifiers = KeybindingModifierSet.EMPTY;\n        this._currentSingleModifierClearTimeout.cancel();\n        this._currentSingleModifier = null;\n        return false;\n      }\n      this._ignoreSingleModifiers = KeybindingModifierSet.EMPTY;\n      if (this._currentSingleModifier === null) {\n        this._log(`+ Storing single modifier for possible chord ${singleModifier}.`);\n        this._currentSingleModifier = singleModifier;\n        this._currentSingleModifierClearTimeout.cancelAndSet(() => {\n          this._log(`+ Clearing single modifier due to 300ms elapsed.`);\n          this._currentSingleModifier = null;\n        }, 300);\n        return false;\n      }\n      if (singleModifier === this._currentSingleModifier) {\n        this._log(`/ Dispatching single modifier chord ${singleModifier} ${singleModifier}`);\n        this._currentSingleModifierClearTimeout.cancel();\n        this._currentSingleModifier = null;\n        return this._doDispatch(keybinding, target, true);\n      }\n      this._log(`+ Clearing single modifier due to modifier mismatch: ${this._currentSingleModifier} ${singleModifier}`);\n      this._currentSingleModifierClearTimeout.cancel();\n      this._currentSingleModifier = null;\n      return false;\n    }\n    const [firstChord] = keybinding.getChords();\n    this._ignoreSingleModifiers = new KeybindingModifierSet(firstChord);\n    if (this._currentSingleModifier !== null) {\n      this._log(`+ Clearing single modifier due to other key up.`);\n    }\n    this._currentSingleModifierClearTimeout.cancel();\n    this._currentSingleModifier = null;\n    return false;\n  }\n  _doDispatch(userKeypress, target, isSingleModiferChord = false) {\n    var _a;\n    let shouldPreventDefault = false;\n    if (userKeypress.hasMultipleChords()) {\n      console.warn(\"Unexpected keyboard event mapped to multiple chords\");\n      return false;\n    }\n    let userPressedChord = null;\n    let currentChords = null;\n    if (isSingleModiferChord) {\n      const [dispatchKeyname] = userKeypress.getSingleModifierDispatchChords();\n      userPressedChord = dispatchKeyname;\n      currentChords = dispatchKeyname ? [dispatchKeyname] : [];\n    } else {\n      [userPressedChord] = userKeypress.getDispatchChords();\n      currentChords = this._currentChords.map(({keypress}) => keypress);\n    }\n    if (userPressedChord === null) {\n      this._log(`\\\\ Keyboard event cannot be dispatched in keydown phase.`);\n      return shouldPreventDefault;\n    }\n    const contextValue = this._contextKeyService.getContext(target);\n    const keypressLabel = userKeypress.getLabel();\n    const resolveResult = this._getResolver().resolve(contextValue, currentChords, userPressedChord);\n    switch(resolveResult.kind) {\n      case 0:\n        {\n          this._logService.trace(\"KeybindingService#dispatch\", keypressLabel, `[ No matching keybinding ]`);\n          if (this.inChordMode) {\n            const currentChordsLabel = this._currentChords.map(({label}) => label).join(\", \");\n            this._log(`+ Leaving multi-chord mode: Nothing bound to \"${currentChordsLabel}, ${keypressLabel}\".`);\n            this._notificationService.status(nls.localize(\"missing.chord\", \"The key combination ({0}, {1}) is not a command.\", currentChordsLabel, keypressLabel), {hideAfter:10 * 1000});\n            this._leaveChordMode();\n            shouldPreventDefault = true;\n          }\n          return shouldPreventDefault;\n        }\n      case 1:\n        {\n          this._logService.trace(\"KeybindingService#dispatch\", keypressLabel, `[ Several keybindings match - more chords needed ]`);\n          shouldPreventDefault = true;\n          this._expectAnotherChord(userPressedChord, keypressLabel);\n          this._log(this._currentChords.length === 1 ? `+ Entering multi-chord mode...` : `+ Continuing multi-chord mode...`);\n          return shouldPreventDefault;\n        }\n      case 2:\n        {\n          this._logService.trace(\"KeybindingService#dispatch\", keypressLabel, `[ Will dispatch command ${resolveResult.commandId} ]`);\n          if (resolveResult.commandId === null || resolveResult.commandId === \"\") {\n            if (this.inChordMode) {\n              const currentChordsLabel = this._currentChords.map(({label}) => label).join(\", \");\n              this._log(`+ Leaving chord mode: Nothing bound to \"${currentChordsLabel}, ${keypressLabel}\".`);\n              this._notificationService.status(nls.localize(\"missing.chord\", \"The key combination ({0}, {1}) is not a command.\", currentChordsLabel, keypressLabel), {hideAfter:10 * 1000});\n              this._leaveChordMode();\n              shouldPreventDefault = true;\n            }\n          } else {\n            if (this.inChordMode) {\n              this._leaveChordMode();\n            }\n            if (!resolveResult.isBubble) {\n              shouldPreventDefault = true;\n            }\n            this._log(`+ Invoking command ${resolveResult.commandId}.`);\n            if (typeof resolveResult.commandArgs === \"undefined\") {\n              this._commandService.executeCommand(resolveResult.commandId).then(undefined, err => this._notificationService.warn(err));\n            } else {\n              this._commandService.executeCommand(resolveResult.commandId, resolveResult.commandArgs).then(undefined, err => this._notificationService.warn(err));\n            }\n            if (!HIGH_FREQ_COMMANDS.test(resolveResult.commandId)) {\n              this._telemetryService.publicLog2(\"workbenchActionExecuted\", {id:resolveResult.commandId, from:\"keybinding\", detail:(_a = userKeypress.getUserSettingsLabel()) !== null && _a !== void 0 ? _a : undefined});\n            }\n          }\n          return shouldPreventDefault;\n        }\n    }\n  }\n  mightProducePrintableCharacter(event) {\n    if (event.ctrlKey || event.metaKey) {\n      return false;\n    }\n    if (event.keyCode >= 31 && event.keyCode <= 56 || event.keyCode >= 21 && event.keyCode <= 30) {\n      return true;\n    }\n    return false;\n  }\n}\nclass KeybindingModifierSet {\n  constructor(source) {\n    this._ctrlKey = source ? source.ctrlKey : false;\n    this._shiftKey = source ? source.shiftKey : false;\n    this._altKey = source ? source.altKey : false;\n    this._metaKey = source ? source.metaKey : false;\n  }\n  has(modifier) {\n    switch(modifier) {\n      case \"ctrl\":\n        return this._ctrlKey;\n      case \"shift\":\n        return this._shiftKey;\n      case \"alt\":\n        return this._altKey;\n      case \"meta\":\n        return this._metaKey;\n    }\n  }\n}\nKeybindingModifierSet.EMPTY = new KeybindingModifierSet(null);\n\n};"],
"names":["shadow$provide","require","module","exports","Object","defineProperties","__esModule","enumerable","value","AbstractKeybindingService","get","require$_DOT__DOT__SLASH__DOT__DOT__SLASH__DOT__DOT__SLASH_base_SLASH_common_SLASH_async_DOT_js","require$_DOT__DOT__SLASH__DOT__DOT__SLASH__DOT__DOT__SLASH_base_SLASH_common_SLASH_errors_DOT_js","require$_DOT__DOT__SLASH__DOT__DOT__SLASH__DOT__DOT__SLASH_base_SLASH_common_SLASH_event_DOT_js","require$_DOT__DOT__SLASH__DOT__DOT__SLASH__DOT__DOT__SLASH_base_SLASH_common_SLASH_ime_DOT_js","require$_DOT__DOT__SLASH__DOT__DOT__SLASH__DOT__DOT__SLASH_base_SLASH_common_SLASH_lifecycle_DOT_js","nls","require$_DOT__SLASH_keybindingResolver_DOT_js","HIGH_FREQ_COMMANDS","Disposable","_onDidUpdateKeybindings","event","Event","None","_currentChords","length","constructor","_contextKeyService","_commandService","_telemetryService","_notificationService","_logService","_register","Emitter","_currentChordChecker","IntervalTimer","_currentChordStatusMessage","_ignoreSingleModifiers","KeybindingModifierSet","EMPTY","_currentSingleModifier","_currentSingleModifierClearTimeout","TimeoutTimer","_logging","dispose","_log","str","info","getKeybindings","_getResolver","lookupKeybinding","commandId","context","result","lookupPrimaryKeybinding","resolvedKeybinding","dispatchEvent","e","target","_dispatch","softDispatch","keybinding","resolveKeyboardEvent","hasMultipleChords","console","warn","NoMatchingKb","firstChord","getDispatchChords","contextValue","getContext","currentChords","map","keypress","resolve","_scheduleLeaveChordMode","chordLastInteractedTime","Date","now","cancelAndSet","_documentHasFocus","_leaveChordMode","_expectAnotherChord","keypressLabel","push","label","illegalState","status","localize","fullKeypressLabel","join","IME","enabled","disable","cancel","enable","_doDispatch","_singleModifierDispatch","singleModifier","getSingleModifierDispatchChords","has","getChords","userKeypress","isSingleModiferChord","_a","shouldPreventDefault","userPressedChord","dispatchKeyname","getLabel","resolveResult","kind","trace","inChordMode","currentChordsLabel","hideAfter","isBubble","commandArgs","executeCommand","then","undefined","err","test","publicLog2","id","from","detail","getUserSettingsLabel","mightProducePrintableCharacter","ctrlKey","metaKey","keyCode","source","_ctrlKey","_shiftKey","shiftKey","_altKey","altKey","_metaKey","modifier"]
}
