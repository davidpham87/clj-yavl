shadow$provide.module$node_modules$monaco_editor$esm$vs$editor$browser$widget$codeEditorWidget = function(require, module, exports) {
  Object.defineProperties(exports, {__esModule:{enumerable:!0, value:!0}, BooleanEventEmitter:{enumerable:!0, get:function() {
    return BooleanEventEmitter;
  }}, CodeEditorWidget:{enumerable:!0, get:function() {
    return CodeEditorWidget;
  }}, EditorModeContext:{enumerable:!0, get:function() {
    return EditorModeContext;
  }}});
  require("module$node_modules$monaco_editor$esm$vs$editor$browser$services$markerDecorations");
  require("module$node_modules$monaco_editor$esm$vs$editor$browser$widget$media$editor_css");
  var nls = require("module$node_modules$monaco_editor$esm$vs$nls"), dom = require("module$node_modules$monaco_editor$esm$vs$base$browser$dom"), require$_DOT__DOT__SLASH__DOT__DOT__SLASH__DOT__DOT__SLASH_base_SLASH_common_SLASH_errors_DOT_js = require("module$node_modules$monaco_editor$esm$vs$base$common$errors"), require$_DOT__DOT__SLASH__DOT__DOT__SLASH__DOT__DOT__SLASH_base_SLASH_common_SLASH_event_DOT_js = require("module$node_modules$monaco_editor$esm$vs$base$common$event"), require$_DOT__DOT__SLASH__DOT__DOT__SLASH__DOT__DOT__SLASH_base_SLASH_common_SLASH_lifecycle_DOT_js = 
  require("module$node_modules$monaco_editor$esm$vs$base$common$lifecycle"), require$_DOT__DOT__SLASH__DOT__DOT__SLASH__DOT__DOT__SLASH_base_SLASH_common_SLASH_network_DOT_js = require("module$node_modules$monaco_editor$esm$vs$base$common$network"), require$_DOT__DOT__SLASH_config_SLASH_editorConfiguration_DOT_js = require("module$node_modules$monaco_editor$esm$vs$editor$browser$config$editorConfiguration"), require$_DOT__DOT__SLASH_editorExtensions_DOT_js = require("module$node_modules$monaco_editor$esm$vs$editor$browser$editorExtensions");
  module = require("module$node_modules$monaco_editor$esm$vs$editor$browser$services$codeEditorService");
  var require$_DOT__DOT__SLASH_view_DOT_js = require("module$node_modules$monaco_editor$esm$vs$editor$browser$view"), require$_DOT__DOT__SLASH_view_SLASH_viewUserInputEvents_DOT_js = require("module$node_modules$monaco_editor$esm$vs$editor$browser$view$viewUserInputEvents"), require$_DOT__DOT__SLASH__DOT__DOT__SLASH_common_SLASH_config_SLASH_editorOptions_DOT_js = require("module$node_modules$monaco_editor$esm$vs$editor$common$config$editorOptions"), require$_DOT__DOT__SLASH__DOT__DOT__SLASH_common_SLASH_core_SLASH_cursorColumns_DOT_js = 
  require("module$node_modules$monaco_editor$esm$vs$editor$common$core$cursorColumns"), require$_DOT__DOT__SLASH__DOT__DOT__SLASH_common_SLASH_core_SLASH_position_DOT_js = require("module$node_modules$monaco_editor$esm$vs$editor$common$core$position"), require$_DOT__DOT__SLASH__DOT__DOT__SLASH_common_SLASH_core_SLASH_range_DOT_js = require("module$node_modules$monaco_editor$esm$vs$editor$common$core$range"), require$_DOT__DOT__SLASH__DOT__DOT__SLASH_common_SLASH_core_SLASH_selection_DOT_js = require("module$node_modules$monaco_editor$esm$vs$editor$common$core$selection"), 
  require$_DOT__DOT__SLASH__DOT__DOT__SLASH_common_SLASH_editorAction_DOT_js = require("module$node_modules$monaco_editor$esm$vs$editor$common$editorAction"), editorCommon = require("module$node_modules$monaco_editor$esm$vs$editor$common$editorCommon"), require$_DOT__DOT__SLASH__DOT__DOT__SLASH_common_SLASH_editorContextKeys_DOT_js = require("module$node_modules$monaco_editor$esm$vs$editor$common$editorContextKeys");
  exports = require("module$node_modules$monaco_editor$esm$vs$editor$common$model$textModel");
  var require$_DOT__DOT__SLASH__DOT__DOT__SLASH_common_SLASH_core_SLASH_editorColorRegistry_DOT_js = require("module$node_modules$monaco_editor$esm$vs$editor$common$core$editorColorRegistry"), require$_DOT__DOT__SLASH__DOT__DOT__SLASH__DOT__DOT__SLASH_platform_SLASH_theme_SLASH_common_SLASH_colorRegistry_DOT_js = require("module$node_modules$monaco_editor$esm$vs$platform$theme$common$colorRegistry"), require$_DOT__DOT__SLASH__DOT__DOT__SLASH_common_SLASH_viewModel_SLASH_viewModelImpl_DOT_js = require("module$node_modules$monaco_editor$esm$vs$editor$common$viewModel$viewModelImpl"), 
  require$_DOT__DOT__SLASH__DOT__DOT__SLASH__DOT__DOT__SLASH_platform_SLASH_commands_SLASH_common_SLASH_commands_DOT_js = require("module$node_modules$monaco_editor$esm$vs$platform$commands$common$commands"), require$_DOT__DOT__SLASH__DOT__DOT__SLASH__DOT__DOT__SLASH_platform_SLASH_contextkey_SLASH_common_SLASH_contextkey_DOT_js = require("module$node_modules$monaco_editor$esm$vs$platform$contextkey$common$contextkey"), require$_DOT__DOT__SLASH__DOT__DOT__SLASH__DOT__DOT__SLASH_platform_SLASH_instantiation_SLASH_common_SLASH_instantiation_DOT_js = 
  require("module$node_modules$monaco_editor$esm$vs$platform$instantiation$common$instantiation"), require$_DOT__DOT__SLASH__DOT__DOT__SLASH__DOT__DOT__SLASH_platform_SLASH_instantiation_SLASH_common_SLASH_serviceCollection_DOT_js = require("module$node_modules$monaco_editor$esm$vs$platform$instantiation$common$serviceCollection"), require$_DOT__DOT__SLASH__DOT__DOT__SLASH__DOT__DOT__SLASH_platform_SLASH_notification_SLASH_common_SLASH_notification_DOT_js = require("module$node_modules$monaco_editor$esm$vs$platform$notification$common$notification"), 
  require$_DOT__DOT__SLASH__DOT__DOT__SLASH__DOT__DOT__SLASH_platform_SLASH_theme_SLASH_common_SLASH_themeService_DOT_js = require("module$node_modules$monaco_editor$esm$vs$platform$theme$common$themeService"), require$_DOT__DOT__SLASH__DOT__DOT__SLASH__DOT__DOT__SLASH_platform_SLASH_accessibility_SLASH_common_SLASH_accessibility_DOT_js = require("module$node_modules$monaco_editor$esm$vs$platform$accessibility$common$accessibility"), require$_DOT__DOT__SLASH__DOT__DOT__SLASH_common_SLASH_viewModel_SLASH_monospaceLineBreaksComputer_DOT_js = 
  require("module$node_modules$monaco_editor$esm$vs$editor$common$viewModel$monospaceLineBreaksComputer"), require$_DOT__DOT__SLASH_view_SLASH_domLineBreaksComputer_DOT_js = require("module$node_modules$monaco_editor$esm$vs$editor$browser$view$domLineBreaksComputer"), require$_DOT__DOT__SLASH__DOT__DOT__SLASH_common_SLASH_cursor_SLASH_cursorWordOperations_DOT_js = require("module$node_modules$monaco_editor$esm$vs$editor$common$cursor$cursorWordOperations"), require$_DOT__DOT__SLASH__DOT__DOT__SLASH_common_SLASH_languages_SLASH_languageConfigurationRegistry_DOT_js = 
  require("module$node_modules$monaco_editor$esm$vs$editor$common$languages$languageConfigurationRegistry"), require$_DOT__DOT__SLASH_config_SLASH_domFontInfo_DOT_js = require("module$node_modules$monaco_editor$esm$vs$editor$browser$config$domFontInfo"), require$_DOT__DOT__SLASH__DOT__DOT__SLASH_common_SLASH_services_SLASH_languageFeatures_DOT_js = require("module$node_modules$monaco_editor$esm$vs$editor$common$services$languageFeatures"), require$_DOT__SLASH_codeEditorContributions_DOT_js = require("module$node_modules$monaco_editor$esm$vs$editor$browser$widget$codeEditorContributions"), 
  require$_DOT__DOT__SLASH_config_SLASH_tabFocus_DOT_js = require("module$node_modules$monaco_editor$esm$vs$editor$browser$config$tabFocus");
  require = this && this.__decorate || function(decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") {
      r = Reflect.decorate(decorators, target, key, desc);
    } else {
      for (var i = decorators.length - 1; i >= 0; i--) {
        if (d = decorators[i]) {
          r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
        }
      }
    }
    return c > 3 && r && Object.defineProperty(target, key, r), r;
  };
  var __param = this && this.__param || function(paramIndex, decorator) {
    return function(target, key) {
      decorator(target, key, paramIndex);
    };
  }, CodeEditorWidget_1;
  let EDITOR_ID = 0;
  class ModelData {
    constructor(model, viewModel, view, hasRealView, listenersToRemove, attachedView) {
      this.model = model;
      this.viewModel = viewModel;
      this.view = view;
      this.hasRealView = hasRealView;
      this.listenersToRemove = listenersToRemove;
      this.attachedView = attachedView;
    }
    dispose() {
      (0,require$_DOT__DOT__SLASH__DOT__DOT__SLASH__DOT__DOT__SLASH_base_SLASH_common_SLASH_lifecycle_DOT_js.dispose)(this.listenersToRemove);
      this.model.onBeforeDetached(this.attachedView);
      this.hasRealView && this.view.dispose();
      this.viewModel.dispose();
    }
  }
  let CodeEditorWidget = CodeEditorWidget_1 = class extends require$_DOT__DOT__SLASH__DOT__DOT__SLASH__DOT__DOT__SLASH_base_SLASH_common_SLASH_lifecycle_DOT_js.Disposable {
    get isSimpleWidget() {
      return this._configuration.isSimpleWidget;
    }
    constructor(domElement, _options, codeEditorWidgetOptions, instantiationService, codeEditorService, commandService, contextKeyService, themeService, notificationService, accessibilityService, languageConfigurationService, languageFeaturesService) {
      var _a;
      super();
      this.languageConfigurationService = languageConfigurationService;
      this._deliveryQueue = (0,require$_DOT__DOT__SLASH__DOT__DOT__SLASH__DOT__DOT__SLASH_base_SLASH_common_SLASH_event_DOT_js.createEventDeliveryQueue)();
      this._contributions = this._register(new require$_DOT__SLASH_codeEditorContributions_DOT_js.CodeEditorContributions());
      this._onDidDispose = this._register(new require$_DOT__DOT__SLASH__DOT__DOT__SLASH__DOT__DOT__SLASH_base_SLASH_common_SLASH_event_DOT_js.Emitter());
      this.onDidDispose = this._onDidDispose.event;
      this._onDidChangeModelContent = this._register(new require$_DOT__DOT__SLASH__DOT__DOT__SLASH__DOT__DOT__SLASH_base_SLASH_common_SLASH_event_DOT_js.Emitter({deliveryQueue:this._deliveryQueue}));
      this.onDidChangeModelContent = this._onDidChangeModelContent.event;
      this._onDidChangeModelLanguage = this._register(new require$_DOT__DOT__SLASH__DOT__DOT__SLASH__DOT__DOT__SLASH_base_SLASH_common_SLASH_event_DOT_js.Emitter({deliveryQueue:this._deliveryQueue}));
      this.onDidChangeModelLanguage = this._onDidChangeModelLanguage.event;
      this._onDidChangeModelLanguageConfiguration = this._register(new require$_DOT__DOT__SLASH__DOT__DOT__SLASH__DOT__DOT__SLASH_base_SLASH_common_SLASH_event_DOT_js.Emitter({deliveryQueue:this._deliveryQueue}));
      this.onDidChangeModelLanguageConfiguration = this._onDidChangeModelLanguageConfiguration.event;
      this._onDidChangeModelOptions = this._register(new require$_DOT__DOT__SLASH__DOT__DOT__SLASH__DOT__DOT__SLASH_base_SLASH_common_SLASH_event_DOT_js.Emitter({deliveryQueue:this._deliveryQueue}));
      this.onDidChangeModelOptions = this._onDidChangeModelOptions.event;
      this._onDidChangeModelDecorations = this._register(new require$_DOT__DOT__SLASH__DOT__DOT__SLASH__DOT__DOT__SLASH_base_SLASH_common_SLASH_event_DOT_js.Emitter({deliveryQueue:this._deliveryQueue}));
      this.onDidChangeModelDecorations = this._onDidChangeModelDecorations.event;
      this._onDidChangeModelTokens = this._register(new require$_DOT__DOT__SLASH__DOT__DOT__SLASH__DOT__DOT__SLASH_base_SLASH_common_SLASH_event_DOT_js.Emitter({deliveryQueue:this._deliveryQueue}));
      this.onDidChangeModelTokens = this._onDidChangeModelTokens.event;
      this._onDidChangeConfiguration = this._register(new require$_DOT__DOT__SLASH__DOT__DOT__SLASH__DOT__DOT__SLASH_base_SLASH_common_SLASH_event_DOT_js.Emitter({deliveryQueue:this._deliveryQueue}));
      this.onDidChangeConfiguration = this._onDidChangeConfiguration.event;
      this._onDidChangeModel = this._register(new require$_DOT__DOT__SLASH__DOT__DOT__SLASH__DOT__DOT__SLASH_base_SLASH_common_SLASH_event_DOT_js.Emitter({deliveryQueue:this._deliveryQueue}));
      this.onDidChangeModel = this._onDidChangeModel.event;
      this._onDidChangeCursorPosition = this._register(new require$_DOT__DOT__SLASH__DOT__DOT__SLASH__DOT__DOT__SLASH_base_SLASH_common_SLASH_event_DOT_js.Emitter({deliveryQueue:this._deliveryQueue}));
      this.onDidChangeCursorPosition = this._onDidChangeCursorPosition.event;
      this._onDidChangeCursorSelection = this._register(new require$_DOT__DOT__SLASH__DOT__DOT__SLASH__DOT__DOT__SLASH_base_SLASH_common_SLASH_event_DOT_js.Emitter({deliveryQueue:this._deliveryQueue}));
      this.onDidChangeCursorSelection = this._onDidChangeCursorSelection.event;
      this._onDidAttemptReadOnlyEdit = this._register(new InteractionEmitter(this._contributions, this._deliveryQueue));
      this.onDidAttemptReadOnlyEdit = this._onDidAttemptReadOnlyEdit.event;
      this._onDidLayoutChange = this._register(new require$_DOT__DOT__SLASH__DOT__DOT__SLASH__DOT__DOT__SLASH_base_SLASH_common_SLASH_event_DOT_js.Emitter({deliveryQueue:this._deliveryQueue}));
      this.onDidLayoutChange = this._onDidLayoutChange.event;
      this._editorTextFocus = this._register(new BooleanEventEmitter({deliveryQueue:this._deliveryQueue}));
      this.onDidFocusEditorText = this._editorTextFocus.onDidChangeToTrue;
      this.onDidBlurEditorText = this._editorTextFocus.onDidChangeToFalse;
      this._editorWidgetFocus = this._register(new BooleanEventEmitter({deliveryQueue:this._deliveryQueue}));
      this.onDidFocusEditorWidget = this._editorWidgetFocus.onDidChangeToTrue;
      this.onDidBlurEditorWidget = this._editorWidgetFocus.onDidChangeToFalse;
      this._onWillType = this._register(new InteractionEmitter(this._contributions, this._deliveryQueue));
      this.onWillType = this._onWillType.event;
      this._onDidType = this._register(new InteractionEmitter(this._contributions, this._deliveryQueue));
      this.onDidType = this._onDidType.event;
      this._onDidCompositionStart = this._register(new InteractionEmitter(this._contributions, this._deliveryQueue));
      this.onDidCompositionStart = this._onDidCompositionStart.event;
      this._onDidCompositionEnd = this._register(new InteractionEmitter(this._contributions, this._deliveryQueue));
      this.onDidCompositionEnd = this._onDidCompositionEnd.event;
      this._onDidPaste = this._register(new InteractionEmitter(this._contributions, this._deliveryQueue));
      this.onDidPaste = this._onDidPaste.event;
      this._onMouseUp = this._register(new InteractionEmitter(this._contributions, this._deliveryQueue));
      this.onMouseUp = this._onMouseUp.event;
      this._onMouseDown = this._register(new InteractionEmitter(this._contributions, this._deliveryQueue));
      this.onMouseDown = this._onMouseDown.event;
      this._onMouseDrag = this._register(new InteractionEmitter(this._contributions, this._deliveryQueue));
      this.onMouseDrag = this._onMouseDrag.event;
      this._onMouseDrop = this._register(new InteractionEmitter(this._contributions, this._deliveryQueue));
      this.onMouseDrop = this._onMouseDrop.event;
      this._onMouseDropCanceled = this._register(new InteractionEmitter(this._contributions, this._deliveryQueue));
      this.onMouseDropCanceled = this._onMouseDropCanceled.event;
      this._onDropIntoEditor = this._register(new InteractionEmitter(this._contributions, this._deliveryQueue));
      this.onDropIntoEditor = this._onDropIntoEditor.event;
      this._onContextMenu = this._register(new InteractionEmitter(this._contributions, this._deliveryQueue));
      this.onContextMenu = this._onContextMenu.event;
      this._onMouseMove = this._register(new InteractionEmitter(this._contributions, this._deliveryQueue));
      this.onMouseMove = this._onMouseMove.event;
      this._onMouseLeave = this._register(new InteractionEmitter(this._contributions, this._deliveryQueue));
      this.onMouseLeave = this._onMouseLeave.event;
      this._onMouseWheel = this._register(new InteractionEmitter(this._contributions, this._deliveryQueue));
      this.onMouseWheel = this._onMouseWheel.event;
      this._onKeyUp = this._register(new InteractionEmitter(this._contributions, this._deliveryQueue));
      this.onKeyUp = this._onKeyUp.event;
      this._onKeyDown = this._register(new InteractionEmitter(this._contributions, this._deliveryQueue));
      this.onKeyDown = this._onKeyDown.event;
      this._onDidContentSizeChange = this._register(new require$_DOT__DOT__SLASH__DOT__DOT__SLASH__DOT__DOT__SLASH_base_SLASH_common_SLASH_event_DOT_js.Emitter({deliveryQueue:this._deliveryQueue}));
      this.onDidContentSizeChange = this._onDidContentSizeChange.event;
      this._onDidScrollChange = this._register(new require$_DOT__DOT__SLASH__DOT__DOT__SLASH__DOT__DOT__SLASH_base_SLASH_common_SLASH_event_DOT_js.Emitter({deliveryQueue:this._deliveryQueue}));
      this.onDidScrollChange = this._onDidScrollChange.event;
      this._onDidChangeViewZones = this._register(new require$_DOT__DOT__SLASH__DOT__DOT__SLASH__DOT__DOT__SLASH_base_SLASH_common_SLASH_event_DOT_js.Emitter({deliveryQueue:this._deliveryQueue}));
      this.onDidChangeViewZones = this._onDidChangeViewZones.event;
      this._onDidChangeHiddenAreas = this._register(new require$_DOT__DOT__SLASH__DOT__DOT__SLASH__DOT__DOT__SLASH_base_SLASH_common_SLASH_event_DOT_js.Emitter({deliveryQueue:this._deliveryQueue}));
      this.onDidChangeHiddenAreas = this._onDidChangeHiddenAreas.event;
      this._actions = new Map();
      this._bannerDomNode = null;
      this._dropIntoEditorDecorations = this.createDecorationsCollection();
      codeEditorService.willCreateCodeEditor();
      _options = {..._options};
      this._domElement = domElement;
      this._overflowWidgetsDomNode = _options.overflowWidgetsDomNode;
      delete _options.overflowWidgetsDomNode;
      this._id = ++EDITOR_ID;
      this._decorationTypeKeysToIds = {};
      this._decorationTypeSubtypes = {};
      this._telemetryData = codeEditorWidgetOptions.telemetryData;
      this._configuration = this._register(this._createConfiguration(codeEditorWidgetOptions.isSimpleWidget || !1, _options, accessibilityService));
      this._register(this._configuration.onDidChange(e => {
        this._onDidChangeConfiguration.fire(e);
        const options = this._configuration.options;
        e.hasChanged(143) && (e = options.get(143), this._onDidLayoutChange.fire(e));
      }));
      this._contextKeyService = this._register(contextKeyService.createScoped(this._domElement));
      this._notificationService = notificationService;
      this._codeEditorService = codeEditorService;
      this._commandService = commandService;
      this._themeService = themeService;
      this._register(new EditorContextKeysManager(this, this._contextKeyService));
      this._register(new EditorModeContext(this, this._contextKeyService, languageFeaturesService));
      this._instantiationService = instantiationService.createChild(new require$_DOT__DOT__SLASH__DOT__DOT__SLASH__DOT__DOT__SLASH_platform_SLASH_instantiation_SLASH_common_SLASH_serviceCollection_DOT_js.ServiceCollection([require$_DOT__DOT__SLASH__DOT__DOT__SLASH__DOT__DOT__SLASH_platform_SLASH_contextkey_SLASH_common_SLASH_contextkey_DOT_js.IContextKeyService, this._contextKeyService]));
      this._modelData = null;
      this._focusTracker = new CodeEditorWidgetFocusTracker(domElement);
      this._register(this._focusTracker.onChange(() => {
        this._editorWidgetFocus.setValue(this._focusTracker.hasFocus());
      }));
      this._contentWidgets = {};
      this._overlayWidgets = {};
      this._glyphMarginWidgets = {};
      domElement = Array.isArray(codeEditorWidgetOptions.contributions) ? codeEditorWidgetOptions.contributions : require$_DOT__DOT__SLASH_editorExtensions_DOT_js.EditorExtensionsRegistry.getEditorContributions();
      this._contributions.initialize(this, domElement, this._instantiationService);
      for (const action of require$_DOT__DOT__SLASH_editorExtensions_DOT_js.EditorExtensionsRegistry.getEditorActions()) {
        if (this._actions.has(action.id)) {
          (0,require$_DOT__DOT__SLASH__DOT__DOT__SLASH__DOT__DOT__SLASH_base_SLASH_common_SLASH_errors_DOT_js.onUnexpectedError)(Error(`Cannot have two actions with the same id ${action.id}`));
        } else {
          domElement = new require$_DOT__DOT__SLASH__DOT__DOT__SLASH_common_SLASH_editorAction_DOT_js.InternalEditorAction(action.id, action.label, action.alias, action.metadata, (_a = action.precondition) !== null && _a !== void 0 ? _a : void 0, () => this._instantiationService.invokeFunction(accessor => Promise.resolve(action.runEditorCommand(accessor, this, null))), this._contextKeyService), this._actions.set(domElement.id, domElement);
        }
      }
      const isDropIntoEnabled = () => !this._configuration.options.get(90) && this._configuration.options.get(36).enabled;
      this._register(new dom.DragAndDropObserver(this._domElement, {onDragOver:e => {
        isDropIntoEnabled() && (e = this.getTargetAtClientPoint(e.clientX, e.clientY), (e === null || e === void 0 ? 0 : e.position) && this.showDropIndicatorAt(e.position));
      }, onDrop:async e => {
        if (isDropIntoEnabled() && (this.removeDropIndicator(), e.dataTransfer)) {
          var target = this.getTargetAtClientPoint(e.clientX, e.clientY);
          (target === null || target === void 0 ? 0 : target.position) && this._onDropIntoEditor.fire({position:target.position, event:e});
        }
      }, onDragLeave:() => {
        this.removeDropIndicator();
      }, onDragEnd:() => {
        this.removeDropIndicator();
      }}));
      this._codeEditorService.addCodeEditor(this);
    }
    writeScreenReaderContent(reason) {
      var _a;
      (_a = this._modelData) === null || _a === void 0 || _a.view.writeScreenReaderContent(reason);
    }
    _createConfiguration(isSimpleWidget, options, accessibilityService) {
      return new require$_DOT__DOT__SLASH_config_SLASH_editorConfiguration_DOT_js.EditorConfiguration(isSimpleWidget, options, this._domElement, accessibilityService);
    }
    getId() {
      return this.getEditorType() + ":" + this._id;
    }
    getEditorType() {
      return editorCommon.EditorType.ICodeEditor;
    }
    dispose() {
      this._codeEditorService.removeCodeEditor(this);
      this._focusTracker.dispose();
      this._actions.clear();
      this._contentWidgets = {};
      this._overlayWidgets = {};
      this._removeDecorationTypes();
      this._postDetachModelCleanup(this._detachModel());
      this._onDidDispose.fire();
      super.dispose();
    }
    invokeWithinContext(fn) {
      return this._instantiationService.invokeFunction(fn);
    }
    updateOptions(newOptions) {
      this._configuration.updateOptions(newOptions || {});
    }
    getOptions() {
      return this._configuration.options;
    }
    getOption(id) {
      return this._configuration.options.get(id);
    }
    getRawOptions() {
      return this._configuration.getRawOptions();
    }
    getOverflowWidgetsDomNode() {
      return this._overflowWidgetsDomNode;
    }
    getConfiguredWordAtPosition(position) {
      return this._modelData ? require$_DOT__DOT__SLASH__DOT__DOT__SLASH_common_SLASH_cursor_SLASH_cursorWordOperations_DOT_js.WordOperations.getWordAtPosition(this._modelData.model, this._configuration.options.get(129), position) : null;
    }
    getValue(options = null) {
      if (!this._modelData) {
        return "";
      }
      const preserveBOM = options && options.preserveBOM ? !0 : !1;
      let eolPreference = 0;
      options && options.lineEnding && options.lineEnding === "\n" ? eolPreference = 1 : options && options.lineEnding && options.lineEnding === "\r\n" && (eolPreference = 2);
      return this._modelData.model.getValue(eolPreference, preserveBOM);
    }
    setValue(newValue) {
      this._modelData && this._modelData.model.setValue(newValue);
    }
    getModel() {
      return this._modelData ? this._modelData.model : null;
    }
    setModel(_model = null) {
      if (this._modelData !== null || _model !== null) {
        if (!this._modelData || this._modelData.model !== _model) {
          var hasTextFocus = this.hasTextFocus(), detachedModel = this._detachModel();
          this._attachModel(_model);
          hasTextFocus && this.hasModel() && this.focus();
          _model = {oldModelUrl:detachedModel ? detachedModel.uri : null, newModelUrl:_model ? _model.uri : null};
          this._removeDecorationTypes();
          this._onDidChangeModel.fire(_model);
          this._postDetachModelCleanup(detachedModel);
          this._contributions.onAfterModelAttached();
        }
      }
    }
    _removeDecorationTypes() {
      this._decorationTypeKeysToIds = {};
      if (this._decorationTypeSubtypes) {
        for (const decorationType in this._decorationTypeSubtypes) {
          const subTypes = this._decorationTypeSubtypes[decorationType];
          for (const subType in subTypes) {
            this._removeDecorationType(decorationType + "-" + subType);
          }
        }
        this._decorationTypeSubtypes = {};
      }
    }
    getVisibleRanges() {
      return this._modelData ? this._modelData.viewModel.getVisibleRanges() : [];
    }
    getVisibleRangesPlusViewportAboveBelow() {
      return this._modelData ? this._modelData.viewModel.getVisibleRangesPlusViewportAboveBelow() : [];
    }
    getWhitespaces() {
      return this._modelData ? this._modelData.viewModel.viewLayout.getWhitespaces() : [];
    }
    static _getVerticalOffsetAfterPosition(modelData, modelLineNumber, modelColumn, includeViewZones) {
      modelLineNumber = modelData.model.validatePosition({lineNumber:modelLineNumber, column:modelColumn});
      modelLineNumber = modelData.viewModel.coordinatesConverter.convertModelPositionToViewPosition(modelLineNumber);
      return modelData.viewModel.viewLayout.getVerticalOffsetAfterLineNumber(modelLineNumber.lineNumber, includeViewZones);
    }
    getTopForLineNumber(lineNumber, includeViewZones = !1) {
      return this._modelData ? CodeEditorWidget_1._getVerticalOffsetForPosition(this._modelData, lineNumber, 1, includeViewZones) : -1;
    }
    getTopForPosition(lineNumber, column) {
      return this._modelData ? CodeEditorWidget_1._getVerticalOffsetForPosition(this._modelData, lineNumber, column, !1) : -1;
    }
    static _getVerticalOffsetForPosition(modelData, modelLineNumber, modelColumn, includeViewZones = !1) {
      modelLineNumber = modelData.model.validatePosition({lineNumber:modelLineNumber, column:modelColumn});
      modelLineNumber = modelData.viewModel.coordinatesConverter.convertModelPositionToViewPosition(modelLineNumber);
      return modelData.viewModel.viewLayout.getVerticalOffsetForLineNumber(modelLineNumber.lineNumber, includeViewZones);
    }
    getBottomForLineNumber(lineNumber, includeViewZones = !1) {
      return this._modelData ? CodeEditorWidget_1._getVerticalOffsetAfterPosition(this._modelData, lineNumber, 1, includeViewZones) : -1;
    }
    setHiddenAreas(ranges, source) {
      var _a;
      (_a = this._modelData) === null || _a === void 0 || _a.viewModel.setHiddenAreas(ranges.map(r => require$_DOT__DOT__SLASH__DOT__DOT__SLASH_common_SLASH_core_SLASH_range_DOT_js.Range.lift(r)), source);
    }
    getVisibleColumnFromPosition(rawPosition) {
      if (!this._modelData) {
        return rawPosition.column;
      }
      rawPosition = this._modelData.model.validatePosition(rawPosition);
      const tabSize = this._modelData.model.getOptions().tabSize;
      return require$_DOT__DOT__SLASH__DOT__DOT__SLASH_common_SLASH_core_SLASH_cursorColumns_DOT_js.CursorColumns.visibleColumnFromColumn(this._modelData.model.getLineContent(rawPosition.lineNumber), rawPosition.column, tabSize) + 1;
    }
    getPosition() {
      return this._modelData ? this._modelData.viewModel.getPosition() : null;
    }
    setPosition(position, source = "api") {
      if (this._modelData) {
        if (!require$_DOT__DOT__SLASH__DOT__DOT__SLASH_common_SLASH_core_SLASH_position_DOT_js.Position.isIPosition(position)) {
          throw Error("Invalid arguments");
        }
        this._modelData.viewModel.setSelections(source, [{selectionStartLineNumber:position.lineNumber, selectionStartColumn:position.column, positionLineNumber:position.lineNumber, positionColumn:position.column}]);
      }
    }
    _sendRevealRange(modelRange, verticalType, revealHorizontal, scrollType) {
      if (this._modelData) {
        if (!require$_DOT__DOT__SLASH__DOT__DOT__SLASH_common_SLASH_core_SLASH_range_DOT_js.Range.isIRange(modelRange)) {
          throw Error("Invalid arguments");
        }
        modelRange = this._modelData.model.validateRange(modelRange);
        modelRange = this._modelData.viewModel.coordinatesConverter.convertModelRangeToViewRange(modelRange);
        this._modelData.viewModel.revealRange("api", revealHorizontal, modelRange, verticalType, scrollType);
      }
    }
    revealLine(lineNumber, scrollType = 0) {
      this._revealLine(lineNumber, 0, scrollType);
    }
    revealLineInCenter(lineNumber, scrollType = 0) {
      this._revealLine(lineNumber, 1, scrollType);
    }
    revealLineInCenterIfOutsideViewport(lineNumber, scrollType = 0) {
      this._revealLine(lineNumber, 2, scrollType);
    }
    revealLineNearTop(lineNumber, scrollType = 0) {
      this._revealLine(lineNumber, 5, scrollType);
    }
    _revealLine(lineNumber, revealType, scrollType) {
      if (typeof lineNumber !== "number") {
        throw Error("Invalid arguments");
      }
      this._sendRevealRange(new require$_DOT__DOT__SLASH__DOT__DOT__SLASH_common_SLASH_core_SLASH_range_DOT_js.Range(lineNumber, 1, lineNumber, 1), revealType, !1, scrollType);
    }
    revealPosition(position, scrollType = 0) {
      this._revealPosition(position, 0, !0, scrollType);
    }
    revealPositionInCenter(position, scrollType = 0) {
      this._revealPosition(position, 1, !0, scrollType);
    }
    revealPositionInCenterIfOutsideViewport(position, scrollType = 0) {
      this._revealPosition(position, 2, !0, scrollType);
    }
    revealPositionNearTop(position, scrollType = 0) {
      this._revealPosition(position, 5, !0, scrollType);
    }
    _revealPosition(position, verticalType, revealHorizontal, scrollType) {
      if (!require$_DOT__DOT__SLASH__DOT__DOT__SLASH_common_SLASH_core_SLASH_position_DOT_js.Position.isIPosition(position)) {
        throw Error("Invalid arguments");
      }
      this._sendRevealRange(new require$_DOT__DOT__SLASH__DOT__DOT__SLASH_common_SLASH_core_SLASH_range_DOT_js.Range(position.lineNumber, position.column, position.lineNumber, position.column), verticalType, revealHorizontal, scrollType);
    }
    getSelection() {
      return this._modelData ? this._modelData.viewModel.getSelection() : null;
    }
    getSelections() {
      return this._modelData ? this._modelData.viewModel.getSelections() : null;
    }
    setSelection(something, source = "api") {
      const isSelection = require$_DOT__DOT__SLASH__DOT__DOT__SLASH_common_SLASH_core_SLASH_selection_DOT_js.Selection.isISelection(something), isRange = require$_DOT__DOT__SLASH__DOT__DOT__SLASH_common_SLASH_core_SLASH_range_DOT_js.Range.isIRange(something);
      if (!isSelection && !isRange) {
        throw Error("Invalid arguments");
      }
      isSelection ? this._setSelectionImpl(something, source) : isRange && this._setSelectionImpl({selectionStartLineNumber:something.startLineNumber, selectionStartColumn:something.startColumn, positionLineNumber:something.endLineNumber, positionColumn:something.endColumn}, source);
    }
    _setSelectionImpl(sel, source) {
      this._modelData && (sel = new require$_DOT__DOT__SLASH__DOT__DOT__SLASH_common_SLASH_core_SLASH_selection_DOT_js.Selection(sel.selectionStartLineNumber, sel.selectionStartColumn, sel.positionLineNumber, sel.positionColumn), this._modelData.viewModel.setSelections(source, [sel]));
    }
    revealLines(startLineNumber, endLineNumber, scrollType = 0) {
      this._revealLines(startLineNumber, endLineNumber, 0, scrollType);
    }
    revealLinesInCenter(startLineNumber, endLineNumber, scrollType = 0) {
      this._revealLines(startLineNumber, endLineNumber, 1, scrollType);
    }
    revealLinesInCenterIfOutsideViewport(startLineNumber, endLineNumber, scrollType = 0) {
      this._revealLines(startLineNumber, endLineNumber, 2, scrollType);
    }
    revealLinesNearTop(startLineNumber, endLineNumber, scrollType = 0) {
      this._revealLines(startLineNumber, endLineNumber, 5, scrollType);
    }
    _revealLines(startLineNumber, endLineNumber, verticalType, scrollType) {
      if (typeof startLineNumber !== "number" || typeof endLineNumber !== "number") {
        throw Error("Invalid arguments");
      }
      this._sendRevealRange(new require$_DOT__DOT__SLASH__DOT__DOT__SLASH_common_SLASH_core_SLASH_range_DOT_js.Range(startLineNumber, 1, endLineNumber, 1), verticalType, !1, scrollType);
    }
    revealRange(range, scrollType = 0, revealVerticalInCenter = !1, revealHorizontal = !0) {
      this._revealRange(range, revealVerticalInCenter ? 1 : 0, revealHorizontal, scrollType);
    }
    revealRangeInCenter(range, scrollType = 0) {
      this._revealRange(range, 1, !0, scrollType);
    }
    revealRangeInCenterIfOutsideViewport(range, scrollType = 0) {
      this._revealRange(range, 2, !0, scrollType);
    }
    revealRangeNearTop(range, scrollType = 0) {
      this._revealRange(range, 5, !0, scrollType);
    }
    revealRangeNearTopIfOutsideViewport(range, scrollType = 0) {
      this._revealRange(range, 6, !0, scrollType);
    }
    revealRangeAtTop(range, scrollType = 0) {
      this._revealRange(range, 3, !0, scrollType);
    }
    _revealRange(range, verticalType, revealHorizontal, scrollType) {
      if (!require$_DOT__DOT__SLASH__DOT__DOT__SLASH_common_SLASH_core_SLASH_range_DOT_js.Range.isIRange(range)) {
        throw Error("Invalid arguments");
      }
      this._sendRevealRange(require$_DOT__DOT__SLASH__DOT__DOT__SLASH_common_SLASH_core_SLASH_range_DOT_js.Range.lift(range), verticalType, revealHorizontal, scrollType);
    }
    setSelections(ranges, source = "api", reason = 0) {
      if (this._modelData) {
        if (!ranges || ranges.length === 0) {
          throw Error("Invalid arguments");
        }
        for (let i = 0, len = ranges.length; i < len; i++) {
          if (!require$_DOT__DOT__SLASH__DOT__DOT__SLASH_common_SLASH_core_SLASH_selection_DOT_js.Selection.isISelection(ranges[i])) {
            throw Error("Invalid arguments");
          }
        }
        this._modelData.viewModel.setSelections(source, ranges, reason);
      }
    }
    getContentWidth() {
      return this._modelData ? this._modelData.viewModel.viewLayout.getContentWidth() : -1;
    }
    getScrollWidth() {
      return this._modelData ? this._modelData.viewModel.viewLayout.getScrollWidth() : -1;
    }
    getScrollLeft() {
      return this._modelData ? this._modelData.viewModel.viewLayout.getCurrentScrollLeft() : -1;
    }
    getContentHeight() {
      return this._modelData ? this._modelData.viewModel.viewLayout.getContentHeight() : -1;
    }
    getScrollHeight() {
      return this._modelData ? this._modelData.viewModel.viewLayout.getScrollHeight() : -1;
    }
    getScrollTop() {
      return this._modelData ? this._modelData.viewModel.viewLayout.getCurrentScrollTop() : -1;
    }
    setScrollLeft(newScrollLeft, scrollType = 1) {
      if (this._modelData) {
        if (typeof newScrollLeft !== "number") {
          throw Error("Invalid arguments");
        }
        this._modelData.viewModel.viewLayout.setScrollPosition({scrollLeft:newScrollLeft}, scrollType);
      }
    }
    setScrollTop(newScrollTop, scrollType = 1) {
      if (this._modelData) {
        if (typeof newScrollTop !== "number") {
          throw Error("Invalid arguments");
        }
        this._modelData.viewModel.viewLayout.setScrollPosition({scrollTop:newScrollTop}, scrollType);
      }
    }
    setScrollPosition(position, scrollType = 1) {
      this._modelData && this._modelData.viewModel.viewLayout.setScrollPosition(position, scrollType);
    }
    hasPendingScrollAnimation() {
      return this._modelData ? this._modelData.viewModel.viewLayout.hasPendingScrollAnimation() : !1;
    }
    saveViewState() {
      if (!this._modelData) {
        return null;
      }
      const contributionsState = this._contributions.saveViewState(), cursorState = this._modelData.viewModel.saveCursorState(), viewState = this._modelData.viewModel.saveState();
      return {cursorState, viewState, contributionsState};
    }
    restoreViewState(s) {
      if (this._modelData && this._modelData.hasRealView && s && s.cursorState && s.viewState) {
        const cursorState = s.cursorState;
        Array.isArray(cursorState) ? cursorState.length > 0 && this._modelData.viewModel.restoreCursorState(cursorState) : this._modelData.viewModel.restoreCursorState([cursorState]);
        this._contributions.restoreViewState(s.contributionsState || {});
        s = this._modelData.viewModel.reduceRestoreState(s.viewState);
        this._modelData.view.restoreState(s);
      }
    }
    handleInitialized() {
      var _a;
      (_a = this._getViewModel()) === null || _a === void 0 || _a.visibleLinesStabilized();
    }
    getContribution(id) {
      return this._contributions.get(id);
    }
    getActions() {
      return Array.from(this._actions.values());
    }
    getSupportedActions() {
      let result = this.getActions();
      return result = result.filter(action => action.isSupported());
    }
    getAction(id) {
      return this._actions.get(id) || null;
    }
    trigger(source, handlerId, payload) {
      payload = payload || {};
      switch(handlerId) {
        case "compositionStart":
          this._startComposition();
          return;
        case "compositionEnd":
          this._endComposition(source);
          return;
        case "type":
          this._type(source, payload.text || "");
          return;
        case "replacePreviousChar":
          handlerId = payload;
          this._compositionType(source, handlerId.text || "", handlerId.replaceCharCnt || 0, 0, 0);
          return;
        case "compositionType":
          handlerId = payload;
          this._compositionType(source, handlerId.text || "", handlerId.replacePrevCharCnt || 0, handlerId.replaceNextCharCnt || 0, handlerId.positionDelta || 0);
          return;
        case "paste":
          handlerId = payload;
          this._paste(source, handlerId.text || "", handlerId.pasteOnNewLine || !1, handlerId.multicursorText || null, handlerId.mode || null);
          return;
        case "cut":
          this._cut(source);
          return;
      }
      const action = this.getAction(handlerId);
      action ? Promise.resolve(action.run(payload)).then(void 0, require$_DOT__DOT__SLASH__DOT__DOT__SLASH__DOT__DOT__SLASH_base_SLASH_common_SLASH_errors_DOT_js.onUnexpectedError) : this._modelData && (this._triggerEditorCommand(source, handlerId, payload) || this._triggerCommand(handlerId, payload));
    }
    _triggerCommand(handlerId, payload) {
      this._commandService.executeCommand(handlerId, payload);
    }
    _startComposition() {
      this._modelData && (this._modelData.viewModel.startComposition(), this._onDidCompositionStart.fire());
    }
    _endComposition(source) {
      this._modelData && (this._modelData.viewModel.endComposition(source), this._onDidCompositionEnd.fire());
    }
    _type(source, text) {
      this._modelData && text.length !== 0 && (source === "keyboard" && this._onWillType.fire(text), this._modelData.viewModel.type(text, source), source === "keyboard" && this._onDidType.fire(text));
    }
    _compositionType(source, text, replacePrevCharCnt, replaceNextCharCnt, positionDelta) {
      this._modelData && this._modelData.viewModel.compositionType(text, replacePrevCharCnt, replaceNextCharCnt, positionDelta, source);
    }
    _paste(source, text, pasteOnNewLine, multicursorText, mode) {
      if (this._modelData && text.length !== 0) {
        var viewModel = this._modelData.viewModel, startPosition = viewModel.getSelection().getStartPosition();
        viewModel.paste(text, pasteOnNewLine, multicursorText, source);
        text = viewModel.getSelection().getStartPosition();
        source === "keyboard" && this._onDidPaste.fire({range:new require$_DOT__DOT__SLASH__DOT__DOT__SLASH_common_SLASH_core_SLASH_range_DOT_js.Range(startPosition.lineNumber, startPosition.column, text.lineNumber, text.column), languageId:mode});
      }
    }
    _cut(source) {
      this._modelData && this._modelData.viewModel.cut(source);
    }
    _triggerEditorCommand(source, handlerId, payload) {
      const command = require$_DOT__DOT__SLASH_editorExtensions_DOT_js.EditorExtensionsRegistry.getEditorCommand(handlerId);
      return command ? (payload = payload || {}, payload.source = source, this._instantiationService.invokeFunction(accessor => {
        Promise.resolve(command.runEditorCommand(accessor, this, payload)).then(void 0, require$_DOT__DOT__SLASH__DOT__DOT__SLASH__DOT__DOT__SLASH_base_SLASH_common_SLASH_errors_DOT_js.onUnexpectedError);
      }), !0) : !1;
    }
    _getViewModel() {
      return this._modelData ? this._modelData.viewModel : null;
    }
    pushUndoStop() {
      if (!this._modelData || this._configuration.options.get(90)) {
        return !1;
      }
      this._modelData.model.pushStackElement();
      return !0;
    }
    popUndoStop() {
      if (!this._modelData || this._configuration.options.get(90)) {
        return !1;
      }
      this._modelData.model.popStackElement();
      return !0;
    }
    executeEdits(source, edits, endCursorState) {
      if (!this._modelData || this._configuration.options.get(90)) {
        return !1;
      }
      let cursorStateComputer;
      cursorStateComputer = endCursorState ? Array.isArray(endCursorState) ? () => endCursorState : endCursorState : () => null;
      this._modelData.viewModel.executeEdits(source, edits, cursorStateComputer);
      return !0;
    }
    executeCommand(source, command) {
      this._modelData && this._modelData.viewModel.executeCommand(command, source);
    }
    executeCommands(source, commands) {
      this._modelData && this._modelData.viewModel.executeCommands(commands, source);
    }
    createDecorationsCollection(decorations) {
      return new EditorDecorationsCollection(this, decorations);
    }
    changeDecorations(callback) {
      return this._modelData ? this._modelData.model.changeDecorations(callback, this._id) : null;
    }
    getLineDecorations(lineNumber) {
      return this._modelData ? this._modelData.model.getLineDecorations(lineNumber, this._id, (0,require$_DOT__DOT__SLASH__DOT__DOT__SLASH_common_SLASH_config_SLASH_editorOptions_DOT_js.filterValidationDecorations)(this._configuration.options)) : null;
    }
    getDecorationsInRange(range) {
      return this._modelData ? this._modelData.model.getDecorationsInRange(range, this._id, (0,require$_DOT__DOT__SLASH__DOT__DOT__SLASH_common_SLASH_config_SLASH_editorOptions_DOT_js.filterValidationDecorations)(this._configuration.options)) : null;
    }
    deltaDecorations(oldDecorations, newDecorations) {
      return this._modelData ? oldDecorations.length === 0 && newDecorations.length === 0 ? oldDecorations : this._modelData.model.deltaDecorations(oldDecorations, newDecorations, this._id) : [];
    }
    removeDecorations(decorationIds) {
      this._modelData && decorationIds.length !== 0 && this._modelData.model.changeDecorations(changeAccessor => {
        changeAccessor.deltaDecorations(decorationIds, []);
      });
    }
    removeDecorationsByType(decorationTypeKey) {
      const oldDecorationsIds = this._decorationTypeKeysToIds[decorationTypeKey];
      oldDecorationsIds && this.deltaDecorations(oldDecorationsIds, []);
      this._decorationTypeKeysToIds.hasOwnProperty(decorationTypeKey) && delete this._decorationTypeKeysToIds[decorationTypeKey];
      this._decorationTypeSubtypes.hasOwnProperty(decorationTypeKey) && delete this._decorationTypeSubtypes[decorationTypeKey];
    }
    getLayoutInfo() {
      return this._configuration.options.get(143);
    }
    createOverviewRuler(cssClassName) {
      return this._modelData && this._modelData.hasRealView ? this._modelData.view.createOverviewRuler(cssClassName) : null;
    }
    getContainerDomNode() {
      return this._domElement;
    }
    getDomNode() {
      return this._modelData && this._modelData.hasRealView ? this._modelData.view.domNode.domNode : null;
    }
    delegateVerticalScrollbarPointerDown(browserEvent) {
      this._modelData && this._modelData.hasRealView && this._modelData.view.delegateVerticalScrollbarPointerDown(browserEvent);
    }
    delegateScrollFromMouseWheelEvent(browserEvent) {
      this._modelData && this._modelData.hasRealView && this._modelData.view.delegateScrollFromMouseWheelEvent(browserEvent);
    }
    layout(dimension, postponeRendering = !1) {
      this._configuration.observeContainer(dimension);
      postponeRendering || this.render();
    }
    focus() {
      this._modelData && this._modelData.hasRealView && this._modelData.view.focus();
    }
    hasTextFocus() {
      return this._modelData && this._modelData.hasRealView ? this._modelData.view.isFocused() : !1;
    }
    hasWidgetFocus() {
      return this._focusTracker && this._focusTracker.hasFocus();
    }
    addContentWidget(widget) {
      const widgetData = {widget, position:widget.getPosition()};
      this._contentWidgets.hasOwnProperty(widget.getId()) && console.warn("Overwriting a content widget with the same id:" + widget.getId());
      this._contentWidgets[widget.getId()] = widgetData;
      this._modelData && this._modelData.hasRealView && this._modelData.view.addContentWidget(widgetData);
    }
    layoutContentWidget(widget) {
      var widgetId = widget.getId();
      this._contentWidgets.hasOwnProperty(widgetId) && (widgetId = this._contentWidgets[widgetId], widgetId.position = widget.getPosition(), this._modelData && this._modelData.hasRealView && this._modelData.view.layoutContentWidget(widgetId));
    }
    removeContentWidget(widget) {
      widget = widget.getId();
      if (this._contentWidgets.hasOwnProperty(widget)) {
        const widgetData = this._contentWidgets[widget];
        delete this._contentWidgets[widget];
        this._modelData && this._modelData.hasRealView && this._modelData.view.removeContentWidget(widgetData);
      }
    }
    addOverlayWidget(widget) {
      const widgetData = {widget, position:widget.getPosition()};
      this._overlayWidgets.hasOwnProperty(widget.getId()) && console.warn("Overwriting an overlay widget with the same id.");
      this._overlayWidgets[widget.getId()] = widgetData;
      this._modelData && this._modelData.hasRealView && this._modelData.view.addOverlayWidget(widgetData);
    }
    layoutOverlayWidget(widget) {
      var widgetId = widget.getId();
      this._overlayWidgets.hasOwnProperty(widgetId) && (widgetId = this._overlayWidgets[widgetId], widgetId.position = widget.getPosition(), this._modelData && this._modelData.hasRealView && this._modelData.view.layoutOverlayWidget(widgetId));
    }
    removeOverlayWidget(widget) {
      widget = widget.getId();
      if (this._overlayWidgets.hasOwnProperty(widget)) {
        const widgetData = this._overlayWidgets[widget];
        delete this._overlayWidgets[widget];
        this._modelData && this._modelData.hasRealView && this._modelData.view.removeOverlayWidget(widgetData);
      }
    }
    addGlyphMarginWidget(widget) {
      const widgetData = {widget, position:widget.getPosition()};
      this._glyphMarginWidgets.hasOwnProperty(widget.getId()) && console.warn("Overwriting a glyph margin widget with the same id.");
      this._glyphMarginWidgets[widget.getId()] = widgetData;
      this._modelData && this._modelData.hasRealView && this._modelData.view.addGlyphMarginWidget(widgetData);
    }
    layoutGlyphMarginWidget(widget) {
      var widgetId = widget.getId();
      this._glyphMarginWidgets.hasOwnProperty(widgetId) && (widgetId = this._glyphMarginWidgets[widgetId], widgetId.position = widget.getPosition(), this._modelData && this._modelData.hasRealView && this._modelData.view.layoutGlyphMarginWidget(widgetId));
    }
    removeGlyphMarginWidget(widget) {
      widget = widget.getId();
      if (this._glyphMarginWidgets.hasOwnProperty(widget)) {
        const widgetData = this._glyphMarginWidgets[widget];
        delete this._glyphMarginWidgets[widget];
        this._modelData && this._modelData.hasRealView && this._modelData.view.removeGlyphMarginWidget(widgetData);
      }
    }
    changeViewZones(callback) {
      this._modelData && this._modelData.hasRealView && this._modelData.view.change(callback);
    }
    getTargetAtClientPoint(clientX, clientY) {
      return this._modelData && this._modelData.hasRealView ? this._modelData.view.getTargetAtClientPoint(clientX, clientY) : null;
    }
    getScrolledVisiblePosition(rawPosition) {
      if (!this._modelData || !this._modelData.hasRealView) {
        return null;
      }
      var position = this._modelData.model.validatePosition(rawPosition);
      rawPosition = this._configuration.options;
      const layoutInfo = rawPosition.get(143), top = CodeEditorWidget_1._getVerticalOffsetForPosition(this._modelData, position.lineNumber, position.column) - this.getScrollTop();
      position = this._modelData.view.getOffsetForColumn(position.lineNumber, position.column) + layoutInfo.glyphMarginWidth + layoutInfo.lineNumbersWidth + layoutInfo.decorationsWidth - this.getScrollLeft();
      return {top, left:position, height:rawPosition.get(66)};
    }
    getOffsetForColumn(lineNumber, column) {
      return this._modelData && this._modelData.hasRealView ? this._modelData.view.getOffsetForColumn(lineNumber, column) : -1;
    }
    render(forceRedraw = !1) {
      this._modelData && this._modelData.hasRealView && this._modelData.view.render(!0, forceRedraw);
    }
    setAriaOptions(options) {
      this._modelData && this._modelData.hasRealView && this._modelData.view.setAriaOptions(options);
    }
    applyFontInfo(target) {
      (0,require$_DOT__DOT__SLASH_config_SLASH_domFontInfo_DOT_js.applyFontInfo)(target, this._configuration.options.get(50));
    }
    setBanner(domNode, domNodeHeight) {
      this._bannerDomNode && this._domElement.contains(this._bannerDomNode) && this._domElement.removeChild(this._bannerDomNode);
      this._bannerDomNode = domNode;
      this._configuration.setReservedHeight(domNode ? domNodeHeight : 0);
      this._bannerDomNode && this._domElement.prepend(this._bannerDomNode);
    }
    _attachModel(model) {
      if (model) {
        var listenersToRemove = [];
        this._domElement.setAttribute("data-mode-id", model.getLanguageId());
        this._configuration.setIsDominatedByLongLines(model.isDominatedByLongLines());
        this._configuration.setModelLineCount(model.getLineCount());
        var attachedView = model.onBeforeAttached(), viewModel = new require$_DOT__DOT__SLASH__DOT__DOT__SLASH_common_SLASH_viewModel_SLASH_viewModelImpl_DOT_js.ViewModel(this._id, this._configuration, model, require$_DOT__DOT__SLASH_view_SLASH_domLineBreaksComputer_DOT_js.DOMLineBreaksComputerFactory.create(dom.getWindow(this._domElement)), require$_DOT__DOT__SLASH__DOT__DOT__SLASH_common_SLASH_viewModel_SLASH_monospaceLineBreaksComputer_DOT_js.MonospaceLineBreaksComputerFactory.create(this._configuration.options), 
        callback => dom.scheduleAtNextAnimationFrame(dom.getWindow(this._domElement), callback), this.languageConfigurationService, this._themeService, attachedView);
        listenersToRemove.push(model.onWillDispose(() => this.setModel(null)));
        listenersToRemove.push(viewModel.onEvent(e => {
          switch(e.kind) {
            case 0:
              this._onDidContentSizeChange.fire(e);
              break;
            case 1:
              this._editorTextFocus.setValue(e.hasFocus);
              break;
            case 2:
              this._onDidScrollChange.fire(e);
              break;
            case 3:
              this._onDidChangeViewZones.fire();
              break;
            case 4:
              this._onDidChangeHiddenAreas.fire();
              break;
            case 5:
              this._onDidAttemptReadOnlyEdit.fire();
              break;
            case 6:
              if (e.reachedMaxCursorCount) {
                var multiCursorLimit = this.getOption(79);
                multiCursorLimit = nls.localize("cursors.maximum", "The number of cursors has been limited to {0}. Consider using [find and replace](https://code.visualstudio.com/docs/editor/codebasics#_find-and-replace) for larger changes or increase the editor multi cursor limit setting.", multiCursorLimit);
                this._notificationService.prompt(require$_DOT__DOT__SLASH__DOT__DOT__SLASH__DOT__DOT__SLASH_platform_SLASH_notification_SLASH_common_SLASH_notification_DOT_js.Severity.Warning, multiCursorLimit, [{label:"Find and Replace", run:() => {
                  this._commandService.executeCommand("editor.action.startFindReplaceAction");
                }}, {label:nls.localize("goToSetting", "Increase Multi Cursor Limit"), run:() => {
                  this._commandService.executeCommand("workbench.action.openSettings2", {query:"editor.multiCursorLimit"});
                }}]);
              }
              multiCursorLimit = [];
              for (let i = 0, len = e.selections.length; i < len; i++) {
                multiCursorLimit[i] = e.selections[i].getPosition();
              }
              multiCursorLimit = {position:multiCursorLimit[0], secondaryPositions:multiCursorLimit.slice(1), reason:e.reason, source:e.source};
              this._onDidChangeCursorPosition.fire(multiCursorLimit);
              e = {selection:e.selections[0], secondarySelections:e.selections.slice(1), modelVersionId:e.modelVersionId, oldSelections:e.oldSelections, oldModelVersionId:e.oldModelVersionId, source:e.source, reason:e.reason};
              this._onDidChangeCursorSelection.fire(e);
              break;
            case 7:
              this._onDidChangeModelDecorations.fire(e.event);
              break;
            case 8:
              this._domElement.setAttribute("data-mode-id", model.getLanguageId());
              this._onDidChangeModelLanguage.fire(e.event);
              break;
            case 9:
              this._onDidChangeModelLanguageConfiguration.fire(e.event);
              break;
            case 10:
              this._onDidChangeModelContent.fire(e.event);
              break;
            case 11:
              this._onDidChangeModelOptions.fire(e.event);
              break;
            case 12:
              this._onDidChangeModelTokens.fire(e.event);
          }
        }));
        var [view, hasRealView] = this._createView(viewModel);
        if (hasRealView) {
          this._domElement.appendChild(view.domNode.domNode);
          let keys = Object.keys(this._contentWidgets);
          for (let i = 0, len = keys.length; i < len; i++) {
            view.addContentWidget(this._contentWidgets[keys[i]]);
          }
          keys = Object.keys(this._overlayWidgets);
          for (let i = 0, len = keys.length; i < len; i++) {
            view.addOverlayWidget(this._overlayWidgets[keys[i]]);
          }
          keys = Object.keys(this._glyphMarginWidgets);
          for (let i = 0, len = keys.length; i < len; i++) {
            view.addGlyphMarginWidget(this._glyphMarginWidgets[keys[i]]);
          }
          view.render(!1, !0);
          view.domNode.domNode.setAttribute("data-uri", model.uri.toString());
        }
        this._modelData = new ModelData(model, viewModel, view, hasRealView, listenersToRemove, attachedView);
      } else {
        this._modelData = null;
      }
    }
    _createView(viewModel) {
      let commandDelegate;
      commandDelegate = this.isSimpleWidget ? {paste:(text, pasteOnNewLine, multicursorText, mode) => {
        this._paste("keyboard", text, pasteOnNewLine, multicursorText, mode);
      }, type:text => {
        this._type("keyboard", text);
      }, compositionType:(text, replacePrevCharCnt, replaceNextCharCnt, positionDelta) => {
        this._compositionType("keyboard", text, replacePrevCharCnt, replaceNextCharCnt, positionDelta);
      }, startComposition:() => {
        this._startComposition();
      }, endComposition:() => {
        this._endComposition("keyboard");
      }, cut:() => {
        this._cut("keyboard");
      }} : {paste:(text, pasteOnNewLine, multicursorText, mode) => {
        this._commandService.executeCommand("paste", {text, pasteOnNewLine, multicursorText, mode});
      }, type:text => {
        this._commandService.executeCommand("type", {text});
      }, compositionType:(text, replacePrevCharCnt, replaceNextCharCnt, positionDelta) => {
        replaceNextCharCnt || positionDelta ? this._commandService.executeCommand("compositionType", {text, replacePrevCharCnt, replaceNextCharCnt, positionDelta}) : this._commandService.executeCommand("replacePreviousChar", {text, replaceCharCnt:replacePrevCharCnt});
      }, startComposition:() => {
        this._commandService.executeCommand("compositionStart", {});
      }, endComposition:() => {
        this._commandService.executeCommand("compositionEnd", {});
      }, cut:() => {
        this._commandService.executeCommand("cut", {});
      }};
      const viewUserInputEvents = new require$_DOT__DOT__SLASH_view_SLASH_viewUserInputEvents_DOT_js.ViewUserInputEvents(viewModel.coordinatesConverter);
      viewUserInputEvents.onKeyDown = e => this._onKeyDown.fire(e);
      viewUserInputEvents.onKeyUp = e => this._onKeyUp.fire(e);
      viewUserInputEvents.onContextMenu = e => this._onContextMenu.fire(e);
      viewUserInputEvents.onMouseMove = e => this._onMouseMove.fire(e);
      viewUserInputEvents.onMouseLeave = e => this._onMouseLeave.fire(e);
      viewUserInputEvents.onMouseDown = e => this._onMouseDown.fire(e);
      viewUserInputEvents.onMouseUp = e => this._onMouseUp.fire(e);
      viewUserInputEvents.onMouseDrag = e => this._onMouseDrag.fire(e);
      viewUserInputEvents.onMouseDrop = e => this._onMouseDrop.fire(e);
      viewUserInputEvents.onMouseDropCanceled = e => this._onMouseDropCanceled.fire(e);
      viewUserInputEvents.onMouseWheel = e => this._onMouseWheel.fire(e);
      return [new require$_DOT__DOT__SLASH_view_DOT_js.View(commandDelegate, this._configuration, this._themeService.getColorTheme(), viewModel, viewUserInputEvents, this._overflowWidgetsDomNode, this._instantiationService), !0];
    }
    _postDetachModelCleanup(detachedModel) {
      detachedModel === null || detachedModel === void 0 || detachedModel.removeAllDecorationsWithOwnerId(this._id);
    }
    _detachModel() {
      if (!this._modelData) {
        return null;
      }
      const model = this._modelData.model, removeDomNode = this._modelData.hasRealView ? this._modelData.view.domNode.domNode : null;
      this._modelData.dispose();
      this._modelData = null;
      this._domElement.removeAttribute("data-mode-id");
      removeDomNode && this._domElement.contains(removeDomNode) && this._domElement.removeChild(removeDomNode);
      this._bannerDomNode && this._domElement.contains(this._bannerDomNode) && this._domElement.removeChild(this._bannerDomNode);
      return model;
    }
    _removeDecorationType(key) {
      this._codeEditorService.removeDecorationType(key);
    }
    hasModel() {
      return this._modelData !== null;
    }
    showDropIndicatorAt(position) {
      const newDecorations = [{range:new require$_DOT__DOT__SLASH__DOT__DOT__SLASH_common_SLASH_core_SLASH_range_DOT_js.Range(position.lineNumber, position.column, position.lineNumber, position.column), options:CodeEditorWidget_1.dropIntoEditorDecorationOptions}];
      this._dropIntoEditorDecorations.set(newDecorations);
      this.revealPosition(position, 1);
    }
    removeDropIndicator() {
      this._dropIntoEditorDecorations.clear();
    }
    setContextValue(key, value) {
      this._contextKeyService.createKey(key, value);
    }
  };
  CodeEditorWidget.dropIntoEditorDecorationOptions = exports.ModelDecorationOptions.register({description:"workbench-dnd-target", className:"dnd-target"});
  CodeEditorWidget = CodeEditorWidget_1 = require([__param(3, require$_DOT__DOT__SLASH__DOT__DOT__SLASH__DOT__DOT__SLASH_platform_SLASH_instantiation_SLASH_common_SLASH_instantiation_DOT_js.IInstantiationService), __param(4, module.ICodeEditorService), __param(5, require$_DOT__DOT__SLASH__DOT__DOT__SLASH__DOT__DOT__SLASH_platform_SLASH_commands_SLASH_common_SLASH_commands_DOT_js.ICommandService), __param(6, require$_DOT__DOT__SLASH__DOT__DOT__SLASH__DOT__DOT__SLASH_platform_SLASH_contextkey_SLASH_common_SLASH_contextkey_DOT_js.IContextKeyService), 
  __param(7, require$_DOT__DOT__SLASH__DOT__DOT__SLASH__DOT__DOT__SLASH_platform_SLASH_theme_SLASH_common_SLASH_themeService_DOT_js.IThemeService), __param(8, require$_DOT__DOT__SLASH__DOT__DOT__SLASH__DOT__DOT__SLASH_platform_SLASH_notification_SLASH_common_SLASH_notification_DOT_js.INotificationService), __param(9, require$_DOT__DOT__SLASH__DOT__DOT__SLASH__DOT__DOT__SLASH_platform_SLASH_accessibility_SLASH_common_SLASH_accessibility_DOT_js.IAccessibilityService), __param(10, require$_DOT__DOT__SLASH__DOT__DOT__SLASH_common_SLASH_languages_SLASH_languageConfigurationRegistry_DOT_js.ILanguageConfigurationService), 
  __param(11, require$_DOT__DOT__SLASH__DOT__DOT__SLASH_common_SLASH_services_SLASH_languageFeatures_DOT_js.ILanguageFeaturesService)], CodeEditorWidget);
  class BooleanEventEmitter extends require$_DOT__DOT__SLASH__DOT__DOT__SLASH__DOT__DOT__SLASH_base_SLASH_common_SLASH_lifecycle_DOT_js.Disposable {
    constructor(_emitterOptions) {
      super();
      this._emitterOptions = _emitterOptions;
      this._onDidChangeToTrue = this._register(new require$_DOT__DOT__SLASH__DOT__DOT__SLASH__DOT__DOT__SLASH_base_SLASH_common_SLASH_event_DOT_js.Emitter(this._emitterOptions));
      this.onDidChangeToTrue = this._onDidChangeToTrue.event;
      this._onDidChangeToFalse = this._register(new require$_DOT__DOT__SLASH__DOT__DOT__SLASH__DOT__DOT__SLASH_base_SLASH_common_SLASH_event_DOT_js.Emitter(this._emitterOptions));
      this.onDidChangeToFalse = this._onDidChangeToFalse.event;
      this._value = 0;
    }
    setValue(_value) {
      _value = _value ? 2 : 1;
      this._value !== _value && (this._value = _value, this._value === 2 ? this._onDidChangeToTrue.fire() : this._value === 1 && this._onDidChangeToFalse.fire());
    }
  }
  class InteractionEmitter extends require$_DOT__DOT__SLASH__DOT__DOT__SLASH__DOT__DOT__SLASH_base_SLASH_common_SLASH_event_DOT_js.Emitter {
    constructor(_contributions, deliveryQueue) {
      super({deliveryQueue});
      this._contributions = _contributions;
    }
    fire(event) {
      this._contributions.onBeforeInteractionEvent();
      super.fire(event);
    }
  }
  class EditorContextKeysManager extends require$_DOT__DOT__SLASH__DOT__DOT__SLASH__DOT__DOT__SLASH_base_SLASH_common_SLASH_lifecycle_DOT_js.Disposable {
    constructor(editor, contextKeyService) {
      super();
      this._editor = editor;
      contextKeyService.createKey("editorId", editor.getId());
      this._editorSimpleInput = require$_DOT__DOT__SLASH__DOT__DOT__SLASH_common_SLASH_editorContextKeys_DOT_js.EditorContextKeys.editorSimpleInput.bindTo(contextKeyService);
      this._editorFocus = require$_DOT__DOT__SLASH__DOT__DOT__SLASH_common_SLASH_editorContextKeys_DOT_js.EditorContextKeys.focus.bindTo(contextKeyService);
      this._textInputFocus = require$_DOT__DOT__SLASH__DOT__DOT__SLASH_common_SLASH_editorContextKeys_DOT_js.EditorContextKeys.textInputFocus.bindTo(contextKeyService);
      this._editorTextFocus = require$_DOT__DOT__SLASH__DOT__DOT__SLASH_common_SLASH_editorContextKeys_DOT_js.EditorContextKeys.editorTextFocus.bindTo(contextKeyService);
      this._tabMovesFocus = require$_DOT__DOT__SLASH__DOT__DOT__SLASH_common_SLASH_editorContextKeys_DOT_js.EditorContextKeys.tabMovesFocus.bindTo(contextKeyService);
      this._editorReadonly = require$_DOT__DOT__SLASH__DOT__DOT__SLASH_common_SLASH_editorContextKeys_DOT_js.EditorContextKeys.readOnly.bindTo(contextKeyService);
      this._inDiffEditor = require$_DOT__DOT__SLASH__DOT__DOT__SLASH_common_SLASH_editorContextKeys_DOT_js.EditorContextKeys.inDiffEditor.bindTo(contextKeyService);
      this._editorColumnSelection = require$_DOT__DOT__SLASH__DOT__DOT__SLASH_common_SLASH_editorContextKeys_DOT_js.EditorContextKeys.columnSelection.bindTo(contextKeyService);
      this._hasMultipleSelections = require$_DOT__DOT__SLASH__DOT__DOT__SLASH_common_SLASH_editorContextKeys_DOT_js.EditorContextKeys.hasMultipleSelections.bindTo(contextKeyService);
      this._hasNonEmptySelection = require$_DOT__DOT__SLASH__DOT__DOT__SLASH_common_SLASH_editorContextKeys_DOT_js.EditorContextKeys.hasNonEmptySelection.bindTo(contextKeyService);
      this._canUndo = require$_DOT__DOT__SLASH__DOT__DOT__SLASH_common_SLASH_editorContextKeys_DOT_js.EditorContextKeys.canUndo.bindTo(contextKeyService);
      this._canRedo = require$_DOT__DOT__SLASH__DOT__DOT__SLASH_common_SLASH_editorContextKeys_DOT_js.EditorContextKeys.canRedo.bindTo(contextKeyService);
      this._register(this._editor.onDidChangeConfiguration(() => this._updateFromConfig()));
      this._register(this._editor.onDidChangeCursorSelection(() => this._updateFromSelection()));
      this._register(this._editor.onDidFocusEditorWidget(() => this._updateFromFocus()));
      this._register(this._editor.onDidBlurEditorWidget(() => this._updateFromFocus()));
      this._register(this._editor.onDidFocusEditorText(() => this._updateFromFocus()));
      this._register(this._editor.onDidBlurEditorText(() => this._updateFromFocus()));
      this._register(this._editor.onDidChangeModel(() => this._updateFromModel()));
      this._register(this._editor.onDidChangeConfiguration(() => this._updateFromModel()));
      this._register(require$_DOT__DOT__SLASH_config_SLASH_tabFocus_DOT_js.TabFocus.onDidChangeTabFocus(tabFocusMode => this._tabMovesFocus.set(tabFocusMode)));
      this._updateFromConfig();
      this._updateFromSelection();
      this._updateFromFocus();
      this._updateFromModel();
      this._editorSimpleInput.set(this._editor.isSimpleWidget);
    }
    _updateFromConfig() {
      const options = this._editor.getOptions();
      this._tabMovesFocus.set(require$_DOT__DOT__SLASH_config_SLASH_tabFocus_DOT_js.TabFocus.getTabFocusMode());
      this._editorReadonly.set(options.get(90));
      this._inDiffEditor.set(options.get(61));
      this._editorColumnSelection.set(options.get(22));
    }
    _updateFromSelection() {
      const selections = this._editor.getSelections();
      selections ? (this._hasMultipleSelections.set(selections.length > 1), this._hasNonEmptySelection.set(selections.some(s => !s.isEmpty()))) : (this._hasMultipleSelections.reset(), this._hasNonEmptySelection.reset());
    }
    _updateFromFocus() {
      this._editorFocus.set(this._editor.hasWidgetFocus() && !this._editor.isSimpleWidget);
      this._editorTextFocus.set(this._editor.hasTextFocus() && !this._editor.isSimpleWidget);
      this._textInputFocus.set(this._editor.hasTextFocus());
    }
    _updateFromModel() {
      const model = this._editor.getModel();
      this._canUndo.set(!(!model || !model.canUndo()));
      this._canRedo.set(!(!model || !model.canRedo()));
    }
  }
  class EditorModeContext extends require$_DOT__DOT__SLASH__DOT__DOT__SLASH__DOT__DOT__SLASH_base_SLASH_common_SLASH_lifecycle_DOT_js.Disposable {
    constructor(_editor, _contextKeyService, _languageFeaturesService) {
      super();
      this._editor = _editor;
      this._contextKeyService = _contextKeyService;
      this._languageFeaturesService = _languageFeaturesService;
      this._langId = require$_DOT__DOT__SLASH__DOT__DOT__SLASH_common_SLASH_editorContextKeys_DOT_js.EditorContextKeys.languageId.bindTo(_contextKeyService);
      this._hasCompletionItemProvider = require$_DOT__DOT__SLASH__DOT__DOT__SLASH_common_SLASH_editorContextKeys_DOT_js.EditorContextKeys.hasCompletionItemProvider.bindTo(_contextKeyService);
      this._hasCodeActionsProvider = require$_DOT__DOT__SLASH__DOT__DOT__SLASH_common_SLASH_editorContextKeys_DOT_js.EditorContextKeys.hasCodeActionsProvider.bindTo(_contextKeyService);
      this._hasCodeLensProvider = require$_DOT__DOT__SLASH__DOT__DOT__SLASH_common_SLASH_editorContextKeys_DOT_js.EditorContextKeys.hasCodeLensProvider.bindTo(_contextKeyService);
      this._hasDefinitionProvider = require$_DOT__DOT__SLASH__DOT__DOT__SLASH_common_SLASH_editorContextKeys_DOT_js.EditorContextKeys.hasDefinitionProvider.bindTo(_contextKeyService);
      this._hasDeclarationProvider = require$_DOT__DOT__SLASH__DOT__DOT__SLASH_common_SLASH_editorContextKeys_DOT_js.EditorContextKeys.hasDeclarationProvider.bindTo(_contextKeyService);
      this._hasImplementationProvider = require$_DOT__DOT__SLASH__DOT__DOT__SLASH_common_SLASH_editorContextKeys_DOT_js.EditorContextKeys.hasImplementationProvider.bindTo(_contextKeyService);
      this._hasTypeDefinitionProvider = require$_DOT__DOT__SLASH__DOT__DOT__SLASH_common_SLASH_editorContextKeys_DOT_js.EditorContextKeys.hasTypeDefinitionProvider.bindTo(_contextKeyService);
      this._hasHoverProvider = require$_DOT__DOT__SLASH__DOT__DOT__SLASH_common_SLASH_editorContextKeys_DOT_js.EditorContextKeys.hasHoverProvider.bindTo(_contextKeyService);
      this._hasDocumentHighlightProvider = require$_DOT__DOT__SLASH__DOT__DOT__SLASH_common_SLASH_editorContextKeys_DOT_js.EditorContextKeys.hasDocumentHighlightProvider.bindTo(_contextKeyService);
      this._hasDocumentSymbolProvider = require$_DOT__DOT__SLASH__DOT__DOT__SLASH_common_SLASH_editorContextKeys_DOT_js.EditorContextKeys.hasDocumentSymbolProvider.bindTo(_contextKeyService);
      this._hasReferenceProvider = require$_DOT__DOT__SLASH__DOT__DOT__SLASH_common_SLASH_editorContextKeys_DOT_js.EditorContextKeys.hasReferenceProvider.bindTo(_contextKeyService);
      this._hasRenameProvider = require$_DOT__DOT__SLASH__DOT__DOT__SLASH_common_SLASH_editorContextKeys_DOT_js.EditorContextKeys.hasRenameProvider.bindTo(_contextKeyService);
      this._hasSignatureHelpProvider = require$_DOT__DOT__SLASH__DOT__DOT__SLASH_common_SLASH_editorContextKeys_DOT_js.EditorContextKeys.hasSignatureHelpProvider.bindTo(_contextKeyService);
      this._hasInlayHintsProvider = require$_DOT__DOT__SLASH__DOT__DOT__SLASH_common_SLASH_editorContextKeys_DOT_js.EditorContextKeys.hasInlayHintsProvider.bindTo(_contextKeyService);
      this._hasDocumentFormattingProvider = require$_DOT__DOT__SLASH__DOT__DOT__SLASH_common_SLASH_editorContextKeys_DOT_js.EditorContextKeys.hasDocumentFormattingProvider.bindTo(_contextKeyService);
      this._hasDocumentSelectionFormattingProvider = require$_DOT__DOT__SLASH__DOT__DOT__SLASH_common_SLASH_editorContextKeys_DOT_js.EditorContextKeys.hasDocumentSelectionFormattingProvider.bindTo(_contextKeyService);
      this._hasMultipleDocumentFormattingProvider = require$_DOT__DOT__SLASH__DOT__DOT__SLASH_common_SLASH_editorContextKeys_DOT_js.EditorContextKeys.hasMultipleDocumentFormattingProvider.bindTo(_contextKeyService);
      this._hasMultipleDocumentSelectionFormattingProvider = require$_DOT__DOT__SLASH__DOT__DOT__SLASH_common_SLASH_editorContextKeys_DOT_js.EditorContextKeys.hasMultipleDocumentSelectionFormattingProvider.bindTo(_contextKeyService);
      this._isInWalkThrough = require$_DOT__DOT__SLASH__DOT__DOT__SLASH_common_SLASH_editorContextKeys_DOT_js.EditorContextKeys.isInWalkThroughSnippet.bindTo(_contextKeyService);
      _contextKeyService = () => this._update();
      this._register(_editor.onDidChangeModel(_contextKeyService));
      this._register(_editor.onDidChangeModelLanguage(_contextKeyService));
      this._register(_languageFeaturesService.completionProvider.onDidChange(_contextKeyService));
      this._register(_languageFeaturesService.codeActionProvider.onDidChange(_contextKeyService));
      this._register(_languageFeaturesService.codeLensProvider.onDidChange(_contextKeyService));
      this._register(_languageFeaturesService.definitionProvider.onDidChange(_contextKeyService));
      this._register(_languageFeaturesService.declarationProvider.onDidChange(_contextKeyService));
      this._register(_languageFeaturesService.implementationProvider.onDidChange(_contextKeyService));
      this._register(_languageFeaturesService.typeDefinitionProvider.onDidChange(_contextKeyService));
      this._register(_languageFeaturesService.hoverProvider.onDidChange(_contextKeyService));
      this._register(_languageFeaturesService.documentHighlightProvider.onDidChange(_contextKeyService));
      this._register(_languageFeaturesService.documentSymbolProvider.onDidChange(_contextKeyService));
      this._register(_languageFeaturesService.referenceProvider.onDidChange(_contextKeyService));
      this._register(_languageFeaturesService.renameProvider.onDidChange(_contextKeyService));
      this._register(_languageFeaturesService.documentFormattingEditProvider.onDidChange(_contextKeyService));
      this._register(_languageFeaturesService.documentRangeFormattingEditProvider.onDidChange(_contextKeyService));
      this._register(_languageFeaturesService.signatureHelpProvider.onDidChange(_contextKeyService));
      this._register(_languageFeaturesService.inlayHintsProvider.onDidChange(_contextKeyService));
      _contextKeyService();
    }
    dispose() {
      super.dispose();
    }
    reset() {
      this._contextKeyService.bufferChangeEvents(() => {
        this._langId.reset();
        this._hasCompletionItemProvider.reset();
        this._hasCodeActionsProvider.reset();
        this._hasCodeLensProvider.reset();
        this._hasDefinitionProvider.reset();
        this._hasDeclarationProvider.reset();
        this._hasImplementationProvider.reset();
        this._hasTypeDefinitionProvider.reset();
        this._hasHoverProvider.reset();
        this._hasDocumentHighlightProvider.reset();
        this._hasDocumentSymbolProvider.reset();
        this._hasReferenceProvider.reset();
        this._hasRenameProvider.reset();
        this._hasDocumentFormattingProvider.reset();
        this._hasDocumentSelectionFormattingProvider.reset();
        this._hasSignatureHelpProvider.reset();
        this._isInWalkThrough.reset();
      });
    }
    _update() {
      const model = this._editor.getModel();
      model ? this._contextKeyService.bufferChangeEvents(() => {
        this._langId.set(model.getLanguageId());
        this._hasCompletionItemProvider.set(this._languageFeaturesService.completionProvider.has(model));
        this._hasCodeActionsProvider.set(this._languageFeaturesService.codeActionProvider.has(model));
        this._hasCodeLensProvider.set(this._languageFeaturesService.codeLensProvider.has(model));
        this._hasDefinitionProvider.set(this._languageFeaturesService.definitionProvider.has(model));
        this._hasDeclarationProvider.set(this._languageFeaturesService.declarationProvider.has(model));
        this._hasImplementationProvider.set(this._languageFeaturesService.implementationProvider.has(model));
        this._hasTypeDefinitionProvider.set(this._languageFeaturesService.typeDefinitionProvider.has(model));
        this._hasHoverProvider.set(this._languageFeaturesService.hoverProvider.has(model));
        this._hasDocumentHighlightProvider.set(this._languageFeaturesService.documentHighlightProvider.has(model));
        this._hasDocumentSymbolProvider.set(this._languageFeaturesService.documentSymbolProvider.has(model));
        this._hasReferenceProvider.set(this._languageFeaturesService.referenceProvider.has(model));
        this._hasRenameProvider.set(this._languageFeaturesService.renameProvider.has(model));
        this._hasSignatureHelpProvider.set(this._languageFeaturesService.signatureHelpProvider.has(model));
        this._hasInlayHintsProvider.set(this._languageFeaturesService.inlayHintsProvider.has(model));
        this._hasDocumentFormattingProvider.set(this._languageFeaturesService.documentFormattingEditProvider.has(model) || this._languageFeaturesService.documentRangeFormattingEditProvider.has(model));
        this._hasDocumentSelectionFormattingProvider.set(this._languageFeaturesService.documentRangeFormattingEditProvider.has(model));
        this._hasMultipleDocumentFormattingProvider.set(this._languageFeaturesService.documentFormattingEditProvider.all(model).length + this._languageFeaturesService.documentRangeFormattingEditProvider.all(model).length > 1);
        this._hasMultipleDocumentSelectionFormattingProvider.set(this._languageFeaturesService.documentRangeFormattingEditProvider.all(model).length > 1);
        this._isInWalkThrough.set(model.uri.scheme === require$_DOT__DOT__SLASH__DOT__DOT__SLASH__DOT__DOT__SLASH_base_SLASH_common_SLASH_network_DOT_js.Schemas.walkThroughSnippet);
      }) : this.reset();
    }
  }
  class CodeEditorWidgetFocusTracker extends require$_DOT__DOT__SLASH__DOT__DOT__SLASH__DOT__DOT__SLASH_base_SLASH_common_SLASH_lifecycle_DOT_js.Disposable {
    constructor(domElement) {
      super();
      this._onChange = this._register(new require$_DOT__DOT__SLASH__DOT__DOT__SLASH__DOT__DOT__SLASH_base_SLASH_common_SLASH_event_DOT_js.Emitter());
      this.onChange = this._onChange.event;
      this._hasFocus = !1;
      this._domFocusTracker = this._register(dom.trackFocus(domElement));
      this._register(this._domFocusTracker.onDidFocus(() => {
        this._hasFocus = !0;
        this._onChange.fire(void 0);
      }));
      this._register(this._domFocusTracker.onDidBlur(() => {
        this._hasFocus = !1;
        this._onChange.fire(void 0);
      }));
    }
    hasFocus() {
      return this._hasFocus;
    }
  }
  class EditorDecorationsCollection {
    get length() {
      return this._decorationIds.length;
    }
    constructor(_editor, decorations) {
      this._editor = _editor;
      this._decorationIds = [];
      this._isChangingDecorations = !1;
      Array.isArray(decorations) && decorations.length > 0 && this.set(decorations);
    }
    onDidChange(listener, thisArgs, disposables) {
      return this._editor.onDidChangeModelDecorations(e => {
        this._isChangingDecorations || listener.call(thisArgs, e);
      }, disposables);
    }
    getRange(index) {
      return !this._editor.hasModel() || index >= this._decorationIds.length ? null : this._editor.getModel().getDecorationRange(this._decorationIds[index]);
    }
    getRanges() {
      if (!this._editor.hasModel()) {
        return [];
      }
      const model = this._editor.getModel(), result = [];
      for (const decorationId of this._decorationIds) {
        const range = model.getDecorationRange(decorationId);
        range && result.push(range);
      }
      return result;
    }
    has(decoration) {
      return this._decorationIds.includes(decoration.id);
    }
    clear() {
      this._decorationIds.length !== 0 && this.set([]);
    }
    set(newDecorations) {
      try {
        this._isChangingDecorations = !0, this._editor.changeDecorations(accessor => {
          this._decorationIds = accessor.deltaDecorations(this._decorationIds, newDecorations);
        });
      } finally {
        this._isChangingDecorations = !1;
      }
      return this._decorationIds;
    }
    append(newDecorations) {
      let newDecorationIds = [];
      try {
        this._isChangingDecorations = !0, this._editor.changeDecorations(accessor => {
          newDecorationIds = accessor.deltaDecorations([], newDecorations);
          this._decorationIds = this._decorationIds.concat(newDecorationIds);
        });
      } finally {
        this._isChangingDecorations = !1;
      }
      return newDecorationIds;
    }
  }
  const squigglyStart = encodeURIComponent("\x3csvg xmlns\x3d'http://www.w3.org/2000/svg' viewBox\x3d'0 0 6 3' enable-background\x3d'new 0 0 6 3' height\x3d'3' width\x3d'6'\x3e\x3cg fill\x3d'"), squigglyEnd = encodeURIComponent("'\x3e\x3cpolygon points\x3d'5.5,0 2.5,3 1.1,3 4.1,0'/\x3e\x3cpolygon points\x3d'4,0 6,2 6,0.6 5.4,0'/\x3e\x3cpolygon points\x3d'0,2 1,3 2.4,3 0,0.6'/\x3e\x3c/g\x3e\x3c/svg\x3e"), dotdotdotStart = encodeURIComponent('\x3csvg xmlns\x3d"http://www.w3.org/2000/svg" height\x3d"3" width\x3d"12"\x3e\x3cg fill\x3d"'), 
  dotdotdotEnd = encodeURIComponent('"\x3e\x3ccircle cx\x3d"1" cy\x3d"1" r\x3d"1"/\x3e\x3ccircle cx\x3d"5" cy\x3d"1" r\x3d"1"/\x3e\x3ccircle cx\x3d"9" cy\x3d"1" r\x3d"1"/\x3e\x3c/g\x3e\x3c/svg\x3e');
  (0,require$_DOT__DOT__SLASH__DOT__DOT__SLASH__DOT__DOT__SLASH_platform_SLASH_theme_SLASH_common_SLASH_themeService_DOT_js.registerThemingParticipant)((theme, collector) => {
    var errorForeground = theme.getColor(require$_DOT__DOT__SLASH__DOT__DOT__SLASH__DOT__DOT__SLASH_platform_SLASH_theme_SLASH_common_SLASH_colorRegistry_DOT_js.editorErrorForeground);
    errorForeground && collector.addRule(`.monaco-editor .${"squiggly-error"} { background: url("data:image/svg+xml,${squigglyStart + encodeURIComponent(errorForeground.toString()) + squigglyEnd}") repeat-x bottom left; }`);
    (errorForeground = theme.getColor(require$_DOT__DOT__SLASH__DOT__DOT__SLASH__DOT__DOT__SLASH_platform_SLASH_theme_SLASH_common_SLASH_colorRegistry_DOT_js.editorWarningForeground)) && collector.addRule(`.monaco-editor .${"squiggly-warning"} { background: url("data:image/svg+xml,${squigglyStart + encodeURIComponent(errorForeground.toString()) + squigglyEnd}") repeat-x bottom left; }`);
    (errorForeground = theme.getColor(require$_DOT__DOT__SLASH__DOT__DOT__SLASH__DOT__DOT__SLASH_platform_SLASH_theme_SLASH_common_SLASH_colorRegistry_DOT_js.editorInfoForeground)) && collector.addRule(`.monaco-editor .${"squiggly-info"} { background: url("data:image/svg+xml,${squigglyStart + encodeURIComponent(errorForeground.toString()) + squigglyEnd}") repeat-x bottom left; }`);
    (errorForeground = theme.getColor(require$_DOT__DOT__SLASH__DOT__DOT__SLASH__DOT__DOT__SLASH_platform_SLASH_theme_SLASH_common_SLASH_colorRegistry_DOT_js.editorHintForeground)) && collector.addRule(`.monaco-editor .${"squiggly-hint"} { background: url("data:image/svg+xml,${dotdotdotStart + encodeURIComponent(errorForeground.toString()) + dotdotdotEnd}") no-repeat bottom left; }`);
    (theme = theme.getColor(require$_DOT__DOT__SLASH__DOT__DOT__SLASH_common_SLASH_core_SLASH_editorColorRegistry_DOT_js.editorUnnecessaryCodeOpacity)) && collector.addRule(`.monaco-editor.showUnused .${"squiggly-inline-unnecessary"} { opacity: ${theme.rgba.a}; }`);
  });
};

//# sourceMappingURL=module$node_modules$monaco_editor$esm$vs$editor$browser$widget$codeEditorWidget.js.map
