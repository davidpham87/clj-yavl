{
"version":3,
"file":"module$node_modules$vega_parser$build$vega_parser.js",
"lineCount":1369,
"mappings":"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",
"sources":["node_modules/vega-parser/build/vega-parser.js"],
"sourcesContent":["shadow$provide[\"module$node_modules$vega_parser$build$vega_parser\"] = function(require,module,exports) {\n(function (global, factory) {\n  typeof exports === 'object' && typeof module !== 'undefined' ? factory(exports, require('vega-util'), require('vega-functions'), require('vega-event-selector'), require('vega-scale'), require('vega-dataflow')) :\n  typeof define === 'function' && define.amd ? define(['exports', 'vega-util', 'vega-functions', 'vega-event-selector', 'vega-scale', 'vega-dataflow'], factory) :\n  (global = typeof globalThis !== 'undefined' ? globalThis : global || self, factory(global.vega = {}, global.vega, global.vega, global.vega, global.vega, global.vega));\n})(this, (function (exports, vegaUtil, vegaFunctions, vegaEventSelector, vegaScale, vegaDataflow) { 'use strict';\n\n  function parseAutosize (spec) {\n    return vegaUtil.isObject(spec) ? spec : {\n      type: spec || 'pad'\n    };\n  }\n\n  const number = _ => +_ || 0;\n  const paddingObject = _ => ({\n    top: _,\n    bottom: _,\n    left: _,\n    right: _\n  });\n  function parsePadding (spec) {\n    return !vegaUtil.isObject(spec) ? paddingObject(number(spec)) : spec.signal ? spec : {\n      top: number(spec.top),\n      bottom: number(spec.bottom),\n      left: number(spec.left),\n      right: number(spec.right)\n    };\n  }\n\n  const encoder = _ => vegaUtil.isObject(_) && !vegaUtil.isArray(_) ? vegaUtil.extend({}, _) : {\n    value: _\n  };\n  function addEncode(object, name, value, set) {\n    if (value != null) {\n      const isEncoder = vegaUtil.isObject(value) && !vegaUtil.isArray(value) || vegaUtil.isArray(value) && value.length && vegaUtil.isObject(value[0]);\n\n      // Always assign signal to update, even if the signal is from the enter block\n      if (isEncoder) {\n        object.update[name] = value;\n      } else {\n        object[set || 'enter'][name] = {\n          value: value\n        };\n      }\n      return 1;\n    } else {\n      return 0;\n    }\n  }\n  function addEncoders(object, enter, update) {\n    for (const name in enter) {\n      addEncode(object, name, enter[name]);\n    }\n    for (const name in update) {\n      addEncode(object, name, update[name], 'update');\n    }\n  }\n  function extendEncode(encode, extra, skip) {\n    for (const name in extra) {\n      if (skip && vegaUtil.hasOwnProperty(skip, name)) continue;\n      encode[name] = vegaUtil.extend(encode[name] || {}, extra[name]);\n    }\n    return encode;\n  }\n  function has(key, encode) {\n    return encode && (encode.enter && encode.enter[key] || encode.update && encode.update[key]);\n  }\n\n  const MarkRole = 'mark';\n  const FrameRole = 'frame';\n  const ScopeRole = 'scope';\n  const AxisRole = 'axis';\n  const AxisDomainRole = 'axis-domain';\n  const AxisGridRole = 'axis-grid';\n  const AxisLabelRole = 'axis-label';\n  const AxisTickRole = 'axis-tick';\n  const AxisTitleRole = 'axis-title';\n  const LegendRole = 'legend';\n  const LegendBandRole = 'legend-band';\n  const LegendEntryRole = 'legend-entry';\n  const LegendGradientRole = 'legend-gradient';\n  const LegendLabelRole = 'legend-label';\n  const LegendSymbolRole = 'legend-symbol';\n  const LegendTitleRole = 'legend-title';\n  const TitleRole = 'title';\n  const TitleTextRole = 'title-text';\n  const TitleSubtitleRole = 'title-subtitle';\n\n  function applyDefaults (encode, type, role, style, config) {\n    const defaults = {},\n      enter = {};\n    let update, key, skip, props;\n\n    // if text mark, apply global lineBreak settings (#2370)\n    key = 'lineBreak';\n    if (type === 'text' && config[key] != null && !has(key, encode)) {\n      applyDefault(defaults, key, config[key]);\n    }\n\n    // ignore legend and axis roles\n    if (role == 'legend' || String(role).startsWith('axis')) {\n      role = null;\n    }\n\n    // resolve mark config\n    props = role === FrameRole ? config.group : role === MarkRole ? vegaUtil.extend({}, config.mark, config[type]) : null;\n    for (key in props) {\n      // do not apply defaults if relevant fields are defined\n      skip = has(key, encode) || (key === 'fill' || key === 'stroke') && (has('fill', encode) || has('stroke', encode));\n      if (!skip) applyDefault(defaults, key, props[key]);\n    }\n\n    // resolve styles, apply with increasing precedence\n    vegaUtil.array(style).forEach(name => {\n      const props = config.style && config.style[name];\n      for (const key in props) {\n        if (!has(key, encode)) {\n          applyDefault(defaults, key, props[key]);\n        }\n      }\n    });\n    encode = vegaUtil.extend({}, encode); // defensive copy\n    for (key in defaults) {\n      props = defaults[key];\n      if (props.signal) {\n        (update = update || {})[key] = props;\n      } else {\n        enter[key] = props;\n      }\n    }\n    encode.enter = vegaUtil.extend(enter, encode.enter);\n    if (update) encode.update = vegaUtil.extend(update, encode.update);\n    return encode;\n  }\n  function applyDefault(defaults, key, value) {\n    defaults[key] = value && value.signal ? {\n      signal: value.signal\n    } : {\n      value: value\n    };\n  }\n\n  const scaleRef = scale => vegaUtil.isString(scale) ? vegaUtil.stringValue(scale) : scale.signal ? `(${scale.signal})` : field(scale);\n  function entry$1(enc) {\n    if (enc.gradient != null) {\n      return gradient(enc);\n    }\n    let value = enc.signal ? `(${enc.signal})` : enc.color ? color(enc.color) : enc.field != null ? field(enc.field) : enc.value !== undefined ? vegaUtil.stringValue(enc.value) : undefined;\n    if (enc.scale != null) {\n      value = scale(enc, value);\n    }\n    if (value === undefined) {\n      value = null;\n    }\n    if (enc.exponent != null) {\n      value = `pow(${value},${property(enc.exponent)})`;\n    }\n    if (enc.mult != null) {\n      value += `*${property(enc.mult)}`;\n    }\n    if (enc.offset != null) {\n      value += `+${property(enc.offset)}`;\n    }\n    if (enc.round) {\n      value = `round(${value})`;\n    }\n    return value;\n  }\n  const _color = (type, x, y, z) => `(${type}(${[x, y, z].map(entry$1).join(',')})+'')`;\n  function color(enc) {\n    return enc.c ? _color('hcl', enc.h, enc.c, enc.l) : enc.h || enc.s ? _color('hsl', enc.h, enc.s, enc.l) : enc.l || enc.a ? _color('lab', enc.l, enc.a, enc.b) : enc.r || enc.g || enc.b ? _color('rgb', enc.r, enc.g, enc.b) : null;\n  }\n  function gradient(enc) {\n    // map undefined to null; expression lang does not allow undefined\n    const args = [enc.start, enc.stop, enc.count].map(_ => _ == null ? null : vegaUtil.stringValue(_));\n\n    // trim null inputs from the end\n    while (args.length && vegaUtil.peek(args) == null) args.pop();\n    args.unshift(scaleRef(enc.gradient));\n    return `gradient(${args.join(',')})`;\n  }\n  function property(property) {\n    return vegaUtil.isObject(property) ? '(' + entry$1(property) + ')' : property;\n  }\n  function field(ref) {\n    return resolveField(vegaUtil.isObject(ref) ? ref : {\n      datum: ref\n    });\n  }\n  function resolveField(ref) {\n    let object, level, field;\n    if (ref.signal) {\n      object = 'datum';\n      field = ref.signal;\n    } else if (ref.group || ref.parent) {\n      level = Math.max(1, ref.level || 1);\n      object = 'item';\n      while (level-- > 0) {\n        object += '.mark.group';\n      }\n      if (ref.parent) {\n        field = ref.parent;\n        object += '.datum';\n      } else {\n        field = ref.group;\n      }\n    } else if (ref.datum) {\n      object = 'datum';\n      field = ref.datum;\n    } else {\n      vegaUtil.error('Invalid field reference: ' + vegaUtil.stringValue(ref));\n    }\n    if (!ref.signal) {\n      field = vegaUtil.isString(field) ? vegaUtil.splitAccessPath(field).map(vegaUtil.stringValue).join('][') : resolveField(field);\n    }\n    return object + '[' + field + ']';\n  }\n  function scale(enc, value) {\n    const scale = scaleRef(enc.scale);\n    if (enc.range != null) {\n      // pull value from scale range\n      value = `lerp(_range(${scale}), ${+enc.range})`;\n    } else {\n      // run value through scale and/or pull scale bandwidth\n      if (value !== undefined) value = `_scale(${scale}, ${value})`;\n      if (enc.band) {\n        value = (value ? value + '+' : '') + `_bandwidth(${scale})` + (+enc.band === 1 ? '' : '*' + property(enc.band));\n        if (enc.extra) {\n          // include logic to handle extraneous elements\n          value = `(datum.extra ? _scale(${scale}, datum.extra.value) : ${value})`;\n        }\n      }\n      if (value == null) value = '0';\n    }\n    return value;\n  }\n\n  function rule (enc) {\n    let code = '';\n    enc.forEach(rule => {\n      const value = entry$1(rule);\n      code += rule.test ? `(${rule.test})?${value}:` : value;\n    });\n\n    // if no else clause, terminate with null (#1366)\n    if (vegaUtil.peek(code) === ':') {\n      code += 'null';\n    }\n    return code;\n  }\n\n  function parseEncode (encode, type, role, style, scope, params) {\n    const enc = {};\n    params = params || {};\n    params.encoders = {\n      $encode: enc\n    };\n    encode = applyDefaults(encode, type, role, style, scope.config);\n    for (const key in encode) {\n      enc[key] = parseBlock(encode[key], type, params, scope);\n    }\n    return params;\n  }\n  function parseBlock(block, marktype, params, scope) {\n    const channels = {},\n      fields = {};\n    for (const name in block) {\n      if (block[name] != null) {\n        // skip any null entries\n        channels[name] = parse$1(expr(block[name]), scope, params, fields);\n      }\n    }\n    return {\n      $expr: {\n        marktype,\n        channels\n      },\n      $fields: Object.keys(fields),\n      $output: Object.keys(block)\n    };\n  }\n  function expr(enc) {\n    return vegaUtil.isArray(enc) ? rule(enc) : entry$1(enc);\n  }\n  function parse$1(code, scope, params, fields) {\n    const expr = vegaFunctions.parseExpression(code, scope);\n    expr.$fields.forEach(name => fields[name] = 1);\n    vegaUtil.extend(params, expr.$params);\n    return expr.$expr;\n  }\n\n  const OUTER = 'outer',\n    OUTER_INVALID = ['value', 'update', 'init', 'react', 'bind'];\n  function outerError(prefix, name) {\n    vegaUtil.error(prefix + ' for \"outer\" push: ' + vegaUtil.stringValue(name));\n  }\n  function parseSignal (signal, scope) {\n    const name = signal.name;\n    if (signal.push === OUTER) {\n      // signal must already be defined, raise error if not\n      if (!scope.signals[name]) outerError('No prior signal definition', name);\n      // signal push must not use properties reserved for standard definition\n      OUTER_INVALID.forEach(prop => {\n        if (signal[prop] !== undefined) outerError('Invalid property ', prop);\n      });\n    } else {\n      // define a new signal in the current scope\n      const op = scope.addSignal(name, signal.value);\n      if (signal.react === false) op.react = false;\n      if (signal.bind) scope.addBinding(name, signal.bind);\n    }\n  }\n\n  function Entry(type, value, params, parent) {\n    this.id = -1;\n    this.type = type;\n    this.value = value;\n    this.params = params;\n    if (parent) this.parent = parent;\n  }\n  function entry(type, value, params, parent) {\n    return new Entry(type, value, params, parent);\n  }\n  function operator(value, params) {\n    return entry('operator', value, params);\n  }\n\n  // -----\n\n  function ref(op) {\n    const ref = {\n      $ref: op.id\n    };\n    // if operator not yet registered, cache ref to resolve later\n    if (op.id < 0) (op.refs = op.refs || []).push(ref);\n    return ref;\n  }\n  function fieldRef$1(field, name) {\n    return name ? {\n      $field: field,\n      $name: name\n    } : {\n      $field: field\n    };\n  }\n  const keyFieldRef = fieldRef$1('key');\n  function compareRef(fields, orders) {\n    return {\n      $compare: fields,\n      $order: orders\n    };\n  }\n  function keyRef(fields, flat) {\n    const ref = {\n      $key: fields\n    };\n    if (flat) ref.$flat = true;\n    return ref;\n  }\n\n  // -----\n\n  const Ascending = 'ascending';\n  const Descending = 'descending';\n  function sortKey(sort) {\n    return !vegaUtil.isObject(sort) ? '' : (sort.order === Descending ? '-' : '+') + aggrField(sort.op, sort.field);\n  }\n  function aggrField(op, field) {\n    return (op && op.signal ? '$' + op.signal : op || '') + (op && field ? '_' : '') + (field && field.signal ? '$' + field.signal : field || '');\n  }\n\n  // -----\n\n  const Scope$1 = 'scope';\n  const View = 'view';\n  function isSignal(_) {\n    return _ && _.signal;\n  }\n  function isExpr$1(_) {\n    return _ && _.expr;\n  }\n  function hasSignal(_) {\n    if (isSignal(_)) return true;\n    if (vegaUtil.isObject(_)) for (const key in _) {\n      if (hasSignal(_[key])) return true;\n    }\n    return false;\n  }\n  function value(specValue, defaultValue) {\n    return specValue != null ? specValue : defaultValue;\n  }\n  function deref(v) {\n    return v && v.signal || v;\n  }\n\n  const Timer = 'timer';\n  function parseStream(stream, scope) {\n    const method = stream.merge ? mergeStream : stream.stream ? nestedStream : stream.type ? eventStream : vegaUtil.error('Invalid stream specification: ' + vegaUtil.stringValue(stream));\n    return method(stream, scope);\n  }\n  function eventSource(source) {\n    return source === Scope$1 ? View : source || View;\n  }\n  function mergeStream(stream, scope) {\n    const list = stream.merge.map(s => parseStream(s, scope)),\n      entry = streamParameters({\n        merge: list\n      }, stream, scope);\n    return scope.addStream(entry).id;\n  }\n  function nestedStream(stream, scope) {\n    const id = parseStream(stream.stream, scope),\n      entry = streamParameters({\n        stream: id\n      }, stream, scope);\n    return scope.addStream(entry).id;\n  }\n  function eventStream(stream, scope) {\n    let id;\n    if (stream.type === Timer) {\n      id = scope.event(Timer, stream.throttle);\n      stream = {\n        between: stream.between,\n        filter: stream.filter\n      };\n    } else {\n      id = scope.event(eventSource(stream.source), stream.type);\n    }\n    const entry = streamParameters({\n      stream: id\n    }, stream, scope);\n    return Object.keys(entry).length === 1 ? id : scope.addStream(entry).id;\n  }\n  function streamParameters(entry, stream, scope) {\n    let param = stream.between;\n    if (param) {\n      if (param.length !== 2) {\n        vegaUtil.error('Stream \"between\" parameter must have 2 entries: ' + vegaUtil.stringValue(stream));\n      }\n      entry.between = [parseStream(param[0], scope), parseStream(param[1], scope)];\n    }\n    param = stream.filter ? [].concat(stream.filter) : [];\n    if (stream.marktype || stream.markname || stream.markrole) {\n      // add filter for mark type, name and/or role\n      param.push(filterMark(stream.marktype, stream.markname, stream.markrole));\n    }\n    if (stream.source === Scope$1) {\n      // add filter to limit events from sub-scope only\n      param.push('inScope(event.item)');\n    }\n    if (param.length) {\n      entry.filter = vegaFunctions.parseExpression('(' + param.join(')&&(') + ')', scope).$expr;\n    }\n    if ((param = stream.throttle) != null) {\n      entry.throttle = +param;\n    }\n    if ((param = stream.debounce) != null) {\n      entry.debounce = +param;\n    }\n    if (stream.consume) {\n      entry.consume = true;\n    }\n    return entry;\n  }\n  function filterMark(type, name, role) {\n    const item = 'event.item';\n    return item + (type && type !== '*' ? '&&' + item + '.mark.marktype===\\'' + type + '\\'' : '') + (role ? '&&' + item + '.mark.role===\\'' + role + '\\'' : '') + (name ? '&&' + item + '.mark.name===\\'' + name + '\\'' : '');\n  }\n\n  // bypass expression parser for internal operator references\n  const OP_VALUE_EXPR = {\n    code: '_.$value',\n    ast: {\n      type: 'Identifier',\n      value: 'value'\n    }\n  };\n  function parseUpdate (spec, scope, target) {\n    const encode = spec.encode,\n      entry = {\n        target: target\n      };\n    let events = spec.events,\n      update = spec.update,\n      sources = [];\n    if (!events) {\n      vegaUtil.error('Signal update missing events specification.');\n    }\n\n    // interpret as an event selector string\n    if (vegaUtil.isString(events)) {\n      events = vegaEventSelector.parseSelector(events, scope.isSubscope() ? Scope$1 : View);\n    }\n\n    // separate event streams from signal updates\n    events = vegaUtil.array(events).filter(s => s.signal || s.scale ? (sources.push(s), 0) : 1);\n\n    // merge internal operator listeners\n    if (sources.length > 1) {\n      sources = [mergeSources(sources)];\n    }\n\n    // merge event streams, include as source\n    if (events.length) {\n      sources.push(events.length > 1 ? {\n        merge: events\n      } : events[0]);\n    }\n    if (encode != null) {\n      if (update) vegaUtil.error('Signal encode and update are mutually exclusive.');\n      update = 'encode(item(),' + vegaUtil.stringValue(encode) + ')';\n    }\n\n    // resolve update value\n    entry.update = vegaUtil.isString(update) ? vegaFunctions.parseExpression(update, scope) : update.expr != null ? vegaFunctions.parseExpression(update.expr, scope) : update.value != null ? update.value : update.signal != null ? {\n      $expr: OP_VALUE_EXPR,\n      $params: {\n        $value: scope.signalRef(update.signal)\n      }\n    } : vegaUtil.error('Invalid signal update specification.');\n    if (spec.force) {\n      entry.options = {\n        force: true\n      };\n    }\n    sources.forEach(source => scope.addUpdate(vegaUtil.extend(streamSource(source, scope), entry)));\n  }\n  function streamSource(stream, scope) {\n    return {\n      source: stream.signal ? scope.signalRef(stream.signal) : stream.scale ? scope.scaleRef(stream.scale) : parseStream(stream, scope)\n    };\n  }\n  function mergeSources(sources) {\n    return {\n      signal: '[' + sources.map(s => s.scale ? 'scale(\"' + s.scale + '\")' : s.signal) + ']'\n    };\n  }\n\n  function parseSignalUpdates (signal, scope) {\n    const op = scope.getSignal(signal.name);\n    let expr = signal.update;\n    if (signal.init) {\n      if (expr) {\n        vegaUtil.error('Signals can not include both init and update expressions.');\n      } else {\n        expr = signal.init;\n        op.initonly = true;\n      }\n    }\n    if (expr) {\n      expr = vegaFunctions.parseExpression(expr, scope);\n      op.update = expr.$expr;\n      op.params = expr.$params;\n    }\n    if (signal.on) {\n      signal.on.forEach(_ => parseUpdate(_, scope, op.id));\n    }\n  }\n\n  const transform = name => (params, value, parent) => entry(name, value, params || undefined, parent);\n  const Aggregate = transform('aggregate');\n  const AxisTicks = transform('axisticks');\n  const Bound = transform('bound');\n  const Collect = transform('collect');\n  const Compare = transform('compare');\n  const DataJoin = transform('datajoin');\n  const Encode = transform('encode');\n  const Expression = transform('expression');\n  const Facet = transform('facet');\n  const Field = transform('field');\n  const Key = transform('key');\n  const LegendEntries = transform('legendentries');\n  const Load = transform('load');\n  const Mark = transform('mark');\n  const MultiExtent = transform('multiextent');\n  const MultiValues = transform('multivalues');\n  const Overlap = transform('overlap');\n  const Params = transform('params');\n  const PreFacet = transform('prefacet');\n  const Projection = transform('projection');\n  const Proxy = transform('proxy');\n  const Relay = transform('relay');\n  const Render = transform('render');\n  const Scale = transform('scale');\n  const Sieve = transform('sieve');\n  const SortItems = transform('sortitems');\n  const ViewLayout = transform('viewlayout');\n  const Values = transform('values');\n\n  let FIELD_REF_ID = 0;\n  const MULTIDOMAIN_SORT_OPS = {\n    min: 'min',\n    max: 'max',\n    count: 'sum'\n  };\n  function initScale(spec, scope) {\n    const type = spec.type || 'linear';\n    if (!vegaScale.isValidScaleType(type)) {\n      vegaUtil.error('Unrecognized scale type: ' + vegaUtil.stringValue(type));\n    }\n    scope.addScale(spec.name, {\n      type,\n      domain: undefined\n    });\n  }\n  function parseScale(spec, scope) {\n    const params = scope.getScale(spec.name).params;\n    let key;\n    params.domain = parseScaleDomain(spec.domain, spec, scope);\n    if (spec.range != null) {\n      params.range = parseScaleRange(spec, scope, params);\n    }\n    if (spec.interpolate != null) {\n      parseScaleInterpolate(spec.interpolate, params);\n    }\n    if (spec.nice != null) {\n      params.nice = parseScaleNice(spec.nice, scope);\n    }\n    if (spec.bins != null) {\n      params.bins = parseScaleBins(spec.bins, scope);\n    }\n    for (key in spec) {\n      if (vegaUtil.hasOwnProperty(params, key) || key === 'name') continue;\n      params[key] = parseLiteral(spec[key], scope);\n    }\n  }\n  function parseLiteral(v, scope) {\n    return !vegaUtil.isObject(v) ? v : v.signal ? scope.signalRef(v.signal) : vegaUtil.error('Unsupported object: ' + vegaUtil.stringValue(v));\n  }\n  function parseArray(v, scope) {\n    return v.signal ? scope.signalRef(v.signal) : v.map(v => parseLiteral(v, scope));\n  }\n  function dataLookupError(name) {\n    vegaUtil.error('Can not find data set: ' + vegaUtil.stringValue(name));\n  }\n\n  // -- SCALE DOMAIN ----\n\n  function parseScaleDomain(domain, spec, scope) {\n    if (!domain) {\n      if (spec.domainMin != null || spec.domainMax != null) {\n        vegaUtil.error('No scale domain defined for domainMin/domainMax to override.');\n      }\n      return; // default domain\n    }\n    return domain.signal ? scope.signalRef(domain.signal) : (vegaUtil.isArray(domain) ? explicitDomain : domain.fields ? multipleDomain : singularDomain)(domain, spec, scope);\n  }\n  function explicitDomain(domain, spec, scope) {\n    return domain.map(v => parseLiteral(v, scope));\n  }\n  function singularDomain(domain, spec, scope) {\n    const data = scope.getData(domain.data);\n    if (!data) dataLookupError(domain.data);\n    return vegaScale.isDiscrete(spec.type) ? data.valuesRef(scope, domain.field, parseSort(domain.sort, false)) : vegaScale.isQuantile(spec.type) ? data.domainRef(scope, domain.field) : data.extentRef(scope, domain.field);\n  }\n  function multipleDomain(domain, spec, scope) {\n    const data = domain.data,\n      fields = domain.fields.reduce((dom, d) => {\n        d = vegaUtil.isString(d) ? {\n          data: data,\n          field: d\n        } : vegaUtil.isArray(d) || d.signal ? fieldRef(d, scope) : d;\n        dom.push(d);\n        return dom;\n      }, []);\n    return (vegaScale.isDiscrete(spec.type) ? ordinalMultipleDomain : vegaScale.isQuantile(spec.type) ? quantileMultipleDomain : numericMultipleDomain)(domain, scope, fields);\n  }\n  function fieldRef(data, scope) {\n    const name = '_:vega:_' + FIELD_REF_ID++,\n      coll = Collect({});\n    if (vegaUtil.isArray(data)) {\n      coll.value = {\n        $ingest: data\n      };\n    } else if (data.signal) {\n      const code = 'setdata(' + vegaUtil.stringValue(name) + ',' + data.signal + ')';\n      coll.params.input = scope.signalRef(code);\n    }\n    scope.addDataPipeline(name, [coll, Sieve({})]);\n    return {\n      data: name,\n      field: 'data'\n    };\n  }\n  function ordinalMultipleDomain(domain, scope, fields) {\n    const sort = parseSort(domain.sort, true);\n    let a, v;\n\n    // get value counts for each domain field\n    const counts = fields.map(f => {\n      const data = scope.getData(f.data);\n      if (!data) dataLookupError(f.data);\n      return data.countsRef(scope, f.field, sort);\n    });\n\n    // aggregate the results from each domain field\n    const p = {\n      groupby: keyFieldRef,\n      pulse: counts\n    };\n    if (sort) {\n      a = sort.op || 'count';\n      v = sort.field ? aggrField(a, sort.field) : 'count';\n      p.ops = [MULTIDOMAIN_SORT_OPS[a]];\n      p.fields = [scope.fieldRef(v)];\n      p.as = [v];\n    }\n    a = scope.add(Aggregate(p));\n\n    // collect aggregate output\n    const c = scope.add(Collect({\n      pulse: ref(a)\n    }));\n\n    // extract values for combined domain\n    v = scope.add(Values({\n      field: keyFieldRef,\n      sort: scope.sortRef(sort),\n      pulse: ref(c)\n    }));\n    return ref(v);\n  }\n  function parseSort(sort, multidomain) {\n    if (sort) {\n      if (!sort.field && !sort.op) {\n        if (vegaUtil.isObject(sort)) sort.field = 'key';else sort = {\n          field: 'key'\n        };\n      } else if (!sort.field && sort.op !== 'count') {\n        vegaUtil.error('No field provided for sort aggregate op: ' + sort.op);\n      } else if (multidomain && sort.field) {\n        if (sort.op && !MULTIDOMAIN_SORT_OPS[sort.op]) {\n          vegaUtil.error('Multiple domain scales can not be sorted using ' + sort.op);\n        }\n      }\n    }\n    return sort;\n  }\n  function quantileMultipleDomain(domain, scope, fields) {\n    // get value arrays for each domain field\n    const values = fields.map(f => {\n      const data = scope.getData(f.data);\n      if (!data) dataLookupError(f.data);\n      return data.domainRef(scope, f.field);\n    });\n\n    // combine value arrays\n    return ref(scope.add(MultiValues({\n      values: values\n    })));\n  }\n  function numericMultipleDomain(domain, scope, fields) {\n    // get extents for each domain field\n    const extents = fields.map(f => {\n      const data = scope.getData(f.data);\n      if (!data) dataLookupError(f.data);\n      return data.extentRef(scope, f.field);\n    });\n\n    // combine extents\n    return ref(scope.add(MultiExtent({\n      extents: extents\n    })));\n  }\n\n  // -- SCALE BINS -----\n\n  function parseScaleBins(v, scope) {\n    return v.signal || vegaUtil.isArray(v) ? parseArray(v, scope) : scope.objectProperty(v);\n  }\n\n  // -- SCALE NICE -----\n\n  function parseScaleNice(nice, scope) {\n    return nice.signal ? scope.signalRef(nice.signal) : vegaUtil.isObject(nice) ? {\n      interval: parseLiteral(nice.interval),\n      step: parseLiteral(nice.step)\n    } : parseLiteral(nice);\n  }\n\n  // -- SCALE INTERPOLATION -----\n\n  function parseScaleInterpolate(interpolate, params) {\n    params.interpolate = parseLiteral(interpolate.type || interpolate);\n    if (interpolate.gamma != null) {\n      params.interpolateGamma = parseLiteral(interpolate.gamma);\n    }\n  }\n\n  // -- SCALE RANGE -----\n\n  function parseScaleRange(spec, scope, params) {\n    const config = scope.config.range;\n    let range = spec.range;\n    if (range.signal) {\n      return scope.signalRef(range.signal);\n    } else if (vegaUtil.isString(range)) {\n      if (config && vegaUtil.hasOwnProperty(config, range)) {\n        spec = vegaUtil.extend({}, spec, {\n          range: config[range]\n        });\n        return parseScaleRange(spec, scope, params);\n      } else if (range === 'width') {\n        range = [0, {\n          signal: 'width'\n        }];\n      } else if (range === 'height') {\n        range = vegaScale.isDiscrete(spec.type) ? [0, {\n          signal: 'height'\n        }] : [{\n          signal: 'height'\n        }, 0];\n      } else {\n        vegaUtil.error('Unrecognized scale range value: ' + vegaUtil.stringValue(range));\n      }\n    } else if (range.scheme) {\n      params.scheme = vegaUtil.isArray(range.scheme) ? parseArray(range.scheme, scope) : parseLiteral(range.scheme, scope);\n      if (range.extent) params.schemeExtent = parseArray(range.extent, scope);\n      if (range.count) params.schemeCount = parseLiteral(range.count, scope);\n      return;\n    } else if (range.step) {\n      params.rangeStep = parseLiteral(range.step, scope);\n      return;\n    } else if (vegaScale.isDiscrete(spec.type) && !vegaUtil.isArray(range)) {\n      return parseScaleDomain(range, spec, scope);\n    } else if (!vegaUtil.isArray(range)) {\n      vegaUtil.error('Unsupported range type: ' + vegaUtil.stringValue(range));\n    }\n    return range.map(v => (vegaUtil.isArray(v) ? parseArray : parseLiteral)(v, scope));\n  }\n\n  function parseProjection (proj, scope) {\n    const config = scope.config.projection || {},\n      params = {};\n    for (const name in proj) {\n      if (name === 'name') continue;\n      params[name] = parseParameter$1(proj[name], name, scope);\n    }\n\n    // apply projection defaults from config\n    for (const name in config) {\n      if (params[name] == null) {\n        params[name] = parseParameter$1(config[name], name, scope);\n      }\n    }\n    scope.addProjection(proj.name, params);\n  }\n  function parseParameter$1(_, name, scope) {\n    return vegaUtil.isArray(_) ? _.map(_ => parseParameter$1(_, name, scope)) : !vegaUtil.isObject(_) ? _ : _.signal ? scope.signalRef(_.signal) : name === 'fit' ? _ : vegaUtil.error('Unsupported parameter object: ' + vegaUtil.stringValue(_));\n  }\n\n  const Top = 'top';\n  const Left = 'left';\n  const Right = 'right';\n  const Bottom = 'bottom';\n  const Center = 'center';\n  const Vertical = 'vertical';\n  const Start = 'start';\n  const Middle = 'middle';\n  const End = 'end';\n  const Index = 'index';\n  const Label = 'label';\n  const Offset = 'offset';\n  const Perc = 'perc';\n  const Perc2 = 'perc2';\n  const Value = 'value';\n  const GuideLabelStyle = 'guide-label';\n  const GuideTitleStyle = 'guide-title';\n  const GroupTitleStyle = 'group-title';\n  const GroupSubtitleStyle = 'group-subtitle';\n\n  /** All values of LegendType */\n  const Symbols = 'symbol';\n  const Gradient = 'gradient';\n  const Discrete = 'discrete';\n  const Size = 'size';\n  const Shape = 'shape';\n  const Fill = 'fill';\n  const Stroke = 'stroke';\n  const StrokeWidth = 'strokeWidth';\n  const StrokeDash = 'strokeDash';\n  const Opacity = 'opacity';\n\n  // Encoding channels supported by legends\n  // In priority order of 'canonical' scale\n  const LegendScales = [Size, Shape, Fill, Stroke, StrokeWidth, StrokeDash, Opacity];\n  const Skip = {\n    name: 1,\n    style: 1,\n    interactive: 1\n  };\n  const zero = {\n    value: 0\n  };\n  const one = {\n    value: 1\n  };\n\n  const GroupMark = 'group';\n  const RectMark = 'rect';\n  const RuleMark = 'rule';\n  const SymbolMark = 'symbol';\n  const TextMark = 'text';\n\n  function guideGroup (mark) {\n    mark.type = GroupMark;\n    mark.interactive = mark.interactive || false;\n    return mark;\n  }\n\n  function lookup(spec, config) {\n    const _ = (name, dflt) => value(spec[name], value(config[name], dflt));\n    _.isVertical = s => Vertical === value(spec.direction, config.direction || (s ? config.symbolDirection : config.gradientDirection));\n    _.gradientLength = () => value(spec.gradientLength, config.gradientLength || config.gradientWidth);\n    _.gradientThickness = () => value(spec.gradientThickness, config.gradientThickness || config.gradientHeight);\n    _.entryColumns = () => value(spec.columns, value(config.columns, +_.isVertical(true)));\n    return _;\n  }\n  function getEncoding(name, encode) {\n    const v = encode && (encode.update && encode.update[name] || encode.enter && encode.enter[name]);\n    return v && v.signal ? v : v ? v.value : null;\n  }\n  function getStyle(name, scope, style) {\n    const s = scope.config.style[style];\n    return s && s[name];\n  }\n  function anchorExpr(s, e, m) {\n    return `item.anchor === '${Start}' ? ${s} : item.anchor === '${End}' ? ${e} : ${m}`;\n  }\n  const alignExpr$1 = anchorExpr(vegaUtil.stringValue(Left), vegaUtil.stringValue(Right), vegaUtil.stringValue(Center));\n  function tickBand(_) {\n    const v = _('tickBand');\n    let offset = _('tickOffset'),\n      band,\n      extra;\n    if (!v) {\n      // if no tick band entry, fall back on other properties\n      band = _('bandPosition');\n      extra = _('tickExtra');\n    } else if (v.signal) {\n      // if signal, augment code to interpret values\n      band = {\n        signal: `(${v.signal}) === 'extent' ? 1 : 0.5`\n      };\n      extra = {\n        signal: `(${v.signal}) === 'extent'`\n      };\n      if (!vegaUtil.isObject(offset)) {\n        offset = {\n          signal: `(${v.signal}) === 'extent' ? 0 : ${offset}`\n        };\n      }\n    } else if (v === 'extent') {\n      // if constant, simply set values\n      band = 1;\n      extra = true;\n      offset = 0;\n    } else {\n      band = 0.5;\n      extra = false;\n    }\n    return {\n      extra,\n      band,\n      offset\n    };\n  }\n  function extendOffset(value, offset) {\n    return !offset ? value : !value ? offset : !vegaUtil.isObject(value) ? {\n      value,\n      offset\n    } : Object.assign({}, value, {\n      offset: extendOffset(value.offset, offset)\n    });\n  }\n\n  function guideMark (mark, extras) {\n    if (extras) {\n      mark.name = extras.name;\n      mark.style = extras.style || mark.style;\n      mark.interactive = !!extras.interactive;\n      mark.encode = extendEncode(mark.encode, extras, Skip);\n    } else {\n      mark.interactive = false;\n    }\n    return mark;\n  }\n\n  function legendGradient (spec, scale, config, userEncode) {\n    const _ = lookup(spec, config),\n      vertical = _.isVertical(),\n      thickness = _.gradientThickness(),\n      length = _.gradientLength();\n    let enter, start, stop, width, height;\n    if (vertical) {\n      start = [0, 1];\n      stop = [0, 0];\n      width = thickness;\n      height = length;\n    } else {\n      start = [0, 0];\n      stop = [1, 0];\n      width = length;\n      height = thickness;\n    }\n    const encode = {\n      enter: enter = {\n        opacity: zero,\n        x: zero,\n        y: zero,\n        width: encoder(width),\n        height: encoder(height)\n      },\n      update: vegaUtil.extend({}, enter, {\n        opacity: one,\n        fill: {\n          gradient: scale,\n          start: start,\n          stop: stop\n        }\n      }),\n      exit: {\n        opacity: zero\n      }\n    };\n    addEncoders(encode, {\n      stroke: _('gradientStrokeColor'),\n      strokeWidth: _('gradientStrokeWidth')\n    }, {\n      // update\n      opacity: _('gradientOpacity')\n    });\n    return guideMark({\n      type: RectMark,\n      role: LegendGradientRole,\n      encode\n    }, userEncode);\n  }\n\n  function legendGradientDiscrete (spec, scale, config, userEncode, dataRef) {\n    const _ = lookup(spec, config),\n      vertical = _.isVertical(),\n      thickness = _.gradientThickness(),\n      length = _.gradientLength();\n    let u,\n      v,\n      uu,\n      vv,\n      adjust = '';\n    vertical ? (u = 'y', uu = 'y2', v = 'x', vv = 'width', adjust = '1-') : (u = 'x', uu = 'x2', v = 'y', vv = 'height');\n    const enter = {\n      opacity: zero,\n      fill: {\n        scale: scale,\n        field: Value\n      }\n    };\n    enter[u] = {\n      signal: adjust + 'datum.' + Perc,\n      mult: length\n    };\n    enter[v] = zero;\n    enter[uu] = {\n      signal: adjust + 'datum.' + Perc2,\n      mult: length\n    };\n    enter[vv] = encoder(thickness);\n    const encode = {\n      enter: enter,\n      update: vegaUtil.extend({}, enter, {\n        opacity: one\n      }),\n      exit: {\n        opacity: zero\n      }\n    };\n    addEncoders(encode, {\n      stroke: _('gradientStrokeColor'),\n      strokeWidth: _('gradientStrokeWidth')\n    }, {\n      // update\n      opacity: _('gradientOpacity')\n    });\n    return guideMark({\n      type: RectMark,\n      role: LegendBandRole,\n      key: Value,\n      from: dataRef,\n      encode\n    }, userEncode);\n  }\n\n  const alignExpr = `datum.${Perc}<=0?\"${Left}\":datum.${Perc}>=1?\"${Right}\":\"${Center}\"`,\n    baselineExpr = `datum.${Perc}<=0?\"${Bottom}\":datum.${Perc}>=1?\"${Top}\":\"${Middle}\"`;\n  function legendGradientLabels (spec, config, userEncode, dataRef) {\n    const _ = lookup(spec, config),\n      vertical = _.isVertical(),\n      thickness = encoder(_.gradientThickness()),\n      length = _.gradientLength();\n    let overlap = _('labelOverlap'),\n      enter,\n      update,\n      u,\n      v,\n      adjust = '';\n    const encode = {\n      enter: enter = {\n        opacity: zero\n      },\n      update: update = {\n        opacity: one,\n        text: {\n          field: Label\n        }\n      },\n      exit: {\n        opacity: zero\n      }\n    };\n    addEncoders(encode, {\n      fill: _('labelColor'),\n      fillOpacity: _('labelOpacity'),\n      font: _('labelFont'),\n      fontSize: _('labelFontSize'),\n      fontStyle: _('labelFontStyle'),\n      fontWeight: _('labelFontWeight'),\n      limit: value(spec.labelLimit, config.gradientLabelLimit)\n    });\n    if (vertical) {\n      enter.align = {\n        value: 'left'\n      };\n      enter.baseline = update.baseline = {\n        signal: baselineExpr\n      };\n      u = 'y';\n      v = 'x';\n      adjust = '1-';\n    } else {\n      enter.align = update.align = {\n        signal: alignExpr\n      };\n      enter.baseline = {\n        value: 'top'\n      };\n      u = 'x';\n      v = 'y';\n    }\n    enter[u] = update[u] = {\n      signal: adjust + 'datum.' + Perc,\n      mult: length\n    };\n    enter[v] = update[v] = thickness;\n    thickness.offset = value(spec.labelOffset, config.gradientLabelOffset) || 0;\n    overlap = overlap ? {\n      separation: _('labelSeparation'),\n      method: overlap,\n      order: 'datum.' + Index\n    } : undefined;\n\n    // type, role, style, key, dataRef, encode, extras\n    return guideMark({\n      type: TextMark,\n      role: LegendLabelRole,\n      style: GuideLabelStyle,\n      key: Value,\n      from: dataRef,\n      encode,\n      overlap\n    }, userEncode);\n  }\n\n  // userEncode is top-level, includes entries, symbols, labels\n  function legendSymbolGroups (spec, config, userEncode, dataRef, columns) {\n    const _ = lookup(spec, config),\n      entries = userEncode.entries,\n      interactive = !!(entries && entries.interactive),\n      name = entries ? entries.name : undefined,\n      height = _('clipHeight'),\n      symbolOffset = _('symbolOffset'),\n      valueRef = {\n        data: 'value'\n      },\n      xSignal = `(${columns}) ? datum.${Offset} : datum.${Size}`,\n      yEncode = height ? encoder(height) : {\n        field: Size\n      },\n      index = `datum.${Index}`,\n      ncols = `max(1, ${columns})`;\n    let encode, enter, update, nrows, sort;\n    yEncode.mult = 0.5;\n\n    // -- LEGEND SYMBOLS --\n    encode = {\n      enter: enter = {\n        opacity: zero,\n        x: {\n          signal: xSignal,\n          mult: 0.5,\n          offset: symbolOffset\n        },\n        y: yEncode\n      },\n      update: update = {\n        opacity: one,\n        x: enter.x,\n        y: enter.y\n      },\n      exit: {\n        opacity: zero\n      }\n    };\n    let baseFill = null,\n      baseStroke = null;\n    if (!spec.fill) {\n      baseFill = config.symbolBaseFillColor;\n      baseStroke = config.symbolBaseStrokeColor;\n    }\n    addEncoders(encode, {\n      fill: _('symbolFillColor', baseFill),\n      shape: _('symbolType'),\n      size: _('symbolSize'),\n      stroke: _('symbolStrokeColor', baseStroke),\n      strokeDash: _('symbolDash'),\n      strokeDashOffset: _('symbolDashOffset'),\n      strokeWidth: _('symbolStrokeWidth')\n    }, {\n      // update\n      opacity: _('symbolOpacity')\n    });\n    LegendScales.forEach(scale => {\n      if (spec[scale]) {\n        update[scale] = enter[scale] = {\n          scale: spec[scale],\n          field: Value\n        };\n      }\n    });\n    const symbols = guideMark({\n      type: SymbolMark,\n      role: LegendSymbolRole,\n      key: Value,\n      from: valueRef,\n      clip: height ? true : undefined,\n      encode\n    }, userEncode.symbols);\n\n    // -- LEGEND LABELS --\n    const labelOffset = encoder(symbolOffset);\n    labelOffset.offset = _('labelOffset');\n    encode = {\n      enter: enter = {\n        opacity: zero,\n        x: {\n          signal: xSignal,\n          offset: labelOffset\n        },\n        y: yEncode\n      },\n      update: update = {\n        opacity: one,\n        text: {\n          field: Label\n        },\n        x: enter.x,\n        y: enter.y\n      },\n      exit: {\n        opacity: zero\n      }\n    };\n    addEncoders(encode, {\n      align: _('labelAlign'),\n      baseline: _('labelBaseline'),\n      fill: _('labelColor'),\n      fillOpacity: _('labelOpacity'),\n      font: _('labelFont'),\n      fontSize: _('labelFontSize'),\n      fontStyle: _('labelFontStyle'),\n      fontWeight: _('labelFontWeight'),\n      limit: _('labelLimit')\n    });\n    const labels = guideMark({\n      type: TextMark,\n      role: LegendLabelRole,\n      style: GuideLabelStyle,\n      key: Value,\n      from: valueRef,\n      encode\n    }, userEncode.labels);\n\n    // -- LEGEND ENTRY GROUPS --\n    encode = {\n      enter: {\n        noBound: {\n          value: !height\n        },\n        // ignore width/height in bounds calc\n        width: zero,\n        height: height ? encoder(height) : zero,\n        opacity: zero\n      },\n      exit: {\n        opacity: zero\n      },\n      update: update = {\n        opacity: one,\n        row: {\n          signal: null\n        },\n        column: {\n          signal: null\n        }\n      }\n    };\n\n    // annotate and sort groups to ensure correct ordering\n    if (_.isVertical(true)) {\n      nrows = `ceil(item.mark.items.length / ${ncols})`;\n      update.row.signal = `${index}%${nrows}`;\n      update.column.signal = `floor(${index} / ${nrows})`;\n      sort = {\n        field: ['row', index]\n      };\n    } else {\n      update.row.signal = `floor(${index} / ${ncols})`;\n      update.column.signal = `${index} % ${ncols}`;\n      sort = {\n        field: index\n      };\n    }\n    // handle zero column case (implies infinite columns)\n    update.column.signal = `(${columns})?${update.column.signal}:${index}`;\n\n    // facet legend entries into sub-groups\n    dataRef = {\n      facet: {\n        data: dataRef,\n        name: 'value',\n        groupby: Index\n      }\n    };\n    return guideGroup({\n      role: ScopeRole,\n      from: dataRef,\n      encode: extendEncode(encode, entries, Skip),\n      marks: [symbols, labels],\n      name,\n      interactive,\n      sort\n    });\n  }\n  function legendSymbolLayout(spec, config) {\n    const _ = lookup(spec, config);\n\n    // layout parameters for legend entries\n    return {\n      align: _('gridAlign'),\n      columns: _.entryColumns(),\n      center: {\n        row: true,\n        column: false\n      },\n      padding: {\n        row: _('rowPadding'),\n        column: _('columnPadding')\n      }\n    };\n  }\n\n  // expression logic for align, anchor, angle, and baseline calculation\n  const isL = 'item.orient === \"left\"',\n    isR = 'item.orient === \"right\"',\n    isLR = `(${isL} || ${isR})`,\n    isVG = `datum.vgrad && ${isLR}`,\n    baseline = anchorExpr('\"top\"', '\"bottom\"', '\"middle\"'),\n    alignFlip = anchorExpr('\"right\"', '\"left\"', '\"center\"'),\n    exprAlign = `datum.vgrad && ${isR} ? (${alignFlip}) : (${isLR} && !(datum.vgrad && ${isL})) ? \"left\" : ${alignExpr$1}`,\n    exprAnchor = `item._anchor || (${isLR} ? \"middle\" : \"start\")`,\n    exprAngle = `${isVG} ? (${isL} ? -90 : 90) : 0`,\n    exprBaseline = `${isLR} ? (datum.vgrad ? (${isR} ? \"bottom\" : \"top\") : ${baseline}) : \"top\"`;\n  function legendTitle (spec, config, userEncode, dataRef) {\n    const _ = lookup(spec, config);\n    const encode = {\n      enter: {\n        opacity: zero\n      },\n      update: {\n        opacity: one,\n        x: {\n          field: {\n            group: 'padding'\n          }\n        },\n        y: {\n          field: {\n            group: 'padding'\n          }\n        }\n      },\n      exit: {\n        opacity: zero\n      }\n    };\n    addEncoders(encode, {\n      orient: _('titleOrient'),\n      _anchor: _('titleAnchor'),\n      anchor: {\n        signal: exprAnchor\n      },\n      angle: {\n        signal: exprAngle\n      },\n      align: {\n        signal: exprAlign\n      },\n      baseline: {\n        signal: exprBaseline\n      },\n      text: spec.title,\n      fill: _('titleColor'),\n      fillOpacity: _('titleOpacity'),\n      font: _('titleFont'),\n      fontSize: _('titleFontSize'),\n      fontStyle: _('titleFontStyle'),\n      fontWeight: _('titleFontWeight'),\n      limit: _('titleLimit'),\n      lineHeight: _('titleLineHeight')\n    }, {\n      // require update\n      align: _('titleAlign'),\n      baseline: _('titleBaseline')\n    });\n    return guideMark({\n      type: TextMark,\n      role: LegendTitleRole,\n      style: GuideTitleStyle,\n      from: dataRef,\n      encode\n    }, userEncode);\n  }\n\n  function clip (clip, scope) {\n    let expr;\n    if (vegaUtil.isObject(clip)) {\n      if (clip.signal) {\n        expr = clip.signal;\n      } else if (clip.path) {\n        expr = 'pathShape(' + param(clip.path) + ')';\n      } else if (clip.sphere) {\n        expr = 'geoShape(' + param(clip.sphere) + ', {type: \"Sphere\"})';\n      }\n    }\n    return expr ? scope.signalRef(expr) : !!clip;\n  }\n  function param(value) {\n    return vegaUtil.isObject(value) && value.signal ? value.signal : vegaUtil.stringValue(value);\n  }\n\n  function getRole (spec) {\n    const role = spec.role || '';\n    return role.startsWith('axis') || role.startsWith('legend') || role.startsWith('title') ? role : spec.type === GroupMark ? ScopeRole : role || MarkRole;\n  }\n\n  function definition (spec) {\n    return {\n      marktype: spec.type,\n      name: spec.name || undefined,\n      role: spec.role || getRole(spec),\n      zindex: +spec.zindex || undefined,\n      aria: spec.aria,\n      description: spec.description\n    };\n  }\n\n  function interactive (spec, scope) {\n    return spec && spec.signal ? scope.signalRef(spec.signal) : spec === false ? false : true;\n  }\n\n  /**\n   * Parse a data transform specification.\n   */\n  function parseTransform (spec, scope) {\n    const def = vegaDataflow.definition(spec.type);\n    if (!def) vegaUtil.error('Unrecognized transform type: ' + vegaUtil.stringValue(spec.type));\n    const t = entry(def.type.toLowerCase(), null, parseParameters(def, spec, scope));\n    if (spec.signal) scope.addSignal(spec.signal, scope.proxy(t));\n    t.metadata = def.metadata || {};\n    return t;\n  }\n\n  /**\n   * Parse all parameters of a data transform.\n   */\n  function parseParameters(def, spec, scope) {\n    const params = {},\n      n = def.params.length;\n    for (let i = 0; i < n; ++i) {\n      const pdef = def.params[i];\n      params[pdef.name] = parseParameter(pdef, spec, scope);\n    }\n    return params;\n  }\n\n  /**\n   * Parse a data transform parameter.\n   */\n  function parseParameter(def, spec, scope) {\n    const type = def.type,\n      value = spec[def.name];\n    if (type === 'index') {\n      return parseIndexParameter(def, spec, scope);\n    } else if (value === undefined) {\n      if (def.required) {\n        vegaUtil.error('Missing required ' + vegaUtil.stringValue(spec.type) + ' parameter: ' + vegaUtil.stringValue(def.name));\n      }\n      return;\n    } else if (type === 'param') {\n      return parseSubParameters(def, spec, scope);\n    } else if (type === 'projection') {\n      return scope.projectionRef(spec[def.name]);\n    }\n    return def.array && !isSignal(value) ? value.map(v => parameterValue(def, v, scope)) : parameterValue(def, value, scope);\n  }\n\n  /**\n   * Parse a single parameter value.\n   */\n  function parameterValue(def, value, scope) {\n    const type = def.type;\n    if (isSignal(value)) {\n      return isExpr(type) ? vegaUtil.error('Expression references can not be signals.') : isField(type) ? scope.fieldRef(value) : isCompare(type) ? scope.compareRef(value) : scope.signalRef(value.signal);\n    } else {\n      const expr = def.expr || isField(type);\n      return expr && outerExpr(value) ? scope.exprRef(value.expr, value.as) : expr && outerField(value) ? fieldRef$1(value.field, value.as) : isExpr(type) ? vegaFunctions.parseExpression(value, scope) : isData(type) ? ref(scope.getData(value).values) : isField(type) ? fieldRef$1(value) : isCompare(type) ? scope.compareRef(value) : value;\n    }\n  }\n\n  /**\n   * Parse parameter for accessing an index of another data set.\n   */\n  function parseIndexParameter(def, spec, scope) {\n    if (!vegaUtil.isString(spec.from)) {\n      vegaUtil.error('Lookup \"from\" parameter must be a string literal.');\n    }\n    return scope.getData(spec.from).lookupRef(scope, spec.key);\n  }\n\n  /**\n   * Parse a parameter that contains one or more sub-parameter objects.\n   */\n  function parseSubParameters(def, spec, scope) {\n    const value = spec[def.name];\n    if (def.array) {\n      if (!vegaUtil.isArray(value)) {\n        // signals not allowed!\n        vegaUtil.error('Expected an array of sub-parameters. Instead: ' + vegaUtil.stringValue(value));\n      }\n      return value.map(v => parseSubParameter(def, v, scope));\n    } else {\n      return parseSubParameter(def, value, scope);\n    }\n  }\n\n  /**\n   * Parse a sub-parameter object.\n   */\n  function parseSubParameter(def, value, scope) {\n    const n = def.params.length;\n    let pdef;\n\n    // loop over defs to find matching key\n    for (let i = 0; i < n; ++i) {\n      pdef = def.params[i];\n      for (const k in pdef.key) {\n        if (pdef.key[k] !== value[k]) {\n          pdef = null;\n          break;\n        }\n      }\n      if (pdef) break;\n    }\n    // raise error if matching key not found\n    if (!pdef) vegaUtil.error('Unsupported parameter: ' + vegaUtil.stringValue(value));\n\n    // parse params, create Params transform, return ref\n    const params = vegaUtil.extend(parseParameters(pdef, value, scope), pdef.key);\n    return ref(scope.add(Params(params)));\n  }\n\n  // -- Utilities -----\n\n  const outerExpr = _ => _ && _.expr;\n  const outerField = _ => _ && _.field;\n  const isData = _ => _ === 'data';\n  const isExpr = _ => _ === 'expr';\n  const isField = _ => _ === 'field';\n  const isCompare = _ => _ === 'compare';\n\n  function parseData$1 (from, group, scope) {\n    let facet, key, op, dataRef, parent;\n\n    // if no source data, generate singleton datum\n    if (!from) {\n      dataRef = ref(scope.add(Collect(null, [{}])));\n    }\n\n    // if faceted, process facet specification\n    else if (facet = from.facet) {\n      if (!group) vegaUtil.error('Only group marks can be faceted.');\n\n      // use pre-faceted source data, if available\n      if (facet.field != null) {\n        dataRef = parent = getDataRef(facet, scope);\n      } else {\n        // generate facet aggregates if no direct data specification\n        if (!from.data) {\n          op = parseTransform(vegaUtil.extend({\n            type: 'aggregate',\n            groupby: vegaUtil.array(facet.groupby)\n          }, facet.aggregate), scope);\n          op.params.key = scope.keyRef(facet.groupby);\n          op.params.pulse = getDataRef(facet, scope);\n          dataRef = parent = ref(scope.add(op));\n        } else {\n          parent = ref(scope.getData(from.data).aggregate);\n        }\n        key = scope.keyRef(facet.groupby, true);\n      }\n    }\n\n    // if not yet defined, get source data reference\n    if (!dataRef) {\n      dataRef = getDataRef(from, scope);\n    }\n    return {\n      key: key,\n      pulse: dataRef,\n      parent: parent\n    };\n  }\n  function getDataRef(from, scope) {\n    return from.$ref ? from : from.data && from.data.$ref ? from.data : ref(scope.getData(from.data).output);\n  }\n\n  function DataScope(scope, input, output, values, aggr) {\n    this.scope = scope; // parent scope object\n    this.input = input; // first operator in pipeline (tuple input)\n    this.output = output; // last operator in pipeline (tuple output)\n    this.values = values; // operator for accessing tuples (but not tuple flow)\n\n    // last aggregate in transform pipeline\n    this.aggregate = aggr;\n\n    // lookup table of field indices\n    this.index = {};\n  }\n  DataScope.fromEntries = function (scope, entries) {\n    const n = entries.length,\n      values = entries[n - 1],\n      output = entries[n - 2];\n    let input = entries[0],\n      aggr = null,\n      i = 1;\n    if (input && input.type === 'load') {\n      input = entries[1];\n    }\n\n    // add operator entries to this scope, wire up pulse chain\n    scope.add(entries[0]);\n    for (; i < n; ++i) {\n      entries[i].params.pulse = ref(entries[i - 1]);\n      scope.add(entries[i]);\n      if (entries[i].type === 'aggregate') aggr = entries[i];\n    }\n    return new DataScope(scope, input, output, values, aggr);\n  };\n  function fieldKey(field) {\n    return vegaUtil.isString(field) ? field : null;\n  }\n  function addSortField(scope, p, sort) {\n    const as = aggrField(sort.op, sort.field);\n    let s;\n    if (p.ops) {\n      for (let i = 0, n = p.as.length; i < n; ++i) {\n        if (p.as[i] === as) return;\n      }\n    } else {\n      p.ops = ['count'];\n      p.fields = [null];\n      p.as = ['count'];\n    }\n    if (sort.op) {\n      p.ops.push((s = sort.op.signal) ? scope.signalRef(s) : sort.op);\n      p.fields.push(scope.fieldRef(sort.field));\n      p.as.push(as);\n    }\n  }\n  function cache(scope, ds, name, optype, field, counts, index) {\n    const cache = ds[name] || (ds[name] = {}),\n      sort = sortKey(counts);\n    let k = fieldKey(field),\n      v,\n      op;\n    if (k != null) {\n      scope = ds.scope;\n      k = k + (sort ? '|' + sort : '');\n      v = cache[k];\n    }\n    if (!v) {\n      const params = counts ? {\n        field: keyFieldRef,\n        pulse: ds.countsRef(scope, field, counts)\n      } : {\n        field: scope.fieldRef(field),\n        pulse: ref(ds.output)\n      };\n      if (sort) params.sort = scope.sortRef(counts);\n      op = scope.add(entry(optype, undefined, params));\n      if (index) ds.index[field] = op;\n      v = ref(op);\n      if (k != null) cache[k] = v;\n    }\n    return v;\n  }\n  DataScope.prototype = {\n    countsRef(scope, field, sort) {\n      const ds = this,\n        cache = ds.counts || (ds.counts = {}),\n        k = fieldKey(field);\n      let v, a, p;\n      if (k != null) {\n        scope = ds.scope;\n        v = cache[k];\n      }\n      if (!v) {\n        p = {\n          groupby: scope.fieldRef(field, 'key'),\n          pulse: ref(ds.output)\n        };\n        if (sort && sort.field) addSortField(scope, p, sort);\n        a = scope.add(Aggregate(p));\n        v = scope.add(Collect({\n          pulse: ref(a)\n        }));\n        v = {\n          agg: a,\n          ref: ref(v)\n        };\n        if (k != null) cache[k] = v;\n      } else if (sort && sort.field) {\n        addSortField(scope, v.agg.params, sort);\n      }\n      return v.ref;\n    },\n    tuplesRef() {\n      return ref(this.values);\n    },\n    extentRef(scope, field) {\n      return cache(scope, this, 'extent', 'extent', field, false);\n    },\n    domainRef(scope, field) {\n      return cache(scope, this, 'domain', 'values', field, false);\n    },\n    valuesRef(scope, field, sort) {\n      return cache(scope, this, 'vals', 'values', field, sort || true);\n    },\n    lookupRef(scope, field) {\n      return cache(scope, this, 'lookup', 'tupleindex', field, false);\n    },\n    indataRef(scope, field) {\n      return cache(scope, this, 'indata', 'tupleindex', field, true, true);\n    }\n  };\n\n  function parseFacet (spec, scope, group) {\n    const facet = spec.from.facet,\n      name = facet.name,\n      data = getDataRef(facet, scope);\n    let op;\n    if (!facet.name) {\n      vegaUtil.error('Facet must have a name: ' + vegaUtil.stringValue(facet));\n    }\n    if (!facet.data) {\n      vegaUtil.error('Facet must reference a data set: ' + vegaUtil.stringValue(facet));\n    }\n    if (facet.field) {\n      op = scope.add(PreFacet({\n        field: scope.fieldRef(facet.field),\n        pulse: data\n      }));\n    } else if (facet.groupby) {\n      op = scope.add(Facet({\n        key: scope.keyRef(facet.groupby),\n        group: ref(scope.proxy(group.parent)),\n        pulse: data\n      }));\n    } else {\n      vegaUtil.error('Facet must specify groupby or field: ' + vegaUtil.stringValue(facet));\n    }\n\n    // initialize facet subscope\n    const subscope = scope.fork(),\n      source = subscope.add(Collect()),\n      values = subscope.add(Sieve({\n        pulse: ref(source)\n      }));\n    subscope.addData(name, new DataScope(subscope, source, source, values));\n    subscope.addSignal('parent', null);\n\n    // parse faceted subflow\n    op.params.subflow = {\n      $subflow: subscope.parse(spec).toRuntime()\n    };\n  }\n\n  function parseSubflow (spec, scope, input) {\n    const op = scope.add(PreFacet({\n        pulse: input.pulse\n      })),\n      subscope = scope.fork();\n    subscope.add(Sieve());\n    subscope.addSignal('parent', null);\n\n    // parse group mark subflow\n    op.params.subflow = {\n      $subflow: subscope.parse(spec).toRuntime()\n    };\n  }\n\n  function parseTrigger (spec, scope, name) {\n    const remove = spec.remove,\n      insert = spec.insert,\n      toggle = spec.toggle,\n      modify = spec.modify,\n      values = spec.values,\n      op = scope.add(operator());\n    const update = 'if(' + spec.trigger + ',modify(\"' + name + '\",' + [insert, remove, toggle, modify, values].map(_ => _ == null ? 'null' : _).join(',') + '),0)';\n    const expr = vegaFunctions.parseExpression(update, scope);\n    op.update = expr.$expr;\n    op.params = expr.$params;\n  }\n\n  function parseMark (spec, scope) {\n    const role = getRole(spec),\n      group = spec.type === GroupMark,\n      facet = spec.from && spec.from.facet,\n      overlap = spec.overlap;\n    let layout = spec.layout || role === ScopeRole || role === FrameRole,\n      ops,\n      op,\n      store,\n      enc,\n      name,\n      layoutRef,\n      boundRef;\n    const nested = role === MarkRole || layout || facet;\n\n    // resolve input data\n    const input = parseData$1(spec.from, group, scope);\n\n    // data join to map tuples to visual items\n    op = scope.add(DataJoin({\n      key: input.key || (spec.key ? fieldRef$1(spec.key) : undefined),\n      pulse: input.pulse,\n      clean: !group\n    }));\n    const joinRef = ref(op);\n\n    // collect visual items\n    op = store = scope.add(Collect({\n      pulse: joinRef\n    }));\n\n    // connect visual items to scenegraph\n    op = scope.add(Mark({\n      markdef: definition(spec),\n      interactive: interactive(spec.interactive, scope),\n      clip: clip(spec.clip, scope),\n      context: {\n        $context: true\n      },\n      groups: scope.lookup(),\n      parent: scope.signals.parent ? scope.signalRef('parent') : null,\n      index: scope.markpath(),\n      pulse: ref(op)\n    }));\n    const markRef = ref(op);\n\n    // add visual encoders\n    op = enc = scope.add(Encode(parseEncode(spec.encode, spec.type, role, spec.style, scope, {\n      mod: false,\n      pulse: markRef\n    })));\n\n    // monitor parent marks to propagate changes\n    op.params.parent = scope.encode();\n\n    // add post-encoding transforms, if defined\n    if (spec.transform) {\n      spec.transform.forEach(_ => {\n        const tx = parseTransform(_, scope),\n          md = tx.metadata;\n        if (md.generates || md.changes) {\n          vegaUtil.error('Mark transforms should not generate new data.');\n        }\n        if (!md.nomod) enc.params.mod = true; // update encode mod handling\n        tx.params.pulse = ref(op);\n        scope.add(op = tx);\n      });\n    }\n\n    // if item sort specified, perform post-encoding\n    if (spec.sort) {\n      op = scope.add(SortItems({\n        sort: scope.compareRef(spec.sort),\n        pulse: ref(op)\n      }));\n    }\n    const encodeRef = ref(op);\n\n    // add view layout operator if needed\n    if (facet || layout) {\n      layout = scope.add(ViewLayout({\n        layout: scope.objectProperty(spec.layout),\n        legends: scope.legends,\n        mark: markRef,\n        pulse: encodeRef\n      }));\n      layoutRef = ref(layout);\n    }\n\n    // compute bounding boxes\n    const bound = scope.add(Bound({\n      mark: markRef,\n      pulse: layoutRef || encodeRef\n    }));\n    boundRef = ref(bound);\n\n    // if group mark, recurse to parse nested content\n    if (group) {\n      // juggle layout & bounds to ensure they run *after* any faceting transforms\n      if (nested) {\n        ops = scope.operators;\n        ops.pop();\n        if (layout) ops.pop();\n      }\n      scope.pushState(encodeRef, layoutRef || boundRef, joinRef);\n      facet ? parseFacet(spec, scope, input) // explicit facet\n      : nested ? parseSubflow(spec, scope, input) // standard mark group\n      : scope.parse(spec); // guide group, we can avoid nested scopes\n      scope.popState();\n      if (nested) {\n        if (layout) ops.push(layout);\n        ops.push(bound);\n      }\n    }\n\n    // if requested, add overlap removal transform\n    if (overlap) {\n      boundRef = parseOverlap(overlap, boundRef, scope);\n    }\n\n    // render / sieve items\n    const render = scope.add(Render({\n        pulse: boundRef\n      })),\n      sieve = scope.add(Sieve({\n        pulse: ref(render)\n      }, undefined, scope.parent()));\n\n    // if mark is named, make accessible as reactive geometry\n    // add trigger updates if defined\n    if (spec.name != null) {\n      name = spec.name;\n      scope.addData(name, new DataScope(scope, store, render, sieve));\n      if (spec.on) spec.on.forEach(on => {\n        if (on.insert || on.remove || on.toggle) {\n          vegaUtil.error('Marks only support modify triggers.');\n        }\n        parseTrigger(on, scope, name);\n      });\n    }\n  }\n  function parseOverlap(overlap, source, scope) {\n    const method = overlap.method,\n      bound = overlap.bound,\n      sep = overlap.separation;\n    const params = {\n      separation: isSignal(sep) ? scope.signalRef(sep.signal) : sep,\n      method: isSignal(method) ? scope.signalRef(method.signal) : method,\n      pulse: source\n    };\n    if (overlap.order) {\n      params.sort = scope.compareRef({\n        field: overlap.order\n      });\n    }\n    if (bound) {\n      const tol = bound.tolerance;\n      params.boundTolerance = isSignal(tol) ? scope.signalRef(tol.signal) : +tol;\n      params.boundScale = scope.scaleRef(bound.scale);\n      params.boundOrient = bound.orient;\n    }\n    return ref(scope.add(Overlap(params)));\n  }\n\n  function parseLegend (spec, scope) {\n    const config = scope.config.legend,\n      encode = spec.encode || {},\n      _ = lookup(spec, config),\n      legendEncode = encode.legend || {},\n      name = legendEncode.name || undefined,\n      interactive = legendEncode.interactive,\n      style = legendEncode.style,\n      scales = {};\n    let scale = 0,\n      entryLayout,\n      params,\n      children;\n\n    // resolve scales and 'canonical' scale name\n    LegendScales.forEach(s => spec[s] ? (scales[s] = spec[s], scale = scale || spec[s]) : 0);\n    if (!scale) vegaUtil.error('Missing valid scale for legend.');\n\n    // resolve legend type (symbol, gradient, or discrete gradient)\n    const type = legendType(spec, scope.scaleType(scale));\n\n    // single-element data source for legend group\n    const datum = {\n      title: spec.title != null,\n      scales: scales,\n      type: type,\n      vgrad: type !== 'symbol' && _.isVertical()\n    };\n    const dataRef = ref(scope.add(Collect(null, [datum])));\n\n    // encoding properties for legend entry sub-group\n    const entryEncode = {\n      enter: {\n        x: {\n          value: 0\n        },\n        y: {\n          value: 0\n        }\n      }\n    };\n\n    // data source for legend values\n    const entryRef = ref(scope.add(LegendEntries(params = {\n      type: type,\n      scale: scope.scaleRef(scale),\n      count: scope.objectProperty(_('tickCount')),\n      limit: scope.property(_('symbolLimit')),\n      values: scope.objectProperty(spec.values),\n      minstep: scope.property(spec.tickMinStep),\n      formatType: scope.property(spec.formatType),\n      formatSpecifier: scope.property(spec.format)\n    })));\n\n    // continuous gradient legend\n    if (type === Gradient) {\n      children = [legendGradient(spec, scale, config, encode.gradient), legendGradientLabels(spec, config, encode.labels, entryRef)];\n      // adjust default tick count based on the gradient length\n      params.count = params.count || scope.signalRef(`max(2,2*floor((${deref(_.gradientLength())})/100))`);\n    }\n\n    // discrete gradient legend\n    else if (type === Discrete) {\n      children = [legendGradientDiscrete(spec, scale, config, encode.gradient, entryRef), legendGradientLabels(spec, config, encode.labels, entryRef)];\n    }\n\n    // symbol legend\n    else {\n      // determine legend symbol group layout\n      entryLayout = legendSymbolLayout(spec, config);\n      children = [legendSymbolGroups(spec, config, encode, entryRef, deref(entryLayout.columns))];\n      // pass symbol size information to legend entry generator\n      params.size = sizeExpression(spec, scope, children[0].marks);\n    }\n\n    // generate legend marks\n    children = [guideGroup({\n      role: LegendEntryRole,\n      from: dataRef,\n      encode: entryEncode,\n      marks: children,\n      layout: entryLayout,\n      interactive\n    })];\n\n    // include legend title if defined\n    if (datum.title) {\n      children.push(legendTitle(spec, config, encode.title, dataRef));\n    }\n\n    // parse legend specification\n    return parseMark(guideGroup({\n      role: LegendRole,\n      from: dataRef,\n      encode: extendEncode(buildLegendEncode(_, spec, config), legendEncode, Skip),\n      marks: children,\n      aria: _('aria'),\n      description: _('description'),\n      zindex: _('zindex'),\n      name,\n      interactive,\n      style\n    }), scope);\n  }\n  function legendType(spec, scaleType) {\n    let type = spec.type || Symbols;\n    if (!spec.type && scaleCount(spec) === 1 && (spec.fill || spec.stroke)) {\n      type = vegaScale.isContinuous(scaleType) ? Gradient : vegaScale.isDiscretizing(scaleType) ? Discrete : Symbols;\n    }\n    return type !== Gradient ? type : vegaScale.isDiscretizing(scaleType) ? Discrete : Gradient;\n  }\n  function scaleCount(spec) {\n    return LegendScales.reduce((count, type) => count + (spec[type] ? 1 : 0), 0);\n  }\n  function buildLegendEncode(_, spec, config) {\n    const encode = {\n      enter: {},\n      update: {}\n    };\n    addEncoders(encode, {\n      orient: _('orient'),\n      offset: _('offset'),\n      padding: _('padding'),\n      titlePadding: _('titlePadding'),\n      cornerRadius: _('cornerRadius'),\n      fill: _('fillColor'),\n      stroke: _('strokeColor'),\n      strokeWidth: config.strokeWidth,\n      strokeDash: config.strokeDash,\n      x: _('legendX'),\n      y: _('legendY'),\n      // accessibility support\n      format: spec.format,\n      formatType: spec.formatType\n    });\n    return encode;\n  }\n  function sizeExpression(spec, scope, marks) {\n    const size = deref(getChannel('size', spec, marks)),\n      strokeWidth = deref(getChannel('strokeWidth', spec, marks)),\n      fontSize = deref(getFontSize(marks[1].encode, scope, GuideLabelStyle));\n    return vegaFunctions.parseExpression(`max(ceil(sqrt(${size})+${strokeWidth}),${fontSize})`, scope);\n  }\n  function getChannel(name, spec, marks) {\n    return spec[name] ? `scale(\"${spec[name]}\",datum)` : getEncoding(name, marks[0].encode);\n  }\n  function getFontSize(encode, scope, style) {\n    return getEncoding('fontSize', encode) || getStyle('fontSize', scope, style);\n  }\n\n  const angleExpr = `item.orient===\"${Left}\"?-90:item.orient===\"${Right}\"?90:0`;\n  function parseTitle (spec, scope) {\n    spec = vegaUtil.isString(spec) ? {\n      text: spec\n    } : spec;\n    const _ = lookup(spec, scope.config.title),\n      encode = spec.encode || {},\n      userEncode = encode.group || {},\n      name = userEncode.name || undefined,\n      interactive = userEncode.interactive,\n      style = userEncode.style,\n      children = [];\n\n    // single-element data source for group title\n    const datum = {},\n      dataRef = ref(scope.add(Collect(null, [datum])));\n\n    // include title text\n    children.push(buildTitle(spec, _, titleEncode(spec), dataRef));\n\n    // include subtitle text\n    if (spec.subtitle) {\n      children.push(buildSubTitle(spec, _, encode.subtitle, dataRef));\n    }\n\n    // parse title specification\n    return parseMark(guideGroup({\n      role: TitleRole,\n      from: dataRef,\n      encode: groupEncode(_, userEncode),\n      marks: children,\n      aria: _('aria'),\n      description: _('description'),\n      zindex: _('zindex'),\n      name,\n      interactive,\n      style\n    }), scope);\n  }\n\n  // provide backwards-compatibility for title custom encode;\n  // the top-level encode block has been *deprecated*.\n  function titleEncode(spec) {\n    const encode = spec.encode;\n    return encode && encode.title || vegaUtil.extend({\n      name: spec.name,\n      interactive: spec.interactive,\n      style: spec.style\n    }, encode);\n  }\n  function groupEncode(_, userEncode) {\n    const encode = {\n      enter: {},\n      update: {}\n    };\n    addEncoders(encode, {\n      orient: _('orient'),\n      anchor: _('anchor'),\n      align: {\n        signal: alignExpr$1\n      },\n      angle: {\n        signal: angleExpr\n      },\n      limit: _('limit'),\n      frame: _('frame'),\n      offset: _('offset') || 0,\n      padding: _('subtitlePadding')\n    });\n    return extendEncode(encode, userEncode, Skip);\n  }\n  function buildTitle(spec, _, userEncode, dataRef) {\n    const zero = {\n        value: 0\n      },\n      text = spec.text,\n      encode = {\n        enter: {\n          opacity: zero\n        },\n        update: {\n          opacity: {\n            value: 1\n          }\n        },\n        exit: {\n          opacity: zero\n        }\n      };\n    addEncoders(encode, {\n      text: text,\n      align: {\n        signal: 'item.mark.group.align'\n      },\n      angle: {\n        signal: 'item.mark.group.angle'\n      },\n      limit: {\n        signal: 'item.mark.group.limit'\n      },\n      baseline: 'top',\n      dx: _('dx'),\n      dy: _('dy'),\n      fill: _('color'),\n      font: _('font'),\n      fontSize: _('fontSize'),\n      fontStyle: _('fontStyle'),\n      fontWeight: _('fontWeight'),\n      lineHeight: _('lineHeight')\n    }, {\n      // update\n      align: _('align'),\n      angle: _('angle'),\n      baseline: _('baseline')\n    });\n    return guideMark({\n      type: TextMark,\n      role: TitleTextRole,\n      style: GroupTitleStyle,\n      from: dataRef,\n      encode\n    }, userEncode);\n  }\n  function buildSubTitle(spec, _, userEncode, dataRef) {\n    const zero = {\n        value: 0\n      },\n      text = spec.subtitle,\n      encode = {\n        enter: {\n          opacity: zero\n        },\n        update: {\n          opacity: {\n            value: 1\n          }\n        },\n        exit: {\n          opacity: zero\n        }\n      };\n    addEncoders(encode, {\n      text: text,\n      align: {\n        signal: 'item.mark.group.align'\n      },\n      angle: {\n        signal: 'item.mark.group.angle'\n      },\n      limit: {\n        signal: 'item.mark.group.limit'\n      },\n      baseline: 'top',\n      dx: _('dx'),\n      dy: _('dy'),\n      fill: _('subtitleColor'),\n      font: _('subtitleFont'),\n      fontSize: _('subtitleFontSize'),\n      fontStyle: _('subtitleFontStyle'),\n      fontWeight: _('subtitleFontWeight'),\n      lineHeight: _('subtitleLineHeight')\n    }, {\n      // update\n      align: _('align'),\n      angle: _('angle'),\n      baseline: _('baseline')\n    });\n    return guideMark({\n      type: TextMark,\n      role: TitleSubtitleRole,\n      style: GroupSubtitleStyle,\n      from: dataRef,\n      encode\n    }, userEncode);\n  }\n\n  function parseData(data, scope) {\n    const transforms = [];\n    if (data.transform) {\n      data.transform.forEach(tx => {\n        transforms.push(parseTransform(tx, scope));\n      });\n    }\n    if (data.on) {\n      data.on.forEach(on => {\n        parseTrigger(on, scope, data.name);\n      });\n    }\n    scope.addDataPipeline(data.name, analyze(data, scope, transforms));\n  }\n\n  /**\n   * Analyze a data pipeline, add needed operators.\n   */\n  function analyze(data, scope, ops) {\n    const output = [];\n    let source = null,\n      modify = false,\n      generate = false,\n      upstream,\n      i,\n      n,\n      t,\n      m;\n    if (data.values) {\n      // hard-wired input data set\n      if (isSignal(data.values) || hasSignal(data.format)) {\n        // if either values is signal or format has signal, use dynamic loader\n        output.push(load(scope, data));\n        output.push(source = collect());\n      } else {\n        // otherwise, ingest upon dataflow init\n        output.push(source = collect({\n          $ingest: data.values,\n          $format: data.format\n        }));\n      }\n    } else if (data.url) {\n      // load data from external source\n      if (hasSignal(data.url) || hasSignal(data.format)) {\n        // if either url or format has signal, use dynamic loader\n        output.push(load(scope, data));\n        output.push(source = collect());\n      } else {\n        // otherwise, request load upon dataflow init\n        output.push(source = collect({\n          $request: data.url,\n          $format: data.format\n        }));\n      }\n    } else if (data.source) {\n      // derives from one or more other data sets\n      source = upstream = vegaUtil.array(data.source).map(d => ref(scope.getData(d).output));\n      output.push(null); // populate later\n    }\n\n    // scan data transforms, add collectors as needed\n    for (i = 0, n = ops.length; i < n; ++i) {\n      t = ops[i];\n      m = t.metadata;\n      if (!source && !m.source) {\n        output.push(source = collect());\n      }\n      output.push(t);\n      if (m.generates) generate = true;\n      if (m.modifies && !generate) modify = true;\n      if (m.source) source = t;else if (m.changes) source = null;\n    }\n    if (upstream) {\n      n = upstream.length - 1;\n      output[0] = Relay({\n        derive: modify,\n        pulse: n ? upstream : upstream[0]\n      });\n      if (modify || n) {\n        // collect derived and multi-pulse tuples\n        output.splice(1, 0, collect());\n      }\n    }\n    if (!source) output.push(collect());\n    output.push(Sieve({}));\n    return output;\n  }\n  function collect(values) {\n    const s = Collect({}, values);\n    s.metadata = {\n      source: true\n    };\n    return s;\n  }\n  function load(scope, data) {\n    return Load({\n      url: data.url ? scope.property(data.url) : undefined,\n      async: data.async ? scope.property(data.async) : undefined,\n      values: data.values ? scope.property(data.values) : undefined,\n      format: scope.objectProperty(data.format)\n    });\n  }\n\n  const isX = orient => orient === Bottom || orient === Top;\n\n  // get sign coefficient based on axis orient\n  const getSign = (orient, a, b) => isSignal(orient) ? ifLeftTopExpr(orient.signal, a, b) : orient === Left || orient === Top ? a : b;\n\n  // condition on axis x-direction\n  const ifX = (orient, a, b) => isSignal(orient) ? ifXEnc(orient.signal, a, b) : isX(orient) ? a : b;\n\n  // condition on axis y-direction\n  const ifY = (orient, a, b) => isSignal(orient) ? ifYEnc(orient.signal, a, b) : isX(orient) ? b : a;\n  const ifTop = (orient, a, b) => isSignal(orient) ? ifTopExpr(orient.signal, a, b) : orient === Top ? {\n    value: a\n  } : {\n    value: b\n  };\n  const ifRight = (orient, a, b) => isSignal(orient) ? ifRightExpr(orient.signal, a, b) : orient === Right ? {\n    value: a\n  } : {\n    value: b\n  };\n  const ifXEnc = ($orient, a, b) => ifEnc(`${$orient} === '${Top}' || ${$orient} === '${Bottom}'`, a, b);\n  const ifYEnc = ($orient, a, b) => ifEnc(`${$orient} !== '${Top}' && ${$orient} !== '${Bottom}'`, a, b);\n  const ifLeftTopExpr = ($orient, a, b) => ifExpr(`${$orient} === '${Left}' || ${$orient} === '${Top}'`, a, b);\n  const ifTopExpr = ($orient, a, b) => ifExpr(`${$orient} === '${Top}'`, a, b);\n  const ifRightExpr = ($orient, a, b) => ifExpr(`${$orient} === '${Right}'`, a, b);\n  const ifEnc = (test, a, b) => {\n    // ensure inputs are encoder objects (or null)\n    a = a != null ? encoder(a) : a;\n    b = b != null ? encoder(b) : b;\n    if (isSimple(a) && isSimple(b)) {\n      // if possible generate simple signal expression\n      a = a ? a.signal || vegaUtil.stringValue(a.value) : null;\n      b = b ? b.signal || vegaUtil.stringValue(b.value) : null;\n      return {\n        signal: `${test} ? (${a}) : (${b})`\n      };\n    } else {\n      // otherwise generate rule set\n      return [vegaUtil.extend({\n        test\n      }, a)].concat(b || []);\n    }\n  };\n  const isSimple = enc => enc == null || Object.keys(enc).length === 1;\n  const ifExpr = (test, a, b) => ({\n    signal: `${test} ? (${toExpr(a)}) : (${toExpr(b)})`\n  });\n  const ifOrient = ($orient, t, b, l, r) => ({\n    signal: (l != null ? `${$orient} === '${Left}' ? (${toExpr(l)}) : ` : '') + (b != null ? `${$orient} === '${Bottom}' ? (${toExpr(b)}) : ` : '') + (r != null ? `${$orient} === '${Right}' ? (${toExpr(r)}) : ` : '') + (t != null ? `${$orient} === '${Top}' ? (${toExpr(t)}) : ` : '') + '(null)'\n  });\n  const toExpr = v => isSignal(v) ? v.signal : v == null ? null : vegaUtil.stringValue(v);\n  const mult = (sign, value) => value === 0 ? 0 : isSignal(sign) ? {\n    signal: `(${sign.signal}) * ${value}`\n  } : {\n    value: sign * value\n  };\n  const patch = (value, base) => {\n    const s = value.signal;\n    return s && s.endsWith('(null)') ? {\n      signal: s.slice(0, -6) + base.signal\n    } : value;\n  };\n\n  function fallback(prop, config, axisConfig, style) {\n    let styleProp;\n    if (config && vegaUtil.hasOwnProperty(config, prop)) {\n      return config[prop];\n    } else if (vegaUtil.hasOwnProperty(axisConfig, prop)) {\n      return axisConfig[prop];\n    } else if (prop.startsWith('title')) {\n      switch (prop) {\n        case 'titleColor':\n          styleProp = 'fill';\n          break;\n        case 'titleFont':\n        case 'titleFontSize':\n        case 'titleFontWeight':\n          styleProp = prop[5].toLowerCase() + prop.slice(6);\n      }\n      return style[GuideTitleStyle][styleProp];\n    } else if (prop.startsWith('label')) {\n      switch (prop) {\n        case 'labelColor':\n          styleProp = 'fill';\n          break;\n        case 'labelFont':\n        case 'labelFontSize':\n          styleProp = prop[5].toLowerCase() + prop.slice(6);\n      }\n      return style[GuideLabelStyle][styleProp];\n    }\n    return null;\n  }\n  function keys(objects) {\n    const map = {};\n    for (const obj of objects) {\n      if (!obj) continue;\n      for (const key in obj) map[key] = 1;\n    }\n    return Object.keys(map);\n  }\n  function axisConfig (spec, scope) {\n    var config = scope.config,\n      style = config.style,\n      axis = config.axis,\n      band = scope.scaleType(spec.scale) === 'band' && config.axisBand,\n      orient = spec.orient,\n      xy,\n      or,\n      key;\n    if (isSignal(orient)) {\n      const xyKeys = keys([config.axisX, config.axisY]),\n        orientKeys = keys([config.axisTop, config.axisBottom, config.axisLeft, config.axisRight]);\n      xy = {};\n      for (key of xyKeys) {\n        xy[key] = ifX(orient, fallback(key, config.axisX, axis, style), fallback(key, config.axisY, axis, style));\n      }\n      or = {};\n      for (key of orientKeys) {\n        or[key] = ifOrient(orient.signal, fallback(key, config.axisTop, axis, style), fallback(key, config.axisBottom, axis, style), fallback(key, config.axisLeft, axis, style), fallback(key, config.axisRight, axis, style));\n      }\n    } else {\n      xy = orient === Top || orient === Bottom ? config.axisX : config.axisY;\n      or = config['axis' + orient[0].toUpperCase() + orient.slice(1)];\n    }\n    const result = xy || or || band ? vegaUtil.extend({}, axis, xy, or, band) : axis;\n    return result;\n  }\n\n  function axisDomain (spec, config, userEncode, dataRef) {\n    const _ = lookup(spec, config),\n      orient = spec.orient;\n    let enter, update;\n    const encode = {\n      enter: enter = {\n        opacity: zero\n      },\n      update: update = {\n        opacity: one\n      },\n      exit: {\n        opacity: zero\n      }\n    };\n    addEncoders(encode, {\n      stroke: _('domainColor'),\n      strokeCap: _('domainCap'),\n      strokeDash: _('domainDash'),\n      strokeDashOffset: _('domainDashOffset'),\n      strokeWidth: _('domainWidth'),\n      strokeOpacity: _('domainOpacity')\n    });\n    const pos0 = position(spec, 0);\n    const pos1 = position(spec, 1);\n    enter.x = update.x = ifX(orient, pos0, zero);\n    enter.x2 = update.x2 = ifX(orient, pos1);\n    enter.y = update.y = ifY(orient, pos0, zero);\n    enter.y2 = update.y2 = ifY(orient, pos1);\n    return guideMark({\n      type: RuleMark,\n      role: AxisDomainRole,\n      from: dataRef,\n      encode\n    }, userEncode);\n  }\n  function position(spec, pos) {\n    return {\n      scale: spec.scale,\n      range: pos\n    };\n  }\n\n  function axisGrid (spec, config, userEncode, dataRef, band) {\n    const _ = lookup(spec, config),\n      orient = spec.orient,\n      vscale = spec.gridScale,\n      sign = getSign(orient, 1, -1),\n      offset = offsetValue(spec.offset, sign);\n    let enter, exit, update;\n    const encode = {\n      enter: enter = {\n        opacity: zero\n      },\n      update: update = {\n        opacity: one\n      },\n      exit: exit = {\n        opacity: zero\n      }\n    };\n    addEncoders(encode, {\n      stroke: _('gridColor'),\n      strokeCap: _('gridCap'),\n      strokeDash: _('gridDash'),\n      strokeDashOffset: _('gridDashOffset'),\n      strokeOpacity: _('gridOpacity'),\n      strokeWidth: _('gridWidth')\n    });\n    const tickPos = {\n      scale: spec.scale,\n      field: Value,\n      band: band.band,\n      extra: band.extra,\n      offset: band.offset,\n      round: _('tickRound')\n    };\n    const sz = ifX(orient, {\n      signal: 'height'\n    }, {\n      signal: 'width'\n    });\n    const gridStart = vscale ? {\n      scale: vscale,\n      range: 0,\n      mult: sign,\n      offset: offset\n    } : {\n      value: 0,\n      offset: offset\n    };\n    const gridEnd = vscale ? {\n      scale: vscale,\n      range: 1,\n      mult: sign,\n      offset: offset\n    } : vegaUtil.extend(sz, {\n      mult: sign,\n      offset: offset\n    });\n    enter.x = update.x = ifX(orient, tickPos, gridStart);\n    enter.y = update.y = ifY(orient, tickPos, gridStart);\n    enter.x2 = update.x2 = ifY(orient, gridEnd);\n    enter.y2 = update.y2 = ifX(orient, gridEnd);\n    exit.x = ifX(orient, tickPos);\n    exit.y = ifY(orient, tickPos);\n    return guideMark({\n      type: RuleMark,\n      role: AxisGridRole,\n      key: Value,\n      from: dataRef,\n      encode\n    }, userEncode);\n  }\n  function offsetValue(offset, sign) {\n    if (sign === 1) ; else if (!vegaUtil.isObject(offset)) {\n      offset = isSignal(sign) ? {\n        signal: `(${sign.signal}) * (${offset || 0})`\n      } : sign * (offset || 0);\n    } else {\n      let entry = offset = vegaUtil.extend({}, offset);\n      while (entry.mult != null) {\n        if (!vegaUtil.isObject(entry.mult)) {\n          entry.mult = isSignal(sign) // no offset if sign === 1\n          ? {\n            signal: `(${entry.mult}) * (${sign.signal})`\n          } : entry.mult * sign;\n          return offset;\n        } else {\n          entry = entry.mult = vegaUtil.extend({}, entry.mult);\n        }\n      }\n      entry.mult = sign;\n    }\n    return offset;\n  }\n\n  function axisTicks (spec, config, userEncode, dataRef, size, band) {\n    const _ = lookup(spec, config),\n      orient = spec.orient,\n      sign = getSign(orient, -1, 1);\n    let enter, exit, update;\n    const encode = {\n      enter: enter = {\n        opacity: zero\n      },\n      update: update = {\n        opacity: one\n      },\n      exit: exit = {\n        opacity: zero\n      }\n    };\n    addEncoders(encode, {\n      stroke: _('tickColor'),\n      strokeCap: _('tickCap'),\n      strokeDash: _('tickDash'),\n      strokeDashOffset: _('tickDashOffset'),\n      strokeOpacity: _('tickOpacity'),\n      strokeWidth: _('tickWidth')\n    });\n    const tickSize = encoder(size);\n    tickSize.mult = sign;\n    const tickPos = {\n      scale: spec.scale,\n      field: Value,\n      band: band.band,\n      extra: band.extra,\n      offset: band.offset,\n      round: _('tickRound')\n    };\n    update.y = enter.y = ifX(orient, zero, tickPos);\n    update.y2 = enter.y2 = ifX(orient, tickSize);\n    exit.x = ifX(orient, tickPos);\n    update.x = enter.x = ifY(orient, zero, tickPos);\n    update.x2 = enter.x2 = ifY(orient, tickSize);\n    exit.y = ifY(orient, tickPos);\n    return guideMark({\n      type: RuleMark,\n      role: AxisTickRole,\n      key: Value,\n      from: dataRef,\n      encode\n    }, userEncode);\n  }\n\n  function flushExpr(scale, threshold, a, b, c) {\n    return {\n      signal: 'flush(range(\"' + scale + '\"), ' + 'scale(\"' + scale + '\", datum.value), ' + threshold + ',' + a + ',' + b + ',' + c + ')'\n    };\n  }\n  function axisLabels (spec, config, userEncode, dataRef, size, band) {\n    const _ = lookup(spec, config),\n      orient = spec.orient,\n      scale = spec.scale,\n      sign = getSign(orient, -1, 1),\n      flush = deref(_('labelFlush')),\n      flushOffset = deref(_('labelFlushOffset')),\n      labelAlign = _('labelAlign'),\n      labelBaseline = _('labelBaseline');\n    let flushOn = flush === 0 || !!flush,\n      update;\n    const tickSize = encoder(size);\n    tickSize.mult = sign;\n    tickSize.offset = encoder(_('labelPadding') || 0);\n    tickSize.offset.mult = sign;\n    const tickPos = {\n      scale: scale,\n      field: Value,\n      band: 0.5,\n      offset: extendOffset(band.offset, _('labelOffset'))\n    };\n    const align = ifX(orient, flushOn ? flushExpr(scale, flush, '\"left\"', '\"right\"', '\"center\"') : {\n      value: 'center'\n    }, ifRight(orient, 'left', 'right'));\n    const baseline = ifX(orient, ifTop(orient, 'bottom', 'top'), flushOn ? flushExpr(scale, flush, '\"top\"', '\"bottom\"', '\"middle\"') : {\n      value: 'middle'\n    });\n    const offsetExpr = flushExpr(scale, flush, `-(${flushOffset})`, flushOffset, 0);\n    flushOn = flushOn && flushOffset;\n    const enter = {\n      opacity: zero,\n      x: ifX(orient, tickPos, tickSize),\n      y: ifY(orient, tickPos, tickSize)\n    };\n    const encode = {\n      enter: enter,\n      update: update = {\n        opacity: one,\n        text: {\n          field: Label\n        },\n        x: enter.x,\n        y: enter.y,\n        align,\n        baseline\n      },\n      exit: {\n        opacity: zero,\n        x: enter.x,\n        y: enter.y\n      }\n    };\n    addEncoders(encode, {\n      dx: !labelAlign && flushOn ? ifX(orient, offsetExpr) : null,\n      dy: !labelBaseline && flushOn ? ifY(orient, offsetExpr) : null\n    });\n    addEncoders(encode, {\n      angle: _('labelAngle'),\n      fill: _('labelColor'),\n      fillOpacity: _('labelOpacity'),\n      font: _('labelFont'),\n      fontSize: _('labelFontSize'),\n      fontWeight: _('labelFontWeight'),\n      fontStyle: _('labelFontStyle'),\n      limit: _('labelLimit'),\n      lineHeight: _('labelLineHeight')\n    }, {\n      align: labelAlign,\n      baseline: labelBaseline\n    });\n    const bound = _('labelBound');\n    let overlap = _('labelOverlap');\n\n    // if overlap method or bound defined, request label overlap removal\n    overlap = overlap || bound ? {\n      separation: _('labelSeparation'),\n      method: overlap,\n      order: 'datum.index',\n      bound: bound ? {\n        scale,\n        orient,\n        tolerance: bound\n      } : null\n    } : undefined;\n    if (update.align !== align) {\n      update.align = patch(update.align, align);\n    }\n    if (update.baseline !== baseline) {\n      update.baseline = patch(update.baseline, baseline);\n    }\n    return guideMark({\n      type: TextMark,\n      role: AxisLabelRole,\n      style: GuideLabelStyle,\n      key: Value,\n      from: dataRef,\n      encode,\n      overlap\n    }, userEncode);\n  }\n\n  function axisTitle (spec, config, userEncode, dataRef) {\n    const _ = lookup(spec, config),\n      orient = spec.orient,\n      sign = getSign(orient, -1, 1);\n    let enter, update;\n    const encode = {\n      enter: enter = {\n        opacity: zero,\n        anchor: encoder(_('titleAnchor', null)),\n        align: {\n          signal: alignExpr$1\n        }\n      },\n      update: update = vegaUtil.extend({}, enter, {\n        opacity: one,\n        text: encoder(spec.title)\n      }),\n      exit: {\n        opacity: zero\n      }\n    };\n    const titlePos = {\n      signal: `lerp(range(\"${spec.scale}\"), ${anchorExpr(0, 1, 0.5)})`\n    };\n    update.x = ifX(orient, titlePos);\n    update.y = ifY(orient, titlePos);\n    enter.angle = ifX(orient, zero, mult(sign, 90));\n    enter.baseline = ifX(orient, ifTop(orient, Bottom, Top), {\n      value: Bottom\n    });\n    update.angle = enter.angle;\n    update.baseline = enter.baseline;\n    addEncoders(encode, {\n      fill: _('titleColor'),\n      fillOpacity: _('titleOpacity'),\n      font: _('titleFont'),\n      fontSize: _('titleFontSize'),\n      fontStyle: _('titleFontStyle'),\n      fontWeight: _('titleFontWeight'),\n      limit: _('titleLimit'),\n      lineHeight: _('titleLineHeight')\n    }, {\n      // require update\n      align: _('titleAlign'),\n      angle: _('titleAngle'),\n      baseline: _('titleBaseline')\n    });\n    autoLayout(_, orient, encode, userEncode);\n    encode.update.align = patch(encode.update.align, enter.align);\n    encode.update.angle = patch(encode.update.angle, enter.angle);\n    encode.update.baseline = patch(encode.update.baseline, enter.baseline);\n    return guideMark({\n      type: TextMark,\n      role: AxisTitleRole,\n      style: GuideTitleStyle,\n      from: dataRef,\n      encode\n    }, userEncode);\n  }\n  function autoLayout(_, orient, encode, userEncode) {\n    const auto = (value, dim) => value != null ? (encode.update[dim] = patch(encoder(value), encode.update[dim]), false) : !has(dim, userEncode) ? true : false;\n    const autoY = auto(_('titleX'), 'x'),\n      autoX = auto(_('titleY'), 'y');\n    encode.enter.auto = autoX === autoY ? encoder(autoX) : ifX(orient, encoder(autoX), encoder(autoY));\n  }\n\n  function parseAxis (spec, scope) {\n    const config = axisConfig(spec, scope),\n      encode = spec.encode || {},\n      axisEncode = encode.axis || {},\n      name = axisEncode.name || undefined,\n      interactive = axisEncode.interactive,\n      style = axisEncode.style,\n      _ = lookup(spec, config),\n      band = tickBand(_);\n\n    // single-element data source for axis group\n    const datum = {\n      scale: spec.scale,\n      ticks: !!_('ticks'),\n      labels: !!_('labels'),\n      grid: !!_('grid'),\n      domain: !!_('domain'),\n      title: spec.title != null\n    };\n    const dataRef = ref(scope.add(Collect({}, [datum])));\n\n    // data source for axis ticks\n    const ticksRef = ref(scope.add(AxisTicks({\n      scale: scope.scaleRef(spec.scale),\n      extra: scope.property(band.extra),\n      count: scope.objectProperty(spec.tickCount),\n      values: scope.objectProperty(spec.values),\n      minstep: scope.property(spec.tickMinStep),\n      formatType: scope.property(spec.formatType),\n      formatSpecifier: scope.property(spec.format)\n    })));\n\n    // generate axis marks\n    const children = [];\n    let size;\n\n    // include axis gridlines if requested\n    if (datum.grid) {\n      children.push(axisGrid(spec, config, encode.grid, ticksRef, band));\n    }\n\n    // include axis ticks if requested\n    if (datum.ticks) {\n      size = _('tickSize');\n      children.push(axisTicks(spec, config, encode.ticks, ticksRef, size, band));\n    }\n\n    // include axis labels if requested\n    if (datum.labels) {\n      size = datum.ticks ? size : 0;\n      children.push(axisLabels(spec, config, encode.labels, ticksRef, size, band));\n    }\n\n    // include axis domain path if requested\n    if (datum.domain) {\n      children.push(axisDomain(spec, config, encode.domain, dataRef));\n    }\n\n    // include axis title if defined\n    if (datum.title) {\n      children.push(axisTitle(spec, config, encode.title, dataRef));\n    }\n\n    // parse axis specification\n    return parseMark(guideGroup({\n      role: AxisRole,\n      from: dataRef,\n      encode: extendEncode(buildAxisEncode(_, spec), axisEncode, Skip),\n      marks: children,\n      aria: _('aria'),\n      description: _('description'),\n      zindex: _('zindex'),\n      name,\n      interactive,\n      style\n    }), scope);\n  }\n  function buildAxisEncode(_, spec) {\n    const encode = {\n      enter: {},\n      update: {}\n    };\n    addEncoders(encode, {\n      orient: _('orient'),\n      offset: _('offset') || 0,\n      position: value(spec.position, 0),\n      titlePadding: _('titlePadding'),\n      minExtent: _('minExtent'),\n      maxExtent: _('maxExtent'),\n      range: {\n        signal: `abs(span(range(\"${spec.scale}\")))`\n      },\n      translate: _('translate'),\n      // accessibility support\n      format: spec.format,\n      formatType: spec.formatType\n    });\n    return encode;\n  }\n\n  function parseScope (spec, scope, preprocessed) {\n    const signals = vegaUtil.array(spec.signals),\n      scales = vegaUtil.array(spec.scales);\n\n    // parse signal definitions, if not already preprocessed\n    if (!preprocessed) signals.forEach(_ => parseSignal(_, scope));\n\n    // parse cartographic projection definitions\n    vegaUtil.array(spec.projections).forEach(_ => parseProjection(_, scope));\n\n    // initialize scale references\n    scales.forEach(_ => initScale(_, scope));\n\n    // parse data sources\n    vegaUtil.array(spec.data).forEach(_ => parseData(_, scope));\n\n    // parse scale definitions\n    scales.forEach(_ => parseScale(_, scope));\n\n    // parse signal updates\n    (preprocessed || signals).forEach(_ => parseSignalUpdates(_, scope));\n\n    // parse axis definitions\n    vegaUtil.array(spec.axes).forEach(_ => parseAxis(_, scope));\n\n    // parse mark definitions\n    vegaUtil.array(spec.marks).forEach(_ => parseMark(_, scope));\n\n    // parse legend definitions\n    vegaUtil.array(spec.legends).forEach(_ => parseLegend(_, scope));\n\n    // parse title, if defined\n    if (spec.title) parseTitle(spec.title, scope);\n\n    // parse collected lambda (anonymous) expressions\n    scope.parseLambdas();\n    return scope;\n  }\n\n  const rootEncode = spec => extendEncode({\n    enter: {\n      x: {\n        value: 0\n      },\n      y: {\n        value: 0\n      }\n    },\n    update: {\n      width: {\n        signal: 'width'\n      },\n      height: {\n        signal: 'height'\n      }\n    }\n  }, spec);\n  function parseView(spec, scope) {\n    const config = scope.config;\n\n    // add scenegraph root\n    const root = ref(scope.root = scope.add(operator()));\n\n    // parse top-level signal definitions\n    const signals = collectSignals(spec, config);\n    signals.forEach(_ => parseSignal(_, scope));\n\n    // assign description, event, legend, and locale configuration\n    scope.description = spec.description || config.description;\n    scope.eventConfig = config.events;\n    scope.legends = scope.objectProperty(config.legend && config.legend.layout);\n    scope.locale = config.locale;\n\n    // store root group item\n    const input = scope.add(Collect());\n\n    // encode root group item\n    const encode = scope.add(Encode(parseEncode(rootEncode(spec.encode), GroupMark, FrameRole, spec.style, scope, {\n      pulse: ref(input)\n    })));\n\n    // perform view layout\n    const parent = scope.add(ViewLayout({\n      layout: scope.objectProperty(spec.layout),\n      legends: scope.legends,\n      autosize: scope.signalRef('autosize'),\n      mark: root,\n      pulse: ref(encode)\n    }));\n    scope.operators.pop();\n\n    // parse remainder of specification\n    scope.pushState(ref(encode), ref(parent), null);\n    parseScope(spec, scope, signals);\n    scope.operators.push(parent);\n\n    // bound / render / sieve root item\n    let op = scope.add(Bound({\n      mark: root,\n      pulse: ref(parent)\n    }));\n    op = scope.add(Render({\n      pulse: ref(op)\n    }));\n    op = scope.add(Sieve({\n      pulse: ref(op)\n    }));\n\n    // track metadata for root item\n    scope.addData('root', new DataScope(scope, input, input, op));\n    return scope;\n  }\n  function signalObject(name, value) {\n    return value && value.signal ? {\n      name,\n      update: value.signal\n    } : {\n      name,\n      value\n    };\n  }\n\n  /**\n   * Collect top-level signals, merging values as needed. Signals\n   * defined in the config signals arrays are added only if that\n   * signal is not explicitly defined in the specification.\n   * Built-in signals (autosize, background, padding, width, height)\n   * receive special treatment. They are initialized using the\n   * top-level spec property, or, if undefined in the spec, using\n   * the corresponding top-level config property. If this property\n   * is a signal reference object, the signal expression maps to the\n   * signal 'update' property. If the spec's top-level signal array\n   * contains an entry that matches a built-in signal, that entry\n   * will be merged with the built-in specification, potentially\n   * overwriting existing 'value' or 'update' properties.\n   */\n  function collectSignals(spec, config) {\n    const _ = name => value(spec[name], config[name]),\n      signals = [signalObject('background', _('background')), signalObject('autosize', parseAutosize(_('autosize'))), signalObject('padding', parsePadding(_('padding'))), signalObject('width', _('width') || 0), signalObject('height', _('height') || 0)],\n      pre = signals.reduce((p, s) => (p[s.name] = s, p), {}),\n      map = {};\n\n    // add spec signal array\n    vegaUtil.array(spec.signals).forEach(s => {\n      if (vegaUtil.hasOwnProperty(pre, s.name)) {\n        // merge if built-in signal\n        s = vegaUtil.extend(pre[s.name], s);\n      } else {\n        // otherwise add to signal list\n        signals.push(s);\n      }\n      map[s.name] = s;\n    });\n\n    // add config signal array\n    vegaUtil.array(config.signals).forEach(s => {\n      if (!vegaUtil.hasOwnProperty(map, s.name) && !vegaUtil.hasOwnProperty(pre, s.name)) {\n        // add to signal list if not already defined\n        signals.push(s);\n      }\n    });\n    return signals;\n  }\n\n  function Scope(config, options) {\n    this.config = config || {};\n    this.options = options || {};\n    this.bindings = [];\n    this.field = {};\n    this.signals = {};\n    this.lambdas = {};\n    this.scales = {};\n    this.events = {};\n    this.data = {};\n    this.streams = [];\n    this.updates = [];\n    this.operators = [];\n    this.eventConfig = null;\n    this.locale = null;\n    this._id = 0;\n    this._subid = 0;\n    this._nextsub = [0];\n    this._parent = [];\n    this._encode = [];\n    this._lookup = [];\n    this._markpath = [];\n  }\n  function Subscope(scope) {\n    this.config = scope.config;\n    this.options = scope.options;\n    this.legends = scope.legends;\n    this.field = Object.create(scope.field);\n    this.signals = Object.create(scope.signals);\n    this.lambdas = Object.create(scope.lambdas);\n    this.scales = Object.create(scope.scales);\n    this.events = Object.create(scope.events);\n    this.data = Object.create(scope.data);\n    this.streams = [];\n    this.updates = [];\n    this.operators = [];\n    this._id = 0;\n    this._subid = ++scope._nextsub[0];\n    this._nextsub = scope._nextsub;\n    this._parent = scope._parent.slice();\n    this._encode = scope._encode.slice();\n    this._lookup = scope._lookup.slice();\n    this._markpath = scope._markpath;\n  }\n  Scope.prototype = Subscope.prototype = {\n    parse(spec) {\n      return parseScope(spec, this);\n    },\n    fork() {\n      return new Subscope(this);\n    },\n    isSubscope() {\n      return this._subid > 0;\n    },\n    toRuntime() {\n      this.finish();\n      return {\n        description: this.description,\n        operators: this.operators,\n        streams: this.streams,\n        updates: this.updates,\n        bindings: this.bindings,\n        eventConfig: this.eventConfig,\n        locale: this.locale\n      };\n    },\n    id() {\n      return (this._subid ? this._subid + ':' : 0) + this._id++;\n    },\n    add(op) {\n      this.operators.push(op);\n      op.id = this.id();\n      // if pre-registration references exist, resolve them now\n      if (op.refs) {\n        op.refs.forEach(ref => {\n          ref.$ref = op.id;\n        });\n        op.refs = null;\n      }\n      return op;\n    },\n    proxy(op) {\n      const vref = op instanceof Entry ? ref(op) : op;\n      return this.add(Proxy({\n        value: vref\n      }));\n    },\n    addStream(stream) {\n      this.streams.push(stream);\n      stream.id = this.id();\n      return stream;\n    },\n    addUpdate(update) {\n      this.updates.push(update);\n      return update;\n    },\n    // Apply metadata\n    finish() {\n      let name, ds;\n\n      // annotate root\n      if (this.root) this.root.root = true;\n\n      // annotate signals\n      for (name in this.signals) {\n        this.signals[name].signal = name;\n      }\n\n      // annotate scales\n      for (name in this.scales) {\n        this.scales[name].scale = name;\n      }\n\n      // annotate data sets\n      function annotate(op, name, type) {\n        let data, list;\n        if (op) {\n          data = op.data || (op.data = {});\n          list = data[name] || (data[name] = []);\n          list.push(type);\n        }\n      }\n      for (name in this.data) {\n        ds = this.data[name];\n        annotate(ds.input, name, 'input');\n        annotate(ds.output, name, 'output');\n        annotate(ds.values, name, 'values');\n        for (const field in ds.index) {\n          annotate(ds.index[field], name, 'index:' + field);\n        }\n      }\n      return this;\n    },\n    // ----\n\n    pushState(encode, parent, lookup) {\n      this._encode.push(ref(this.add(Sieve({\n        pulse: encode\n      }))));\n      this._parent.push(parent);\n      this._lookup.push(lookup ? ref(this.proxy(lookup)) : null);\n      this._markpath.push(-1);\n    },\n    popState() {\n      this._encode.pop();\n      this._parent.pop();\n      this._lookup.pop();\n      this._markpath.pop();\n    },\n    parent() {\n      return vegaUtil.peek(this._parent);\n    },\n    encode() {\n      return vegaUtil.peek(this._encode);\n    },\n    lookup() {\n      return vegaUtil.peek(this._lookup);\n    },\n    markpath() {\n      const p = this._markpath;\n      return ++p[p.length - 1];\n    },\n    // ----\n\n    fieldRef(field, name) {\n      if (vegaUtil.isString(field)) return fieldRef$1(field, name);\n      if (!field.signal) {\n        vegaUtil.error('Unsupported field reference: ' + vegaUtil.stringValue(field));\n      }\n      const s = field.signal;\n      let f = this.field[s];\n      if (!f) {\n        const params = {\n          name: this.signalRef(s)\n        };\n        if (name) params.as = name;\n        this.field[s] = f = ref(this.add(Field(params)));\n      }\n      return f;\n    },\n    compareRef(cmp) {\n      let signal = false;\n      const check = _ => isSignal(_) ? (signal = true, this.signalRef(_.signal)) : isExpr$1(_) ? (signal = true, this.exprRef(_.expr)) : _;\n      const fields = vegaUtil.array(cmp.field).map(check),\n        orders = vegaUtil.array(cmp.order).map(check);\n      return signal ? ref(this.add(Compare({\n        fields: fields,\n        orders: orders\n      }))) : compareRef(fields, orders);\n    },\n    keyRef(fields, flat) {\n      let signal = false;\n      const check = _ => isSignal(_) ? (signal = true, ref(sig[_.signal])) : _;\n      const sig = this.signals;\n      fields = vegaUtil.array(fields).map(check);\n      return signal ? ref(this.add(Key({\n        fields: fields,\n        flat: flat\n      }))) : keyRef(fields, flat);\n    },\n    sortRef(sort) {\n      if (!sort) return sort;\n\n      // including id ensures stable sorting\n      const a = aggrField(sort.op, sort.field),\n        o = sort.order || Ascending;\n      return o.signal ? ref(this.add(Compare({\n        fields: a,\n        orders: this.signalRef(o.signal)\n      }))) : compareRef(a, o);\n    },\n    // ----\n\n    event(source, type) {\n      const key = source + ':' + type;\n      if (!this.events[key]) {\n        const id = this.id();\n        this.streams.push({\n          id: id,\n          source: source,\n          type: type\n        });\n        this.events[key] = id;\n      }\n      return this.events[key];\n    },\n    // ----\n\n    hasOwnSignal(name) {\n      return vegaUtil.hasOwnProperty(this.signals, name);\n    },\n    addSignal(name, value) {\n      if (this.hasOwnSignal(name)) {\n        vegaUtil.error('Duplicate signal name: ' + vegaUtil.stringValue(name));\n      }\n      const op = value instanceof Entry ? value : this.add(operator(value));\n      return this.signals[name] = op;\n    },\n    getSignal(name) {\n      if (!this.signals[name]) {\n        vegaUtil.error('Unrecognized signal name: ' + vegaUtil.stringValue(name));\n      }\n      return this.signals[name];\n    },\n    signalRef(s) {\n      if (this.signals[s]) {\n        return ref(this.signals[s]);\n      } else if (!vegaUtil.hasOwnProperty(this.lambdas, s)) {\n        this.lambdas[s] = this.add(operator(null));\n      }\n      return ref(this.lambdas[s]);\n    },\n    parseLambdas() {\n      const code = Object.keys(this.lambdas);\n      for (let i = 0, n = code.length; i < n; ++i) {\n        const s = code[i],\n          e = vegaFunctions.parseExpression(s, this),\n          op = this.lambdas[s];\n        op.params = e.$params;\n        op.update = e.$expr;\n      }\n    },\n    property(spec) {\n      return spec && spec.signal ? this.signalRef(spec.signal) : spec;\n    },\n    objectProperty(spec) {\n      return !spec || !vegaUtil.isObject(spec) ? spec : this.signalRef(spec.signal || propertyLambda(spec));\n    },\n    exprRef(code, name) {\n      const params = {\n        expr: vegaFunctions.parseExpression(code, this)\n      };\n      if (name) params.expr.$name = name;\n      return ref(this.add(Expression(params)));\n    },\n    addBinding(name, bind) {\n      if (!this.bindings) {\n        vegaUtil.error('Nested signals do not support binding: ' + vegaUtil.stringValue(name));\n      }\n      this.bindings.push(vegaUtil.extend({\n        signal: name\n      }, bind));\n    },\n    // ----\n\n    addScaleProj(name, transform) {\n      if (vegaUtil.hasOwnProperty(this.scales, name)) {\n        vegaUtil.error('Duplicate scale or projection name: ' + vegaUtil.stringValue(name));\n      }\n      this.scales[name] = this.add(transform);\n    },\n    addScale(name, params) {\n      this.addScaleProj(name, Scale(params));\n    },\n    addProjection(name, params) {\n      this.addScaleProj(name, Projection(params));\n    },\n    getScale(name) {\n      if (!this.scales[name]) {\n        vegaUtil.error('Unrecognized scale name: ' + vegaUtil.stringValue(name));\n      }\n      return this.scales[name];\n    },\n    scaleRef(name) {\n      return ref(this.getScale(name));\n    },\n    scaleType(name) {\n      return this.getScale(name).params.type;\n    },\n    projectionRef(name) {\n      return this.scaleRef(name);\n    },\n    projectionType(name) {\n      return this.scaleType(name);\n    },\n    // ----\n\n    addData(name, dataScope) {\n      if (vegaUtil.hasOwnProperty(this.data, name)) {\n        vegaUtil.error('Duplicate data set name: ' + vegaUtil.stringValue(name));\n      }\n      return this.data[name] = dataScope;\n    },\n    getData(name) {\n      if (!this.data[name]) {\n        vegaUtil.error('Undefined data set name: ' + vegaUtil.stringValue(name));\n      }\n      return this.data[name];\n    },\n    addDataPipeline(name, entries) {\n      if (vegaUtil.hasOwnProperty(this.data, name)) {\n        vegaUtil.error('Duplicate data set name: ' + vegaUtil.stringValue(name));\n      }\n      return this.addData(name, DataScope.fromEntries(this, entries));\n    }\n  };\n  function propertyLambda(spec) {\n    return (vegaUtil.isArray(spec) ? arrayLambda : objectLambda)(spec);\n  }\n  function arrayLambda(array) {\n    const n = array.length;\n    let code = '[';\n    for (let i = 0; i < n; ++i) {\n      const value = array[i];\n      code += (i > 0 ? ',' : '') + (vegaUtil.isObject(value) ? value.signal || propertyLambda(value) : vegaUtil.stringValue(value));\n    }\n    return code + ']';\n  }\n  function objectLambda(obj) {\n    let code = '{',\n      i = 0,\n      key,\n      value;\n    for (key in obj) {\n      value = obj[key];\n      code += (++i > 1 ? ',' : '') + vegaUtil.stringValue(key) + ':' + (vegaUtil.isObject(value) ? value.signal || propertyLambda(value) : vegaUtil.stringValue(value));\n    }\n    return code + '}';\n  }\n\n  /**\n   * Standard configuration defaults for Vega specification parsing.\n   * Users can provide their own (sub-)set of these default values\n   * by passing in a config object to the top-level parse method.\n   */\n  function defaults () {\n    const defaultFont = 'sans-serif',\n      defaultSymbolSize = 30,\n      defaultStrokeWidth = 2,\n      defaultColor = '#4c78a8',\n      black = '#000',\n      gray = '#888',\n      lightGray = '#ddd';\n    return {\n      // default visualization description\n      description: 'Vega visualization',\n      // default padding around visualization\n      padding: 0,\n      // default for automatic sizing; options: 'none', 'pad', 'fit'\n      // or provide an object (e.g., {'type': 'pad', 'resize': true})\n      autosize: 'pad',\n      // default view background color\n      // covers the entire view component\n      background: null,\n      // default event handling configuration\n      // preventDefault for view-sourced event types except 'wheel'\n      events: {\n        defaults: {\n          allow: ['wheel']\n        }\n      },\n      // defaults for top-level group marks\n      // accepts mark properties (fill, stroke, etc)\n      // covers the data rectangle within group width/height\n      group: null,\n      // defaults for basic mark types\n      // each subset accepts mark properties (fill, stroke, etc)\n      mark: null,\n      arc: {\n        fill: defaultColor\n      },\n      area: {\n        fill: defaultColor\n      },\n      image: null,\n      line: {\n        stroke: defaultColor,\n        strokeWidth: defaultStrokeWidth\n      },\n      path: {\n        stroke: defaultColor\n      },\n      rect: {\n        fill: defaultColor\n      },\n      rule: {\n        stroke: black\n      },\n      shape: {\n        stroke: defaultColor\n      },\n      symbol: {\n        fill: defaultColor,\n        size: 64\n      },\n      text: {\n        fill: black,\n        font: defaultFont,\n        fontSize: 11\n      },\n      trail: {\n        fill: defaultColor,\n        size: defaultStrokeWidth\n      },\n      // style definitions\n      style: {\n        // axis & legend labels\n        'guide-label': {\n          fill: black,\n          font: defaultFont,\n          fontSize: 10\n        },\n        // axis & legend titles\n        'guide-title': {\n          fill: black,\n          font: defaultFont,\n          fontSize: 11,\n          fontWeight: 'bold'\n        },\n        // headers, including chart title\n        'group-title': {\n          fill: black,\n          font: defaultFont,\n          fontSize: 13,\n          fontWeight: 'bold'\n        },\n        // chart subtitle\n        'group-subtitle': {\n          fill: black,\n          font: defaultFont,\n          fontSize: 12\n        },\n        // defaults for styled point marks in Vega-Lite\n        point: {\n          size: defaultSymbolSize,\n          strokeWidth: defaultStrokeWidth,\n          shape: 'circle'\n        },\n        circle: {\n          size: defaultSymbolSize,\n          strokeWidth: defaultStrokeWidth\n        },\n        square: {\n          size: defaultSymbolSize,\n          strokeWidth: defaultStrokeWidth,\n          shape: 'square'\n        },\n        // defaults for styled group marks in Vega-Lite\n        cell: {\n          fill: 'transparent',\n          stroke: lightGray\n        },\n        view: {\n          fill: 'transparent'\n        }\n      },\n      // defaults for title\n      title: {\n        orient: 'top',\n        anchor: 'middle',\n        offset: 4,\n        subtitlePadding: 3\n      },\n      // defaults for axes\n      axis: {\n        minExtent: 0,\n        maxExtent: 200,\n        bandPosition: 0.5,\n        domain: true,\n        domainWidth: 1,\n        domainColor: gray,\n        grid: false,\n        gridWidth: 1,\n        gridColor: lightGray,\n        labels: true,\n        labelAngle: 0,\n        labelLimit: 180,\n        labelOffset: 0,\n        labelPadding: 2,\n        ticks: true,\n        tickColor: gray,\n        tickOffset: 0,\n        tickRound: true,\n        tickSize: 5,\n        tickWidth: 1,\n        titlePadding: 4\n      },\n      // correction for centering bias\n      axisBand: {\n        tickOffset: -0.5\n      },\n      // defaults for cartographic projection\n      projection: {\n        type: 'mercator'\n      },\n      // defaults for legends\n      legend: {\n        orient: 'right',\n        padding: 0,\n        gridAlign: 'each',\n        columnPadding: 10,\n        rowPadding: 2,\n        symbolDirection: 'vertical',\n        gradientDirection: 'vertical',\n        gradientLength: 200,\n        gradientThickness: 16,\n        gradientStrokeColor: lightGray,\n        gradientStrokeWidth: 0,\n        gradientLabelOffset: 2,\n        labelAlign: 'left',\n        labelBaseline: 'middle',\n        labelLimit: 160,\n        labelOffset: 4,\n        labelOverlap: true,\n        symbolLimit: 30,\n        symbolType: 'circle',\n        symbolSize: 100,\n        symbolOffset: 0,\n        symbolStrokeWidth: 1.5,\n        symbolBaseFillColor: 'transparent',\n        symbolBaseStrokeColor: gray,\n        titleLimit: 180,\n        titleOrient: 'top',\n        titlePadding: 5,\n        layout: {\n          offset: 18,\n          direction: 'horizontal',\n          left: {\n            direction: 'vertical'\n          },\n          right: {\n            direction: 'vertical'\n          }\n        }\n      },\n      // defaults for scale ranges\n      range: {\n        category: {\n          scheme: 'tableau10'\n        },\n        ordinal: {\n          scheme: 'blues'\n        },\n        heatmap: {\n          scheme: 'yellowgreenblue'\n        },\n        ramp: {\n          scheme: 'blues'\n        },\n        diverging: {\n          scheme: 'blueorange',\n          extent: [1, 0]\n        },\n        symbol: ['circle', 'square', 'triangle-up', 'cross', 'diamond', 'triangle-right', 'triangle-down', 'triangle-left']\n      }\n    };\n  }\n\n  function parse (spec, config, options) {\n    if (!vegaUtil.isObject(spec)) {\n      vegaUtil.error('Input Vega specification must be an object.');\n    }\n    config = vegaUtil.mergeConfig(defaults(), config, spec.config);\n    return parseView(spec, new Scope(config, options)).toRuntime();\n  }\n\n  exports.AxisDomainRole = AxisDomainRole;\n  exports.AxisGridRole = AxisGridRole;\n  exports.AxisLabelRole = AxisLabelRole;\n  exports.AxisRole = AxisRole;\n  exports.AxisTickRole = AxisTickRole;\n  exports.AxisTitleRole = AxisTitleRole;\n  exports.DataScope = DataScope;\n  exports.FrameRole = FrameRole;\n  exports.LegendEntryRole = LegendEntryRole;\n  exports.LegendLabelRole = LegendLabelRole;\n  exports.LegendRole = LegendRole;\n  exports.LegendSymbolRole = LegendSymbolRole;\n  exports.LegendTitleRole = LegendTitleRole;\n  exports.MarkRole = MarkRole;\n  exports.Scope = Scope;\n  exports.ScopeRole = ScopeRole;\n  exports.config = defaults;\n  exports.parse = parse;\n  exports.signal = parseSignal;\n  exports.signalUpdates = parseSignalUpdates;\n  exports.stream = parseStream;\n\n}));\n\n};"],
"names":["shadow$provide","require","module","exports","global","factory","define","amd","globalThis","self","vega","vegaUtil","vegaFunctions","vegaEventSelector","vegaScale","vegaDataflow","parseAutosize","spec","isObject","type","parsePadding","_","top","bottom","left","right","addEncode","object","name","value","set","isArray","length","update","addEncoders","enter","extendEncode","encode","extra","skip","hasOwnProperty","extend","has","key","applyDefaults","role","style","config","defaults","applyDefault","String","startsWith","props","FrameRole","group","MarkRole","mark","array","forEach","signal","entry$1","enc","gradient","c","_color","h","l","s","a","b","r","g","scale","scaleRef","range","undefined","band","property","exponent","mult","offset","round","args","start","stop","count","map","stringValue","peek","pop","unshift","join","field","ref","resolveField","datum","parent","level","Math","max","error","isString","splitAccessPath","rule","code","test","parseEncode","scope","params","encoders","$encode","channels","fields","block","parse$1","$expr","marktype","$fields","Object","keys","$output","expr","parseExpression","$params","outerError","prefix","parseSignal","push","OUTER","signals","OUTER_INVALID","prop","op","addSignal","react","bind","addBinding","Entry","id","$ref","refs","fieldRef$1","$field","$name","keyRef","flat","$key","$flat","aggrField","isSignal","hasSignal","specValue","defaultValue","deref","v","parseStream","stream","merge","method","mergeStream","nestedStream","eventStream","list","entry","streamParameters","addStream","Timer","event","throttle","between","filter","source","Scope$1","View","param","concat","markname","markrole","item","debounce","consume","parseUpdate","target","events","sources","parseSelector","isSubscope","mergeSources","OP_VALUE_EXPR","$value","signalRef","force","options","addUpdate","parseSignalUpdates","getSignal","init","initonly","on","parseLiteral","parseArray","dataLookupError","parseScaleDomain","domain","explicitDomain","multipleDomain","singularDomain","domainMin","domainMax","data","getData","isDiscrete","valuesRef","parseSort","sort","isQuantile","domainRef","extentRef","reduce","dom","d","FIELD_REF_ID","coll","Collect","$ingest","input","addDataPipeline","Sieve","ordinalMultipleDomain","quantileMultipleDomain","numericMultipleDomain","counts","f","countsRef","p","groupby","keyFieldRef","pulse","ops","MULTIDOMAIN_SORT_OPS","fieldRef","as","add","Aggregate","Values","sortRef","multidomain","values","MultiValues","extents","MultiExtent","parseScaleRange","scheme","extent","schemeExtent","schemeCount","step","rangeStep","parseParameter$1","guideGroup","GroupMark","interactive","lookup","dflt","isVertical","_.isVertical","Vertical","direction","symbolDirection","gradientDirection","gradientLength","_.gradientLength","gradientWidth","gradientThickness","_.gradientThickness","gradientHeight","entryColumns","_.entryColumns","columns","getEncoding","anchorExpr","e","m","Start","End","extendOffset","assign","guideMark","extras","Skip","legendGradient","userEncode","vertical","thickness","width","height","opacity","zero","x","y","encoder","one","fill","exit","stroke","strokeWidth","RectMark","LegendGradientRole","legendGradientDiscrete","dataRef","u","uu","vv","adjust","Value","LegendBandRole","from","legendGradientLabels","overlap","text","Label","fillOpacity","font","fontSize","fontStyle","fontWeight","limit","labelLimit","gradientLabelLimit","align","baseline","baselineExpr","alignExpr","labelOffset","gradientLabelOffset","separation","order","TextMark","LegendLabelRole","GuideLabelStyle","legendSymbolGroups","entries","symbolOffset","valueRef","xSignal","Offset","Size","yEncode","ncols","baseFill","baseStroke","symbolBaseFillColor","symbolBaseStrokeColor","shape","size","strokeDash","strokeDashOffset","LegendScales","symbols","SymbolMark","LegendSymbolRole","clip","labels","noBound","row","column","nrows","index","facet","Index","ScopeRole","marks","legendSymbolLayout","center","padding","legendTitle","orient","_anchor","anchor","exprAnchor","angle","exprAngle","exprAlign","exprBaseline","title","lineHeight","LegendTitleRole","GuideTitleStyle","path","sphere","getRole","definition","zindex","aria","description","parseTransform","def","toLowerCase","parseParameters","proxy","t","metadata","n","i","pdef","parseParameter","parseIndexParameter","required","parseSubParameters","projectionRef","parameterValue","compareRef","exprRef","lookupRef","parseSubParameter","k","Params","parseData$1","getDataRef","aggregate","output","DataScope","aggr","fieldKey","addSortField","cache","ds","optype","Descending","parseFacet","PreFacet","Facet","subscope","fork","addData","subflow","$subflow","parse","toRuntime","parseSubflow","parseTrigger","remove","insert","toggle","modify","trigger","parseMark","layout","store","layoutRef","nested","DataJoin","clean","joinRef","Mark","markdef","context","$context","groups","markpath","markRef","Encode","mod","transform","tx","md","generates","changes","nomod","SortItems","encodeRef","ViewLayout","objectProperty","legends","bound","Bound","boundRef","operators","pushState","popState","parseOverlap","render","Render","sieve","sep","tol","tolerance","boundTolerance","boundScale","boundOrient","Overlap","parseLegend","legend","legendEncode","scales","entryLayout","legendType","scaleType","vgrad","entryRef","LegendEntries","minstep","tickMinStep","formatType","formatSpecifier","format","Gradient","children","Discrete","sizeExpression","LegendEntryRole","entryEncode","LegendRole","buildLegendEncode","Symbols","scaleCount","isContinuous","isDiscretizing","titlePadding","cornerRadius","getChannel","parseTitle","dx","dy","TitleTextRole","GroupTitleStyle","subtitle","TitleSubtitleRole","GroupSubtitleStyle","alignExpr$1","angleExpr","frame","TitleRole","parseData","transforms","analyze","generate","upstream","load","collect","$format","url","$request","modifies","Relay","derive","splice","Load","async","fallback","axisConfig","styleProp","slice","objects","obj","flushExpr","threshold","autoLayout","auto","dim","patch","autoY","autoX","ifX","parseScope","preprocessed","projections","projection","addProjection","isValidScaleType","addScale","getScale","interpolate","gamma","interpolateGamma","nice","interval","bins","axes","axis","axisBand","xyKeys","axisX","axisY","orientKeys","axisTop","axisBottom","axisLeft","axisRight","xy","or","$orient","Left","toExpr","Bottom","Right","Top","toUpperCase","result","axisEncode","ticks","grid","ticksRef","AxisTicks","tickCount","vscale","gridScale","sign","getSign","strokeCap","strokeOpacity","tickPos","sz","gridStart","gridEnd","ifY","x2","y2","RuleMark","AxisGridRole","tickSize","AxisTickRole","flush","flushOffset","labelAlign","labelBaseline","flushOn","ifExpr","ifTop","offsetExpr","AxisLabelRole","pos0","pos","pos1","AxisDomainRole","titlePos","AxisTitleRole","position","minExtent","maxExtent","translate","AxisRole","parseLambdas","parseView","root","collectSignals","eventConfig","locale","autosize","signalObject","pre","Scope","bindings","lambdas","streams","updates","_subid","_id","_nextsub","_parent","_encode","_lookup","_markpath","Subscope","create","propertyLambda","arrayLambda","objectLambda","background","allow","arc","defaultColor","area","image","line","defaultStrokeWidth","rect","black","symbol","defaultFont","trail","point","defaultSymbolSize","circle","square","cell","lightGray","view","subtitlePadding","bandPosition","domainWidth","domainColor","gray","gridWidth","gridColor","labelAngle","labelPadding","tickColor","tickOffset","tickRound","tickWidth","gridAlign","columnPadding","rowPadding","gradientStrokeColor","gradientStrokeWidth","labelOverlap","symbolLimit","symbolType","symbolSize","symbolStrokeWidth","titleLimit","titleOrient","category","ordinal","heatmap","ramp","diverging","z","ast","Compare","Expression","Field","Key","Projection","Proxy","Scale","min","Center","isR","alignFlip","isLR","isL","fromEntries","DataScope.fromEntries","prototype","agg","tuplesRef","indataRef","ifEnc","base","endsWith","finish","vref","annotate","cmp","check","orders","$compare","$order","sig","o","Ascending","hasOwnSignal","addScaleProj","projectionType","dataScope","mergeConfig","signalUpdates"]
}
