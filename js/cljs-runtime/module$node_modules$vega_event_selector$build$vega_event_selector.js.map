{
"version":3,
"file":"module$node_modules$vega_event_selector$build$vega_event_selector.js",
"lineCount":125,
"mappings":"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",
"sources":["node_modules/vega-event-selector/build/vega-event-selector.js"],
"sourcesContent":["shadow$provide[\"module$node_modules$vega_event_selector$build$vega_event_selector\"] = function(require,module,exports) {\n(function (global, factory) {\n  typeof exports === 'object' && typeof module !== 'undefined' ? factory(exports) :\n  typeof define === 'function' && define.amd ? define(['exports'], factory) :\n  (global = typeof globalThis !== 'undefined' ? globalThis : global || self, factory(global.vega = {}));\n})(this, (function (exports) { 'use strict';\n\n  const VIEW = 'view',\n    LBRACK = '[',\n    RBRACK = ']',\n    LBRACE = '{',\n    RBRACE = '}',\n    COLON = ':',\n    COMMA = ',',\n    NAME = '@',\n    GT = '>',\n    ILLEGAL = /[[\\]{}]/,\n    DEFAULT_MARKS = {\n      '*': 1,\n      arc: 1,\n      area: 1,\n      group: 1,\n      image: 1,\n      line: 1,\n      path: 1,\n      rect: 1,\n      rule: 1,\n      shape: 1,\n      symbol: 1,\n      text: 1,\n      trail: 1\n    };\n  let DEFAULT_SOURCE, MARKS;\n\n  /**\n   * Parse an event selector string.\n   * Returns an array of event stream definitions.\n   */\n  function eventSelector (selector, source, marks) {\n    DEFAULT_SOURCE = source || VIEW;\n    MARKS = marks || DEFAULT_MARKS;\n    return parseMerge(selector.trim()).map(parseSelector);\n  }\n  function isMarkType(type) {\n    return MARKS[type];\n  }\n  function find(s, i, endChar, pushChar, popChar) {\n    const n = s.length;\n    let count = 0,\n      c;\n    for (; i < n; ++i) {\n      c = s[i];\n      if (!count && c === endChar) return i;else if (popChar && popChar.indexOf(c) >= 0) --count;else if (pushChar && pushChar.indexOf(c) >= 0) ++count;\n    }\n    return i;\n  }\n  function parseMerge(s) {\n    const output = [],\n      n = s.length;\n    let start = 0,\n      i = 0;\n    while (i < n) {\n      i = find(s, i, COMMA, LBRACK + LBRACE, RBRACK + RBRACE);\n      output.push(s.substring(start, i).trim());\n      start = ++i;\n    }\n    if (output.length === 0) {\n      throw 'Empty event selector: ' + s;\n    }\n    return output;\n  }\n  function parseSelector(s) {\n    return s[0] === '[' ? parseBetween(s) : parseStream(s);\n  }\n  function parseBetween(s) {\n    const n = s.length;\n    let i = 1,\n      b;\n    i = find(s, i, RBRACK, LBRACK, RBRACK);\n    if (i === n) {\n      throw 'Empty between selector: ' + s;\n    }\n    b = parseMerge(s.substring(1, i));\n    if (b.length !== 2) {\n      throw 'Between selector must have two elements: ' + s;\n    }\n    s = s.slice(i + 1).trim();\n    if (s[0] !== GT) {\n      throw 'Expected \\'>\\' after between selector: ' + s;\n    }\n    b = b.map(parseSelector);\n    const stream = parseSelector(s.slice(1).trim());\n    if (stream.between) {\n      return {\n        between: b,\n        stream: stream\n      };\n    } else {\n      stream.between = b;\n    }\n    return stream;\n  }\n  function parseStream(s) {\n    const stream = {\n        source: DEFAULT_SOURCE\n      },\n      source = [];\n    let throttle = [0, 0],\n      markname = 0,\n      start = 0,\n      n = s.length,\n      i = 0,\n      j,\n      filter;\n\n    // extract throttle from end\n    if (s[n - 1] === RBRACE) {\n      i = s.lastIndexOf(LBRACE);\n      if (i >= 0) {\n        try {\n          throttle = parseThrottle(s.substring(i + 1, n - 1));\n        } catch (e) {\n          throw 'Invalid throttle specification: ' + s;\n        }\n        s = s.slice(0, i).trim();\n        n = s.length;\n      } else throw 'Unmatched right brace: ' + s;\n      i = 0;\n    }\n    if (!n) throw s;\n\n    // set name flag based on first char\n    if (s[0] === NAME) markname = ++i;\n\n    // extract first part of multi-part stream selector\n    j = find(s, i, COLON);\n    if (j < n) {\n      source.push(s.substring(start, j).trim());\n      start = i = ++j;\n    }\n\n    // extract remaining part of stream selector\n    i = find(s, i, LBRACK);\n    if (i === n) {\n      source.push(s.substring(start, n).trim());\n    } else {\n      source.push(s.substring(start, i).trim());\n      filter = [];\n      start = ++i;\n      if (start === n) throw 'Unmatched left bracket: ' + s;\n    }\n\n    // extract filters\n    while (i < n) {\n      i = find(s, i, RBRACK);\n      if (i === n) throw 'Unmatched left bracket: ' + s;\n      filter.push(s.substring(start, i).trim());\n      if (i < n - 1 && s[++i] !== LBRACK) throw 'Expected left bracket: ' + s;\n      start = ++i;\n    }\n\n    // marshall event stream specification\n    if (!(n = source.length) || ILLEGAL.test(source[n - 1])) {\n      throw 'Invalid event selector: ' + s;\n    }\n    if (n > 1) {\n      stream.type = source[1];\n      if (markname) {\n        stream.markname = source[0].slice(1);\n      } else if (isMarkType(source[0])) {\n        stream.marktype = source[0];\n      } else {\n        stream.source = source[0];\n      }\n    } else {\n      stream.type = source[0];\n    }\n    if (stream.type.slice(-1) === '!') {\n      stream.consume = true;\n      stream.type = stream.type.slice(0, -1);\n    }\n    if (filter != null) stream.filter = filter;\n    if (throttle[0]) stream.throttle = throttle[0];\n    if (throttle[1]) stream.debounce = throttle[1];\n    return stream;\n  }\n  function parseThrottle(s) {\n    const a = s.split(COMMA);\n    if (!s.length || a.length > 2) throw s;\n    return a.map(_ => {\n      const x = +_;\n      if (x !== x) throw s;\n      return x;\n    });\n  }\n\n  exports.parseSelector = eventSelector;\n\n}));\n\n};"],
"names":["shadow$provide","require","module","exports","global","factory","define","amd","globalThis","self","vega","find","s","i","endChar","pushChar","popChar","n","length","count","c","indexOf","parseMerge","output","start","COMMA","push","substring","trim","parseSelector","RBRACK","LBRACK","b","slice","GT","map","stream","between","source","DEFAULT_SOURCE","throttle","markname","j","RBRACE","lastIndexOf","LBRACE","parseThrottle","e","NAME","COLON","filter","ILLEGAL","test","type","MARKS","marktype","consume","debounce","a","split","_","x","DEFAULT_MARKS","arc","area","group","image","line","path","rect","rule","shape","symbol","text","trail","eventSelector","selector","marks","VIEW"]
}
