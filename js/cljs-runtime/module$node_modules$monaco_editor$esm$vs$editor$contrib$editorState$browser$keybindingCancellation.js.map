{
"version":3,
"file":"module$node_modules$monaco_editor$esm$vs$editor$contrib$editorState$browser$keybindingCancellation.js",
"lineCount":57,
"mappings":"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",
"sources":["node_modules/monaco-editor/esm/vs/editor/contrib/editorState/browser/keybindingCancellation.js"],
"sourcesContent":["shadow$provide[\"module$node_modules$monaco_editor$esm$vs$editor$contrib$editorState$browser$keybindingCancellation\"] = function(require,module,exports) {\nObject.defineProperties(exports, {__esModule:{enumerable:true, value:true}, EditorKeybindingCancellationTokenSource:{enumerable:true, get:function() {\n  return EditorKeybindingCancellationTokenSource;\n}}});\nvar require$_DOT__DOT__SLASH__DOT__DOT__SLASH__DOT__DOT__SLASH_browser_SLASH_editorExtensions_DOT_js = require(\"../../../browser/editorExtensions.js\");\nvar require$_DOT__DOT__SLASH__DOT__DOT__SLASH__DOT__DOT__SLASH__DOT__DOT__SLASH_platform_SLASH_contextkey_SLASH_common_SLASH_contextkey_DOT_js = require(\"../../../../platform/contextkey/common/contextkey.js\");\nvar require$_DOT__DOT__SLASH__DOT__DOT__SLASH__DOT__DOT__SLASH__DOT__DOT__SLASH_base_SLASH_common_SLASH_cancellation_DOT_js = require(\"../../../../base/common/cancellation.js\");\nvar require$_DOT__DOT__SLASH__DOT__DOT__SLASH__DOT__DOT__SLASH__DOT__DOT__SLASH_base_SLASH_common_SLASH_linkedList_DOT_js = require(\"../../../../base/common/linkedList.js\");\nvar require$_DOT__DOT__SLASH__DOT__DOT__SLASH__DOT__DOT__SLASH__DOT__DOT__SLASH_platform_SLASH_instantiation_SLASH_common_SLASH_instantiation_DOT_js = require(\"../../../../platform/instantiation/common/instantiation.js\");\nvar require$_DOT__DOT__SLASH__DOT__DOT__SLASH__DOT__DOT__SLASH__DOT__DOT__SLASH_platform_SLASH_instantiation_SLASH_common_SLASH_extensions_DOT_js = require(\"../../../../platform/instantiation/common/extensions.js\");\nvar require$_DOT__DOT__SLASH__DOT__DOT__SLASH__DOT__DOT__SLASH__DOT__DOT__SLASH_nls_DOT_js = require(\"../../../../nls.js\");\nconst IEditorCancellationTokens = (0,require$_DOT__DOT__SLASH__DOT__DOT__SLASH__DOT__DOT__SLASH__DOT__DOT__SLASH_platform_SLASH_instantiation_SLASH_common_SLASH_instantiation_DOT_js.createDecorator)(\"IEditorCancelService\");\nconst ctxCancellableOperation = new require$_DOT__DOT__SLASH__DOT__DOT__SLASH__DOT__DOT__SLASH__DOT__DOT__SLASH_platform_SLASH_contextkey_SLASH_common_SLASH_contextkey_DOT_js.RawContextKey(\"cancellableOperation\", false, (0,require$_DOT__DOT__SLASH__DOT__DOT__SLASH__DOT__DOT__SLASH__DOT__DOT__SLASH_nls_DOT_js.localize)(\"cancellableOperation\", \"Whether the editor runs a cancellable operation, e.g. like 'Peek References'\"));\n(0,require$_DOT__DOT__SLASH__DOT__DOT__SLASH__DOT__DOT__SLASH__DOT__DOT__SLASH_platform_SLASH_instantiation_SLASH_common_SLASH_extensions_DOT_js.registerSingleton)(IEditorCancellationTokens, class {\n  constructor() {\n    this._tokens = new WeakMap();\n  }\n  add(editor, cts) {\n    let data = this._tokens.get(editor);\n    if (!data) {\n      data = editor.invokeWithinContext(accessor => {\n        const key = ctxCancellableOperation.bindTo(accessor.get(require$_DOT__DOT__SLASH__DOT__DOT__SLASH__DOT__DOT__SLASH__DOT__DOT__SLASH_platform_SLASH_contextkey_SLASH_common_SLASH_contextkey_DOT_js.IContextKeyService));\n        const tokens = new require$_DOT__DOT__SLASH__DOT__DOT__SLASH__DOT__DOT__SLASH__DOT__DOT__SLASH_base_SLASH_common_SLASH_linkedList_DOT_js.LinkedList();\n        return {key, tokens};\n      });\n      this._tokens.set(editor, data);\n    }\n    let removeFn;\n    data.key.set(true);\n    removeFn = data.tokens.push(cts);\n    return () => {\n      if (removeFn) {\n        removeFn();\n        data.key.set(!data.tokens.isEmpty());\n        removeFn = undefined;\n      }\n    };\n  }\n  cancel(editor) {\n    const data = this._tokens.get(editor);\n    if (!data) {\n      return;\n    }\n    const cts = data.tokens.pop();\n    if (cts) {\n      cts.cancel();\n      data.key.set(!data.tokens.isEmpty());\n    }\n  }\n}, 1);\nclass EditorKeybindingCancellationTokenSource extends require$_DOT__DOT__SLASH__DOT__DOT__SLASH__DOT__DOT__SLASH__DOT__DOT__SLASH_base_SLASH_common_SLASH_cancellation_DOT_js.CancellationTokenSource {\n  constructor(editor, parent) {\n    super(parent);\n    this.editor = editor;\n    this._unregister = editor.invokeWithinContext(accessor => accessor.get(IEditorCancellationTokens).add(editor, this));\n  }\n  dispose() {\n    this._unregister();\n    super.dispose();\n  }\n}\n(0,require$_DOT__DOT__SLASH__DOT__DOT__SLASH__DOT__DOT__SLASH_browser_SLASH_editorExtensions_DOT_js.registerEditorCommand)(new class extends require$_DOT__DOT__SLASH__DOT__DOT__SLASH__DOT__DOT__SLASH_browser_SLASH_editorExtensions_DOT_js.EditorCommand {\n  constructor() {\n    super({id:\"editor.cancelOperation\", kbOpts:{weight:100, primary:9}, precondition:ctxCancellableOperation});\n  }\n  runEditorCommand(accessor, editor) {\n    accessor.get(IEditorCancellationTokens).cancel(editor);\n  }\n}());\n\n};"],
"names":["shadow$provide","require","module","exports","Object","defineProperties","__esModule","enumerable","value","EditorKeybindingCancellationTokenSource","get","require$_DOT__DOT__SLASH__DOT__DOT__SLASH__DOT__DOT__SLASH_browser_SLASH_editorExtensions_DOT_js","require$_DOT__DOT__SLASH__DOT__DOT__SLASH__DOT__DOT__SLASH__DOT__DOT__SLASH_platform_SLASH_contextkey_SLASH_common_SLASH_contextkey_DOT_js","require$_DOT__DOT__SLASH__DOT__DOT__SLASH__DOT__DOT__SLASH__DOT__DOT__SLASH_base_SLASH_common_SLASH_cancellation_DOT_js","require$_DOT__DOT__SLASH__DOT__DOT__SLASH__DOT__DOT__SLASH__DOT__DOT__SLASH_base_SLASH_common_SLASH_linkedList_DOT_js","require$_DOT__DOT__SLASH__DOT__DOT__SLASH__DOT__DOT__SLASH__DOT__DOT__SLASH_platform_SLASH_instantiation_SLASH_common_SLASH_instantiation_DOT_js","require$_DOT__DOT__SLASH__DOT__DOT__SLASH__DOT__DOT__SLASH__DOT__DOT__SLASH_platform_SLASH_instantiation_SLASH_common_SLASH_extensions_DOT_js","require$_DOT__DOT__SLASH__DOT__DOT__SLASH__DOT__DOT__SLASH__DOT__DOT__SLASH_nls_DOT_js","IEditorCancellationTokens","createDecorator","ctxCancellableOperation","RawContextKey","localize","registerSingleton","constructor","_tokens","WeakMap","add","editor","cts","data","invokeWithinContext","accessor","key","bindTo","IContextKeyService","tokens","LinkedList","set","removeFn","push","isEmpty","undefined","cancel","pop","CancellationTokenSource","parent","_unregister","dispose","registerEditorCommand","EditorCommand","id","kbOpts","weight","primary","precondition","runEditorCommand"]
}
