shadow$provide.module$node_modules$monaco_editor$esm$vs$platform$contextkey$browser$contextKeyService = function(require, module, exports) {
  function setContext(accessor, contextKey, contextValue) {
    accessor.get(require$_DOT__DOT__SLASH_common_SLASH_contextkey_DOT_js.IContextKeyService).createKey(String(contextKey), stringifyURIs(contextValue));
  }
  function stringifyURIs(contextValue) {
    return (0,require$_DOT__DOT__SLASH__DOT__DOT__SLASH__DOT__DOT__SLASH_base_SLASH_common_SLASH_objects_DOT_js.cloneAndChange)(contextValue, obj => {
      if (typeof obj === "object" && obj.$mid === 1) {
        return require$_DOT__DOT__SLASH__DOT__DOT__SLASH__DOT__DOT__SLASH_base_SLASH_common_SLASH_uri_DOT_js.URI.revive(obj).toString();
      }
      if (obj instanceof require$_DOT__DOT__SLASH__DOT__DOT__SLASH__DOT__DOT__SLASH_base_SLASH_common_SLASH_uri_DOT_js.URI) {
        return obj.toString();
      }
    });
  }
  Object.defineProperties(exports, {__esModule:{enumerable:!0, value:!0}, AbstractContextKeyService:{enumerable:!0, get:function() {
    return AbstractContextKeyService;
  }}, Context:{enumerable:!0, get:function() {
    return Context;
  }}, ContextKeyService:{enumerable:!0, get:function() {
    return ContextKeyService;
  }}, setContext:{enumerable:!0, get:function() {
    return setContext;
  }}});
  var require$_DOT__DOT__SLASH__DOT__DOT__SLASH__DOT__DOT__SLASH_base_SLASH_common_SLASH_event_DOT_js = require("module$node_modules$monaco_editor$esm$vs$base$common$event"), require$_DOT__DOT__SLASH__DOT__DOT__SLASH__DOT__DOT__SLASH_base_SLASH_common_SLASH_iterator_DOT_js = require("module$node_modules$monaco_editor$esm$vs$base$common$iterator"), require$_DOT__DOT__SLASH__DOT__DOT__SLASH__DOT__DOT__SLASH_base_SLASH_common_SLASH_lifecycle_DOT_js = require("module$node_modules$monaco_editor$esm$vs$base$common$lifecycle"), 
  require$_DOT__DOT__SLASH__DOT__DOT__SLASH__DOT__DOT__SLASH_base_SLASH_common_SLASH_objects_DOT_js = require("module$node_modules$monaco_editor$esm$vs$base$common$objects"), require$_DOT__DOT__SLASH__DOT__DOT__SLASH__DOT__DOT__SLASH_base_SLASH_common_SLASH_ternarySearchTree_DOT_js = require("module$node_modules$monaco_editor$esm$vs$base$common$ternarySearchTree"), require$_DOT__DOT__SLASH__DOT__DOT__SLASH__DOT__DOT__SLASH_base_SLASH_common_SLASH_uri_DOT_js = require("module$node_modules$monaco_editor$esm$vs$base$common$uri");
  module = require("module$node_modules$monaco_editor$esm$vs$nls");
  exports = require("module$node_modules$monaco_editor$esm$vs$platform$commands$common$commands");
  var require$_DOT__DOT__SLASH__DOT__DOT__SLASH_configuration_SLASH_common_SLASH_configuration_DOT_js = require("module$node_modules$monaco_editor$esm$vs$platform$configuration$common$configuration"), require$_DOT__DOT__SLASH_common_SLASH_contextkey_DOT_js = require("module$node_modules$monaco_editor$esm$vs$platform$contextkey$common$contextkey");
  require = this && this.__decorate || function(decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") {
      r = Reflect.decorate(decorators, target, key, desc);
    } else {
      for (var i = decorators.length - 1; i >= 0; i--) {
        if (d = decorators[i]) {
          r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
        }
      }
    }
    return c > 3 && r && Object.defineProperty(target, key, r), r;
  };
  var __param = this && this.__param || function(paramIndex, decorator) {
    return function(target, key) {
      decorator(target, key, paramIndex);
    };
  };
  class Context {
    constructor(id, parent) {
      this._id = id;
      this._parent = parent;
      this._value = Object.create(null);
      this._value._contextId = id;
    }
    get value() {
      return {...this._value};
    }
    setValue(key, value) {
      return this._value[key] !== value ? (this._value[key] = value, !0) : !1;
    }
    removeValue(key) {
      return key in this._value ? (delete this._value[key], !0) : !1;
    }
    getValue(key) {
      const ret = this._value[key];
      return typeof ret === "undefined" && this._parent ? this._parent.getValue(key) : ret;
    }
  }
  class NullContext extends Context {
    constructor() {
      super(-1, null);
    }
    setValue(key, value) {
      return !1;
    }
    removeValue(key) {
      return !1;
    }
    getValue(key) {
    }
  }
  NullContext.INSTANCE = new NullContext();
  class ConfigAwareContextValuesContainer extends Context {
    constructor(id, _configurationService, emitter) {
      super(id, null);
      this._configurationService = _configurationService;
      this._values = require$_DOT__DOT__SLASH__DOT__DOT__SLASH__DOT__DOT__SLASH_base_SLASH_common_SLASH_ternarySearchTree_DOT_js.TernarySearchTree.forConfigKeys();
      this._listener = this._configurationService.onDidChangeConfiguration(event => {
        if (event.source === 7) {
          var allKeys = Array.from(this._values, ([k]) => k);
          this._values.clear();
          emitter.fire(new ArrayContextKeyChangeEvent(allKeys));
        } else {
          allKeys = [];
          for (const configKey of event.affectedKeys) {
            event = `config.${configKey}`;
            const cachedItems = this._values.findSuperstr(event);
            cachedItems !== void 0 && (allKeys.push(...require$_DOT__DOT__SLASH__DOT__DOT__SLASH__DOT__DOT__SLASH_base_SLASH_common_SLASH_iterator_DOT_js.Iterable.map(cachedItems, ([key]) => key)), this._values.deleteSuperstr(event));
            this._values.has(event) && (allKeys.push(event), this._values.delete(event));
          }
          emitter.fire(new ArrayContextKeyChangeEvent(allKeys));
        }
      });
    }
    dispose() {
      this._listener.dispose();
    }
    getValue(key) {
      if (key.indexOf(ConfigAwareContextValuesContainer._keyPrefix) !== 0) {
        return super.getValue(key);
      }
      if (this._values.has(key)) {
        return this._values.get(key);
      }
      var configKey = key.substr(ConfigAwareContextValuesContainer._keyPrefix.length);
      configKey = this._configurationService.getValue(configKey);
      switch(typeof configKey) {
        case "number":
        case "boolean":
        case "string":
          break;
        default:
          configKey = Array.isArray(configKey) ? JSON.stringify(configKey) : configKey;
      }
      this._values.set(key, configKey);
      return configKey;
    }
    setValue(key, value) {
      return super.setValue(key, value);
    }
    removeValue(key) {
      return super.removeValue(key);
    }
  }
  ConfigAwareContextValuesContainer._keyPrefix = "config.";
  class ContextKey {
    constructor(service, key, defaultValue) {
      this._service = service;
      this._key = key;
      this._defaultValue = defaultValue;
      this.reset();
    }
    set(value) {
      this._service.setContext(this._key, value);
    }
    reset() {
      typeof this._defaultValue === "undefined" ? this._service.removeContext(this._key) : this._service.setContext(this._key, this._defaultValue);
    }
    get() {
      return this._service.getContextKeyValue(this._key);
    }
  }
  class SimpleContextKeyChangeEvent {
    constructor(key) {
      this.key = key;
    }
    affectsSome(keys) {
      return keys.has(this.key);
    }
    allKeysContainedIn(keys) {
      return this.affectsSome(keys);
    }
  }
  class ArrayContextKeyChangeEvent {
    constructor(keys) {
      this.keys = keys;
    }
    affectsSome(keys) {
      for (const key of this.keys) {
        if (keys.has(key)) {
          return !0;
        }
      }
      return !1;
    }
    allKeysContainedIn(keys) {
      return this.keys.every(key => keys.has(key));
    }
  }
  class CompositeContextKeyChangeEvent {
    constructor(events) {
      this.events = events;
    }
    affectsSome(keys) {
      for (const e of this.events) {
        if (e.affectsSome(keys)) {
          return !0;
        }
      }
      return !1;
    }
    allKeysContainedIn(keys) {
      return this.events.every(evt => evt.allKeysContainedIn(keys));
    }
  }
  class AbstractContextKeyService extends require$_DOT__DOT__SLASH__DOT__DOT__SLASH__DOT__DOT__SLASH_base_SLASH_common_SLASH_lifecycle_DOT_js.Disposable {
    constructor(myContextId) {
      super();
      this._onDidChangeContext = this._register(new require$_DOT__DOT__SLASH__DOT__DOT__SLASH__DOT__DOT__SLASH_base_SLASH_common_SLASH_event_DOT_js.PauseableEmitter({merge:input => new CompositeContextKeyChangeEvent(input)}));
      this.onDidChangeContext = this._onDidChangeContext.event;
      this._isDisposed = !1;
      this._myContextId = myContextId;
    }
    createKey(key, defaultValue) {
      if (this._isDisposed) {
        throw Error("AbstractContextKeyService has been disposed");
      }
      return new ContextKey(this, key, defaultValue);
    }
    bufferChangeEvents(callback) {
      this._onDidChangeContext.pause();
      try {
        callback();
      } finally {
        this._onDidChangeContext.resume();
      }
    }
    createScoped(domNode) {
      if (this._isDisposed) {
        throw Error("AbstractContextKeyService has been disposed");
      }
      return new ScopedContextKeyService(this, domNode);
    }
    contextMatchesRules(rules) {
      if (this._isDisposed) {
        throw Error("AbstractContextKeyService has been disposed");
      }
      const context = this.getContextValuesContainer(this._myContextId);
      return rules ? rules.evaluate(context) : !0;
    }
    getContextKeyValue(key) {
      if (!this._isDisposed) {
        return this.getContextValuesContainer(this._myContextId).getValue(key);
      }
    }
    setContext(key, value) {
      if (!this._isDisposed) {
        var myContext = this.getContextValuesContainer(this._myContextId);
        myContext && myContext.setValue(key, value) && this._onDidChangeContext.fire(new SimpleContextKeyChangeEvent(key));
      }
    }
    removeContext(key) {
      this._isDisposed || this.getContextValuesContainer(this._myContextId).removeValue(key) && this._onDidChangeContext.fire(new SimpleContextKeyChangeEvent(key));
    }
    getContext(target) {
      if (this._isDisposed) {
        var JSCompiler_temp = NullContext.INSTANCE;
      } else {
        JSCompiler_temp = this.getContextValuesContainer;
        a: {
          for (; target;) {
            if (target.hasAttribute("data-keybinding-context")) {
              target = (target = target.getAttribute("data-keybinding-context")) ? parseInt(target, 10) : NaN;
              break a;
            }
            target = target.parentElement;
          }
          target = 0;
        }
        JSCompiler_temp = JSCompiler_temp.call(this, target);
      }
      return JSCompiler_temp;
    }
    dispose() {
      super.dispose();
      this._isDisposed = !0;
    }
  }
  let ContextKeyService = class extends AbstractContextKeyService {
    constructor(configurationService) {
      super(0);
      this._contexts = new Map();
      this._lastContextId = 0;
      configurationService = this._register(new ConfigAwareContextValuesContainer(this._myContextId, configurationService, this._onDidChangeContext));
      this._contexts.set(this._myContextId, configurationService);
    }
    getContextValuesContainer(contextId) {
      return this._isDisposed ? NullContext.INSTANCE : this._contexts.get(contextId) || NullContext.INSTANCE;
    }
    createChildContext(parentContextId = this._myContextId) {
      if (this._isDisposed) {
        throw Error("ContextKeyService has been disposed");
      }
      const id = ++this._lastContextId;
      this._contexts.set(id, new Context(id, this.getContextValuesContainer(parentContextId)));
      return id;
    }
    disposeContext(contextId) {
      this._isDisposed || this._contexts.delete(contextId);
    }
  };
  ContextKeyService = require([__param(0, require$_DOT__DOT__SLASH__DOT__DOT__SLASH_configuration_SLASH_common_SLASH_configuration_DOT_js.IConfigurationService)], ContextKeyService);
  class ScopedContextKeyService extends AbstractContextKeyService {
    constructor(parent, domNode) {
      super(parent.createChildContext());
      this._parentChangeListener = this._register(new require$_DOT__DOT__SLASH__DOT__DOT__SLASH__DOT__DOT__SLASH_base_SLASH_common_SLASH_lifecycle_DOT_js.MutableDisposable());
      this._parent = parent;
      this._updateParentChangeListener();
      this._domNode = domNode;
      this._domNode.hasAttribute("data-keybinding-context") && (parent = "", this._domNode.classList && (parent = Array.from(this._domNode.classList.values()).join(", ")), console.error(`Element already has context attribute${parent ? ": " + parent : ""}`));
      this._domNode.setAttribute("data-keybinding-context", String(this._myContextId));
    }
    _updateParentChangeListener() {
      this._parentChangeListener.value = this._parent.onDidChangeContext(e => {
        const thisContextValues = this._parent.getContextValuesContainer(this._myContextId).value;
        e.allKeysContainedIn(new Set(Object.keys(thisContextValues))) || this._onDidChangeContext.fire(e);
      });
    }
    dispose() {
      this._isDisposed || (this._parent.disposeContext(this._myContextId), this._domNode.removeAttribute("data-keybinding-context"), super.dispose());
    }
    getContextValuesContainer(contextId) {
      return this._isDisposed ? NullContext.INSTANCE : this._parent.getContextValuesContainer(contextId);
    }
    createChildContext(parentContextId = this._myContextId) {
      if (this._isDisposed) {
        throw Error("ScopedContextKeyService has been disposed");
      }
      return this._parent.createChildContext(parentContextId);
    }
    disposeContext(contextId) {
      this._isDisposed || this._parent.disposeContext(contextId);
    }
  }
  exports.CommandsRegistry.registerCommand("_setContext", setContext);
  exports.CommandsRegistry.registerCommand({id:"getContextKeyInfo", handler() {
    return [...require$_DOT__DOT__SLASH_common_SLASH_contextkey_DOT_js.RawContextKey.all()].sort((a, b) => a.key.localeCompare(b.key));
  }, metadata:{description:(0,module.localize)("getContextKeyInfo", "A command that returns information about context keys"), args:[]}});
  exports.CommandsRegistry.registerCommand("_generateContextKeyInfo", function() {
    const result = [], seen = new Set();
    for (const info of require$_DOT__DOT__SLASH_common_SLASH_contextkey_DOT_js.RawContextKey.all()) {
      seen.has(info.key) || (seen.add(info.key), result.push(info));
    }
    result.sort((a, b) => a.key.localeCompare(b.key));
    console.log(JSON.stringify(result, void 0, 2));
  });
};

//# sourceMappingURL=module$node_modules$monaco_editor$esm$vs$platform$contextkey$browser$contextKeyService.js.map
