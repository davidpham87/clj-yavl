{
"version":3,
"file":"module$node_modules$vega_label$build$vega_label.js",
"lineCount":406,
"mappings":"AAAAA,cAAA,CAAA,+CAAA,GAAoE,QAAQ,CAACC,OAAD,EAASC,MAAT,EAAgBC,OAAhB,CAAyB;AACpG,WAAS,CAACC,MAAD,EAASC,OAAT,CAAkB;AAC1B,UAAOF,QAAP,KAAmB,QAAnB,IAA+B,MAAOD,OAAtC,KAAiD,WAAjD,GAA+DG,OAAA,CAAQF,OAAR,EAAiBF,OAAA,CAAQ,2DAAR,CAAjB,EAA6CA,OAAA,CAAQ,2DAAR,CAA7C,EAAqEA,OAAA,CAAQ,uDAAR,CAArE,EAA+FA,OAAA,CAAQ,+CAAR,CAA/F,CAA/D,GACA,MAAOK,OAAP,KAAkB,UAAlB,IAAgCA,MAAOC,CAAAA,GAAvC,GAA6CD,MAAA,CAAO,CAAC,SAAD,EAAY,iBAAZ,EAA+B,aAA/B,EAA8C,eAA9C,EAA+D,WAA/D,CAAP,EAAoFD,OAApF,CAA7C,IACCD,MAAA,GAAS,MAAOI,WAAP;AAAsB,eAAtB,GAAoCA,UAApC,GAAiDJ,MAAjD,IAA2DK,IAApE,EAA0EJ,OAAA,EAASD,MAAOM,CAAAA,IAAP,GAAcN,MAAOM,CAAAA,IAArB,IAA6B,EAA7B,EAAiCN,MAAOM,CAAAA,IAAKC,CAAAA,UAA7C,GAA0D,EAAnE,GAAwEP,MAAOM,CAAAA,IAA/E,EAAqFN,MAAOM,CAAAA,IAA5F,EAAkGN,MAAOM,CAAAA,IAAzG,EAA+GN,MAAOM,CAAAA,IAAtH,CAD3E,CADA;AAD0B,GAA3B,CAAD,CAIG,IAJH,EAIU,QAAS,CAACP,OAAD,EAAUS,cAAV,EAA0BC,UAA1B,EAAsCC,YAAtC,EAAoDC,QAApD,CAA8D;AAI/EC,YAASA,YAAW,CAACC,CAAD,EAAIC,IAAJ,CAAU;AAC5B,YAAMC,SAASF,CAAEE,CAAAA,MAAF,EAAf;AAEaC,OAAZF,IAAYE,IAAJ,EAAIA,EAAAA,OAAb,CAAqBC,CAAA,IAAKF,MAAOG,CAAAA,GAAP,CAAWL,CAAA,CAAEI,CAAEE,CAAAA,QAAF,CAAW,CAAX,CAAF,CAAX,EAA6BN,CAAA,CAAEI,CAAEE,CAAAA,QAAF,CAAW,CAAX,CAAF,CAA7B,CAA1B,CAAA;AACA,aAAO,CAACJ,MAAD,EAASK,IAAAA,EAAT,CAAP;AAJ4B;AAM9BC,YAASA,YAAW,CAACR,CAAD,EAAIS,QAAJ,EAAcC,UAAd,EAA0BC,WAA1B,EAAuCC,WAAvC,CAAoD;AAAA,YAEhEC,QAAQb,CAAEa,CAAAA,KAFsD,EAGpEC,SAASd,CAAEc,CAAAA,MAHyD;AAIpEC,iBAAAA,GAASJ,WAATI,IAAwBH,WAAxBG;AAJoE,YAKpEC,UAAUpB,UAAWqB,CAAAA,MAAX,CAAkBJ,KAAlB,EAAyBC,MAAzB,CAAiCI,CAAAA,UAAjC,CAA4C,IAA5C,CAL0D;AAAA,UAMpEC,kBAAkBvB,UAAWqB,CAAAA,MAAX,CAAkBJ,KAAlB,EAAyBC,MAAzB,CAAiCI,CAAAA,UAAjC,CAA4C,IAA5C,CANkD,EAOpEE,gBAAgBL,WAAhBK,IAA0BxB,UAAWqB,CAAAA,MAAX,CAAkBJ,KAAlB,EAAyBC,MAAzB,CAAiCI,CAAAA,UAAjC,CAA4C,IAA5C,CAP0C;AAUtER,gBAAWP,CAAAA,OAAX,CAAmBkB,KAAA,IAASC,IAAA,CAAKN,OAAL,EAAcK,KAAd,EAAqB,CAAA,CAArB,CAA5B,CAAA;AACAC,UAAA,CAAKH,eAAL,EAAsBV,QAAtB,EAAgC,CAAA,CAAhC,CAAA;AACIM,iBAAJ,IACEO,IAAA,CAAKF,aAAL,EAAoBX,QAApB,EAA8B,CAAA,CAA9B,CADF;AAKMc,cAAAA,GAyBC,IAAIC,WAAJ,CAzBkBR,OAyBMS,CAAAA,YAAR,CAAqB,CAArB,EAAwB,CAAxB,EAzBWZ,KAyBX,EAzBkBC,MAyBlB,CAA0Cb,CAAAA,IAAKsB,CAAAA,MAA/D,CAzBDA;AACJG,gBAAAA,GAwBK,IAAIF,WAAJ,CAxBsBL,eAwBEM,CAAAA,YAAR,CAAqB,CAArB,EAAwB,CAAxB,EAxBuBZ,KAwBvB,EAxB8BC,MAwB9B,CAA0Cb,CAAAA,IAAKsB,CAAAA,MAA/D,CAxBLG;AACAC,mBAAAA,GAAeZ,WAAfY,IAuBK,IAAIH,WAAJ,CAvB8BJ,aAuBNK,CAAAA,YAAR,CAAqB,CAArB,EAAwB,CAAxB,EAvB6BZ,KAuB7B,EAvBoCC,MAuBpC,CAA0Cb,CAAAA,IAAKsB,CAAAA,MAA/D,CAvBLI;AACAC,qBAAAA,GAAS5B,CAAEE,CAAAA,MAAF,EAAT0B;AAHF,YAIEC,SAASd,WAATc,IAAmB7B,CAAEE,CAAAA,MAAF,EAJrB;AAjBsE,UAwBlE4B,CAxBkE,EAwB/DC,CAxB+D;AAAA,UAwBzDC,CAxByD,EAwB/CC,KAxB+C,EAwBxCC,WAxBwC,EAwB3BC,aAxB2B;AAyBtE,WAAKJ,CAAL,GAAS,CAAT,EAAYA,CAAZ,GAAgBjB,MAAhB,EAAwB,EAAEiB,CAA1B;AACE,aAAKD,CAAL,GAAS,CAAT,EAAYA,CAAZ,GAAgBjB,KAAhB,EAAuB,EAAEiB,CAAzB,CAA4B;AAC1B,cAAAM,IAAQL,CAARK,GAAYvB,KAAZuB,GAAoBN,CAApB;AACAG,eAAA,GAAQV,QAAA,CAAOa,CAAP,CAAR,GAnCaC,UAmCb;AACAF,uBAAA,GAAgBT,UAAA,CAAeU,CAAf,CAAhB,GApCaC,UAoCb;AACAH,qBAAA,GAAcnB,WAAd,IAAwBY,aAAA,CAAaS,CAAb,CAAxB,GArCaC,UAqCb;AACA,cAAIJ,KAAJ,IAAaC,WAAb,IAA4BC,aAA5B;AACEG,aAGA,GAHItC,CAAA,CAAE8B,CAAF,CAGJ,EAFAE,CAEA,GAFIhC,CAAA,CAAE+B,CAAF,CAEJ,EADKnB,WACL,IADqBqB,CAAAA,KACrB,IAD8BE,CAAAA,aAC9B,IAD8CP,eAAOvB,CAAAA,GAAP,CAAWiC,CAAX,EAAcN,CAAd,CAC9C,EAAIjB,WAAJ,KAAekB,KAAf,IAAwBC,WAAxB,KAAsCL,MAAOxB,CAAAA,GAAP,CAAWiC,CAAX,EAAcN,CAAd,CAAtC;AAJF;AAL0B;AAD9B;AAcA,aAAO,CAACJ,eAAD,EAASC,MAAT,CAAP;AAvCsE;AA4CxEP,YAASA,KAAI,CAACN,OAAD,EAAUK,KAAV,EAAiBkB,QAAjB,CAA2B;AACtC,UAAKlB,KAAMmB,CAAAA,MAAX,CAAA;AACA,YAAMC,OAAOpB,KAAA,CAAM,CAAN,CAASqB,CAAAA,IAAKC,CAAAA,QAA3B;AACIF,YAAJ,KAAa,OAAb,GACEpB,KAAMlB,CAAAA,OAAN,CAAcyC,KAAA,IAAS;AACrBA,eAAMvB,CAAAA,KAAMlB,CAAAA,OAAZ,CAAoBuC,IAAA,IAAQpB,IAAA,CAAKN,OAAL,EAAc0B,IAAKrB,CAAAA,KAAnB,EAA0BkB,QAA1B,CAA5B,CAAA;AADqB,SAAvB,CADF,GAKE5C,cAAekD,CAAAA,KAAf,CAAqBJ,IAArB,CAA2BnB,CAAAA,IAA3B,CAAgCN,OAAhC,EAAyC,CACvCK,MAAOkB,QAAA,GAAWlB,KAAMyB,CAAAA,GAAN,CAAUC,OAAV,CAAX,GAAgC1B,KADA,CAAzC,CALF;AAFA;AADsC;AAmBxC0B,YAASA,QAAO,CAACC,MAAD,CAAS;AACjBC,YAAAA,GAAOpD,YAAaqD,CAAAA,QAAb,CAAsBF,MAAtB,EAA8B,EAA9B,CAAPC;AACN,aAAIA,MAAKE,CAAAA,MAAT,IAAmBF,MAAKG,CAAAA,aAAxB,KAA0C,CAA1C,IAA+CH,MAAKI,CAAAA,IAApD,IAA4DJ,MAAKK,CAAAA,WAAjE,KAAiF,CAAjF,GACS,CACL,GAAGL,MADE,EAELG,cAAe,CAFV,EAGLD,OAAQ,MAHH,EAILG,YAAa,CAJR,CADT,GAQOL,MARP;AAFuB;AA6BzBM,YAASA,OAAO,CAACC,CAAD,EAAIC,CAAJ,CAAO;AACrB,YAAMC,QAAQ,IAAIlC,WAAJ,CAAgB,CAAC,GAAGgC,CAAH,GAAOC,CAAP,GAbxBE,EAawB,IAbxBA,EAawB,CAAjB,CAAd;AAOA,aAAO,CACED,KADF,EAELE,IAAK,CAAC9B,CAAD,EAAIC,CAAJ,CAAA6B,IAAU;AACPxB,SAAAA,GAAQL,CAARK,GAAYoB,CAAZpB,GAAgBN,CAAhBM;AACN,eAAOsB,KAAA,CAAMtB,CAAN,KA5BDyB,CA4BC,CAAP,GAA8B,CAA9B,KAAoCzB,CAApC,GA1BE0B,EA0BF;AAFa,OAFV,EAMLzD,IAAK,CAACyB,CAAD,EAAIC,CAAJ,CAAA1B,IAAU;AACP+B,SAAAA,GAAQL,CAARK,GAAYoB,CAAZpB,GAAgBN,CAAhBM;AAZRsB,aAAA,CAaOtB,CAbP,KAnBQyB,CAmBR,CAAA,IAasB,CAbtB,KAa4BzB,CAb5B,GAjBI0B,EAiBJ;AAWe,OANV,EAULC,MAAO,CAACjC,CAAD,EAAIC,CAAJ,CAAAgC,IAAU;AACT3B,SAAAA,GAAQL,CAARK,GAAYoB,CAAZpB,GAAgBN,CAAhBM;AAbRsB,aAAA,CAcStB,CAdT,KAtBQyB,CAsBR,CAAA,IAcwBG,EAAE,CAAFA,KAAQ5B,CAAR4B,GAlCpBF,EAkCoBE,EAdxB;AAYiB,OAVZ,EAcLC,SAAU,CAACnC,CAAD,EAAIC,CAAJ,EAAOmC,EAAP,EAAWC,EAAX,CAAAF,IAAkB;AAAA,YAGxBG,GAHwB,EAIxBC,UAJwB,EAKxBC,QALwB;AAM1B,aAAA,EAAOC,EAAP,IAAYxC,CAAZ,EAAe,EAAEwC,EAAjB,CAAoB;AAClB,cAAAC,QAAQD,EAARC,GAAYhB,CAAZgB,GAAgB1C,CAAhB;AACAsC,aAAA,GAAMG,EAAN,GAAUf,CAAV,GAAcU,EAAd;AACAG,oBAAA,GAAaG,KAAb,KA/CIX,CA+CJ;AACAS,kBAAA,GAAWF,GAAX,KAhDIP,CAgDJ;AACA,cAAIQ,UAAJ,KAAmBC,QAAnB;AACE,gBAAIZ,KAAA,CAAMW,UAAN,CAAJ,GAAwBI,MAAA,CAAOD,KAAP,GAhD1BV,EAgD0B,CAAxB,GAA8CY,MAAA,EAAQN,GAAR,GAhDhDN,EAgDgD,IAAqB,CAArB,CAA9C;AACE,qBAAO,CAAA,CAAP;AADF;AADF,gBAIO;AAEL,gBADIJ,KAAA,CAAMW,UAAN,CACJ,GADwBI,MAAA,CAAOD,KAAP,GApD1BV,EAoD0B,CACxB,IAAIJ,KAAA,CAAMY,QAAN,CAAJ,GAAsBI,MAAA,EAAQN,GAAR,GArDxBN,EAqDwB,IAAqB,CAArB,CAAtB;AAA+C,qBAAO,CAAA,CAAP;AAA/C;AACA,iBAASa,KAAT,GAAaN,UAAb,GAA0B,CAA1B,EAA6BM,KAA7B,GAAiCL,QAAjC,EAA2C,EAAEK,KAA7C;AACE,kBAAIjB,KAAA,CAAMiB,KAAN,CAAJ;AAAc,uBAAO,CAAA,CAAP;AAAd;AADF;AAHK;AATW;AAiBpB,eAAO,CAAA,CAAP;AAvB0B,OAdvB,EAuCLC,SAAU,CAAC9C,CAAD,EAAIC,CAAJ,EAAOmC,EAAP,EAAWC,EAAX,CAAAS,IAAkB;AAAA,YACfR,GADe,EACVC,UADU,EACEC,QADF;AAE1B,aAAA,EAAOvC,CAAP,IAAYoC,EAAZ,EAAgB,EAAEpC,CAAlB,CAAqB;AACnB,cAAAyC,QAAQzC,CAARyC,GAAYhB,CAAZgB,GAAgB1C,CAAhB;AACAsC,aAAA,GAAMrC,CAAN,GAAUyB,CAAV,GAAcU,EAAd;AACAG,oBAAA,GAAaG,KAAb,KApEIX,CAoEJ;AACAS,kBAAA,GAAWF,GAAX,KArEIP,CAqEJ;AACA,cAAIQ,UAAJ,KAAmBC,QAAnB;AAnDJZ,iBAAA,CAoDWW,UApDX,CAAA,IAoDuBI,MAAA,CAAOD,KAAP,GArEnBV,EAqEmB,CApDvB,GAoD6CY,MAAA,EAAQN,GAAR,GArEzCN,EAqEyC,IAAqB,CAArB,CApD7C;AAmDI;AAKE,iBAxDNJ,KAAA,CAsDWW,UAtDX,CAwDW,IAFYI,MAAAT,CAAOQ,KAAPR,GAvEnBF,EAuEmBE,CAEZ,EAxDXN,KAAA,CAuDWY,QAvDX,CAwDW,IADUI,MAAAV,EAAQI,GAARJ,GAxEjBF,EAwEiBE,IAAqB,CAArBA,CACV,EAAAW,KAAA,GAAIN,UAAJ,GAAiB,CAAtB,EAAyBM,KAAzB,GAA6BL,QAA7B,EAAuC,EAAEK,KAAzC;AAxDNjB,mBAAA,CAwDuDiB,KAxDvD,CAAA,IAwD0DX,UAxD1D;AAwDM;AALF;AALmB;AAFK,OAvCvB,EAuDLa,WAAY,CAAC/C,CAAD,EAAIC,CAAJ,EAAOmC,EAAP,EAAWC,EAAX,CAAAU,IAAkB;AAAA,YACjBT,GADiB,EACZC,UADY,EACAC,QADA;AAE5B,aAAA,EAAOvC,CAAP,IAAYoC,EAAZ,EAAgB,EAAEpC,CAAlB,CAAqB;AACnB,cAAAyC,QAAQzC,CAARyC,GAAYhB,CAAZgB,GAAgB1C,CAAhB;AACAsC,aAAA,GAAMrC,CAAN,GAAUyB,CAAV,GAAcU,EAAd;AACAG,oBAAA,GAAaG,KAAb,KApFIX,CAoFJ;AACAS,kBAAA,GAAWF,GAAX,KArFIP,CAqFJ;AACA,cAAIQ,UAAJ,KAAmBC,QAAnB;AAhEJZ,iBAAA,CAiEaW,UAjEb,CAAA,IAiEyBK,MAAA,CAAOF,KAAP,GArFrBV,EAqFqB,CAjEzB,GAiE+CW,MAAA,EAAQL,GAAR,GArF3CN,EAqF2C,IAAqB,CAArB,CAjE/C;AAgEI;AAKE,iBArENJ,KAAA,CAmEaW,UAnEb,CAqEW,IAFcK,MAAAV,CAAOQ,KAAPR,GAvFrBF,EAuFqBE,CAEd,EArEXN,KAAA,CAoEaY,QApEb,CAqEW,IADYG,MAAAT,EAAQI,GAARJ,GAxFnBF,EAwFmBE,IAAqB,CAArBA,CACZ,EAAAW,KAAA,GAAIN,UAAJ,GAAiB,CAAtB,EAAyBM,KAAzB,GAA6BL,QAA7B,EAAuC,EAAEK,KAAzC;AArENjB,mBAAA,CAqEyDiB,KArEzD,CAAA,IAqE4DX,CArE5D;AAqEM;AALF;AALmB;AAFO,OAvDzB,EAuELc,YAAa,CAAChD,CAAD,EAAIC,CAAJ,EAAOmC,EAAP,EAAWC,EAAX,CAAAW,IAAkBhD,CAAlBgD,GAAsB,CAAtBA,IAA2B/C,CAA3B+C,GAA+B,CAA/BA,IAAoCX,EAApCW,IAA0CrB,CAA1CqB,IAA+CZ,EAA/CY,IAAqDtB,CAvE7D,CAAP;AARqB;AAmFvBuB,YAASA,OAAO,CAAClE,KAAD,EAAQC,MAAR,EAAgBkE,OAAhB,CAAyB;AAAA,YACjCC,QAAQC,IAAKC,CAAAA,GAAL,CAAS,CAAT,EAAYD,IAAKE,CAAAA,IAAL,CAAUvE,KAAV,GAAkBC,MAAlB,GAA2B,GAA3B,CAAZ,CADyB,EAErC0C,IAAI,CAAC,GAAG3C,KAAH,GAAW,CAAX,GAAemE,OAAf,GAAyBC,KAAzB,IAAkCA,KAAlC,CAFgC,EAGrCxB,IAAI,CAAC,GAAG3C,MAAH,GAAY,CAAZ,GAAgBkE,OAAhB,GAA0BC,KAA1B,IAAmCA,KAAnC,CAHgC,EAIrCI,QAAQC,CAAAD,IAAK,CAAC,GAAGC,CAAH,GAAON,OAAP,IAAkBC,KAAlB,CAJuB;AAKvCI,WAAME,CAAAA,MAAN,GAAeD,CAAAE,IAAKF,CAALE,GAASP,KAATO,GAAiBR,OAAhC;AACAK,WAAMnF,CAAAA,MAAN,GAAe,EAAAuF,IAAMlC,MAAA,CAAOC,CAAP,EAAUC,CAAV,CAArB;AACA4B,WAAMJ,CAAAA,KAAN,GAAcA,KAAd;AACAI,WAAML,CAAAA,OAAN,GAAgBA,OAAhB;AACAK,WAAMxE,CAAAA,KAAN,GAAcA,KAAd;AACAwE,WAAMvE,CAAAA,MAAN,GAAeA,MAAf;AACA,aAAOuE,KAAP;AAXuC;AA0EzCP,YAASA,YAAW,CAAChD,CAAD,EAAIC,CAAJ,EAAO2D,SAAP,EAAkBC,UAAlB,EAA8B9E,KAA9B,EAAqCC,MAArC,CAA6C;AACvD4E,eAAJnB,IAAgB,CAAhBA;AACJ,aAAOzC,CAAP,GAAWyC,SAAX,GAAe,CAAf,IAAoBzC,CAApB,GAAwByC,SAAxB,GAA4B1D,KAA5B,IAAqCkB,CAArC,IAA0CwC,SAA1C,GAA8CoB,UAA9C,GAA2D,CAA3D,IAAgE,CAAhE,IAAqE5D,CAArE,GAAyEwC,SAAzE,GAA6EzD,MAA7E;AAF+D;AAIjE8E,YAASA,UAAS,CAAC5F,CAAD,EAAI8B,CAAJ,EAAOC,CAAP,EAAU4D,UAAV,EAAsBD,SAAtB,EAAiCjC,CAAjC,EAAoCoC,GAApC,EAAyCC,GAAzC,CAA8C;AACxDtC,eAAAA,GAAIkC,SAAJlC,GAAgBC,CAAhBD,IAAqBmC,UAArBnC,GAAkC,CAAlCA;AACJuC,gBAAAA,GAAK/F,CAAA,CAAE8B,CAAF,GAAM0B,SAAN,CAALuC;AACA7B,OAAAA,GAAKlE,CAAA,CAAE8B,CAAF,GAAM0B,SAAN,CAALU;AACA8B,eAAAA,GAAKhG,CAAA,CAAE+B,CAAF,IAAW0B,CAAX,IAAe,CAAf,EAALuC;AACA7B,OAAAA,GAAKnE,CAAA,CAAE+B,CAAF,GAAM0B,CAAN,CAALU;AACF,aAAO0B,GAAIf,CAAAA,WAAJ,CAAgBiB,UAAhB,EAAoBC,SAApB,EAAwB9B,CAAxB,EAA4BC,CAA5B,CAAP,IAA0C0B,GAAI5B,CAAAA,QAAJ,CAAa8B,UAAb,EAAiBC,SAAjB,EAAqB9B,CAArB,EAAyBC,CAAzB,CAA1C,IAA0E2B,GAA1E,IAAiFA,GAAI7B,CAAAA,QAAJ,CAAa8B,UAAb,EAAiBC,SAAjB,EAAqB9B,CAArB,EAAyBC,CAAzB,CAAjF;AAN8D;AAmRhE8B,YAASA,eAAe,CAACjG,CAAD,EAAIkG,OAAJ,EAAaC,OAAb,EAAsBC,OAAtB,CAA+B;AAAA,YAC/CvF,QAAQb,CAAEa,CAAAA,KADqC,EAEnDC,SAASd,CAAEc,CAAAA,MAFwC,EAGnD+E,eAAMK,OAAA,CAAQ,CAAR,CAH6C,EAInDJ,eAAMI,OAAA,CAAQ,CAAR,CAJ6C,EAKnDG,IAAID,OAAQ5D,CAAAA,MALuC;AAMrD,aAAO,QAAS,CAACpC,CAAD,CAAI;AAAA,cACZE,WAAWF,CAAEE,CAAAA,QADD,EAEhBqF,aAAavF,CAAEkG,CAAAA,KAAMC,CAAAA,QAFL;AAKlB,YAAIjG,QAAA,CAAS,CAAT,CAAJ,GAAkB,CAAlB,IAAuBA,QAAA,CAAS,CAAT,CAAvB,GAAqC,CAArC,IAA0CA,QAAA,CAAS,CAAT,CAA1C,GAAwDO,KAAxD,IAAiEP,QAAA,CAAS,CAAT,CAAjE,GAA+EQ,MAA/E;AACE,iBAAO,CAAA,CAAP;AADF;AALkB,YAQd4E,YAAYtF,CAAEsF,CAAAA,SAAdA,IAA2B,CARb,EAShBc,EATgB,EAUhBC,EAVgB;AAAA,YAahBC,YAbgB,EAchBX,EAdgB;AAAA,YAiBhB5B,EAjBgB;AAAA,YAmBhBwC,EAnBgB;AAAA,YAsBhBC,GAtBgB,EAuBhBC,GAvBgB;AA0BlB,aAAK,IAAIlC,IAAI,CAAb,EAAgBA,CAAhB,GAAoB0B,CAApB,EAAuB,EAAE1B,CAAzB,CAA4B;AAC1B6B,YAAA,IAAML,OAAA,CAAQxB,CAAR,CAAN,GAAmB,CAAnB,IAA0B,CAA1B;AACA8B,YAAA,IAAMN,OAAA,CAAQxB,CAAR,CAAN,KAAqB,CAArB,GAA2B,CAA3B,IAAkC,CAAlC;AACA,cAAAmC,WAAWN,EAAXM,KAAkB,CAAlBA,IAAuBL,EAAvBK,KAA8B,CAA9BA,IAAmCV,OAAA,CAAQzB,CAAR,CAAnCmC,GAAgD,CAAhD;AACA,cAAAC,aAAaP,EAAA,IAAMC,EAAN,GAAWvB,IAAK8B,CAAAA,OAAhB,GAA0B,CAAvC;AACAN,sBAAA,GAAeN,OAAA,CAAQzB,CAAR,CAAA,GAAa,CAAb,GAAiB,CAAC,CAAlB,GAAsB,CAArC;AACAoB,YAAA,GAAKzF,QAAA,CAAS,CAAT,GAAakG,EAAb,CAAL,GAAwBJ,OAAA,CAAQzB,CAAR,CAAxB,GAAqC6B,EAArC,GAA0CO,UAA1C;AACAJ,YAAA,GAAKrG,QAAA,CAAS,CAAT,GAAamG,EAAb,CAAL,GAAwBC,YAAxB,GAAuCf,UAAvC,GAAoDc,EAApD,GAAyD,CAAzD,GAA6DL,OAAA,CAAQzB,CAAR,CAA7D,GAA0E8B,EAA1E,GAA+EM,UAA/E;AACAf,oBAAA,GAAKW,EAAL,GAAUhB,UAAV,GAAuB,CAAvB;AACAxB,YAAA,GAAKwC,EAAL,GAAUhB,UAAV,GAAuB,CAAvB;AACA,cAAAsB,MAAMjH,CAAA,CAAE+F,EAAF,CAAN;AACAa,aAAA,GAAM5G,CAAA,CAAEgG,UAAF,CAAN;AACAa,aAAA,GAAM7G,CAAA,CAAEmE,EAAF,CAAN;AACA,cAAI,CAACuB,SAAL,CAAgB;AAEJuB,gBAAAA,KAAAA,GAAAA;AAAUL,gBAAAA,KAAAA,GAAAA;AAAKC,gBAAAA,MAAAA,GAAAA;AAAKhB,gBAAAA,MAAAA,YAAAA,EAAKC,MAAAA,YAALD,EAAoCiB,oBAAAA,QAApCjB;AAA9B,gBA6BGA,GAAIf,CAAAA,WAAJ,CAAgBmC,EAAhB,EAAqBL,EAArB,EAA0BM,GAA1B,EAA+BL,GAA/B,CA7BH,IA6BmE5C,CAAxB6C,iBAAwB7C,IAAZ6B,GAAY7B,IAAL4B,GAAK5B,EAAAA,QAAzB,CAAkCgD,EAAlC,EAAuCL,EAAvC,EAA4CM,GAA5C,EAAiDL,GAAjD,CA7B1C;AAEE;AAFF;AAKEnB,uBAAA,GAAY/F,cAAewH,CAAAA,WAAYtG,CAAAA,KAA3B,CAAiCT,CAAEkG,CAAAA,KAAnC,EAA0ClG,CAAEkG,CAAAA,KAAMc,CAAAA,IAAlD,CAAZ;AALF;AAFc;AAUhBC,YAAA,GAAKtB,EAAL,GAAUW,YAAV,GAAyBhB,SAAzB,GAAqCc,EAArC,GAA0C,CAA1C;AACAT,YAAA,GAAKsB,EAAL,GAAU3B,SAAV,GAAsB,CAAtB;AACAxB,YAAA,GAAKmD,EAAL,GAAU3B,SAAV,GAAsB,CAAtB;AACAuB,aAAA,GAAMjH,CAAA,CAAE+F,EAAF,CAAN;AACAmB,aAAA,GAAMlH,CAAA,CAAEkE,EAAF,CAAN;AACS+C,aAAAA,GAAAA,GAAAA;AAAKC,aAAAA,GAAAA,GAAAA;AAAKN,2BAAAA,GAAAA,GAAAA;AAAKC,cAAAA,eAAAA,GAAAA,EAAKhB,eAAAA,YAALgB,EAAUf,eAAAA,YAAVe;AAAxB,cAgBK,CAAAhB,YAAIf,CAAAA,WAAJ,CAAgBmC,GAAhB,EAAqBL,iBAArB,EAA0BM,GAA1B,EAA+BL,YAA/B,CAhBL,IAgB4C,CAAyB5C,CAAxB6C,QAAwB7C,IAAZ6B,YAAY7B,IAAL4B,YAAK5B,EAAAA,QAAzB,CAAkCgD,GAAlC,EAAuCL,iBAAvC,EAA4CM,GAA5C,EAAiDL,YAAjD,CAhB5C;AAOE,mBALAzG,CAAE0B,CAAAA,CAKK,GALA0E,EAAD,GAAWA,EAAA,GAAKE,YAAL,GAAoB,CAApB,GAAwBxC,EAAxB,GAA6B6B,EAAxC,GAAMsB,EAKL,EAJPjH,CAAE2B,CAAAA,CAIK,GAJA0E,EAAD,GAAWA,EAAA,GAAKC,YAAL,GAAoB,CAApB,GAAwBvC,EAAxB,GAA6B6B,UAAxC,GAAMW,EAIL,EAHPvG,CAAEkH,CAAAA,KAGK,GAHGC,MAAA,CAAOf,EAAP,GAAYE,YAAZ,GAA2B,CAA3B,CAGH,EAFPtG,CAAEoH,CAAAA,QAEK,GAFMC,SAAA,CAAUhB,EAAV,GAAeC,YAAf,GAA8B,CAA9B,CAEN,EADPb,YAAIjB,CAAAA,QAAJ,CAAaqC,GAAb,EAAkBL,GAAlB,EAAuBM,GAAvB,EAA4BL,GAA5B,CACO,EAAA,CAAA,CAAP;AAPF;AA5B0B;AAsC5B,eAAO,CAAA,CAAP;AAhEkB,OAApB;AANqD;AAwGvDa,YAASA,YAAY,CAACC,KAAD,EAAQC,IAAR,EAAcC,OAAd,EAAuBC,MAAvB,EAA+BC,MAA/B,EAAuCrH,UAAvC,EAAmDsH,aAAnD,EAAkEC,UAAlE,EAA8EC,SAA9E,EAAyFlD,OAAzF,EAAkGmD,MAAlG,CAA0G;AAE7H,UAAI,CAACR,KAAMnF,CAAAA,MAAX;AAAmB,eAAOmF,KAAP;AAAnB;AAF6H,UAGvHS,YAAYlD,IAAKC,CAAAA,GAAL,CAAS2C,MAAOtF,CAAAA,MAAhB,EAAwBuF,MAAOvF,CAAAA,MAA/B,CAH2G;AAAA,YAI3H4D,UAAUiC,UAAA,CAAWP,MAAX,EAAmBM,SAAnB,CAJiH;AAK3HjC,YAAAA,GAAUmC,UAAA,CAAWP,MAAX,EAAmBK,SAAnB,CAAVjC;AAL2H,YAM3HxD,WAAW4F,QAAA,CAASZ,KAAA,CAAM,CAAN,CAASrB,CAAAA,KAAlB,CANgH;AAAA,UAO3HkC,YAAY7F,QAAZ6F,KAAyB,OAAzBA,IAAoCb,KAAA,CAAM,CAAN,CAASrB,CAAAA,KAAMjF,CAAAA,KAAf,CAAqB6G,SAArB,CAAgCvF,CAAAA,QAPuD;AAQ3H/B,eAAAA,GAAc4H,SAAd5H,KAA4B,MAA5BA;AAR2H,YAS3HN,WAAWmI,YAAA,CAAa9F,QAAb,EAAuB6F,SAAvB,EAAkCP,UAAlC,EAA8CC,SAA9C,CATgH,EAU3HQ,aAAa1D,OAAb0D,KAAyB,IAAzBA,IAAiC1D,OAAjC0D,KAA6CC,QAV8E;AAW3HC,eAAAA,GAAmBhI,SAAnBgI,IAAkCT,MAAlCS,KAA6C,OAA7CA;AAX2H,UAYzHC,eAAe,CAAC,CAZyG,EAa3HC,gBAAgB,CAAC,CAb0G;AAgBvH7I,gBAAAA,GAAO0H,KAAM7E,CAAAA,GAAN,CAAU1C,CAAA,IAAK;AAC1B,cAAMsF,YAAYgD,UAAA,GAAa/I,cAAewH,CAAAA,WAAYtG,CAAAA,KAA3B,CAAiCT,CAAjC,EAAoCA,CAAEgH,CAAAA,IAAtC,CAAb,GAA2D7G,IAAAA,EAA7E;AACAsI,oBAAA,GAAe3D,IAAKC,CAAAA,GAAL,CAAS0D,YAAT,EAAuBnD,SAAvB,CAAf;AACAoD,qBAAA,GAAgB5D,IAAKC,CAAAA,GAAL,CAAS2D,aAAT,EAAwB1I,CAAEmG,CAAAA,QAA1B,CAAhB;AACA,eAAO,CACLD,MAAOlG,CADF,EAEL2I,QAAS,CAFJ,EAGLjH,EAAGvB,IAAAA,EAHE,EAILwB,EAAGxB,IAAAA,EAJE,EAKL+G,MAAO/G,IAAAA,EALF,EAMLiH,SAAUjH,IAAAA,EANL,EAOLD,SAAUA,QAAA,CAASF,CAAT,CAPL,EAQLsF,SARK,CAAP;AAJ0B,OAAf,CAAPzF;AAeN+E,aAAA,GAAUA,OAAA,KAAY,IAAZ,IAAoBA,OAApB,KAAgC2D,QAAhC,GAA2CzD,IAAKC,CAAAA,GAAL,CAAS0D,YAAT,EAAuBC,aAAvB,CAA3C,GAAmF5D,IAAKC,CAAAA,GAAL,CAAS,GAAG2C,MAAZ,CAAnF,GAAyG9C,OAAnH;AACMhF,UAAAA,GAAI+E,MAAA,CAAO6C,IAAA,CAAK,CAAL,CAAP,EAAgBA,IAAA,CAAK,CAAL,CAAhB,EAAyB5C,OAAzB,CAAJhF;AAEN,UAAI,CAAC4I,SAAL,CAAuB;AAEjBf,eAAJ,IACE5H,UAAK+I,CAAAA,IAAL,CAAU,CAACC,CAAD,EAAIC,CAAJ,CAAA,IAAUrB,OAAA,CAAQoB,CAAE3C,CAAAA,KAAV,EAAiB4C,CAAE5C,CAAAA,KAAnB,CAApB,CADF;AAKI3F,YAAAA,UAAc,CAAA,CAAdA;AACJ,aAASgE,MAAT,GAAa,CAAb,EAAgBA,MAAhB,GAAoBwB,MAAQ3D,CAAAA,MAA5B,IAAsC,CAAC7B,OAAvC,EAAoD,EAAEgE,MAAtD;AAGEhE,iBAAA,GAAcwF,MAAA,CAAQxB,MAAR,CAAd,KAA6B,CAA7B,IAAoCyB,OAAA,CAAQzB,MAAR,CAApC,GAAiD,CAAjD;AAHF;AAQMlE,aAAAA,IAAYkC,QAAZlC,IAAwBuH,aAAxBvH,IAAyCG,SAAzCH,KAAyDkH,KAAM7E,CAAAA,GAAN,CAAU1C,CAAA,IAAKA,CAAEkG,CAAAA,KAAjB,CAAzD7F;AAGNyF,eAAA,GAAUxF,UAAW8B,CAAAA,MAAX,IAAqB/B,KAArB,GAAgCD,WAAA,CAAYR,IAAZ,EAAeS,KAAf,IAA2B,EAA3B,EAA+BC,UAA/B,EAA2CC,OAA3C,EAAwDC,SAAxD,CAAhC,GAAuGb,WAAA,CAAYC,IAAZ,EAAegI,aAAf,IAAgC/H,UAAhC,CAAjH;AAnBqB;AAuBvB,YAAMkJ,QAAQvI,SAAA,GAAcwI,cAAA,CAAejB,MAAf,CAAA,CAAuBnI,IAAvB,EAA0BkG,OAA1B,EAAmC8B,aAAnC,EAAkDE,SAAlD,CAAd,GAA6EjC,cAAA,CAAejG,IAAf,EAAkBkG,OAAlB,EAA2BC,MAA3B,EAAoCC,OAApC,CAA3F;AAGAnG,gBAAKE,CAAAA,OAAL,CAAaC,CAAA,IAAKA,CAAE2I,CAAAA,OAAP,GAAiB,CAACI,KAAA,CAAM/I,CAAN,CAA/B,CAAA;AACA,aAAOH,UAAP;AA7D6H;AA+D/HoI,YAASA,WAAU,CAAC/C,CAAD,EAAI+D,KAAJ,CAAW;AAAA,YACtBjD,UAAU,IAAIkD,YAAJ,CAAiBD,KAAjB,CADY,EAE1BhD,IAAIf,CAAE9C,CAAAA,MAFoB;AAG5B,WAAK,IAAImC,IAAI,CAAb,EAAgBA,CAAhB,GAAoB0B,CAApB,EAAuB,EAAE1B,CAAzB;AAA4ByB,eAAA,CAAQzB,CAAR,CAAA,GAAaW,CAAA,CAAEX,CAAF,CAAb,IAAqB,CAArB;AAA5B;AACA,WAASA,CAAT,GAAa0B,CAAb,EAAgB1B,CAAhB,GAAoB0E,KAApB,EAA2B,EAAE1E,CAA7B;AAAgCyB,eAAA,CAAQzB,CAAR,CAAA,GAAayB,OAAA,CAAQC,CAAR,GAAY,CAAZ,CAAb;AAAhC;AACA,aAAOD,OAAP;AAL4B;AAO9BkC,YAASA,WAAU,CAAChD,CAAD,EAAI+D,KAAJ,CAAW;AAAA,YACtBlD,UAAU,IAAIoD,SAAJ,CAAcF,KAAd,CADY,EAE1BhD,IAAIf,CAAE9C,CAAAA,MAFoB;AAG5B,WAAK,IAAImC,IAAI,CAAb,EAAgBA,CAAhB,GAAoB0B,CAApB,EAAuB,EAAE1B,CAAzB;AAA4BwB,eAAA,CAAQxB,CAAR,CAAA,IAAc6E,UAAA,CAAWlE,CAAA,CAAEX,CAAF,CAAX,CAAd;AAA5B;AACA,WAASA,CAAT,GAAa0B,CAAb,EAAgB1B,CAAhB,GAAoB0E,KAApB,EAA2B,EAAE1E,CAA7B;AAAgCwB,eAAA,CAAQxB,CAAR,CAAA,GAAawB,OAAA,CAAQE,CAAR,GAAY,CAAZ,CAAb;AAAhC;AACA,aAAOF,OAAP;AAL4B;AAO9BoC,YAASA,SAAQ,CAACtF,IAAD,CAAO;AACtB,aAAOA,IAAP,IAAeA,IAAKP,CAAAA,IAApB,IAA4BO,IAAKP,CAAAA,IAAKC,CAAAA,QAAtC;AADsB;AAWxB8F,YAASA,aAAY,CAAC9F,QAAD,EAAW6F,SAAX,EAAsBP,UAAtB,EAAkCC,SAAlC,CAA6C;AAChE,YAAMuB,KAAKrJ,CAAAqJ,IAAK,CAACrJ,CAAE0B,CAAAA,CAAH,EAAM1B,CAAE0B,CAAAA,CAAR,EAAW1B,CAAE0B,CAAAA,CAAb,EAAgB1B,CAAE2B,CAAAA,CAAlB,EAAqB3B,CAAE2B,CAAAA,CAAvB,EAA0B3B,CAAE2B,CAAAA,CAA5B,CAAhB;AACA,aAAKY,QAAL,GAEWA,QAAJ,KAAiB,MAAjB,IAA2BA,QAA3B,KAAwC,MAAxC,GACEvC,CAAA,IAAKqJ,EAAA,CAAGrJ,CAAEkG,CAAAA,KAAL,CADP,GAEIkC,SAAJ,KAAkB,MAAlB,GACEpI,CAAA,IAAK;AACJiB,SAAAA,GAAQjB,CAAEkG,CAAAA,KAAMjF,CAAAA,KAAR,CAAc6G,SAAd,CAAyB7G,CAAAA,KAAjCA;AACN,eAAOoI,EAAA,CAAGpI,CAAMmB,CAAAA,MAAN,GAAenB,CAAA,CAAM4G,UAAA,KAAe,OAAf,GAAyB,CAAzB,GAA6B5G,CAAMmB,CAAAA,MAAnC,GAA4C,CAAlD,CAAf,GAAsE,CAC9EV,EAAG4H,GAD2E,EAE9E3H,EAAG2H,GAF2E,CAAzE,CAAP;AAFU,OADP,GASEtJ,CAAA,IAAK;AACJ8I,SAAAA,GAAI9I,CAAEkG,CAAAA,KAAMqD,CAAAA,MAAZT;AACN,eAAO,CAACA,CAAEnD,CAAAA,EAAH,GAAQmD,CAAEnD,CAAAA,EAAV,GAAemD,CAAEhF,CAAAA,EAAjB,IAAuB,CAAvB,EAA0BgF,CAAEhF,CAAAA,EAA5B,EAAgCgF,CAAElD,CAAAA,EAAlC,GAAuCkD,CAAElD,CAAAA,EAAzC,GAA8CkD,CAAE/E,CAAAA,EAAhD,IAAsD,CAAtD,EAAyD+E,CAAE/E,CAAAA,EAA3D,CAAP;AAFU,OAbd,GACSsF,EADT;AAFgE;AAoDlEG,YAASA,MAAK,CAACC,MAAD,CAAS;AACrBhK,kBAAaiK,CAAAA,SAAUC,CAAAA,IAAvB,CAA4B,IAA5B,EAAkC,IAAlC,EAAwCF,MAAxC,CAAA;AADqB;AA9wBwD,UA4F7EpF,SAAS,IAAIjD,WAAJ,CAAgB,EAAhB,CA5FoE,EA8F7EkD,SAAS,IAAIlD,WAAJ,CAAgB,EAAhB,CA9FoE;AAgG/EkD,UAAA,CAAO,CAAP,CAAA,GAAY,CAAZ;AACAD,UAAA,CAAO,CAAP,CAAA,GAAY,CAACC,MAAA,CAAO,CAAP,CAAb;AACA,SAAK,IAAIC,IAAI,CAAb,EAAgBA,CAAhB,IARShB,EAQT,EAA2B,EAAEgB,CAA7B;AACED,YAAA,CAAOC,CAAP,CACA,GADYD,MAAA,CAAOC,CAAP,GAAW,CAAX,CACZ,IAD6B,CAC7B,GADiC,CACjC,EAAAF,MAAA,CAAOE,CAAP,CAAA,GAAY,CAACD,MAAA,CAAOC,CAAP,CAAb;AAFF;AAyTA,UAAMqF,QAAQ,CAAC,CAAC,CAAF,EAAK,CAAC,CAAN,EAAS,CAAT,EAAY,CAAZ,CAAd,EACMC,QAAQ,CAAC,CAAC,CAAF,EAAK,CAAL,EAAQ,CAAC,CAAT,EAAY,CAAZ,CADd,EA6HM1C,SAAS,CAAC,OAAD,EAAU,QAAV,EAAoB,MAApB,CA7Hf,EA8HEE,YAAY,CAAC,QAAD,EAAW,QAAX,EAAqB,KAArB,CA9Hd,EAuNM+B,aAAa,CACjB,WAAY,CADK,EAEjB,IAAO,CAFU,EAGjB,YAAa,CAHI,EAIjB,KAAQ,CAJS,EAKjB,OAAU,CALO,EAMjB,MAAS,CANQ,EAOjB,cAAe,CAPE,EAQjB,OAAU,CARO,EASjB,eAAgB,EATC,CAvNnB,EAkOMJ,iBAAiB,CACrB,MAvbFc,QAA6B,CAAClK,CAAD,EAAIkG,OAAJ,EAAa8B,aAAb,EAA4BE,SAA5B,CAAuC;AAAA,YAC5DrH,QAAQb,CAAEa,CAAAA,KADkD,EAEhEC,SAASd,CAAEc,CAAAA,MAFqD;AAKlE,aAAO,QAAS,CAACV,CAAD,CAAI;AAAA,cACZiB,QAAQjB,CAAEkG,CAAAA,KAAMA,CAAAA,KAAMjF,CAAAA,KAAd,CAAoB6G,SAApB,CAA+B7G,CAAAA,KAD3B,EAGhBgF,IAAIhF,KAAMmB,CAAAA,MAHM,EAKhBmD,aAAavF,CAAEkG,CAAAA,KAAMC,CAAAA,QALL,EAOhBb,YAAY/F,cAAewH,CAAAA,WAAYtG,CAAAA,KAA3B,CAAiCT,CAAEkG,CAAAA,KAAnC,EAA0ClG,CAAEkG,CAAAA,KAAMc,CAAAA,IAAlD,CAPI;AAAA,YASd+C,eAAe,CATD;AAAA,YAWhBjG,EAXgB,EAYhB8B,EAZgB,EAahB7B,EAbgB,EAchBrC,CAdgB,EAehBC,CAfgB;AAmBlB,aAAK,IAAI4C,IAAI,CAAb,EAAgBA,CAAhB,GAAoB0B,CAApB,EAAuB,EAAE1B,CAAzB,CAA4B;AAC1B,cAAAoB,KAAK1E,KAAA,CAAMsD,CAAN,CAAS7C,CAAAA,CAAd;AACAkE,YAAA,GAAK3E,KAAA,CAAMsD,CAAN,CAAS5C,CAAAA,CAAd;AACAmC,YAAA,GAAK7C,KAAA,CAAMsD,CAAN,CAAST,CAAAA,EAAT,KAAgB3D,IAAAA,EAAhB,GAA4BwF,EAA5B,GAAiC1E,KAAA,CAAMsD,CAAN,CAAST,CAAAA,EAA/C;AACAC,YAAA,GAAK9C,KAAA,CAAMsD,CAAN,CAASR,CAAAA,EAAT,KAAgB5D,IAAAA,EAAhB,GAA4ByF,EAA5B,GAAiC3E,KAAA,CAAMsD,CAAN,CAASR,CAAAA,EAA/C;AACArC,WAAA,IAAKiE,EAAL,GAAU7B,EAAV,IAAgB,CAAhB;AACAnC,WAAA,IAAKiE,EAAL,GAAU7B,EAAV,IAAgB,CAAhB;AACAiG,YAAA,GAAYlF,IAAKmF,CAAAA,GAAL,CAASnG,EAAT,GAAc6B,EAAd,GAAmB5B,EAAnB,GAAwB6B,EAAxB,CAAZ;AACIoE,YAAJ,IAAiBD,YAAjB,KACEA,YAEA,GAFeC,EAEf,EADAhK,CAAE0B,CAAAA,CACF,GADMA,CACN,EAAA1B,CAAE2B,CAAAA,CAAF,GAAMA,CAHR;AAR0B;AAc5BD,SAAA,GAAI4D,SAAJ,GAAgB,CAAhB;AACA3D,SAAA,GAAI4D,UAAJ,GAAiB,CAAjB;AACAI,UAAA,GAAK3F,CAAE0B,CAAAA,CAAP,GAAWA,CAAX;AACAoC,UAAA,GAAK9D,CAAE0B,CAAAA,CAAP,GAAWA,CAAX;AACAkE,UAAA,GAAK5F,CAAE2B,CAAAA,CAAP,GAAWA,CAAX;AACAoC,UAAA,GAAK/D,CAAE2B,CAAAA,CAAP,GAAWA,CAAX;AACA3B,SAAEkH,CAAAA,KAAF,GAAU,QAAV;AACIvB,UAAJ,GAAS,CAAT,IAAc7B,EAAd,IAAoBrD,KAApB,GACET,CAAEkH,CAAAA,KADJ,GACY,MADZ,GAEW,CAFX,IAEgBvB,EAFhB,IAEsBlF,KAFtB,GAE8BqD,EAF9B,KAGE9D,CAAEkH,CAAAA,KAHJ,GAGY,OAHZ,CAAA;AAKAlH,SAAEoH,CAAAA,QAAF,GAAa,QAAb;AACIxB,UAAJ,GAAS,CAAT,IAAc7B,EAAd,IAAoBrD,MAApB,GACEV,CAAEoH,CAAAA,QADJ,GACe,KADf,GAEW,CAFX,IAEgBxB,EAFhB,IAEsBlF,MAFtB,GAE+BqD,EAF/B,KAGE/D,CAAEoH,CAAAA,QAHJ,GAGe,QAHf,CAAA;AAKA,eAAO,CAAA,CAAP;AAnDkB,OAApB;AALkE,KAsb7C,EAErB,iBA/WF8C,QAAqC,CAACtK,CAAD,EAAIkG,OAAJ,EAAa8B,aAAb,EAA4BE,SAA5B,CAAuC;AAO1EqC,cAASA,SAAQ,CAACC,EAAD,EAAKC,EAAL,EAASC,OAAT,EAAkBhF,SAAlB,EAA6BC,UAA7B,CAAyC;AAClD7D,UAAAA,GAAI9B,CAAEuF,CAAAA,MAAF,CAASiF,EAAT,CAAJ1I;AACJC,UAAAA,GAAI/B,CAAEuF,CAAAA,MAAF,CAASkF,EAAT,CAAJ1I;AAFsD,YAGpD4I,KAAKD,OAH+C,EAItDE,KAAK9J,MAJiD,EAKtD+J,GALsD;AAMxD,YAAI,CAAC/F,WAAA,CAAYhD,EAAZ,EAAeC,EAAf,EAAkB2D,SAAlB,EAA6BC,UAA7B,EAAyC9E,KAAzC,EAAgDC,MAAhD,CAAL,IAAgE,CAAC8E,SAAA,CAAU5F,CAAV,EAAa8B,EAAb,EAAgBC,EAAhB,EAAmB4D,UAAnB,EAA+BD,SAA/B,EAA0CiF,EAA1C,EAA8C9E,GAA9C,EAAmDC,GAAnD,CAAjE,IAA4H,CAACF,SAAA,CAAU5F,CAAV,EAAa8B,EAAb,EAAgBC,EAAhB,EAAmB4D,UAAnB,EAA+BD,SAA/B,EAA0CC,UAA1C,EAAsDE,GAAtD,EAA2D,IAA3D,CAA7H,CAA+L;AAG7L,eAAA,EAAO+E,EAAP,GAAYD,EAAZ,IAAkB,CAAlB,CAAA;AACEE,eACA,IADOF,EACP,GADYC,EACZ,IADkB,CAClB,EAAIhF,SAAA,CAAU5F,CAAV,EAAa8B,EAAb,EAAgBC,EAAhB,EAAmB4D,UAAnB,EAA+BD,SAA/B,EAA0CmF,GAA1C,EAA+ChF,GAA/C,EAAoDC,GAApD,CAAJ,GACE8E,EADF,GACOC,GADP,GAGEF,EAHF,GAGOE,GAHP;AAFF;AASA,cAAIF,EAAJ,GAASD,OAAT;AACE,mBAAO,CAAC5I,EAAD,EAAIC,EAAJ,EAAO4I,EAAP,EAAW,CAAA,CAAX,CAAP;AADF;AAZ6L;AANvI;AAPgB,YACpE9J,QAAQb,CAAEa,CAAAA,KAD0D,EAExEC,SAASd,CAAEc,CAAAA,MAF6D,EAGxE+E,MAAMK,OAAA,CAAQ,CAAR,CAHkE,EAKxEJ,MAAMI,OAAA,CAAQ,CAAR,CALkE;AAgC1E,aAAO,QAAS,CAAC9F,CAAD,CAAI;AAAA,cACZiB,QAAQjB,CAAEkG,CAAAA,KAAMA,CAAAA,KAAMjF,CAAAA,KAAd,CAAoB6G,SAApB,CAA+B7G,CAAAA,KAD3B,EAGhBgF,IAAIhF,KAAMmB,CAAAA,MAHM,EAKhBmD,aAAavF,CAAEkG,CAAAA,KAAMC,CAAAA,QALL,EAOhBb,YAAY/F,cAAewH,CAAAA,WAAYtG,CAAAA,KAA3B,CAAiCT,CAAEkG,CAAAA,KAAnC,EAA0ClG,CAAEkG,CAAAA,KAAMc,CAAAA,IAAlD,CAPI;AAAA,YASdsD,UAAU1C,aAAA,GAAgBrC,UAAhB,GAA6B,CATzB,EAUhBmF,cAAc,CAAA,CAVE,EAWhBC,eAAe,CAAA,CAXC,EAYhBZ,eAAe,CAZC;AAAA,YAchBjG,EAdgB;AAAA,YAgBhBC,EAhBgB;AAAA,YAoBhBsG,EApBgB,EAqBhBxD,GArBgB,EAsBhB+D,KAtBgB,EAuBhB9D,GAvBgB,EAwBhBN,GAxBgB,EAyBhBqE,KAzBgB,EA0BhBpE,GA1BgB,EA4BhBqE,MA5BgB;AAgClB,aAAK,IAAIvG,IAAI,CAAb,EAAgBA,CAAhB,GAAoB0B,CAApB,EAAuB,EAAE1B,CAAzB,CAA4B;AAC1B,cAAAoB,KAAK1E,KAAA,CAAMsD,CAAN,CAAS7C,CAAAA,CAAd;AACA,cAAAkE,KAAK3E,KAAA,CAAMsD,CAAN,CAAS5C,CAAAA,CAAd;AACAmC,YAAA,GAAK7C,KAAA,CAAMsD,CAAN,CAAST,CAAAA,EAAT,KAAgB3D,IAAAA,EAAhB,GAA4BwF,EAA5B,GAAiC1E,KAAA,CAAMsD,CAAN,CAAST,CAAAA,EAA/C;AACAC,YAAA,GAAK9C,KAAA,CAAMsD,CAAN,CAASR,CAAAA,EAAT,KAAgB5D,IAAAA,EAAhB,GAA4ByF,EAA5B,GAAiC3E,KAAA,CAAMsD,CAAN,CAASR,CAAAA,EAA/C;AACA,cAAI4B,EAAJ,GAAS7B,EAAT,CAAa;AACX,gBAAAiH,KAAUpF,EAAV;AACAA,cAAA,GAAK7B,EAAL;AACAA,cAAA,GAAKiH,EAAL;AAHW;AAKTnF,YAAJ,GAAS7B,EAAT,KACEgH,EAEA,GAFUnF,EAEV,EADAA,EACA,GADK7B,EACL,EAAAA,EAAA,GAAKgH,EAHP;AAKAlE,aAAA,GAAMjH,CAAA,CAAE+F,EAAF,CAAN;AACAmB,aAAA,GAAMlH,CAAA,CAAEkE,EAAF,CAAN;AACA8G,eAAA,GAAQ,CAAC,GAAG/D,GAAH,GAASC,GAAT,IAAgB,CAAhB,CAAT;AACAN,aAAA,GAAM5G,CAAA,CAAEgG,EAAF,CAAN;AACAa,aAAA,GAAM7G,CAAA,CAAEmE,EAAF,CAAN;AACA8G,eAAA,GAAQ,CAAC,GAAGrE,GAAH,GAASC,GAAT,IAAgB,CAAhB,CAAT;AAGA,eAAK2D,EAAL,GAAUQ,KAAV,EAAiBR,EAAjB,IAAuBvD,GAAvB,EAA4B,EAAEuD,EAA9B;AACE,iBAAKC,EAAL,GAAUQ,KAAV,EAAiBR,EAAjB,IAAuB7D,GAAvB,EAA4B,EAAE6D,EAA9B;AAEE,eADAS,MACA,GADSX,QAAA,CAASC,EAAT,EAAaC,EAAb,EAAiBC,OAAjB,EAA0BhF,SAA1B,EAAqCC,UAArC,CACT,MACE,CAACvF,CAAE0B,CAAAA,CAAH,EAAM1B,CAAE2B,CAAAA,CAAR,EAAW2I,OAAX,EAAoBI,WAApB,CADF,GACqCI,MADrC;AAFF;AADF;AAUA,eAAKV,EAAL,GAAUQ,KAAV,EAAiBR,EAAjB,IAAuBtD,GAAvB,EAA4B,EAAEsD,EAA9B;AACE,iBAAKC,EAAL,GAAUQ,KAAV,EAAiBR,EAAjB,IAAuB5D,GAAvB,EAA4B,EAAE4D,EAA9B;AAEE,eADAS,MACA,GADSX,QAAA,CAASC,EAAT,EAAaC,EAAb,EAAiBC,OAAjB,EAA0BhF,SAA1B,EAAqCC,UAArC,CACT,MACE,CAACvF,CAAE0B,CAAAA,CAAH,EAAM1B,CAAE2B,CAAAA,CAAR,EAAW2I,OAAX,EAAoBI,WAApB,CADF,GACqCI,MADrC;AAFF;AADF;AAWKJ,qBAAL,IAAqB9C,aAArB,KAEEoC,EAKA,GALYlF,IAAKmF,CAAAA,GAAL,CAASnG,EAAT,GAAc6B,EAAd,GAAmB5B,EAAnB,GAAwB6B,EAAxB,CAKZ,EAJAlE,EAIA,IAJKiE,EAIL,GAJU7B,EAIV,IAJgB,CAIhB,EAHAnC,EAGA,IAHKiE,EAGL,GAHU7B,EAGV,IAHgB,CAGhB,EAAIiG,EAAJ,IAAiBD,YAAjB,IAAiC,CAACrF,WAAA,CAAYhD,EAAZ,EAAeC,EAAf,EAAkB2D,SAAlB,EAA6BC,UAA7B,EAAyC9E,KAAzC,EAAgDC,MAAhD,CAAlC,IAA6F,CAAC8E,SAAA,CAAU5F,CAAV,EAAa8B,EAAb,EAAgBC,EAAhB,EAAmB4D,UAAnB,EAA+BD,SAA/B,EAA0CC,UAA1C,EAAsDE,GAAtD,EAA2D,IAA3D,CAA9F,KACEsE,YAGA,GAHeC,EAGf,EAFAhK,CAAE0B,CAAAA,CAEF,GAFMA,EAEN,EADA1B,CAAE2B,CAAAA,CACF,GADMA,EACN,EAAAgJ,YAAA,GAAe,CAAA,CAJjB,CAPF;AA5C0B;AA6D5B,eAAID,WAAJ,IAAmBC,YAAnB,IACEjJ,EAKO,GALH4D,SAKG,GALS,CAKT,EAJP3D,EAIO,GAJH4D,UAIG,GAJU,CAIV,EAHPE,GAAIjB,CAAAA,QAAJ,CAAa5E,CAAA,CAAEI,CAAE0B,CAAAA,CAAJ,GAAQA,EAAR,CAAb,EAAyB9B,CAAA,CAAEI,CAAE2B,CAAAA,CAAJ,GAAQA,EAAR,CAAzB,EAAqC/B,CAAA,CAAEI,CAAE0B,CAAAA,CAAJ,GAAQA,EAAR,CAArC,EAAiD9B,CAAA,CAAEI,CAAE2B,CAAAA,CAAJ,GAAQA,EAAR,CAAjD,CAGO,EAFP3B,CAAEkH,CAAAA,KAEK,GAFG,QAEH,EADPlH,CAAEoH,CAAAA,QACK,GADM,QACN,EAAA,CAAA,CANT,IAQS,CAAA,CART;AA7FkB,OAApB;AAhC0E,KA6WrD,EAGrB,UAnOF4D,QAAiC,CAACpL,CAAD,EAAIkG,OAAJ,EAAa8B,aAAb,EAA4BE,SAA5B,CAAuC;AAAA,YAChErH,QAAQb,CAAEa,CAAAA,KADsD,EAEpEC,SAASd,CAAEc,CAAAA,MAFyD,EAGpE+E,MAAMK,OAAA,CAAQ,CAAR,CAH8D,EAKpEJ,MAAMI,OAAA,CAAQ,CAAR,CAL8D,EAOpEmF,MAAMrL,CAAEE,CAAAA,MAAF,EAP8D;AAUtE,aAAO,QAAS,CAACE,CAAD,CAAI;AAAA,cACZiB,QAAQjB,CAAEkG,CAAAA,KAAMA,CAAAA,KAAMjF,CAAAA,KAAd,CAAoB6G,SAApB,CAA+B7G,CAAAA,KAD3B,EAGhBgF,IAAIhF,KAAMmB,CAAAA,MAHM,EAKhBmD,aAAavF,CAAEkG,CAAAA,KAAMC,CAAAA,QALL,EAOhBb,YAAY/F,cAAewH,CAAAA,WAAYtG,CAAAA,KAA3B,CAAiCT,CAAEkG,CAAAA,KAAnC,EAA0ClG,CAAEkG,CAAAA,KAAMc,CAAAA,IAAlD,CAPI,EAShBkE,QAAQ,EATQ;AAAA,YAWdZ,UAAU1C,aAAA,GAAgBrC,UAAhB,GAA6B,CAXzB,EAYhBmF,cAAc,CAAA,CAZE,EAahBC,eAAe,CAAA,CAbC,EAchBZ,eAAe,CAdC,EAehBpE,EAfgB,EAgBhB7B,EAhBgB,EAiBhB8B,EAjBgB,EAkBhB7B,EAlBgB,EAmBhBrC,CAnBgB,EAoBhBC,CApBgB;AAAA,YAyBhB8I,GAzBgB;AA6BlB,aAAK,IAAIlG,IAAI,CAAb,EAAgBA,CAAhB,GAAoB0B,CAApB,EAAuB,EAAE1B,CAAzB,CAA4B;AAC1BoB,YAAA,GAAK1E,KAAA,CAAMsD,CAAN,CAAS7C,CAAAA,CAAd;AACAkE,YAAA,GAAK3E,KAAA,CAAMsD,CAAN,CAAS5C,CAAAA,CAAd;AACAmC,YAAA,GAAK7C,KAAA,CAAMsD,CAAN,CAAST,CAAAA,EAAT,KAAgB3D,IAAAA,EAAhB,GAA4BwF,EAA5B,GAAiC1E,KAAA,CAAMsD,CAAN,CAAST,CAAAA,EAA/C;AACAC,YAAA,GAAK9C,KAAA,CAAMsD,CAAN,CAASR,CAAAA,EAAT,KAAgB5D,IAAAA,EAAhB,GAA4ByF,EAA5B,GAAiC3E,KAAA,CAAMsD,CAAN,CAASR,CAAAA,EAA/C;AAMA,eAHAmH,KAAMC,CAAAA,IAAN,CAAW,CAACvL,CAAA,EAAG+F,EAAH,GAAQ7B,EAAR,IAAc,CAAd,CAAD,EAAmBlE,CAAA,EAAGgG,EAAH,GAAQ7B,EAAR,IAAc,CAAd,CAAnB,CAAX,CAGA,EAAOmH,KAAM9I,CAAAA,MAAb,CAAA;AAIE,gBAHA,CAACgI,EAAD,EAAKC,EAAL,CAGI,GAHOa,KAAME,CAAAA,GAAN,EAGP,EAAA,EAAA3F,GAAIjC,CAAAA,GAAJ,CAAQ4G,EAAR,EAAYC,EAAZ,CAAA,IAAmB3E,GAAIlC,CAAAA,GAAJ,CAAQ4G,EAAR,EAAYC,EAAZ,CAAnB,IAAsCY,GAAIzH,CAAAA,GAAJ,CAAQ4G,EAAR,EAAYC,EAAZ,CAAtC,CAAJ,CAAA;AAIAY,iBAAIhL,CAAAA,GAAJ,CAAQmK,EAAR,EAAYC,EAAZ,CAAA;AACA,mBAASgB,GAAT,GAAa,CAAb,EAAgBA,GAAhB,GAAoB,CAApB,EAAuB,EAAEA,GAAzB;AACE3J,iBAEA,GAFI0I,EAEJ,GAFSR,KAAA,CAAMyB,GAAN,CAET,EADA1J,CACA,GADI0I,EACJ,GADSR,KAAA,CAAMwB,GAAN,CACT,EAAKJ,GAAIvG,CAAAA,WAAJ,CAAgBhD,CAAhB,EAAmBC,CAAnB,EAAsBD,CAAtB,EAAyBC,CAAzB,CAAL,IAAkCuJ,KAAMC,CAAAA,IAAN,CAAW,CAACzJ,CAAD,EAAIC,CAAJ,CAAX,CAAlC;AAHF;AAOAD,eAAA,GAAI9B,CAAEuF,CAAAA,MAAF,CAASiF,EAAT,CAAJ;AACAzI,eAAA,GAAI/B,CAAEuF,CAAAA,MAAF,CAASkF,EAAT,CAAJ;AACA,kBAAAE,KAAKD,OAAL;AACA,kBAAAE,KAAK9J,MAAL;AAEA,kBAAI,CAACgE,WAAA,CAAYhD,CAAZ,EAAeC,CAAf,EAAkB2D,SAAlB,EAA6BC,UAA7B,EAAyC9E,KAAzC,EAAgDC,MAAhD,CAAL,IAAgE,CAAC8E,SAAA,CAAU5F,CAAV,EAAa8B,CAAb,EAAgBC,CAAhB,EAAmB4D,UAAnB,EAA+BD,SAA/B,EAA0CiF,EAA1C,EAA8C9E,GAA9C,EAAmDC,GAAnD,CAAjE,IAA4H,CAACF,SAAA,CAAU5F,CAAV,EAAa8B,CAAb,EAAgBC,CAAhB,EAAmB4D,UAAnB,EAA+BD,SAA/B,EAA0CC,UAA1C,EAAsDE,GAAtD,EAA2D,IAA3D,CAA7H,CAA+L;AAG7L,qBAAA,EAAO+E,EAAP,GAAYD,EAAZ,IAAkB,CAAlB,CAAA;AACEE,qBACA,IADOF,EACP,GADYC,EACZ,IADkB,CAClB,EAAIhF,SAAA,CAAU5F,CAAV,EAAa8B,CAAb,EAAgBC,CAAhB,EAAmB4D,UAAnB,EAA+BD,SAA/B,EAA0CmF,GAA1C,EAA+ChF,GAA/C,EAAoDC,GAApD,CAAJ,GACE8E,EADF,GACOC,GADP,GAGEF,EAHF,GAGOE,GAHP;AAFF;AASIF,kBAAJ,GAASD,OAAT,KACEtK,CAAE0B,CAAAA,CAGF,GAHMA,CAGN,EAFA1B,CAAE2B,CAAAA,CAEF,GAFMA,CAEN,EADA2I,OACA,GADUC,EACV,EAAAG,WAAA,GAAc,CAAA,CAJhB;AAZ6L;AAjB/L;AAJF;AA4CKA,qBAAL,IAAqB9C,aAArB,KAEEoC,EAKA,GALYlF,IAAKmF,CAAAA,GAAL,CAASnG,EAAT,GAAc6B,EAAd,GAAmB5B,EAAnB,GAAwB6B,EAAxB,CAKZ,EAJAlE,CAIA,IAJKiE,EAIL,GAJU7B,EAIV,IAJgB,CAIhB,EAHAnC,CAGA,IAHKiE,EAGL,GAHU7B,EAGV,IAHgB,CAGhB,EAAIiG,EAAJ,IAAiBD,YAAjB,IAAiC,CAACrF,WAAA,CAAYhD,CAAZ,EAAeC,CAAf,EAAkB2D,SAAlB,EAA6BC,UAA7B,EAAyC9E,KAAzC,EAAgDC,MAAhD,CAAlC,IAA6F,CAAC8E,SAAA,CAAU5F,CAAV,EAAa8B,CAAb,EAAgBC,CAAhB,EAAmB4D,UAAnB,EAA+BD,SAA/B,EAA0CC,UAA1C,EAAsDE,GAAtD,EAA2D,IAA3D,CAA9F,KACEsE,YAGA,GAHeC,EAGf,EAFAhK,CAAE0B,CAAAA,CAEF,GAFMA,CAEN,EADA1B,CAAE2B,CAAAA,CACF,GADMA,CACN,EAAAgJ,YAAA,GAAe,CAAA,CAJjB,CAPF;AAtD0B;AAuE5B,eAAID,WAAJ,IAAmBC,YAAnB,IACEjJ,CAKO,GALH4D,SAKG,GALS,CAKT,EAJP3D,CAIO,GAJH4D,UAIG,GAJU,CAIV,EAHPE,GAAIjB,CAAAA,QAAJ,CAAa5E,CAAA,CAAEI,CAAE0B,CAAAA,CAAJ,GAAQA,CAAR,CAAb,EAAyB9B,CAAA,CAAEI,CAAE2B,CAAAA,CAAJ,GAAQA,CAAR,CAAzB,EAAqC/B,CAAA,CAAEI,CAAE0B,CAAAA,CAAJ,GAAQA,CAAR,CAArC,EAAiD9B,CAAA,CAAEI,CAAE2B,CAAAA,CAAJ,GAAQA,CAAR,CAAjD,CAGO,EAFP3B,CAAEkH,CAAAA,KAEK,GAFG,QAEH,EADPlH,CAAEoH,CAAAA,QACK,GADM,QACN,EAAA,CAAA,CANT,IAQS,CAAA,CART;AApGkB,OAApB;AAVsE,KAgOjD,CAlOvB,EAqVMkE,SAAS,CAAC,GAAD,EAAM,GAAN,EAAW,SAAX,EAAsB,OAAtB,EAA+B,UAA/B,CArVf,EAsVMC,UAAU,mEAAA,CAAA,KAAA,CAAA,GAAA,CAtVhB;AAsXA/B,SAAMgC,CAAAA,UAAN,GAAmB,CACjBnJ,KAAM,OADW,EAEjBoJ,SAAU,CACRC,SAAU,CAAA,CADF,CAFO,EAKjBjC,OAAQ,CAAC,CACPkC,KAAM,MADC,EAEPtJ,KAAM,QAFC,EAGPiB,MAAO,CAAA,CAHA,EAIPlB,OAAQ,CAJD,EAKPwJ,SAAU,CAAA,CALH,CAAD,EAML,CACDD,KAAM,MADL,EAEDtJ,KAAM,SAFL,CANK,EASL,CACDsJ,KAAM,QADL,EAEDtJ,KAAM,QAFL,EAGDiB,MAAO,CAAA,CAHN,EAIDuI,QAASN,OAJR,CATK,EAcL,CACDI,KAAM,QADL,EAEDtJ,KAAM,QAFL,EAGDiB,MAAO,CAAA,CAHN,EAIDuI,QAAS,CAAC,CAAD,CAJR,CAdK,EAmBL,CACDF,KAAM,SADL,EAEDtJ,KAAM,QAFL,EAGDwJ,QAAS,CAHR,EAIDC,KAAM,CAAA,CAJL,CAnBK,EAwBL,CACDH,KAAM,YADL,EAEDtJ,KAAM,QAFL,EAGD0J,OAAQ,CAAC,OAAD,EAAU,KAAV,CAHP,EAIDF,QAAS,KAJR,CAxBK,EA6BL,CACDF,KAAM,WADL,EAEDtJ,KAAM,QAFL,EAGDwJ,QAAS,CAHR,CA7BK,EAiCL,CACDF,KAAM,eADL,EAEDtJ,KAAM,SAFL,EAGDwJ,QAAS,CAAA,CAHR,CAjCK;AAqCL,KACDF,KAAM,YADL,EAEDtJ,KAAM,MAFL,EAGDiB,MAAO,CAAA,CAHN,CArCK,EAyCL,CACDqI,KAAM,QADL,EAEDtJ,KAAM,QAFL,EAGDwJ,QAAS,OAHR,CAzCK,EA6CL,CACDF,KAAM,IADL,EAEDtJ,KAAM,QAFL,EAGDiB,MAAO,CAAA,CAHN,EAIDlB,OAAQkJ,MAAOlJ,CAAAA,MAJd,EAKDyJ,QAASP,MALR,CA7CK,CALS,CAAnB;AA0DA5L,YAASsM,CAAAA,QAAT,CAAkBxC,KAAlB,EAAyB/J,YAAaiK,CAAAA,SAAtC,EAAiD,CAC/CuC,SAAS,CAAC/G,CAAD,EAAIgH,KAAJ,CAAW;AAClBC,cAASA,KAAI,CAACC,KAAD,CAAQ;AACbC,aAAAA,GAAInH,CAAA,CAAEkH,KAAF,CAAJC;AACN,eAAO3M,QAAS4M,CAAAA,UAAT,CAAoBD,KAApB,CAAP,IAAiCH,KAAMK,CAAAA,QAAN,CAAeF,KAAEG,CAAAA,MAAjB,CAAjC;AAFmB;AAIrB,YAAMC,MAAMvH,CAAEqH,CAAAA,QAAF,EAAZ;AACA,UAAME,GAAN,IAAaP,KAAMQ,CAAAA,OAAN,CAAcR,KAAMS,CAAAA,OAApB,CAAb,IAA6CR,IAAA,CAAK,MAAL,CAA7C,CAAA;AACKjH,SAAEsC,CAAAA,IAAP,IAAetC,CAAEsC,CAAAA,IAAKpF,CAAAA,MAAtB,KAAiC,CAAjC,IACE1C,QAASkN,CAAAA,KAAT,CAAe,gEAAf,CADF;AAGA,YAAMC,KAAK3H,CAAE2H,CAAAA,EAAPA,IAAavB,MAAnB;AAGAhE,mBAAA,CAAY4E,KAAMY,CAAAA,WAAN,CAAkBZ,KAAMa,CAAAA,MAAxB,CAAgCnK,CAAAA,MAA5C,IAAsD,EAAtD,EAA0DsC,CAAEsC,CAAAA,IAA5D,EAAkEtC,CAAE0D,CAAAA,IAApE,EAA0ElJ,QAAS4D,CAAAA,KAAT,CAAe4B,CAAEwC,CAAAA,MAAF,IAAY,IAAZ,GAAmB,CAAnB,GAAuBxC,CAAEwC,CAAAA,MAAxC,CAA1E,EAA2HhI,QAAS4D,CAAAA,KAAT,CAAe4B,CAAEyC,CAAAA,MAAjB,IAA2B4D,OAA3B,CAA3H,EAAgKrG,CAAE5E,CAAAA,UAAlK,IAAgL,EAAhL,EAAoL4E,CAAE0C,CAAAA,aAAtL,KAAwM,CAAA,CAAxM,EAA+M1C,CAAE2C,CAAAA,UAAjN,IAA+N,KAA/N,EAAsO3C,CAAE4C,CAAAA,SAAxO,IAAqP,CAArP,EAAwP5C,CAAEN,CAAAA,OAAF,KAAczE,IAAAA,EAAd,GAA0B,CAA1B,GAA8B+E,CAAEN,CAAAA,OAAxR,EAAiSM,CAAE6C,CAAAA,MAAnS,IAA6S,OAA7S,CAAsThI,CAAAA,OAAtT,CAA8TiN,CAAA,IAAK;AAEjU,gBAAMC,IAAID,CAAE9G,CAAAA,KAAZ;AACA+G,WAAA,CAAEJ,EAAA,CAAG,CAAH,CAAF,CAAA,GAAWG,CAAEtL,CAAAA,CAAb;AACAuL,WAAA,CAAEJ,EAAA,CAAG,CAAH,CAAF,CAAA,GAAWG,CAAErL,CAAAA,CAAb;AACAsL,WAAA,CAAEJ,EAAA,CAAG,CAAH,CAAF,CAAA,GAAWG,CAAErE,CAAAA,OAAb;AACAsE,WAAA,CAAEJ,EAAA,CAAG,CAAH,CAAF,CAAA,GAAWG,CAAE9F,CAAAA,KAAb;AACA+F,WAAA,CAAEJ,EAAA,CAAG,CAAH,CAAF,CAAA,GAAWG,CAAE5F,CAAAA,QAAb;AAPiU,SAAnU,CAAA;AASA,eAAO8E,KAAMgB,CAAAA,MAAN,CAAaT,GAAb,CAAkBf,CAAAA,QAAlB,CAA2BmB,EAA3B,CAAP;AAhBA;AANkB,KAD2B,CAAjD,CAAA;AA2BA/N,WAAQqO,CAAAA,KAAR,GAAgB3D,KAAhB;AAt2B+E,GAJjF,CAAA;AADqG,CAArG;;",
"sources":["node_modules/vega-label/build/vega-label.js"],
"sourcesContent":["shadow$provide[\"module$node_modules$vega_label$build$vega_label\"] = function(require,module,exports) {\n(function (global, factory) {\n  typeof exports === 'object' && typeof module !== 'undefined' ? factory(exports, require('vega-scenegraph'), require('vega-canvas'), require('vega-dataflow'), require('vega-util')) :\n  typeof define === 'function' && define.amd ? define(['exports', 'vega-scenegraph', 'vega-canvas', 'vega-dataflow', 'vega-util'], factory) :\n  (global = typeof globalThis !== 'undefined' ? globalThis : global || self, factory((global.vega = global.vega || {}, global.vega.transforms = {}), global.vega, global.vega, global.vega, global.vega));\n})(this, (function (exports, vegaScenegraph, vegaCanvas, vegaDataflow, vegaUtil) { 'use strict';\n\n  // bit mask for getting first 2 bytes of alpha value\n  const ALPHA_MASK = 0xff000000;\n  function baseBitmaps($, data) {\n    const bitmap = $.bitmap();\n    // when there is no base mark but data points are to be avoided\n    (data || []).forEach(d => bitmap.set($(d.boundary[0]), $(d.boundary[3])));\n    return [bitmap, undefined];\n  }\n  function markBitmaps($, baseMark, avoidMarks, labelInside, isGroupArea) {\n    // create canvas\n    const width = $.width,\n      height = $.height,\n      border = labelInside || isGroupArea,\n      context = vegaCanvas.canvas(width, height).getContext('2d'),\n      baseMarkContext = vegaCanvas.canvas(width, height).getContext('2d'),\n      strokeContext = border && vegaCanvas.canvas(width, height).getContext('2d');\n\n    // render all marks to be avoided into canvas\n    avoidMarks.forEach(items => draw(context, items, false));\n    draw(baseMarkContext, baseMark, false);\n    if (border) {\n      draw(strokeContext, baseMark, true);\n    }\n\n    // get canvas buffer, create bitmaps\n    const buffer = getBuffer(context, width, height),\n      baseMarkBuffer = getBuffer(baseMarkContext, width, height),\n      strokeBuffer = border && getBuffer(strokeContext, width, height),\n      layer1 = $.bitmap(),\n      layer2 = border && $.bitmap();\n\n    // populate bitmap layers\n    let x, y, u, v, index, alpha, strokeAlpha, baseMarkAlpha;\n    for (y = 0; y < height; ++y) {\n      for (x = 0; x < width; ++x) {\n        index = y * width + x;\n        alpha = buffer[index] & ALPHA_MASK;\n        baseMarkAlpha = baseMarkBuffer[index] & ALPHA_MASK;\n        strokeAlpha = border && strokeBuffer[index] & ALPHA_MASK;\n        if (alpha || strokeAlpha || baseMarkAlpha) {\n          u = $(x);\n          v = $(y);\n          if (!isGroupArea && (alpha || baseMarkAlpha)) layer1.set(u, v); // update interior bitmap\n          if (border && (alpha || strokeAlpha)) layer2.set(u, v); // update border bitmap\n        }\n      }\n    }\n    return [layer1, layer2];\n  }\n  function getBuffer(context, width, height) {\n    return new Uint32Array(context.getImageData(0, 0, width, height).data.buffer);\n  }\n  function draw(context, items, interior) {\n    if (!items.length) return;\n    const type = items[0].mark.marktype;\n    if (type === 'group') {\n      items.forEach(group => {\n        group.items.forEach(mark => draw(context, mark.items, interior));\n      });\n    } else {\n      vegaScenegraph.Marks[type].draw(context, {\n        items: interior ? items.map(prepare) : items\n      });\n    }\n  }\n\n  /**\n   * Prepare item before drawing into canvas (setting stroke and opacity)\n   * @param {object} source item to be prepared\n   * @returns prepared item\n   */\n  function prepare(source) {\n    const item = vegaDataflow.rederive(source, {});\n    if (item.stroke && item.strokeOpacity !== 0 || item.fill && item.fillOpacity !== 0) {\n      return {\n        ...item,\n        strokeOpacity: 1,\n        stroke: '#000',\n        fillOpacity: 0\n      };\n    }\n    return item;\n  }\n\n  const DIV = 5,\n    // bit shift from x, y index to bit vector array index\n    MOD = 31,\n    // bit mask for index lookup within a bit vector\n    SIZE = 32,\n    // individual bit vector size\n    RIGHT0 = new Uint32Array(SIZE + 1),\n    // left-anchored bit vectors, full -> 0\n    RIGHT1 = new Uint32Array(SIZE + 1); // right-anchored bit vectors, 0 -> full\n\n  RIGHT1[0] = 0;\n  RIGHT0[0] = ~RIGHT1[0];\n  for (let i = 1; i <= SIZE; ++i) {\n    RIGHT1[i] = RIGHT1[i - 1] << 1 | 1;\n    RIGHT0[i] = ~RIGHT1[i];\n  }\n  function Bitmap (w, h) {\n    const array = new Uint32Array(~~((w * h + SIZE) / SIZE));\n    function _set(index, mask) {\n      array[index] |= mask;\n    }\n    function _clear(index, mask) {\n      array[index] &= mask;\n    }\n    return {\n      array: array,\n      get: (x, y) => {\n        const index = y * w + x;\n        return array[index >>> DIV] & 1 << (index & MOD);\n      },\n      set: (x, y) => {\n        const index = y * w + x;\n        _set(index >>> DIV, 1 << (index & MOD));\n      },\n      clear: (x, y) => {\n        const index = y * w + x;\n        _clear(index >>> DIV, ~(1 << (index & MOD)));\n      },\n      getRange: (x, y, x2, y2) => {\n        let r = y2,\n          start,\n          end,\n          indexStart,\n          indexEnd;\n        for (; r >= y; --r) {\n          start = r * w + x;\n          end = r * w + x2;\n          indexStart = start >>> DIV;\n          indexEnd = end >>> DIV;\n          if (indexStart === indexEnd) {\n            if (array[indexStart] & RIGHT0[start & MOD] & RIGHT1[(end & MOD) + 1]) {\n              return true;\n            }\n          } else {\n            if (array[indexStart] & RIGHT0[start & MOD]) return true;\n            if (array[indexEnd] & RIGHT1[(end & MOD) + 1]) return true;\n            for (let i = indexStart + 1; i < indexEnd; ++i) {\n              if (array[i]) return true;\n            }\n          }\n        }\n        return false;\n      },\n      setRange: (x, y, x2, y2) => {\n        let start, end, indexStart, indexEnd, i;\n        for (; y <= y2; ++y) {\n          start = y * w + x;\n          end = y * w + x2;\n          indexStart = start >>> DIV;\n          indexEnd = end >>> DIV;\n          if (indexStart === indexEnd) {\n            _set(indexStart, RIGHT0[start & MOD] & RIGHT1[(end & MOD) + 1]);\n          } else {\n            _set(indexStart, RIGHT0[start & MOD]);\n            _set(indexEnd, RIGHT1[(end & MOD) + 1]);\n            for (i = indexStart + 1; i < indexEnd; ++i) _set(i, 0xffffffff);\n          }\n        }\n      },\n      clearRange: (x, y, x2, y2) => {\n        let start, end, indexStart, indexEnd, i;\n        for (; y <= y2; ++y) {\n          start = y * w + x;\n          end = y * w + x2;\n          indexStart = start >>> DIV;\n          indexEnd = end >>> DIV;\n          if (indexStart === indexEnd) {\n            _clear(indexStart, RIGHT1[start & MOD] | RIGHT0[(end & MOD) + 1]);\n          } else {\n            _clear(indexStart, RIGHT1[start & MOD]);\n            _clear(indexEnd, RIGHT0[(end & MOD) + 1]);\n            for (i = indexStart + 1; i < indexEnd; ++i) _clear(i, 0);\n          }\n        }\n      },\n      outOfBounds: (x, y, x2, y2) => x < 0 || y < 0 || y2 >= h || x2 >= w\n    };\n  }\n\n  function scaler (width, height, padding) {\n    const ratio = Math.max(1, Math.sqrt(width * height / 1e6)),\n      w = ~~((width + 2 * padding + ratio) / ratio),\n      h = ~~((height + 2 * padding + ratio) / ratio),\n      scale = _ => ~~((_ + padding) / ratio);\n    scale.invert = _ => _ * ratio - padding;\n    scale.bitmap = () => Bitmap(w, h);\n    scale.ratio = ratio;\n    scale.padding = padding;\n    scale.width = width;\n    scale.height = height;\n    return scale;\n  }\n\n  function placeAreaLabelNaive ($, bitmaps, avoidBaseMark, markIndex) {\n    const width = $.width,\n      height = $.height;\n\n    // try to place a label within an input area mark\n    return function (d) {\n      const items = d.datum.datum.items[markIndex].items,\n        // area points\n        n = items.length,\n        // number of points\n        textHeight = d.datum.fontSize,\n        // label width\n        textWidth = vegaScenegraph.textMetrics.width(d.datum, d.datum.text); // label height\n\n      let maxAreaWidth = 0,\n        x1,\n        x2,\n        y1,\n        y2,\n        x,\n        y,\n        areaWidth;\n\n      // for each area sample point\n      for (let i = 0; i < n; ++i) {\n        x1 = items[i].x;\n        y1 = items[i].y;\n        x2 = items[i].x2 === undefined ? x1 : items[i].x2;\n        y2 = items[i].y2 === undefined ? y1 : items[i].y2;\n        x = (x1 + x2) / 2;\n        y = (y1 + y2) / 2;\n        areaWidth = Math.abs(x2 - x1 + y2 - y1);\n        if (areaWidth >= maxAreaWidth) {\n          maxAreaWidth = areaWidth;\n          d.x = x;\n          d.y = y;\n        }\n      }\n      x = textWidth / 2;\n      y = textHeight / 2;\n      x1 = d.x - x;\n      x2 = d.x + x;\n      y1 = d.y - y;\n      y2 = d.y + y;\n      d.align = 'center';\n      if (x1 < 0 && x2 <= width) {\n        d.align = 'left';\n      } else if (0 <= x1 && width < x2) {\n        d.align = 'right';\n      }\n      d.baseline = 'middle';\n      if (y1 < 0 && y2 <= height) {\n        d.baseline = 'top';\n      } else if (0 <= y1 && height < y2) {\n        d.baseline = 'bottom';\n      }\n      return true;\n    };\n  }\n\n  function outOfBounds(x, y, textWidth, textHeight, width, height) {\n    let r = textWidth / 2;\n    return x - r < 0 || x + r > width || y - (r = textHeight / 2) < 0 || y + r > height;\n  }\n  function collision($, x, y, textHeight, textWidth, h, bm0, bm1) {\n    const w = textWidth * h / (textHeight * 2),\n      x1 = $(x - w),\n      x2 = $(x + w),\n      y1 = $(y - (h = h / 2)),\n      y2 = $(y + h);\n    return bm0.outOfBounds(x1, y1, x2, y2) || bm0.getRange(x1, y1, x2, y2) || bm1 && bm1.getRange(x1, y1, x2, y2);\n  }\n\n  function placeAreaLabelReducedSearch ($, bitmaps, avoidBaseMark, markIndex) {\n    const width = $.width,\n      height = $.height,\n      bm0 = bitmaps[0],\n      // where labels have been placed\n      bm1 = bitmaps[1]; // area outlines\n\n    function tryLabel(_x, _y, maxSize, textWidth, textHeight) {\n      const x = $.invert(_x),\n        y = $.invert(_y);\n      let lo = maxSize,\n        hi = height,\n        mid;\n      if (!outOfBounds(x, y, textWidth, textHeight, width, height) && !collision($, x, y, textHeight, textWidth, lo, bm0, bm1) && !collision($, x, y, textHeight, textWidth, textHeight, bm0, null)) {\n        // if the label fits at the current sample point,\n        // perform binary search to find the largest font size that fits\n        while (hi - lo >= 1) {\n          mid = (lo + hi) / 2;\n          if (collision($, x, y, textHeight, textWidth, mid, bm0, bm1)) {\n            hi = mid;\n          } else {\n            lo = mid;\n          }\n        }\n        // place label if current lower bound exceeds prior max font size\n        if (lo > maxSize) {\n          return [x, y, lo, true];\n        }\n      }\n    }\n\n    // try to place a label within an input area mark\n    return function (d) {\n      const items = d.datum.datum.items[markIndex].items,\n        // area points\n        n = items.length,\n        // number of points\n        textHeight = d.datum.fontSize,\n        // label width\n        textWidth = vegaScenegraph.textMetrics.width(d.datum, d.datum.text); // label height\n\n      let maxSize = avoidBaseMark ? textHeight : 0,\n        labelPlaced = false,\n        labelPlaced2 = false,\n        maxAreaWidth = 0,\n        x1,\n        x2,\n        y1,\n        y2,\n        x,\n        y,\n        _x,\n        _y,\n        _x1,\n        _xMid,\n        _x2,\n        _y1,\n        _yMid,\n        _y2,\n        areaWidth,\n        result,\n        swapTmp;\n\n      // for each area sample point\n      for (let i = 0; i < n; ++i) {\n        x1 = items[i].x;\n        y1 = items[i].y;\n        x2 = items[i].x2 === undefined ? x1 : items[i].x2;\n        y2 = items[i].y2 === undefined ? y1 : items[i].y2;\n        if (x1 > x2) {\n          swapTmp = x1;\n          x1 = x2;\n          x2 = swapTmp;\n        }\n        if (y1 > y2) {\n          swapTmp = y1;\n          y1 = y2;\n          y2 = swapTmp;\n        }\n        _x1 = $(x1);\n        _x2 = $(x2);\n        _xMid = ~~((_x1 + _x2) / 2);\n        _y1 = $(y1);\n        _y2 = $(y2);\n        _yMid = ~~((_y1 + _y2) / 2);\n\n        // search along the line from mid point between the 2 border to lower border\n        for (_x = _xMid; _x >= _x1; --_x) {\n          for (_y = _yMid; _y >= _y1; --_y) {\n            result = tryLabel(_x, _y, maxSize, textWidth, textHeight);\n            if (result) {\n              [d.x, d.y, maxSize, labelPlaced] = result;\n            }\n          }\n        }\n\n        // search along the line from mid point between the 2 border to upper border\n        for (_x = _xMid; _x <= _x2; ++_x) {\n          for (_y = _yMid; _y <= _y2; ++_y) {\n            result = tryLabel(_x, _y, maxSize, textWidth, textHeight);\n            if (result) {\n              [d.x, d.y, maxSize, labelPlaced] = result;\n            }\n          }\n        }\n\n        // place label at slice center if not placed through other means\n        // and if we're not avoiding overlap with other areas\n        if (!labelPlaced && !avoidBaseMark) {\n          // one span is zero, hence we can add\n          areaWidth = Math.abs(x2 - x1 + y2 - y1);\n          x = (x1 + x2) / 2;\n          y = (y1 + y2) / 2;\n\n          // place label if it fits and improves the max area width\n          if (areaWidth >= maxAreaWidth && !outOfBounds(x, y, textWidth, textHeight, width, height) && !collision($, x, y, textHeight, textWidth, textHeight, bm0, null)) {\n            maxAreaWidth = areaWidth;\n            d.x = x;\n            d.y = y;\n            labelPlaced2 = true;\n          }\n        }\n      }\n\n      // record current label placement information, update label bitmap\n      if (labelPlaced || labelPlaced2) {\n        x = textWidth / 2;\n        y = textHeight / 2;\n        bm0.setRange($(d.x - x), $(d.y - y), $(d.x + x), $(d.y + y));\n        d.align = 'center';\n        d.baseline = 'middle';\n        return true;\n      } else {\n        return false;\n      }\n    };\n  }\n\n  // pixel direction offsets for flood fill search\n  const X_DIR = [-1, -1, 1, 1];\n  const Y_DIR = [-1, 1, -1, 1];\n  function placeAreaLabelFloodFill ($, bitmaps, avoidBaseMark, markIndex) {\n    const width = $.width,\n      height = $.height,\n      bm0 = bitmaps[0],\n      // where labels have been placed\n      bm1 = bitmaps[1],\n      // area outlines\n      bm2 = $.bitmap(); // flood-fill visitations\n\n    // try to place a label within an input area mark\n    return function (d) {\n      const items = d.datum.datum.items[markIndex].items,\n        // area points\n        n = items.length,\n        // number of points\n        textHeight = d.datum.fontSize,\n        // label width\n        textWidth = vegaScenegraph.textMetrics.width(d.datum, d.datum.text),\n        // label height\n        stack = []; // flood fill stack\n\n      let maxSize = avoidBaseMark ? textHeight : 0,\n        labelPlaced = false,\n        labelPlaced2 = false,\n        maxAreaWidth = 0,\n        x1,\n        x2,\n        y1,\n        y2,\n        x,\n        y,\n        _x,\n        _y,\n        lo,\n        hi,\n        mid,\n        areaWidth;\n\n      // for each area sample point\n      for (let i = 0; i < n; ++i) {\n        x1 = items[i].x;\n        y1 = items[i].y;\n        x2 = items[i].x2 === undefined ? x1 : items[i].x2;\n        y2 = items[i].y2 === undefined ? y1 : items[i].y2;\n\n        // add scaled center point to stack\n        stack.push([$((x1 + x2) / 2), $((y1 + y2) / 2)]);\n\n        // perform flood fill, visit points\n        while (stack.length) {\n          [_x, _y] = stack.pop();\n\n          // exit if point already marked\n          if (bm0.get(_x, _y) || bm1.get(_x, _y) || bm2.get(_x, _y)) continue;\n\n          // mark point in flood fill bitmap\n          // add search points for all (in bound) directions\n          bm2.set(_x, _y);\n          for (let j = 0; j < 4; ++j) {\n            x = _x + X_DIR[j];\n            y = _y + Y_DIR[j];\n            if (!bm2.outOfBounds(x, y, x, y)) stack.push([x, y]);\n          }\n\n          // unscale point back to x, y space\n          x = $.invert(_x);\n          y = $.invert(_y);\n          lo = maxSize;\n          hi = height; // TODO: make this bound smaller\n\n          if (!outOfBounds(x, y, textWidth, textHeight, width, height) && !collision($, x, y, textHeight, textWidth, lo, bm0, bm1) && !collision($, x, y, textHeight, textWidth, textHeight, bm0, null)) {\n            // if the label fits at the current sample point,\n            // perform binary search to find the largest font size that fits\n            while (hi - lo >= 1) {\n              mid = (lo + hi) / 2;\n              if (collision($, x, y, textHeight, textWidth, mid, bm0, bm1)) {\n                hi = mid;\n              } else {\n                lo = mid;\n              }\n            }\n            // place label if current lower bound exceeds prior max font size\n            if (lo > maxSize) {\n              d.x = x;\n              d.y = y;\n              maxSize = lo;\n              labelPlaced = true;\n            }\n          }\n        }\n\n        // place label at slice center if not placed through other means\n        // and if we're not avoiding overlap with other areas\n        if (!labelPlaced && !avoidBaseMark) {\n          // one span is zero, hence we can add\n          areaWidth = Math.abs(x2 - x1 + y2 - y1);\n          x = (x1 + x2) / 2;\n          y = (y1 + y2) / 2;\n\n          // place label if it fits and improves the max area width\n          if (areaWidth >= maxAreaWidth && !outOfBounds(x, y, textWidth, textHeight, width, height) && !collision($, x, y, textHeight, textWidth, textHeight, bm0, null)) {\n            maxAreaWidth = areaWidth;\n            d.x = x;\n            d.y = y;\n            labelPlaced2 = true;\n          }\n        }\n      }\n\n      // record current label placement information, update label bitmap\n      if (labelPlaced || labelPlaced2) {\n        x = textWidth / 2;\n        y = textHeight / 2;\n        bm0.setRange($(d.x - x), $(d.y - y), $(d.x + x), $(d.y + y));\n        d.align = 'center';\n        d.baseline = 'middle';\n        return true;\n      } else {\n        return false;\n      }\n    };\n  }\n\n  const Aligns = ['right', 'center', 'left'],\n    Baselines = ['bottom', 'middle', 'top'];\n  function placeMarkLabel ($, bitmaps, anchors, offsets) {\n    const width = $.width,\n      height = $.height,\n      bm0 = bitmaps[0],\n      bm1 = bitmaps[1],\n      n = offsets.length;\n    return function (d) {\n      const boundary = d.boundary,\n        textHeight = d.datum.fontSize;\n\n      // can not be placed if the mark is not visible in the graph bound\n      if (boundary[2] < 0 || boundary[5] < 0 || boundary[0] > width || boundary[3] > height) {\n        return false;\n      }\n      let textWidth = d.textWidth ?? 0,\n        dx,\n        dy,\n        isInside,\n        sizeFactor,\n        insideFactor,\n        x1,\n        x2,\n        y1,\n        y2,\n        xc,\n        yc,\n        _x1,\n        _x2,\n        _y1,\n        _y2;\n\n      // for each anchor and offset\n      for (let i = 0; i < n; ++i) {\n        dx = (anchors[i] & 0x3) - 1;\n        dy = (anchors[i] >>> 0x2 & 0x3) - 1;\n        isInside = dx === 0 && dy === 0 || offsets[i] < 0;\n        sizeFactor = dx && dy ? Math.SQRT1_2 : 1;\n        insideFactor = offsets[i] < 0 ? -1 : 1;\n        x1 = boundary[1 + dx] + offsets[i] * dx * sizeFactor;\n        yc = boundary[4 + dy] + insideFactor * textHeight * dy / 2 + offsets[i] * dy * sizeFactor;\n        y1 = yc - textHeight / 2;\n        y2 = yc + textHeight / 2;\n        _x1 = $(x1);\n        _y1 = $(y1);\n        _y2 = $(y2);\n        if (!textWidth) {\n          // to avoid finding width of text label,\n          if (!test(_x1, _x1, _y1, _y2, bm0, bm1, x1, x1, y1, y2, boundary, isInside)) {\n            // skip this anchor/offset option if we fail to place a label with 1px width\n            continue;\n          } else {\n            // Otherwise, find the label width\n            textWidth = vegaScenegraph.textMetrics.width(d.datum, d.datum.text);\n          }\n        }\n        xc = x1 + insideFactor * textWidth * dx / 2;\n        x1 = xc - textWidth / 2;\n        x2 = xc + textWidth / 2;\n        _x1 = $(x1);\n        _x2 = $(x2);\n        if (test(_x1, _x2, _y1, _y2, bm0, bm1, x1, x2, y1, y2, boundary, isInside)) {\n          // place label if the position is placeable\n          d.x = !dx ? xc : dx * insideFactor < 0 ? x2 : x1;\n          d.y = !dy ? yc : dy * insideFactor < 0 ? y2 : y1;\n          d.align = Aligns[dx * insideFactor + 1];\n          d.baseline = Baselines[dy * insideFactor + 1];\n          bm0.setRange(_x1, _y1, _x2, _y2);\n          return true;\n        }\n      }\n      return false;\n    };\n  }\n\n  // Test if a label with the given dimensions can be added without overlap\n  function test(_x1, _x2, _y1, _y2, bm0, bm1, x1, x2, y1, y2, boundary, isInside) {\n    return !(bm0.outOfBounds(_x1, _y1, _x2, _y2) || (isInside && bm1 || bm0).getRange(_x1, _y1, _x2, _y2));\n  }\n\n  // 8-bit representation of anchors\n  const TOP = 0x0,\n    MIDDLE = 0x4,\n    BOTTOM = 0x8,\n    LEFT = 0x0,\n    CENTER = 0x1,\n    RIGHT = 0x2;\n\n  // Mapping from text anchor to number representation\n  const anchorCode = {\n    'top-left': TOP + LEFT,\n    'top': TOP + CENTER,\n    'top-right': TOP + RIGHT,\n    'left': MIDDLE + LEFT,\n    'middle': MIDDLE + CENTER,\n    'right': MIDDLE + RIGHT,\n    'bottom-left': BOTTOM + LEFT,\n    'bottom': BOTTOM + CENTER,\n    'bottom-right': BOTTOM + RIGHT\n  };\n  const placeAreaLabel = {\n    'naive': placeAreaLabelNaive,\n    'reduced-search': placeAreaLabelReducedSearch,\n    'floodfill': placeAreaLabelFloodFill\n  };\n  function labelLayout (texts, size, compare, offset, anchor, avoidMarks, avoidBaseMark, lineAnchor, markIndex, padding, method) {\n    // early exit for empty data\n    if (!texts.length) return texts;\n    const positions = Math.max(offset.length, anchor.length),\n      offsets = getOffsets(offset, positions),\n      anchors = getAnchors(anchor, positions),\n      marktype = markType(texts[0].datum),\n      grouptype = marktype === 'group' && texts[0].datum.items[markIndex].marktype,\n      isGroupArea = grouptype === 'area',\n      boundary = markBoundary(marktype, grouptype, lineAnchor, markIndex),\n      infPadding = padding === null || padding === Infinity,\n      isNaiveGroupArea = isGroupArea && method === 'naive';\n    let maxTextWidth = -1,\n      maxTextHeight = -1;\n\n    // prepare text mark data for placing\n    const data = texts.map(d => {\n      const textWidth = infPadding ? vegaScenegraph.textMetrics.width(d, d.text) : undefined;\n      maxTextWidth = Math.max(maxTextWidth, textWidth);\n      maxTextHeight = Math.max(maxTextHeight, d.fontSize);\n      return {\n        datum: d,\n        opacity: 0,\n        x: undefined,\n        y: undefined,\n        align: undefined,\n        baseline: undefined,\n        boundary: boundary(d),\n        textWidth\n      };\n    });\n    padding = padding === null || padding === Infinity ? Math.max(maxTextWidth, maxTextHeight) + Math.max(...offset) : padding;\n    const $ = scaler(size[0], size[1], padding);\n    let bitmaps;\n    if (!isNaiveGroupArea) {\n      // sort labels in priority order, if comparator is provided\n      if (compare) {\n        data.sort((a, b) => compare(a.datum, b.datum));\n      }\n\n      // flag indicating if label can be placed inside its base mark\n      let labelInside = false;\n      for (let i = 0; i < anchors.length && !labelInside; ++i) {\n        // label inside if anchor is at center\n        // label inside if offset to be inside the mark bound\n        labelInside = anchors[i] === 0x5 || offsets[i] < 0;\n      }\n\n      // extract data information from base mark when base mark is to be avoided\n      // base mark is implicitly avoided if it is a group area\n      const baseMark = (marktype && avoidBaseMark || isGroupArea) && texts.map(d => d.datum);\n\n      // generate bitmaps for layout calculation\n      bitmaps = avoidMarks.length || baseMark ? markBitmaps($, baseMark || [], avoidMarks, labelInside, isGroupArea) : baseBitmaps($, avoidBaseMark && data);\n    }\n\n    // generate label placement function\n    const place = isGroupArea ? placeAreaLabel[method]($, bitmaps, avoidBaseMark, markIndex) : placeMarkLabel($, bitmaps, anchors, offsets);\n\n    // place all labels\n    data.forEach(d => d.opacity = +place(d));\n    return data;\n  }\n  function getOffsets(_, count) {\n    const offsets = new Float64Array(count),\n      n = _.length;\n    for (let i = 0; i < n; ++i) offsets[i] = _[i] || 0;\n    for (let i = n; i < count; ++i) offsets[i] = offsets[n - 1];\n    return offsets;\n  }\n  function getAnchors(_, count) {\n    const anchors = new Int8Array(count),\n      n = _.length;\n    for (let i = 0; i < n; ++i) anchors[i] |= anchorCode[_[i]];\n    for (let i = n; i < count; ++i) anchors[i] = anchors[n - 1];\n    return anchors;\n  }\n  function markType(item) {\n    return item && item.mark && item.mark.marktype;\n  }\n\n  /**\n   * Factory function for function for getting base mark boundary, depending\n   * on mark and group type. When mark type is undefined, line or area: boundary\n   * is the coordinate of each data point. When base mark is grouped line,\n   * boundary is either at the start or end of the line depending on the\n   * value of lineAnchor. Otherwise, use bounds of base mark.\n   */\n  function markBoundary(marktype, grouptype, lineAnchor, markIndex) {\n    const xy = d => [d.x, d.x, d.x, d.y, d.y, d.y];\n    if (!marktype) {\n      return xy; // no reactive geometry\n    } else if (marktype === 'line' || marktype === 'area') {\n      return d => xy(d.datum);\n    } else if (grouptype === 'line') {\n      return d => {\n        const items = d.datum.items[markIndex].items;\n        return xy(items.length ? items[lineAnchor === 'start' ? 0 : items.length - 1] : {\n          x: NaN,\n          y: NaN\n        });\n      };\n    } else {\n      return d => {\n        const b = d.datum.bounds;\n        return [b.x1, (b.x1 + b.x2) / 2, b.x2, b.y1, (b.y1 + b.y2) / 2, b.y2];\n      };\n    }\n  }\n\n  const Output = ['x', 'y', 'opacity', 'align', 'baseline'];\n  const Anchors = ['top-left', 'left', 'bottom-left', 'top', 'bottom', 'top-right', 'right', 'bottom-right'];\n\n  /**\n   * Compute text label layout to annotate marks.\n   * @constructor\n   * @param {object} params - The parameters for this operator.\n   * @param {Array<number>} params.size - The size of the layout, provided as a [width, height] array.\n   * @param {function(*,*): number} [params.sort] - An optional\n   *   comparator function for sorting label data in priority order.\n   * @param {Array<string>} [params.anchor] - Label anchor points relative to the base mark bounding box.\n   *   The available options are 'top-left', 'left', 'bottom-left', 'top',\n   *   'bottom', 'top-right', 'right', 'bottom-right', 'middle'.\n   * @param {Array<number>} [params.offset] - Label offsets (in pixels) from the base mark bounding box.\n   *   This parameter is parallel to the list of anchor points.\n   * @param {number | null} [params.padding=0] - The amount (in pixels) that a label may exceed the layout size.\n   *   If this parameter is null, a label may exceed the layout size without any boundary.\n   * @param {string} [params.lineAnchor='end'] - For group line mark labels only, indicates the anchor\n   *   position for labels. One of 'start' or 'end'.\n   * @param {string} [params.markIndex=0] - For group mark labels only, an index indicating\n   *   which mark within the group should be labeled.\n   * @param {Array<number>} [params.avoidMarks] - A list of additional mark names for which the label\n   *   layout should avoid overlap.\n   * @param {boolean} [params.avoidBaseMark=true] - Boolean flag indicating if labels should avoid\n   *   overlap with the underlying base mark being labeled.\n   * @param {string} [params.method='naive'] - For area make labels only, a method for\n   *   place labels. One of 'naive', 'reduced-search', or 'floodfill'.\n   * @param {Array<string>} [params.as] - The output fields written by the transform.\n   *   The default is ['x', 'y', 'opacity', 'align', 'baseline'].\n   */\n  function Label(params) {\n    vegaDataflow.Transform.call(this, null, params);\n  }\n  Label.Definition = {\n    type: 'Label',\n    metadata: {\n      modifies: true\n    },\n    params: [{\n      name: 'size',\n      type: 'number',\n      array: true,\n      length: 2,\n      required: true\n    }, {\n      name: 'sort',\n      type: 'compare'\n    }, {\n      name: 'anchor',\n      type: 'string',\n      array: true,\n      default: Anchors\n    }, {\n      name: 'offset',\n      type: 'number',\n      array: true,\n      default: [1]\n    }, {\n      name: 'padding',\n      type: 'number',\n      default: 0,\n      null: true\n    }, {\n      name: 'lineAnchor',\n      type: 'string',\n      values: ['start', 'end'],\n      default: 'end'\n    }, {\n      name: 'markIndex',\n      type: 'number',\n      default: 0\n    }, {\n      name: 'avoidBaseMark',\n      type: 'boolean',\n      default: true\n    }, {\n      name: 'avoidMarks',\n      type: 'data',\n      array: true\n    }, {\n      name: 'method',\n      type: 'string',\n      default: 'naive'\n    }, {\n      name: 'as',\n      type: 'string',\n      array: true,\n      length: Output.length,\n      default: Output\n    }]\n  };\n  vegaUtil.inherits(Label, vegaDataflow.Transform, {\n    transform(_, pulse) {\n      function modp(param) {\n        const p = _[param];\n        return vegaUtil.isFunction(p) && pulse.modified(p.fields);\n      }\n      const mod = _.modified();\n      if (!(mod || pulse.changed(pulse.ADD_REM) || modp('sort'))) return;\n      if (!_.size || _.size.length !== 2) {\n        vegaUtil.error('Size parameter should be specified as a [width, height] array.');\n      }\n      const as = _.as || Output;\n\n      // run label layout\n      labelLayout(pulse.materialize(pulse.SOURCE).source || [], _.size, _.sort, vegaUtil.array(_.offset == null ? 1 : _.offset), vegaUtil.array(_.anchor || Anchors), _.avoidMarks || [], _.avoidBaseMark !== false, _.lineAnchor || 'end', _.markIndex || 0, _.padding === undefined ? 0 : _.padding, _.method || 'naive').forEach(l => {\n        // write layout results to data stream\n        const t = l.datum;\n        t[as[0]] = l.x;\n        t[as[1]] = l.y;\n        t[as[2]] = l.opacity;\n        t[as[3]] = l.align;\n        t[as[4]] = l.baseline;\n      });\n      return pulse.reflow(mod).modifies(as);\n    }\n  });\n\n  exports.label = Label;\n\n}));\n\n};"],
"names":["shadow$provide","require","module","exports","global","factory","define","amd","globalThis","self","vega","transforms","vegaScenegraph","vegaCanvas","vegaDataflow","vegaUtil","baseBitmaps","$","data","bitmap","forEach","d","set","boundary","undefined","markBitmaps","baseMark","avoidMarks","labelInside","isGroupArea","width","height","border","context","canvas","getContext","baseMarkContext","strokeContext","items","draw","buffer","Uint32Array","getImageData","baseMarkBuffer","strokeBuffer","layer1","layer2","x","y","v","alpha","strokeAlpha","baseMarkAlpha","index","ALPHA_MASK","u","interior","length","type","mark","marktype","group","Marks","map","prepare","source","item","rederive","stroke","strokeOpacity","fill","fillOpacity","Bitmap","w","h","array","SIZE","get","DIV","MOD","clear","mask","getRange","x2","y2","end","indexStart","indexEnd","r","start","RIGHT0","RIGHT1","i","setRange","clearRange","outOfBounds","scaler","padding","ratio","Math","max","sqrt","scale","_","invert","scale.invert","scale.bitmap","textWidth","textHeight","collision","bm0","bm1","x1","y1","placeMarkLabel","bitmaps","anchors","offsets","n","datum","fontSize","dx","dy","insideFactor","yc","_y1","_y2","isInside","sizeFactor","SQRT1_2","_x1","_x2","textMetrics","text","xc","align","Aligns","baseline","Baselines","labelLayout","texts","size","compare","offset","anchor","avoidBaseMark","lineAnchor","markIndex","method","positions","getOffsets","getAnchors","markType","grouptype","markBoundary","infPadding","Infinity","isNaiveGroupArea","maxTextWidth","maxTextHeight","opacity","sort","a","b","place","placeAreaLabel","count","Float64Array","Int8Array","anchorCode","xy","NaN","bounds","Label","params","Transform","call","X_DIR","Y_DIR","placeAreaLabelNaive","maxAreaWidth","areaWidth","abs","placeAreaLabelReducedSearch","tryLabel","_x","_y","maxSize","lo","hi","mid","labelPlaced","labelPlaced2","_xMid","_yMid","result","swapTmp","placeAreaLabelFloodFill","bm2","stack","push","pop","j","Output","Anchors","Definition","metadata","modifies","name","required","default","null","values","inherits","transform","pulse","modp","param","p","isFunction","modified","fields","mod","changed","ADD_REM","error","as","materialize","SOURCE","l","t","reflow","label"]
}
