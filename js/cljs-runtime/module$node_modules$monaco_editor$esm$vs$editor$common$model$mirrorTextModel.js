shadow$provide.module$node_modules$monaco_editor$esm$vs$editor$common$model$mirrorTextModel = function(require, module, exports) {
  Object.defineProperties(exports, {__esModule:{enumerable:!0, value:!0}, MirrorTextModel:{enumerable:!0, get:function() {
    return MirrorTextModel;
  }}});
  var require$_DOT__DOT__SLASH__DOT__DOT__SLASH__DOT__DOT__SLASH_base_SLASH_common_SLASH_strings_DOT_js = require("module$node_modules$monaco_editor$esm$vs$base$common$strings"), require$_DOT__DOT__SLASH_core_SLASH_position_DOT_js = require("module$node_modules$monaco_editor$esm$vs$editor$common$core$position"), require$_DOT__SLASH_prefixSumComputer_DOT_js = require("module$node_modules$monaco_editor$esm$vs$editor$common$model$prefixSumComputer");
  class MirrorTextModel {
    constructor(uri, lines, eol, versionId) {
      this._uri = uri;
      this._lines = lines;
      this._eol = eol;
      this._versionId = versionId;
      this._cachedTextValue = this._lineStarts = null;
    }
    dispose() {
      this._lines.length = 0;
    }
    get version() {
      return this._versionId;
    }
    getText() {
      this._cachedTextValue === null && (this._cachedTextValue = this._lines.join(this._eol));
      return this._cachedTextValue;
    }
    onEvents(e) {
      e.eol && e.eol !== this._eol && (this._eol = e.eol, this._lineStarts = null);
      const changes = e.changes;
      for (const change of changes) {
        this._acceptDeleteRange(change.range), this._acceptInsertText(new require$_DOT__DOT__SLASH_core_SLASH_position_DOT_js.Position(change.range.startLineNumber, change.range.startColumn), change.text);
      }
      this._versionId = e.versionId;
      this._cachedTextValue = null;
    }
    _ensureLineStarts() {
      if (!this._lineStarts) {
        const eolLength = this._eol.length, linesLength = this._lines.length, lineStartValues = new Uint32Array(linesLength);
        for (let i = 0; i < linesLength; i++) {
          lineStartValues[i] = this._lines[i].length + eolLength;
        }
        this._lineStarts = new require$_DOT__SLASH_prefixSumComputer_DOT_js.PrefixSumComputer(lineStartValues);
      }
    }
    _setLineText(lineIndex, newValue) {
      this._lines[lineIndex] = newValue;
      this._lineStarts && this._lineStarts.setValue(lineIndex, this._lines[lineIndex].length + this._eol.length);
    }
    _acceptDeleteRange(range) {
      range.startLineNumber === range.endLineNumber ? range.startColumn !== range.endColumn && this._setLineText(range.startLineNumber - 1, this._lines[range.startLineNumber - 1].substring(0, range.startColumn - 1) + this._lines[range.startLineNumber - 1].substring(range.endColumn - 1)) : (this._setLineText(range.startLineNumber - 1, this._lines[range.startLineNumber - 1].substring(0, range.startColumn - 1) + this._lines[range.endLineNumber - 1].substring(range.endColumn - 1)), this._lines.splice(range.startLineNumber, 
      range.endLineNumber - range.startLineNumber), this._lineStarts && this._lineStarts.removeValues(range.startLineNumber, range.endLineNumber - range.startLineNumber));
    }
    _acceptInsertText(position, insertText) {
      if (insertText.length !== 0) {
        if (insertText = (0,require$_DOT__DOT__SLASH__DOT__DOT__SLASH__DOT__DOT__SLASH_base_SLASH_common_SLASH_strings_DOT_js.splitLines)(insertText), insertText.length === 1) {
          this._setLineText(position.lineNumber - 1, this._lines[position.lineNumber - 1].substring(0, position.column - 1) + insertText[0] + this._lines[position.lineNumber - 1].substring(position.column - 1));
        } else {
          insertText[insertText.length - 1] += this._lines[position.lineNumber - 1].substring(position.column - 1);
          this._setLineText(position.lineNumber - 1, this._lines[position.lineNumber - 1].substring(0, position.column - 1) + insertText[0]);
          var newLengths = new Uint32Array(insertText.length - 1);
          for (let i = 1; i < insertText.length; i++) {
            this._lines.splice(position.lineNumber + i - 1, 0, insertText[i]), newLengths[i - 1] = insertText[i].length + this._eol.length;
          }
          this._lineStarts && this._lineStarts.insertValues(position.lineNumber, newLengths);
        }
      }
    }
  }
};

//# sourceMappingURL=module$node_modules$monaco_editor$esm$vs$editor$common$model$mirrorTextModel.js.map
