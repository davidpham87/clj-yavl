shadow$provide.module$node_modules$monaco_editor$esm$vs$editor$browser$widget$diffEditor$accessibleDiffViewer = function(require, module, exports) {
  function computeViewElementGroups(diffs, originalLineCount, modifiedLineCount) {
    const result = [];
    for (const g of (0,require$_DOT__DOT__SLASH__DOT__DOT__SLASH__DOT__DOT__SLASH__DOT__DOT__SLASH_base_SLASH_common_SLASH_arrays_DOT_js.groupAdjacentBy)(diffs, (a, b) => b.modified.startLineNumber - a.modified.endLineNumberExclusive < 6)) {
      const viewElements = [];
      viewElements.push(new HeaderViewElement());
      const origFullRange = new require$_DOT__DOT__SLASH__DOT__DOT__SLASH__DOT__DOT__SLASH_common_SLASH_core_SLASH_lineRange_DOT_js.LineRange(Math.max(1, g[0].original.startLineNumber - 3), Math.min(g[g.length - 1].original.endLineNumberExclusive + 3, originalLineCount + 1)), modifiedFullRange = new require$_DOT__DOT__SLASH__DOT__DOT__SLASH__DOT__DOT__SLASH_common_SLASH_core_SLASH_lineRange_DOT_js.LineRange(Math.max(1, g[0].modified.startLineNumber - 3), Math.min(g[g.length - 1].modified.endLineNumberExclusive + 
      3, modifiedLineCount + 1));
      (0,require$_DOT__DOT__SLASH__DOT__DOT__SLASH__DOT__DOT__SLASH__DOT__DOT__SLASH_base_SLASH_common_SLASH_arrays_DOT_js.forEachAdjacent)(g, (a, b) => {
        const origRange = new require$_DOT__DOT__SLASH__DOT__DOT__SLASH__DOT__DOT__SLASH_common_SLASH_core_SLASH_lineRange_DOT_js.LineRange(a ? a.original.endLineNumberExclusive : origFullRange.startLineNumber, b ? b.original.startLineNumber : origFullRange.endLineNumberExclusive), modifiedRange = new require$_DOT__DOT__SLASH__DOT__DOT__SLASH__DOT__DOT__SLASH_common_SLASH_core_SLASH_lineRange_DOT_js.LineRange(a ? a.modified.endLineNumberExclusive : modifiedFullRange.startLineNumber, b ? b.modified.startLineNumber : 
        modifiedFullRange.endLineNumberExclusive);
        origRange.forEach(origLineNumber => {
          viewElements.push(new UnchangedLineViewElement(origLineNumber, modifiedRange.startLineNumber + (origLineNumber - origRange.startLineNumber)));
        });
        b && (b.original.forEach(origLineNumber => {
          viewElements.push(new DeletedLineViewElement(b, origLineNumber));
        }), b.modified.forEach(modifiedLineNumber => {
          viewElements.push(new AddedLineViewElement(b, modifiedLineNumber));
        }));
      });
      diffs = g[0].modified.join(g[g.length - 1].modified);
      const originalRange = g[0].original.join(g[g.length - 1].original);
      result.push(new ViewElementGroup(new require$_DOT__DOT__SLASH__DOT__DOT__SLASH__DOT__DOT__SLASH_common_SLASH_diff_SLASH_rangeMapping_DOT_js.LineRangeMapping(diffs, originalRange), viewElements));
    }
    return result;
  }
  Object.defineProperties(exports, {__esModule:{enumerable:!0, value:!0}, AccessibleDiffViewer:{enumerable:!0, get:function() {
    return AccessibleDiffViewer;
  }}});
  var require$_DOT__DOT__SLASH__DOT__DOT__SLASH__DOT__DOT__SLASH__DOT__DOT__SLASH_base_SLASH_browser_SLASH_dom_DOT_js = require("module$node_modules$monaco_editor$esm$vs$base$browser$dom");
  module = require("module$node_modules$monaco_editor$esm$vs$base$browser$trustedTypes");
  var require$_DOT__DOT__SLASH__DOT__DOT__SLASH__DOT__DOT__SLASH__DOT__DOT__SLASH_base_SLASH_browser_SLASH_ui_SLASH_actionbar_SLASH_actionbar_DOT_js = require("module$node_modules$monaco_editor$esm$vs$base$browser$ui$actionbar$actionbar"), require$_DOT__DOT__SLASH__DOT__DOT__SLASH__DOT__DOT__SLASH__DOT__DOT__SLASH_base_SLASH_browser_SLASH_ui_SLASH_scrollbar_SLASH_scrollableElement_DOT_js = require("module$node_modules$monaco_editor$esm$vs$base$browser$ui$scrollbar$scrollableElement"), require$_DOT__DOT__SLASH__DOT__DOT__SLASH__DOT__DOT__SLASH__DOT__DOT__SLASH_base_SLASH_common_SLASH_actions_DOT_js = 
  require("module$node_modules$monaco_editor$esm$vs$base$common$actions"), require$_DOT__DOT__SLASH__DOT__DOT__SLASH__DOT__DOT__SLASH__DOT__DOT__SLASH_base_SLASH_common_SLASH_arrays_DOT_js = require("module$node_modules$monaco_editor$esm$vs$base$common$arrays");
  exports = require("module$node_modules$monaco_editor$esm$vs$base$common$codicons");
  var require$_DOT__DOT__SLASH__DOT__DOT__SLASH__DOT__DOT__SLASH__DOT__DOT__SLASH_base_SLASH_common_SLASH_lifecycle_DOT_js = require("module$node_modules$monaco_editor$esm$vs$base$common$lifecycle"), require$_DOT__DOT__SLASH__DOT__DOT__SLASH__DOT__DOT__SLASH__DOT__DOT__SLASH_base_SLASH_common_SLASH_observable_DOT_js = require("module$node_modules$monaco_editor$esm$vs$base$common$observable"), require$_DOT__DOT__SLASH__DOT__DOT__SLASH__DOT__DOT__SLASH__DOT__DOT__SLASH_base_SLASH_common_SLASH_themables_DOT_js = 
  require("module$node_modules$monaco_editor$esm$vs$base$common$themables"), require$_DOT__DOT__SLASH__DOT__DOT__SLASH_config_SLASH_domFontInfo_DOT_js = require("module$node_modules$monaco_editor$esm$vs$editor$browser$config$domFontInfo"), require$_DOT__SLASH_utils_DOT_js = require("module$node_modules$monaco_editor$esm$vs$editor$browser$widget$diffEditor$utils"), require$_DOT__DOT__SLASH__DOT__DOT__SLASH__DOT__DOT__SLASH_common_SLASH_config_SLASH_editorOptions_DOT_js = require("module$node_modules$monaco_editor$esm$vs$editor$common$config$editorOptions"), 
  require$_DOT__DOT__SLASH__DOT__DOT__SLASH__DOT__DOT__SLASH_common_SLASH_core_SLASH_lineRange_DOT_js = require("module$node_modules$monaco_editor$esm$vs$editor$common$core$lineRange"), require$_DOT__DOT__SLASH__DOT__DOT__SLASH__DOT__DOT__SLASH_common_SLASH_core_SLASH_offsetRange_DOT_js = require("module$node_modules$monaco_editor$esm$vs$editor$common$core$offsetRange"), require$_DOT__DOT__SLASH__DOT__DOT__SLASH__DOT__DOT__SLASH_common_SLASH_core_SLASH_position_DOT_js = require("module$node_modules$monaco_editor$esm$vs$editor$common$core$position"), 
  require$_DOT__DOT__SLASH__DOT__DOT__SLASH__DOT__DOT__SLASH_common_SLASH_core_SLASH_range_DOT_js = require("module$node_modules$monaco_editor$esm$vs$editor$common$core$range"), require$_DOT__DOT__SLASH__DOT__DOT__SLASH__DOT__DOT__SLASH_common_SLASH_diff_SLASH_rangeMapping_DOT_js = require("module$node_modules$monaco_editor$esm$vs$editor$common$diff$rangeMapping"), require$_DOT__DOT__SLASH__DOT__DOT__SLASH__DOT__DOT__SLASH_common_SLASH_languages_SLASH_language_DOT_js = require("module$node_modules$monaco_editor$esm$vs$editor$common$languages$language"), 
  require$_DOT__DOT__SLASH__DOT__DOT__SLASH__DOT__DOT__SLASH_common_SLASH_tokens_SLASH_lineTokens_DOT_js = require("module$node_modules$monaco_editor$esm$vs$editor$common$tokens$lineTokens"), require$_DOT__DOT__SLASH__DOT__DOT__SLASH__DOT__DOT__SLASH_common_SLASH_viewLayout_SLASH_viewLineRenderer_DOT_js = require("module$node_modules$monaco_editor$esm$vs$editor$common$viewLayout$viewLineRenderer"), require$_DOT__DOT__SLASH__DOT__DOT__SLASH__DOT__DOT__SLASH_common_SLASH_viewModel_DOT_js = require("module$node_modules$monaco_editor$esm$vs$editor$common$viewModel"), 
  require$_DOT__DOT__SLASH__DOT__DOT__SLASH__DOT__DOT__SLASH__DOT__DOT__SLASH_nls_DOT_js = require("module$node_modules$monaco_editor$esm$vs$nls"), require$_DOT__DOT__SLASH__DOT__DOT__SLASH__DOT__DOT__SLASH__DOT__DOT__SLASH_platform_SLASH_audioCues_SLASH_browser_SLASH_audioCueService_DOT_js = require("module$node_modules$monaco_editor$esm$vs$platform$audioCues$browser$audioCueService"), require$_DOT__DOT__SLASH__DOT__DOT__SLASH__DOT__DOT__SLASH__DOT__DOT__SLASH_platform_SLASH_instantiation_SLASH_common_SLASH_instantiation_DOT_js = 
  require("module$node_modules$monaco_editor$esm$vs$platform$instantiation$common$instantiation"), require$_DOT__DOT__SLASH__DOT__DOT__SLASH__DOT__DOT__SLASH__DOT__DOT__SLASH_platform_SLASH_theme_SLASH_common_SLASH_iconRegistry_DOT_js = require("module$node_modules$monaco_editor$esm$vs$platform$theme$common$iconRegistry");
  require("module$node_modules$monaco_editor$esm$vs$editor$browser$widget$diffEditor$accessibleDiffViewer_css");
  require = this && this.__decorate || function(decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") {
      r = Reflect.decorate(decorators, target, key, desc);
    } else {
      for (var i = decorators.length - 1; i >= 0; i--) {
        if (d = decorators[i]) {
          r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
        }
      }
    }
    return c > 3 && r && Object.defineProperty(target, key, r), r;
  };
  var __param = this && this.__param || function(paramIndex, decorator) {
    return function(target, key) {
      decorator(target, key, paramIndex);
    };
  };
  const accessibleDiffViewerInsertIcon = (0,require$_DOT__DOT__SLASH__DOT__DOT__SLASH__DOT__DOT__SLASH__DOT__DOT__SLASH_platform_SLASH_theme_SLASH_common_SLASH_iconRegistry_DOT_js.registerIcon)("diff-review-insert", exports.Codicon.add, (0,require$_DOT__DOT__SLASH__DOT__DOT__SLASH__DOT__DOT__SLASH__DOT__DOT__SLASH_nls_DOT_js.localize)("accessibleDiffViewerInsertIcon", "Icon for 'Insert' in accessible diff viewer.")), accessibleDiffViewerRemoveIcon = (0,require$_DOT__DOT__SLASH__DOT__DOT__SLASH__DOT__DOT__SLASH__DOT__DOT__SLASH_platform_SLASH_theme_SLASH_common_SLASH_iconRegistry_DOT_js.registerIcon)("diff-review-remove", 
  exports.Codicon.remove, (0,require$_DOT__DOT__SLASH__DOT__DOT__SLASH__DOT__DOT__SLASH__DOT__DOT__SLASH_nls_DOT_js.localize)("accessibleDiffViewerRemoveIcon", "Icon for 'Remove' in accessible diff viewer.")), accessibleDiffViewerCloseIcon = (0,require$_DOT__DOT__SLASH__DOT__DOT__SLASH__DOT__DOT__SLASH__DOT__DOT__SLASH_platform_SLASH_theme_SLASH_common_SLASH_iconRegistry_DOT_js.registerIcon)("diff-review-close", exports.Codicon.close, (0,require$_DOT__DOT__SLASH__DOT__DOT__SLASH__DOT__DOT__SLASH__DOT__DOT__SLASH_nls_DOT_js.localize)("accessibleDiffViewerCloseIcon", 
  "Icon for 'Close' in accessible diff viewer."));
  let AccessibleDiffViewer = class extends require$_DOT__DOT__SLASH__DOT__DOT__SLASH__DOT__DOT__SLASH__DOT__DOT__SLASH_base_SLASH_common_SLASH_lifecycle_DOT_js.Disposable {
    constructor(_parentNode, _visible, _setVisible, _canClose, _width, _height, _diffs, _editors, _instantiationService) {
      super();
      this._parentNode = _parentNode;
      this._visible = _visible;
      this._setVisible = _setVisible;
      this._canClose = _canClose;
      this._width = _width;
      this._height = _height;
      this._diffs = _diffs;
      this._editors = _editors;
      this._instantiationService = _instantiationService;
      this._state = (0,require$_DOT__DOT__SLASH__DOT__DOT__SLASH__DOT__DOT__SLASH__DOT__DOT__SLASH_base_SLASH_common_SLASH_observable_DOT_js.derivedWithStore)(this, (reader, store) => {
        reader = this._visible.read(reader);
        this._parentNode.style.visibility = reader ? "visible" : "hidden";
        if (!reader) {
          return null;
        }
        reader = store.add(this._instantiationService.createInstance(ViewModel, this._diffs, this._editors, this._setVisible, this._canClose));
        store = store.add(this._instantiationService.createInstance(View, this._parentNode, reader, this._width, this._height, this._editors));
        return {model:reader, view:store};
      }).recomputeInitiallyAndOnChange(this._store);
    }
    next() {
      (0,require$_DOT__DOT__SLASH__DOT__DOT__SLASH__DOT__DOT__SLASH__DOT__DOT__SLASH_base_SLASH_common_SLASH_observable_DOT_js.transaction)(tx => {
        const isVisible = this._visible.get();
        this._setVisible(!0, tx);
        isVisible && this._state.get().model.nextGroup(tx);
      });
    }
    prev() {
      (0,require$_DOT__DOT__SLASH__DOT__DOT__SLASH__DOT__DOT__SLASH__DOT__DOT__SLASH_base_SLASH_common_SLASH_observable_DOT_js.transaction)(tx => {
        this._setVisible(!0, tx);
        this._state.get().model.previousGroup(tx);
      });
    }
    close() {
      (0,require$_DOT__DOT__SLASH__DOT__DOT__SLASH__DOT__DOT__SLASH__DOT__DOT__SLASH_base_SLASH_common_SLASH_observable_DOT_js.transaction)(tx => {
        this._setVisible(!1, tx);
      });
    }
  };
  AccessibleDiffViewer._ttPolicy = (0,module.createTrustedTypesPolicy)("diffReview", {createHTML:value => value});
  AccessibleDiffViewer = require([__param(8, require$_DOT__DOT__SLASH__DOT__DOT__SLASH__DOT__DOT__SLASH__DOT__DOT__SLASH_platform_SLASH_instantiation_SLASH_common_SLASH_instantiation_DOT_js.IInstantiationService)], AccessibleDiffViewer);
  let ViewModel = class extends require$_DOT__DOT__SLASH__DOT__DOT__SLASH__DOT__DOT__SLASH__DOT__DOT__SLASH_base_SLASH_common_SLASH_lifecycle_DOT_js.Disposable {
    constructor(_diffs, _editors, _setVisible, canClose, _audioCueService) {
      super();
      this._diffs = _diffs;
      this._editors = _editors;
      this._setVisible = _setVisible;
      this.canClose = canClose;
      this._audioCueService = _audioCueService;
      this._groups = (0,require$_DOT__DOT__SLASH__DOT__DOT__SLASH__DOT__DOT__SLASH__DOT__DOT__SLASH_base_SLASH_common_SLASH_observable_DOT_js.observableValue)(this, []);
      this._currentGroupIdx = (0,require$_DOT__DOT__SLASH__DOT__DOT__SLASH__DOT__DOT__SLASH__DOT__DOT__SLASH_base_SLASH_common_SLASH_observable_DOT_js.observableValue)(this, 0);
      this._currentElementIdx = (0,require$_DOT__DOT__SLASH__DOT__DOT__SLASH__DOT__DOT__SLASH__DOT__DOT__SLASH_base_SLASH_common_SLASH_observable_DOT_js.observableValue)(this, 0);
      this.groups = this._groups;
      this.currentGroup = this._currentGroupIdx.map((idx, r) => this._groups.read(r)[idx]);
      this.currentGroupIndex = this._currentGroupIdx;
      this.currentElement = this._currentElementIdx.map((idx, r) => {
        var _a;
        return (_a = this.currentGroup.read(r)) === null || _a === void 0 ? void 0 : _a.lines[idx];
      });
      this._register((0,require$_DOT__DOT__SLASH__DOT__DOT__SLASH__DOT__DOT__SLASH__DOT__DOT__SLASH_base_SLASH_common_SLASH_observable_DOT_js.autorun)(reader => {
        if (reader = this._diffs.read(reader)) {
          var groups = computeViewElementGroups(reader, this._editors.original.getModel().getLineCount(), this._editors.modified.getModel().getLineCount());
          (0,require$_DOT__DOT__SLASH__DOT__DOT__SLASH__DOT__DOT__SLASH__DOT__DOT__SLASH_base_SLASH_common_SLASH_observable_DOT_js.transaction)(tx => {
            const p = this._editors.modified.getPosition();
            if (p) {
              const nextGroup = groups.findIndex(g => (p === null || p === void 0 ? void 0 : p.lineNumber) < g.range.modified.endLineNumberExclusive);
              nextGroup !== -1 && this._currentGroupIdx.set(nextGroup, tx);
            }
            this._groups.set(groups, tx);
          });
        } else {
          this._groups.set([], void 0);
        }
      }));
      this._register((0,require$_DOT__DOT__SLASH__DOT__DOT__SLASH__DOT__DOT__SLASH__DOT__DOT__SLASH_base_SLASH_common_SLASH_observable_DOT_js.autorun)(reader => {
        reader = this.currentElement.read(reader);
        (reader === null || reader === void 0 ? void 0 : reader.type) === LineType.Deleted ? this._audioCueService.playAudioCue(require$_DOT__DOT__SLASH__DOT__DOT__SLASH__DOT__DOT__SLASH__DOT__DOT__SLASH_platform_SLASH_audioCues_SLASH_browser_SLASH_audioCueService_DOT_js.AudioCue.diffLineDeleted, {source:"accessibleDiffViewer.currentElementChanged"}) : (reader === null || reader === void 0 ? void 0 : reader.type) === LineType.Added && this._audioCueService.playAudioCue(require$_DOT__DOT__SLASH__DOT__DOT__SLASH__DOT__DOT__SLASH__DOT__DOT__SLASH_platform_SLASH_audioCues_SLASH_browser_SLASH_audioCueService_DOT_js.AudioCue.diffLineInserted, 
        {source:"accessibleDiffViewer.currentElementChanged"});
      }));
      this._register((0,require$_DOT__DOT__SLASH__DOT__DOT__SLASH__DOT__DOT__SLASH__DOT__DOT__SLASH_base_SLASH_common_SLASH_observable_DOT_js.autorun)(reader => {
        var _a;
        if ((reader = this.currentElement.read(reader)) && reader.type !== LineType.Header) {
          const lineNumber = (_a = reader.modifiedLineNumber) !== null && _a !== void 0 ? _a : reader.diff.modified.startLineNumber;
          this._editors.modified.setSelection(require$_DOT__DOT__SLASH__DOT__DOT__SLASH__DOT__DOT__SLASH_common_SLASH_core_SLASH_range_DOT_js.Range.fromPositions(new require$_DOT__DOT__SLASH__DOT__DOT__SLASH__DOT__DOT__SLASH_common_SLASH_core_SLASH_position_DOT_js.Position(lineNumber, 1)));
        }
      }));
    }
    _goToGroupDelta(delta, tx) {
      const groups = this.groups.get();
      !groups || groups.length <= 1 || (0,require$_DOT__DOT__SLASH__DOT__DOT__SLASH__DOT__DOT__SLASH__DOT__DOT__SLASH_base_SLASH_common_SLASH_observable_DOT_js.subtransaction)(tx, tx => {
        this._currentGroupIdx.set(require$_DOT__DOT__SLASH__DOT__DOT__SLASH__DOT__DOT__SLASH_common_SLASH_core_SLASH_offsetRange_DOT_js.OffsetRange.ofLength(groups.length).clipCyclic(this._currentGroupIdx.get() + delta), tx);
        this._currentElementIdx.set(0, tx);
      });
    }
    nextGroup(tx) {
      this._goToGroupDelta(1, tx);
    }
    previousGroup(tx) {
      this._goToGroupDelta(-1, tx);
    }
    _goToLineDelta(delta) {
      const group = this.currentGroup.get();
      !group || group.lines.length <= 1 || (0,require$_DOT__DOT__SLASH__DOT__DOT__SLASH__DOT__DOT__SLASH__DOT__DOT__SLASH_base_SLASH_common_SLASH_observable_DOT_js.transaction)(tx => {
        this._currentElementIdx.set(require$_DOT__DOT__SLASH__DOT__DOT__SLASH__DOT__DOT__SLASH_common_SLASH_core_SLASH_offsetRange_DOT_js.OffsetRange.ofLength(group.lines.length).clip(this._currentElementIdx.get() + delta), tx);
      });
    }
    goToNextLine() {
      this._goToLineDelta(1);
    }
    goToPreviousLine() {
      this._goToLineDelta(-1);
    }
    goToLine(line) {
      const group = this.currentGroup.get();
      if (group) {
        var idx = group.lines.indexOf(line);
        idx !== -1 && (0,require$_DOT__DOT__SLASH__DOT__DOT__SLASH__DOT__DOT__SLASH__DOT__DOT__SLASH_base_SLASH_common_SLASH_observable_DOT_js.transaction)(tx => {
          this._currentElementIdx.set(idx, tx);
        });
      }
    }
    revealCurrentElementInEditor() {
      this._setVisible(!1, void 0);
      const curElem = this.currentElement.get();
      curElem && (curElem.type === LineType.Deleted ? (this._editors.original.setSelection(require$_DOT__DOT__SLASH__DOT__DOT__SLASH__DOT__DOT__SLASH_common_SLASH_core_SLASH_range_DOT_js.Range.fromPositions(new require$_DOT__DOT__SLASH__DOT__DOT__SLASH__DOT__DOT__SLASH_common_SLASH_core_SLASH_position_DOT_js.Position(curElem.originalLineNumber, 1))), this._editors.original.revealLine(curElem.originalLineNumber), this._editors.original.focus()) : (curElem.type !== LineType.Header && (this._editors.modified.setSelection(require$_DOT__DOT__SLASH__DOT__DOT__SLASH__DOT__DOT__SLASH_common_SLASH_core_SLASH_range_DOT_js.Range.fromPositions(new require$_DOT__DOT__SLASH__DOT__DOT__SLASH__DOT__DOT__SLASH_common_SLASH_core_SLASH_position_DOT_js.Position(curElem.modifiedLineNumber, 
      1))), this._editors.modified.revealLine(curElem.modifiedLineNumber)), this._editors.modified.focus()));
    }
    close() {
      this._setVisible(!1, void 0);
      this._editors.modified.focus();
    }
  };
  ViewModel = require([__param(4, require$_DOT__DOT__SLASH__DOT__DOT__SLASH__DOT__DOT__SLASH__DOT__DOT__SLASH_platform_SLASH_audioCues_SLASH_browser_SLASH_audioCueService_DOT_js.IAudioCueService)], ViewModel);
  var LineType;
  (function(LineType) {
    LineType[LineType.Header = 0] = "Header";
    LineType[LineType.Unchanged = 1] = "Unchanged";
    LineType[LineType.Deleted = 2] = "Deleted";
    LineType[LineType.Added = 3] = "Added";
  })(LineType ||= {});
  class ViewElementGroup {
    constructor(range, lines) {
      this.range = range;
      this.lines = lines;
    }
  }
  class HeaderViewElement {
    constructor() {
      this.type = LineType.Header;
    }
  }
  class DeletedLineViewElement {
    constructor(diff, originalLineNumber) {
      this.diff = diff;
      this.originalLineNumber = originalLineNumber;
      this.type = LineType.Deleted;
      this.modifiedLineNumber = void 0;
    }
  }
  class AddedLineViewElement {
    constructor(diff, modifiedLineNumber) {
      this.diff = diff;
      this.modifiedLineNumber = modifiedLineNumber;
      this.type = LineType.Added;
      this.originalLineNumber = void 0;
    }
  }
  class UnchangedLineViewElement {
    constructor(originalLineNumber, modifiedLineNumber) {
      this.originalLineNumber = originalLineNumber;
      this.modifiedLineNumber = modifiedLineNumber;
      this.type = LineType.Unchanged;
    }
  }
  let View = class extends require$_DOT__DOT__SLASH__DOT__DOT__SLASH__DOT__DOT__SLASH__DOT__DOT__SLASH_base_SLASH_common_SLASH_lifecycle_DOT_js.Disposable {
    constructor(_element, _model, _width, _height, _editors, _languageService) {
      super();
      this._element = _element;
      this._model = _model;
      this._width = _width;
      this._height = _height;
      this._editors = _editors;
      this._languageService = _languageService;
      this.domNode = this._element;
      this.domNode.className = "diff-review monaco-editor-background";
      _element = document.createElement("div");
      _element.className = "diff-review-actions";
      this._actionBar = this._register(new require$_DOT__DOT__SLASH__DOT__DOT__SLASH__DOT__DOT__SLASH__DOT__DOT__SLASH_base_SLASH_browser_SLASH_ui_SLASH_actionbar_SLASH_actionbar_DOT_js.ActionBar(_element));
      this._register((0,require$_DOT__DOT__SLASH__DOT__DOT__SLASH__DOT__DOT__SLASH__DOT__DOT__SLASH_base_SLASH_common_SLASH_observable_DOT_js.autorun)(reader => {
        this._actionBar.clear();
        this._model.canClose.read(reader) && this._actionBar.push(new require$_DOT__DOT__SLASH__DOT__DOT__SLASH__DOT__DOT__SLASH__DOT__DOT__SLASH_base_SLASH_common_SLASH_actions_DOT_js.Action("diffreview.close", (0,require$_DOT__DOT__SLASH__DOT__DOT__SLASH__DOT__DOT__SLASH__DOT__DOT__SLASH_nls_DOT_js.localize)("label.close", "Close"), "close-diff-review " + require$_DOT__DOT__SLASH__DOT__DOT__SLASH__DOT__DOT__SLASH__DOT__DOT__SLASH_base_SLASH_common_SLASH_themables_DOT_js.ThemeIcon.asClassName(accessibleDiffViewerCloseIcon), 
        !0, async() => _model.close()), {label:!1, icon:!0});
      }));
      this._content = document.createElement("div");
      this._content.className = "diff-review-content";
      this._content.setAttribute("role", "code");
      this._scrollbar = this._register(new require$_DOT__DOT__SLASH__DOT__DOT__SLASH__DOT__DOT__SLASH__DOT__DOT__SLASH_base_SLASH_browser_SLASH_ui_SLASH_scrollbar_SLASH_scrollableElement_DOT_js.DomScrollableElement(this._content, {}));
      (0,require$_DOT__DOT__SLASH__DOT__DOT__SLASH__DOT__DOT__SLASH__DOT__DOT__SLASH_base_SLASH_browser_SLASH_dom_DOT_js.reset)(this.domNode, this._scrollbar.getDomNode(), _element);
      this._register((0,require$_DOT__DOT__SLASH__DOT__DOT__SLASH__DOT__DOT__SLASH__DOT__DOT__SLASH_base_SLASH_common_SLASH_lifecycle_DOT_js.toDisposable)(() => {
        (0,require$_DOT__DOT__SLASH__DOT__DOT__SLASH__DOT__DOT__SLASH__DOT__DOT__SLASH_base_SLASH_browser_SLASH_dom_DOT_js.reset)(this.domNode);
      }));
      this._register((0,require$_DOT__SLASH_utils_DOT_js.applyStyle)(this.domNode, {width:this._width, height:this._height}));
      this._register((0,require$_DOT__SLASH_utils_DOT_js.applyStyle)(this._content, {width:this._width, height:this._height}));
      this._register((0,require$_DOT__DOT__SLASH__DOT__DOT__SLASH__DOT__DOT__SLASH__DOT__DOT__SLASH_base_SLASH_common_SLASH_observable_DOT_js.autorunWithStore)((reader, store) => {
        this._model.currentGroup.read(reader);
        this._render(store);
      }));
      this._register((0,require$_DOT__DOT__SLASH__DOT__DOT__SLASH__DOT__DOT__SLASH__DOT__DOT__SLASH_base_SLASH_browser_SLASH_dom_DOT_js.addStandardDisposableListener)(this.domNode, "keydown", e => {
        if (e.equals(18) || e.equals(2066) || e.equals(530)) {
          e.preventDefault(), this._model.goToNextLine();
        }
        if (e.equals(16) || e.equals(2064) || e.equals(528)) {
          e.preventDefault(), this._model.goToPreviousLine();
        }
        if (e.equals(9) || e.equals(2057) || e.equals(521) || e.equals(1033)) {
          e.preventDefault(), this._model.close();
        }
        if (e.equals(10) || e.equals(3)) {
          e.preventDefault(), this._model.revealCurrentElementInEditor();
        }
      }));
    }
    _render(store) {
      const originalOptions = this._editors.original.getOptions(), modifiedOptions = this._editors.modified.getOptions(), container = document.createElement("div");
      container.className = "diff-review-table";
      container.setAttribute("role", "list");
      container.setAttribute("aria-label", (0,require$_DOT__DOT__SLASH__DOT__DOT__SLASH__DOT__DOT__SLASH__DOT__DOT__SLASH_nls_DOT_js.localize)("ariaLabel", "Accessible Diff Viewer. Use arrow up and down to navigate."));
      (0,require$_DOT__DOT__SLASH__DOT__DOT__SLASH_config_SLASH_domFontInfo_DOT_js.applyFontInfo)(container, modifiedOptions.get(50));
      (0,require$_DOT__DOT__SLASH__DOT__DOT__SLASH__DOT__DOT__SLASH__DOT__DOT__SLASH_base_SLASH_browser_SLASH_dom_DOT_js.reset)(this._content, container);
      const originalModel = this._editors.original.getModel(), modifiedModel = this._editors.modified.getModel();
      if (originalModel && modifiedModel) {
        var originalModelOpts = originalModel.getOptions(), modifiedModelOpts = modifiedModel.getOptions(), lineHeight = modifiedOptions.get(66), group = this._model.currentGroup.get();
        for (const viewItem of (group === null || group === void 0 ? void 0 : group.lines) || []) {
          if (!group) {
            break;
          }
          let row;
          if (viewItem.type === LineType.Header) {
            const header = document.createElement("div");
            header.className = "diff-review-row";
            header.setAttribute("role", "listitem");
            const r = group.range, diffIndex = this._model.currentGroupIndex.get(), diffsLength = this._model.groups.get().length;
            var getAriaLines = lines => lines === 0 ? (0,require$_DOT__DOT__SLASH__DOT__DOT__SLASH__DOT__DOT__SLASH__DOT__DOT__SLASH_nls_DOT_js.localize)("no_lines_changed", "no lines changed") : lines === 1 ? (0,require$_DOT__DOT__SLASH__DOT__DOT__SLASH__DOT__DOT__SLASH__DOT__DOT__SLASH_nls_DOT_js.localize)("one_line_changed", "1 line changed") : (0,require$_DOT__DOT__SLASH__DOT__DOT__SLASH__DOT__DOT__SLASH__DOT__DOT__SLASH_nls_DOT_js.localize)("more_lines_changed", "{0} lines changed", lines), 
            originalChangedLinesCntAria = getAriaLines(r.original.length);
            getAriaLines = getAriaLines(r.modified.length);
            header.setAttribute("aria-label", (0,require$_DOT__DOT__SLASH__DOT__DOT__SLASH__DOT__DOT__SLASH__DOT__DOT__SLASH_nls_DOT_js.localize)({key:"header", comment:'This is the ARIA label for a git diff header.;A git diff header looks like this: @@ -154,12 +159,39 @@.;That encodes that at original line 154 (which is now line 159), 12 lines were removed/changed with 39 lines.;Variables 0 and 1 refer to the diff index out of total number of diffs.;Variables 2 and 4 will be numbers (a line number).;Variables 3 and 5 will be "no lines changed", "1 line changed" or "X lines changed", localized separately.'.split(";")}, 
            "Difference {0} of {1}: original line {2}, {3}, modified line {4}, {5}", diffIndex + 1, diffsLength, r.original.startLineNumber, originalChangedLinesCntAria, r.modified.startLineNumber, getAriaLines));
            originalChangedLinesCntAria = document.createElement("div");
            originalChangedLinesCntAria.className = "diff-review-cell diff-review-summary";
            originalChangedLinesCntAria.appendChild(document.createTextNode(`${diffIndex + 1}/${diffsLength}: @@ -${r.original.startLineNumber},${r.original.length} +${r.modified.startLineNumber},${r.modified.length} @@`));
            header.appendChild(originalChangedLinesCntAria);
            row = header;
          } else {
            row = this._createRow(viewItem, lineHeight, this._width.get(), originalOptions, originalModel, originalModelOpts, modifiedOptions, modifiedModel, modifiedModelOpts);
          }
          container.appendChild(row);
          const isSelectedObs = (0,require$_DOT__DOT__SLASH__DOT__DOT__SLASH__DOT__DOT__SLASH__DOT__DOT__SLASH_base_SLASH_common_SLASH_observable_DOT_js.derived)(reader => this._model.currentElement.read(reader) === viewItem);
          store.add((0,require$_DOT__DOT__SLASH__DOT__DOT__SLASH__DOT__DOT__SLASH__DOT__DOT__SLASH_base_SLASH_common_SLASH_observable_DOT_js.autorun)(reader => {
            reader = isSelectedObs.read(reader);
            row.tabIndex = reader ? 0 : -1;
            reader && row.focus();
          }));
          store.add((0,require$_DOT__DOT__SLASH__DOT__DOT__SLASH__DOT__DOT__SLASH__DOT__DOT__SLASH_base_SLASH_browser_SLASH_dom_DOT_js.addDisposableListener)(row, "focus", () => {
            this._model.goToLine(viewItem);
          }));
        }
        this._scrollbar.scanDomNode();
      }
    }
    _createRow(item, lineHeight, width, originalOptions, originalModel, originalModelOpts, modifiedOptions, modifiedModel, modifiedModelOpts) {
      var originalLayoutInfo = originalOptions.get(143), originalLineNumbersWidth = originalLayoutInfo.glyphMarginWidth + originalLayoutInfo.lineNumbersWidth;
      originalLayoutInfo = modifiedOptions.get(143);
      const modifiedLineNumbersWidth = 10 + originalLayoutInfo.glyphMarginWidth + originalLayoutInfo.lineNumbersWidth;
      let rowClassName = "diff-review-row", lineNumbersExtraClassName = "", spacerIcon = null;
      switch(item.type) {
        case LineType.Added:
          rowClassName = "diff-review-row line-insert";
          lineNumbersExtraClassName = " char-insert";
          spacerIcon = accessibleDiffViewerInsertIcon;
          break;
        case LineType.Deleted:
          rowClassName = "diff-review-row line-delete", lineNumbersExtraClassName = " char-delete", spacerIcon = accessibleDiffViewerRemoveIcon;
      }
      originalLayoutInfo = document.createElement("div");
      originalLayoutInfo.style.minWidth = width + "px";
      originalLayoutInfo.className = rowClassName;
      originalLayoutInfo.setAttribute("role", "listitem");
      originalLayoutInfo.ariaLevel = "";
      width = document.createElement("div");
      width.className = "diff-review-cell";
      width.style.height = `${lineHeight}px`;
      originalLayoutInfo.appendChild(width);
      lineHeight = document.createElement("span");
      lineHeight.style.width = originalLineNumbersWidth + "px";
      lineHeight.style.minWidth = originalLineNumbersWidth + "px";
      lineHeight.className = "diff-review-line-number" + lineNumbersExtraClassName;
      item.originalLineNumber !== void 0 ? lineHeight.appendChild(document.createTextNode(String(item.originalLineNumber))) : lineHeight.innerText = " ";
      width.appendChild(lineHeight);
      lineHeight = document.createElement("span");
      lineHeight.style.width = modifiedLineNumbersWidth + "px";
      lineHeight.style.minWidth = modifiedLineNumbersWidth + "px";
      lineHeight.style.paddingRight = "10px";
      lineHeight.className = "diff-review-line-number" + lineNumbersExtraClassName;
      item.modifiedLineNumber !== void 0 ? lineHeight.appendChild(document.createTextNode(String(item.modifiedLineNumber))) : lineHeight.innerText = " ";
      width.appendChild(lineHeight);
      lineHeight = document.createElement("span");
      lineHeight.className = "diff-review-spacer";
      spacerIcon ? (originalLineNumbersWidth = document.createElement("span"), originalLineNumbersWidth.className = require$_DOT__DOT__SLASH__DOT__DOT__SLASH__DOT__DOT__SLASH__DOT__DOT__SLASH_base_SLASH_common_SLASH_themables_DOT_js.ThemeIcon.asClassName(spacerIcon), originalLineNumbersWidth.innerText = "  ", lineHeight.appendChild(originalLineNumbersWidth)) : lineHeight.innerText = "  ";
      width.appendChild(lineHeight);
      item.modifiedLineNumber !== void 0 ? (originalModel = this._getLineHtml(modifiedModel, modifiedOptions, modifiedModelOpts.tabSize, item.modifiedLineNumber, this._languageService.languageIdCodec), AccessibleDiffViewer._ttPolicy && (originalModel = AccessibleDiffViewer._ttPolicy.createHTML(originalModel)), width.insertAdjacentHTML("beforeend", originalModel), originalModel = modifiedModel.getLineContent(item.modifiedLineNumber)) : (modifiedModel = this._getLineHtml(originalModel, originalOptions, 
      originalModelOpts.tabSize, item.originalLineNumber, this._languageService.languageIdCodec), AccessibleDiffViewer._ttPolicy && (modifiedModel = AccessibleDiffViewer._ttPolicy.createHTML(modifiedModel)), width.insertAdjacentHTML("beforeend", modifiedModel), originalModel = originalModel.getLineContent(item.originalLineNumber));
      originalModel.length === 0 && (originalModel = (0,require$_DOT__DOT__SLASH__DOT__DOT__SLASH__DOT__DOT__SLASH__DOT__DOT__SLASH_nls_DOT_js.localize)("blankLine", "blank"));
      modifiedModel = "";
      switch(item.type) {
        case LineType.Unchanged:
          modifiedModel = item.originalLineNumber === item.modifiedLineNumber ? (0,require$_DOT__DOT__SLASH__DOT__DOT__SLASH__DOT__DOT__SLASH__DOT__DOT__SLASH_nls_DOT_js.localize)({key:"unchangedLine", comment:["The placeholders are contents of the line and should not be translated."]}, "{0} unchanged line {1}", originalModel, item.originalLineNumber) : (0,require$_DOT__DOT__SLASH__DOT__DOT__SLASH__DOT__DOT__SLASH__DOT__DOT__SLASH_nls_DOT_js.localize)("equalLine", "{0} original line {1} modified line {2}", 
          originalModel, item.originalLineNumber, item.modifiedLineNumber);
          break;
        case LineType.Added:
          modifiedModel = (0,require$_DOT__DOT__SLASH__DOT__DOT__SLASH__DOT__DOT__SLASH__DOT__DOT__SLASH_nls_DOT_js.localize)("insertLine", "+ {0} modified line {1}", originalModel, item.modifiedLineNumber);
          break;
        case LineType.Deleted:
          modifiedModel = (0,require$_DOT__DOT__SLASH__DOT__DOT__SLASH__DOT__DOT__SLASH__DOT__DOT__SLASH_nls_DOT_js.localize)("deleteLine", "- {0} original line {1}", originalModel, item.originalLineNumber);
      }
      originalLayoutInfo.setAttribute("aria-label", modifiedModel);
      return originalLayoutInfo;
    }
    _getLineHtml(model, options, tabSize, lineNumber, languageIdCodec) {
      lineNumber = model.getLineContent(lineNumber);
      const fontInfo = options.get(50);
      languageIdCodec = require$_DOT__DOT__SLASH__DOT__DOT__SLASH__DOT__DOT__SLASH_common_SLASH_tokens_SLASH_lineTokens_DOT_js.LineTokens.createEmpty(lineNumber, languageIdCodec);
      const isBasicASCII = require$_DOT__DOT__SLASH__DOT__DOT__SLASH__DOT__DOT__SLASH_common_SLASH_viewModel_DOT_js.ViewLineRenderingData.isBasicASCII(lineNumber, model.mightContainNonBasicASCII());
      model = require$_DOT__DOT__SLASH__DOT__DOT__SLASH__DOT__DOT__SLASH_common_SLASH_viewModel_DOT_js.ViewLineRenderingData.containsRTL(lineNumber, isBasicASCII, model.mightContainRTL());
      return (0,require$_DOT__DOT__SLASH__DOT__DOT__SLASH__DOT__DOT__SLASH_common_SLASH_viewLayout_SLASH_viewLineRenderer_DOT_js.renderViewLine2)(new require$_DOT__DOT__SLASH__DOT__DOT__SLASH__DOT__DOT__SLASH_common_SLASH_viewLayout_SLASH_viewLineRenderer_DOT_js.RenderLineInput(fontInfo.isMonospace && !options.get(33), fontInfo.canUseHalfwidthRightwardsArrow, lineNumber, !1, isBasicASCII, model, 0, languageIdCodec, [], tabSize, 0, fontInfo.spaceWidth, fontInfo.middotWidth, fontInfo.wsmiddotWidth, 
      options.get(116), options.get(98), options.get(93), options.get(51) !== require$_DOT__DOT__SLASH__DOT__DOT__SLASH__DOT__DOT__SLASH_common_SLASH_config_SLASH_editorOptions_DOT_js.EditorFontLigatures.OFF, null)).html;
    }
  };
  View = require([__param(5, require$_DOT__DOT__SLASH__DOT__DOT__SLASH__DOT__DOT__SLASH_common_SLASH_languages_SLASH_language_DOT_js.ILanguageService)], View);
};

//# sourceMappingURL=module$node_modules$monaco_editor$esm$vs$editor$browser$widget$diffEditor$accessibleDiffViewer.js.map
