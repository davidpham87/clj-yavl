shadow$provide.module$node_modules$monaco_editor$esm$vs$editor$browser$viewParts$whitespace$whitespace = function(require, module, exports) {
  Object.defineProperties(exports, {__esModule:{enumerable:!0, value:!0}, WhitespaceOverlay:{enumerable:!0, get:function() {
    return WhitespaceOverlay;
  }}});
  require("module$node_modules$monaco_editor$esm$vs$editor$browser$viewParts$whitespace$whitespace_css");
  module = require("module$node_modules$monaco_editor$esm$vs$editor$browser$view$dynamicViewOverlay");
  var strings = require("module$node_modules$monaco_editor$esm$vs$base$common$strings"), require$_DOT__DOT__SLASH__DOT__DOT__SLASH__DOT__DOT__SLASH_common_SLASH_viewLayout_SLASH_viewLineRenderer_DOT_js = require("module$node_modules$monaco_editor$esm$vs$editor$common$viewLayout$viewLineRenderer"), require$_DOT__DOT__SLASH__DOT__DOT__SLASH__DOT__DOT__SLASH_common_SLASH_core_SLASH_position_DOT_js = require("module$node_modules$monaco_editor$esm$vs$editor$common$core$position"), require$_DOT__DOT__SLASH__DOT__DOT__SLASH__DOT__DOT__SLASH_common_SLASH_core_SLASH_editorColorRegistry_DOT_js = 
  require("module$node_modules$monaco_editor$esm$vs$editor$common$core$editorColorRegistry");
  class WhitespaceOverlay extends module.DynamicViewOverlay {
    constructor(context) {
      super();
      this._context = context;
      this._options = new WhitespaceOptions(this._context.configuration);
      this._selection = [];
      this._renderResult = null;
      this._context.addEventHandler(this);
    }
    dispose() {
      this._context.removeEventHandler(this);
      this._renderResult = null;
      super.dispose();
    }
    onConfigurationChanged(e) {
      const newOptions = new WhitespaceOptions(this._context.configuration);
      if (this._options.equals(newOptions)) {
        return e.hasChanged(143);
      }
      this._options = newOptions;
      return !0;
    }
    onCursorStateChanged(e) {
      this._selection = e.selections;
      return this._options.renderWhitespace === "selection" ? !0 : !1;
    }
    onDecorationsChanged(e) {
      return !0;
    }
    onFlushed(e) {
      return !0;
    }
    onLinesChanged(e) {
      return !0;
    }
    onLinesDeleted(e) {
      return !0;
    }
    onLinesInserted(e) {
      return !0;
    }
    onScrollChanged(e) {
      return e.scrollTopChanged;
    }
    onZonesChanged(e) {
      return !0;
    }
    prepareRender(ctx) {
      if (this._options.renderWhitespace === "none") {
        this._renderResult = null;
      } else {
        var lineCount = ctx.visibleRange.endLineNumber - ctx.visibleRange.startLineNumber + 1, needed = Array(lineCount);
        for (var i = 0; i < lineCount; i++) {
          needed[i] = !0;
        }
        lineCount = this._context.viewModel.getMinimapLinesRenderingData(ctx.viewportData.startLineNumber, ctx.viewportData.endLineNumber, needed);
        this._renderResult = [];
        for (needed = ctx.viewportData.startLineNumber; needed <= ctx.viewportData.endLineNumber; needed++) {
          i = needed - ctx.viewportData.startLineNumber;
          const lineData = lineCount.data[i];
          let selectionsOnLine = null;
          if (this._options.renderWhitespace === "selection") {
            var selections = this._selection;
            for (const selection of selections) {
              if (selection.endLineNumber < needed || selection.startLineNumber > needed) {
                continue;
              }
              selections = selection.startLineNumber === needed ? selection.startColumn : lineData.minColumn;
              const endColumn = selection.endLineNumber === needed ? selection.endColumn : lineData.maxColumn;
              selections < endColumn && (selectionsOnLine ||= [], selectionsOnLine.push(new require$_DOT__DOT__SLASH__DOT__DOT__SLASH__DOT__DOT__SLASH_common_SLASH_viewLayout_SLASH_viewLineRenderer_DOT_js.LineRange(selections - 1, endColumn - 1)));
            }
          }
          this._renderResult[i] = this._applyRenderWhitespace(ctx, needed, selectionsOnLine, lineData);
        }
      }
    }
    _applyRenderWhitespace(ctx, lineNumber, selections, lineData) {
      if (this._options.renderWhitespace === "selection" && !selections || this._options.renderWhitespace === "trailing" && lineData.continuesWithWrappedLine) {
        return "";
      }
      const color = this._context.theme.getColor(require$_DOT__DOT__SLASH__DOT__DOT__SLASH__DOT__DOT__SLASH_common_SLASH_core_SLASH_editorColorRegistry_DOT_js.editorWhitespaces), USE_SVG = this._options.renderWithSVG, lineContent = lineData.content, len = this._options.stopRenderingLineAfter === -1 ? lineContent.length : Math.min(this._options.stopRenderingLineAfter, lineContent.length), continuesWithWrappedLine = lineData.continuesWithWrappedLine;
      var fauxIndentLength = lineData.minColumn - 1;
      lineData = this._options.renderWhitespace === "boundary";
      const onlyTrailing = this._options.renderWhitespace === "trailing", lineHeight = this._options.lineHeight, spaceWidth = this._options.spaceWidth, renderSpaceCharCode = Math.abs(this._options.wsmiddotWidth - spaceWidth) < Math.abs(this._options.middotWidth - spaceWidth) ? 11825 : 183, canUseHalfwidthRightwardsArrow = this._options.canUseHalfwidthRightwardsArrow;
      let result = "", lineIsEmptyOrWhitespace = !1, firstNonWhitespaceIndex = strings.firstNonWhitespaceIndex(lineContent), lastNonWhitespaceIndex;
      firstNonWhitespaceIndex === -1 ? (lineIsEmptyOrWhitespace = !0, lastNonWhitespaceIndex = firstNonWhitespaceIndex = len) : lastNonWhitespaceIndex = strings.lastNonWhitespaceIndex(lineContent);
      let currentSelectionIndex = 0, currentSelection = selections && selections[currentSelectionIndex], maxLeft = 0;
      for (; fauxIndentLength < len; fauxIndentLength++) {
        const chCode = lineContent.charCodeAt(fauxIndentLength);
        currentSelection && fauxIndentLength >= currentSelection.endOffset && (currentSelectionIndex++, currentSelection = selections && selections[currentSelectionIndex]);
        if (!(chCode !== 9 && chCode !== 32 || onlyTrailing && !lineIsEmptyOrWhitespace && fauxIndentLength <= lastNonWhitespaceIndex)) {
          if (lineData && fauxIndentLength >= firstNonWhitespaceIndex && fauxIndentLength <= lastNonWhitespaceIndex && chCode === 32) {
            var prevChCode = fauxIndentLength - 1 >= 0 ? lineContent.charCodeAt(fauxIndentLength - 1) : 0;
            const nextChCode = fauxIndentLength + 1 < len ? lineContent.charCodeAt(fauxIndentLength + 1) : 0;
            if (prevChCode !== 32 && nextChCode !== 32) {
              continue;
            }
          }
          if (lineData && continuesWithWrappedLine && fauxIndentLength === len - 1 && (prevChCode = fauxIndentLength - 1 >= 0 ? lineContent.charCodeAt(fauxIndentLength - 1) : 0, chCode === 32 && prevChCode !== 32 && prevChCode !== 9)) {
            continue;
          }
          if (!selections || !(!currentSelection || currentSelection.startOffset > fauxIndentLength || currentSelection.endOffset <= fauxIndentLength)) {
            if (prevChCode = ctx.visibleRangeForPosition(new require$_DOT__DOT__SLASH__DOT__DOT__SLASH__DOT__DOT__SLASH_common_SLASH_core_SLASH_position_DOT_js.Position(lineNumber, fauxIndentLength + 1))) {
              USE_SVG ? (maxLeft = Math.max(maxLeft, prevChCode.left), result = chCode === 9 ? result + this._renderArrow(lineHeight, spaceWidth, prevChCode.left) : result + `<circle cx="${(prevChCode.left + spaceWidth / 2).toFixed(2)}" cy="${(lineHeight / 2).toFixed(2)}" r="${(spaceWidth / 7).toFixed(2)}" />`) : result = chCode === 9 ? result + `<div class="mwh" style="left:${prevChCode.left}px;height:${lineHeight}px;">${canUseHalfwidthRightwardsArrow ? String.fromCharCode(65515) : String.fromCharCode(8594)}</div>` : 
              result + `<div class="mwh" style="left:${prevChCode.left}px;height:${lineHeight}px;">${String.fromCharCode(renderSpaceCharCode)}</div>`;
            }
          }
        }
      }
      return USE_SVG ? (maxLeft = Math.round(maxLeft + spaceWidth), `<svg style="position:absolute;width:${maxLeft}px;height:${lineHeight}px" viewBox="0 0 ${maxLeft} ${lineHeight}" xmlns="http://www.w3.org/2000/svg" fill="${color}">` + result + "\x3c/svg\x3e") : result;
    }
    _renderArrow(lineHeight, spaceWidth, left) {
      const dy = lineHeight / 2;
      lineHeight = {x:0, y:spaceWidth / 7 / 2};
      spaceWidth = {x:.8 * spaceWidth, y:lineHeight.y};
      const p3 = {x:spaceWidth.x - 0.2 * spaceWidth.x, y:spaceWidth.y + 0.2 * spaceWidth.x}, p4 = {x:p3.x + 0.1 * spaceWidth.x, y:p3.y + 0.1 * spaceWidth.x}, p5 = {x:p4.x + 0.35 * spaceWidth.x, y:p4.y - 0.35 * spaceWidth.x};
      return `<path d="M ${[lineHeight, spaceWidth, p3, p4, p5, {x:p5.x, y:-p5.y}, {x:p4.x, y:-p4.y}, {x:p3.x, y:-p3.y}, {x:spaceWidth.x, y:-spaceWidth.y}, {x:lineHeight.x, y:-lineHeight.y}].map(p => `${(left + p.x).toFixed(2)} ${(dy + p.y).toFixed(2)}`).join(" L ")}" />`;
    }
    render(startLineNumber, lineNumber) {
      if (!this._renderResult) {
        return "";
      }
      startLineNumber = lineNumber - startLineNumber;
      return startLineNumber < 0 || startLineNumber >= this._renderResult.length ? "" : this._renderResult[startLineNumber];
    }
  }
  class WhitespaceOptions {
    constructor(config) {
      config = config.options;
      const fontInfo = config.get(50), experimentalWhitespaceRendering = config.get(38);
      experimentalWhitespaceRendering === "off" ? (this.renderWhitespace = "none", this.renderWithSVG = !1) : experimentalWhitespaceRendering === "svg" ? (this.renderWhitespace = config.get(98), this.renderWithSVG = !0) : (this.renderWhitespace = config.get(98), this.renderWithSVG = !1);
      this.spaceWidth = fontInfo.spaceWidth;
      this.middotWidth = fontInfo.middotWidth;
      this.wsmiddotWidth = fontInfo.wsmiddotWidth;
      this.canUseHalfwidthRightwardsArrow = fontInfo.canUseHalfwidthRightwardsArrow;
      this.lineHeight = config.get(66);
      this.stopRenderingLineAfter = config.get(116);
    }
    equals(other) {
      return this.renderWhitespace === other.renderWhitespace && this.renderWithSVG === other.renderWithSVG && this.spaceWidth === other.spaceWidth && this.middotWidth === other.middotWidth && this.wsmiddotWidth === other.wsmiddotWidth && this.canUseHalfwidthRightwardsArrow === other.canUseHalfwidthRightwardsArrow && this.lineHeight === other.lineHeight && this.stopRenderingLineAfter === other.stopRenderingLineAfter;
    }
  }
};

//# sourceMappingURL=module$node_modules$monaco_editor$esm$vs$editor$browser$viewParts$whitespace$whitespace.js.map
