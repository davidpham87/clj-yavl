shadow$provide.module$node_modules$monaco_editor$esm$vs$editor$browser$viewParts$viewZones$viewZones = function(require, module, exports) {
  Object.defineProperties(exports, {__esModule:{enumerable:!0, value:!0}, ViewZones:{enumerable:!0, get:function() {
    return ViewZones;
  }}});
  var require$_DOT__DOT__SLASH__DOT__DOT__SLASH__DOT__DOT__SLASH__DOT__DOT__SLASH_base_SLASH_browser_SLASH_fastDomNode_DOT_js = require("module$node_modules$monaco_editor$esm$vs$base$browser$fastDomNode"), require$_DOT__DOT__SLASH__DOT__DOT__SLASH__DOT__DOT__SLASH__DOT__DOT__SLASH_base_SLASH_common_SLASH_errors_DOT_js = require("module$node_modules$monaco_editor$esm$vs$base$common$errors");
  module = require("module$node_modules$monaco_editor$esm$vs$editor$browser$view$viewPart");
  var require$_DOT__DOT__SLASH__DOT__DOT__SLASH__DOT__DOT__SLASH_common_SLASH_core_SLASH_position_DOT_js = require("module$node_modules$monaco_editor$esm$vs$editor$common$core$position");
  const invalidFunc = () => {
    throw Error("Invalid change accessor");
  };
  class ViewZones extends module.ViewPart {
    constructor(context) {
      super(context);
      context = this._context.configuration.options;
      const layoutInfo = context.get(143);
      this._lineHeight = context.get(66);
      this._contentWidth = layoutInfo.contentWidth;
      this._contentLeft = layoutInfo.contentLeft;
      this.domNode = (0,require$_DOT__DOT__SLASH__DOT__DOT__SLASH__DOT__DOT__SLASH__DOT__DOT__SLASH_base_SLASH_browser_SLASH_fastDomNode_DOT_js.createFastDomNode)(document.createElement("div"));
      this.domNode.setClassName("view-zones");
      this.domNode.setPosition("absolute");
      this.domNode.setAttribute("role", "presentation");
      this.domNode.setAttribute("aria-hidden", "true");
      this.marginDomNode = (0,require$_DOT__DOT__SLASH__DOT__DOT__SLASH__DOT__DOT__SLASH__DOT__DOT__SLASH_base_SLASH_browser_SLASH_fastDomNode_DOT_js.createFastDomNode)(document.createElement("div"));
      this.marginDomNode.setClassName("margin-view-zones");
      this.marginDomNode.setPosition("absolute");
      this.marginDomNode.setAttribute("role", "presentation");
      this.marginDomNode.setAttribute("aria-hidden", "true");
      this._zones = {};
    }
    dispose() {
      super.dispose();
      this._zones = {};
    }
    _recomputeWhitespacesProps() {
      const whitespaces = this._context.viewLayout.getWhitespaces(), oldWhitespaces = new Map();
      for (const whitespace of whitespaces) {
        oldWhitespaces.set(whitespace.id, whitespace);
      }
      let hadAChange = !1;
      this._context.viewModel.changeWhitespace(whitespaceAccessor => {
        const keys = Object.keys(this._zones);
        for (let i = 0, len = keys.length; i < len; i++) {
          const id = keys[i], zone = this._zones[id], props = this._computeWhitespaceProps(zone.delegate);
          zone.isInHiddenArea = props.isInHiddenArea;
          const oldWhitespace = oldWhitespaces.get(id);
          !oldWhitespace || oldWhitespace.afterLineNumber === props.afterViewLineNumber && oldWhitespace.height === props.heightInPx || (whitespaceAccessor.changeOneWhitespace(id, props.afterViewLineNumber, props.heightInPx), this._safeCallOnComputedHeight(zone.delegate, props.heightInPx), hadAChange = !0);
        }
      });
      return hadAChange;
    }
    onConfigurationChanged(e) {
      const options = this._context.configuration.options, layoutInfo = options.get(143);
      this._lineHeight = options.get(66);
      this._contentWidth = layoutInfo.contentWidth;
      this._contentLeft = layoutInfo.contentLeft;
      e.hasChanged(66) && this._recomputeWhitespacesProps();
      return !0;
    }
    onLineMappingChanged(e) {
      return this._recomputeWhitespacesProps();
    }
    onLinesDeleted(e) {
      return !0;
    }
    onScrollChanged(e) {
      return e.scrollTopChanged || e.scrollWidthChanged;
    }
    onZonesChanged(e) {
      return !0;
    }
    onLinesInserted(e) {
      return !0;
    }
    _getZoneOrdinal(zone) {
      var _a, _b;
      return (_b = (_a = zone.ordinal) !== null && _a !== void 0 ? _a : zone.afterColumn) !== null && _b !== void 0 ? _b : 10000;
    }
    _computeWhitespaceProps(zone) {
      if (zone.afterLineNumber === 0) {
        return {isInHiddenArea:!1, afterViewLineNumber:0, heightInPx:this._heightInPixels(zone), minWidthInPx:this._minWidthInPixels(zone)};
      }
      if (typeof zone.afterColumn !== "undefined") {
        var zoneAfterModelPosition = this._context.viewModel.model.validatePosition({lineNumber:zone.afterLineNumber, column:zone.afterColumn});
      } else {
        var validAfterLineNumber = this._context.viewModel.model.validatePosition({lineNumber:zone.afterLineNumber, column:1}).lineNumber;
        zoneAfterModelPosition = new require$_DOT__DOT__SLASH__DOT__DOT__SLASH__DOT__DOT__SLASH_common_SLASH_core_SLASH_position_DOT_js.Position(validAfterLineNumber, this._context.viewModel.model.getLineMaxColumn(validAfterLineNumber));
      }
      validAfterLineNumber = zoneAfterModelPosition.column === this._context.viewModel.model.getLineMaxColumn(zoneAfterModelPosition.lineNumber) ? this._context.viewModel.model.validatePosition({lineNumber:zoneAfterModelPosition.lineNumber + 1, column:1}) : this._context.viewModel.model.validatePosition({lineNumber:zoneAfterModelPosition.lineNumber, column:zoneAfterModelPosition.column + 1});
      zoneAfterModelPosition = this._context.viewModel.coordinatesConverter.convertModelPositionToViewPosition(zoneAfterModelPosition, zone.afterColumnAffinity, !0);
      validAfterLineNumber = zone.showInHiddenAreas || this._context.viewModel.coordinatesConverter.modelPositionIsVisible(validAfterLineNumber);
      return {isInHiddenArea:!validAfterLineNumber, afterViewLineNumber:zoneAfterModelPosition.lineNumber, heightInPx:validAfterLineNumber ? this._heightInPixels(zone) : 0, minWidthInPx:this._minWidthInPixels(zone)};
    }
    changeViewZones(callback) {
      let zonesHaveChanged = !1;
      this._context.viewModel.changeWhitespace(whitespaceAccessor => {
        const changeAccessor = {addZone:zone => {
          zonesHaveChanged = !0;
          return this._addZone(whitespaceAccessor, zone);
        }, removeZone:id => {
          id && (zonesHaveChanged = this._removeZone(whitespaceAccessor, id) || zonesHaveChanged);
        }, layoutZone:id => {
          id && (zonesHaveChanged = this._layoutZone(whitespaceAccessor, id) || zonesHaveChanged);
        }};
        try {
          callback(changeAccessor);
        } catch (e) {
          (0,require$_DOT__DOT__SLASH__DOT__DOT__SLASH__DOT__DOT__SLASH__DOT__DOT__SLASH_base_SLASH_common_SLASH_errors_DOT_js.onUnexpectedError)(e);
        }
        changeAccessor.addZone = invalidFunc;
        changeAccessor.removeZone = invalidFunc;
        changeAccessor.layoutZone = invalidFunc;
      });
      return zonesHaveChanged;
    }
    _addZone(whitespaceAccessor, zone) {
      const props = this._computeWhitespaceProps(zone);
      whitespaceAccessor = {whitespaceId:whitespaceAccessor.insertWhitespace(props.afterViewLineNumber, this._getZoneOrdinal(zone), props.heightInPx, props.minWidthInPx), delegate:zone, isInHiddenArea:props.isInHiddenArea, isVisible:!1, domNode:(0,require$_DOT__DOT__SLASH__DOT__DOT__SLASH__DOT__DOT__SLASH__DOT__DOT__SLASH_base_SLASH_browser_SLASH_fastDomNode_DOT_js.createFastDomNode)(zone.domNode), marginDomNode:zone.marginDomNode ? (0,require$_DOT__DOT__SLASH__DOT__DOT__SLASH__DOT__DOT__SLASH__DOT__DOT__SLASH_base_SLASH_browser_SLASH_fastDomNode_DOT_js.createFastDomNode)(zone.marginDomNode) : 
      null};
      this._safeCallOnComputedHeight(whitespaceAccessor.delegate, props.heightInPx);
      whitespaceAccessor.domNode.setPosition("absolute");
      whitespaceAccessor.domNode.domNode.style.width = "100%";
      whitespaceAccessor.domNode.setDisplay("none");
      whitespaceAccessor.domNode.setAttribute("monaco-view-zone", whitespaceAccessor.whitespaceId);
      this.domNode.appendChild(whitespaceAccessor.domNode);
      whitespaceAccessor.marginDomNode && (whitespaceAccessor.marginDomNode.setPosition("absolute"), whitespaceAccessor.marginDomNode.domNode.style.width = "100%", whitespaceAccessor.marginDomNode.setDisplay("none"), whitespaceAccessor.marginDomNode.setAttribute("monaco-view-zone", whitespaceAccessor.whitespaceId), this.marginDomNode.appendChild(whitespaceAccessor.marginDomNode));
      this._zones[whitespaceAccessor.whitespaceId] = whitespaceAccessor;
      this.setShouldRender();
      return whitespaceAccessor.whitespaceId;
    }
    _removeZone(whitespaceAccessor, id) {
      if (this._zones.hasOwnProperty(id)) {
        const zone = this._zones[id];
        delete this._zones[id];
        whitespaceAccessor.removeWhitespace(zone.whitespaceId);
        zone.domNode.removeAttribute("monaco-visible-view-zone");
        zone.domNode.removeAttribute("monaco-view-zone");
        zone.domNode.domNode.parentNode.removeChild(zone.domNode.domNode);
        zone.marginDomNode && (zone.marginDomNode.removeAttribute("monaco-visible-view-zone"), zone.marginDomNode.removeAttribute("monaco-view-zone"), zone.marginDomNode.domNode.parentNode.removeChild(zone.marginDomNode.domNode));
        this.setShouldRender();
        return !0;
      }
      return !1;
    }
    _layoutZone(whitespaceAccessor, id) {
      if (this._zones.hasOwnProperty(id)) {
        id = this._zones[id];
        const props = this._computeWhitespaceProps(id.delegate);
        id.isInHiddenArea = props.isInHiddenArea;
        whitespaceAccessor.changeOneWhitespace(id.whitespaceId, props.afterViewLineNumber, props.heightInPx);
        this._safeCallOnComputedHeight(id.delegate, props.heightInPx);
        this.setShouldRender();
        return !0;
      }
      return !1;
    }
    shouldSuppressMouseDownOnViewZone(id) {
      return this._zones.hasOwnProperty(id) ? !!this._zones[id].delegate.suppressMouseDown : !1;
    }
    _heightInPixels(zone) {
      return typeof zone.heightInPx === "number" ? zone.heightInPx : typeof zone.heightInLines === "number" ? this._lineHeight * zone.heightInLines : this._lineHeight;
    }
    _minWidthInPixels(zone) {
      return typeof zone.minWidthInPx === "number" ? zone.minWidthInPx : 0;
    }
    _safeCallOnComputedHeight(zone, height) {
      if (typeof zone.onComputedHeight === "function") {
        try {
          zone.onComputedHeight(height);
        } catch (e) {
          (0,require$_DOT__DOT__SLASH__DOT__DOT__SLASH__DOT__DOT__SLASH__DOT__DOT__SLASH_base_SLASH_common_SLASH_errors_DOT_js.onUnexpectedError)(e);
        }
      }
    }
    _safeCallOnDomNodeTop(zone, top) {
      if (typeof zone.onDomNodeTop === "function") {
        try {
          zone.onDomNodeTop(top);
        } catch (e) {
          (0,require$_DOT__DOT__SLASH__DOT__DOT__SLASH__DOT__DOT__SLASH__DOT__DOT__SLASH_base_SLASH_common_SLASH_errors_DOT_js.onUnexpectedError)(e);
        }
      }
    }
    prepareRender(ctx) {
    }
    render(ctx) {
      var visibleWhitespaces = ctx.viewportData.whitespaceViewportData;
      const visibleZones = {};
      let hasVisibleZone = !1;
      for (var visibleWhitespace of visibleWhitespaces) {
        this._zones[visibleWhitespace.id].isInHiddenArea || (visibleZones[visibleWhitespace.id] = visibleWhitespace, hasVisibleZone = !0);
      }
      visibleWhitespaces = Object.keys(this._zones);
      for (let i = 0, len = visibleWhitespaces.length; i < len; i++) {
        visibleWhitespace = visibleWhitespaces[i];
        const zone = this._zones[visibleWhitespace];
        let newTop = 0, newHeight = 0, newDisplay = "none";
        visibleZones.hasOwnProperty(visibleWhitespace) ? (newTop = visibleZones[visibleWhitespace].verticalOffset - ctx.bigNumbersDelta, newHeight = visibleZones[visibleWhitespace].height, newDisplay = "block", zone.isVisible || (zone.domNode.setAttribute("monaco-visible-view-zone", "true"), zone.isVisible = !0), this._safeCallOnDomNodeTop(zone.delegate, ctx.getScrolledTopFromAbsoluteTop(visibleZones[visibleWhitespace].verticalOffset))) : (zone.isVisible && (zone.domNode.removeAttribute("monaco-visible-view-zone"), 
        zone.isVisible = !1), this._safeCallOnDomNodeTop(zone.delegate, ctx.getScrolledTopFromAbsoluteTop(-1000000)));
        zone.domNode.setTop(newTop);
        zone.domNode.setHeight(newHeight);
        zone.domNode.setDisplay(newDisplay);
        zone.marginDomNode && (zone.marginDomNode.setTop(newTop), zone.marginDomNode.setHeight(newHeight), zone.marginDomNode.setDisplay(newDisplay));
      }
      hasVisibleZone && (this.domNode.setWidth(Math.max(ctx.scrollWidth, this._contentWidth)), this.marginDomNode.setWidth(this._contentLeft));
    }
  }
};

//# sourceMappingURL=module$node_modules$monaco_editor$esm$vs$editor$browser$viewParts$viewZones$viewZones.js.map
