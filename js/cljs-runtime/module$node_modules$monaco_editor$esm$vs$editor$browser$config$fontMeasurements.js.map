{
"version":3,
"file":"module$node_modules$monaco_editor$esm$vs$editor$browser$config$fontMeasurements.js",
"lineCount":113,
"mappings":"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",
"sources":["node_modules/monaco-editor/esm/vs/editor/browser/config/fontMeasurements.js"],
"sourcesContent":["shadow$provide[\"module$node_modules$monaco_editor$esm$vs$editor$browser$config$fontMeasurements\"] = function(require,module,exports) {\nObject.defineProperties(exports, {__esModule:{enumerable:true, value:true}, FontMeasurements:{enumerable:true, get:function() {\n  return FontMeasurements;\n}}, FontMeasurementsImpl:{enumerable:true, get:function() {\n  return FontMeasurementsImpl;\n}}});\nvar browser = require(\"../../../base/browser/browser.js\");\nvar require$_DOT__DOT__SLASH__DOT__DOT__SLASH__DOT__DOT__SLASH_base_SLASH_browser_SLASH_window_DOT_js = require(\"../../../base/browser/window.js\");\nvar require$_DOT__DOT__SLASH__DOT__DOT__SLASH__DOT__DOT__SLASH_base_SLASH_common_SLASH_event_DOT_js = require(\"../../../base/common/event.js\");\nvar require$_DOT__DOT__SLASH__DOT__DOT__SLASH__DOT__DOT__SLASH_base_SLASH_common_SLASH_lifecycle_DOT_js = require(\"../../../base/common/lifecycle.js\");\nvar require$_DOT__SLASH_charWidthReader_DOT_js = require(\"./charWidthReader.js\");\nvar require$_DOT__DOT__SLASH__DOT__DOT__SLASH_common_SLASH_config_SLASH_editorOptions_DOT_js = require(\"../../common/config/editorOptions.js\");\nvar require$_DOT__DOT__SLASH__DOT__DOT__SLASH_common_SLASH_config_SLASH_fontInfo_DOT_js = require(\"../../common/config/fontInfo.js\");\nclass FontMeasurementsImpl extends require$_DOT__DOT__SLASH__DOT__DOT__SLASH__DOT__DOT__SLASH_base_SLASH_common_SLASH_lifecycle_DOT_js.Disposable {\n  constructor() {\n    super();\n    this._onDidChange = this._register(new require$_DOT__DOT__SLASH__DOT__DOT__SLASH__DOT__DOT__SLASH_base_SLASH_common_SLASH_event_DOT_js.Emitter());\n    this.onDidChange = this._onDidChange.event;\n    this._cache = new FontMeasurementsCache();\n    this._evictUntrustedReadingsTimeout = -1;\n  }\n  dispose() {\n    if (this._evictUntrustedReadingsTimeout !== -1) {\n      clearTimeout(this._evictUntrustedReadingsTimeout);\n      this._evictUntrustedReadingsTimeout = -1;\n    }\n    super.dispose();\n  }\n  clearAllFontInfos() {\n    this._cache = new FontMeasurementsCache();\n    this._onDidChange.fire();\n  }\n  _writeToCache(item, value) {\n    this._cache.put(item, value);\n    if (!value.isTrusted && this._evictUntrustedReadingsTimeout === -1) {\n      this._evictUntrustedReadingsTimeout = require$_DOT__DOT__SLASH__DOT__DOT__SLASH__DOT__DOT__SLASH_base_SLASH_browser_SLASH_window_DOT_js.mainWindow.setTimeout(() => {\n        this._evictUntrustedReadingsTimeout = -1;\n        this._evictUntrustedReadings();\n      }, 5000);\n    }\n  }\n  _evictUntrustedReadings() {\n    const values = this._cache.getValues();\n    let somethingRemoved = false;\n    for (const item of values) {\n      if (!item.isTrusted) {\n        somethingRemoved = true;\n        this._cache.remove(item);\n      }\n    }\n    if (somethingRemoved) {\n      this._onDidChange.fire();\n    }\n  }\n  readFontInfo(bareFontInfo) {\n    if (!this._cache.has(bareFontInfo)) {\n      let readConfig = this._actualReadFontInfo(bareFontInfo);\n      if (readConfig.typicalHalfwidthCharacterWidth <= 2 || readConfig.typicalFullwidthCharacterWidth <= 2 || readConfig.spaceWidth <= 2 || readConfig.maxDigitWidth <= 2) {\n        readConfig = new require$_DOT__DOT__SLASH__DOT__DOT__SLASH_common_SLASH_config_SLASH_fontInfo_DOT_js.FontInfo({pixelRatio:browser.PixelRatio.value, fontFamily:readConfig.fontFamily, fontWeight:readConfig.fontWeight, fontSize:readConfig.fontSize, fontFeatureSettings:readConfig.fontFeatureSettings, fontVariationSettings:readConfig.fontVariationSettings, lineHeight:readConfig.lineHeight, letterSpacing:readConfig.letterSpacing, isMonospace:readConfig.isMonospace, typicalHalfwidthCharacterWidth:Math.max(readConfig.typicalHalfwidthCharacterWidth, \n        5), typicalFullwidthCharacterWidth:Math.max(readConfig.typicalFullwidthCharacterWidth, 5), canUseHalfwidthRightwardsArrow:readConfig.canUseHalfwidthRightwardsArrow, spaceWidth:Math.max(readConfig.spaceWidth, 5), middotWidth:Math.max(readConfig.middotWidth, 5), wsmiddotWidth:Math.max(readConfig.wsmiddotWidth, 5), maxDigitWidth:Math.max(readConfig.maxDigitWidth, 5),}, false);\n      }\n      this._writeToCache(bareFontInfo, readConfig);\n    }\n    return this._cache.get(bareFontInfo);\n  }\n  _createRequest(chr, type, all, monospace) {\n    const result = new require$_DOT__SLASH_charWidthReader_DOT_js.CharWidthRequest(chr, type);\n    all.push(result);\n    monospace === null || monospace === void 0 ? void 0 : monospace.push(result);\n    return result;\n  }\n  _actualReadFontInfo(bareFontInfo) {\n    const all = [];\n    const monospace = [];\n    const typicalHalfwidthCharacter = this._createRequest(\"n\", 0, all, monospace);\n    const typicalFullwidthCharacter = this._createRequest(\"\\uff4d\", 0, all, null);\n    const space = this._createRequest(\" \", 0, all, monospace);\n    const digit0 = this._createRequest(\"0\", 0, all, monospace);\n    const digit1 = this._createRequest(\"1\", 0, all, monospace);\n    const digit2 = this._createRequest(\"2\", 0, all, monospace);\n    const digit3 = this._createRequest(\"3\", 0, all, monospace);\n    const digit4 = this._createRequest(\"4\", 0, all, monospace);\n    const digit5 = this._createRequest(\"5\", 0, all, monospace);\n    const digit6 = this._createRequest(\"6\", 0, all, monospace);\n    const digit7 = this._createRequest(\"7\", 0, all, monospace);\n    const digit8 = this._createRequest(\"8\", 0, all, monospace);\n    const digit9 = this._createRequest(\"9\", 0, all, monospace);\n    const rightwardsArrow = this._createRequest(\"\\u2192\", 0, all, monospace);\n    const halfwidthRightwardsArrow = this._createRequest(\"\\uffeb\", 0, all, null);\n    const middot = this._createRequest(\"\\u00b7\", 0, all, monospace);\n    const wsmiddotWidth = this._createRequest(String.fromCharCode(11825), 0, all, null);\n    const monospaceTestChars = \"|/-_ilm%\";\n    for (let i = 0, len = monospaceTestChars.length; i < len; i++) {\n      this._createRequest(monospaceTestChars.charAt(i), 0, all, monospace);\n      this._createRequest(monospaceTestChars.charAt(i), 1, all, monospace);\n      this._createRequest(monospaceTestChars.charAt(i), 2, all, monospace);\n    }\n    (0,require$_DOT__SLASH_charWidthReader_DOT_js.readCharWidths)(bareFontInfo, all);\n    const maxDigitWidth = Math.max(digit0.width, digit1.width, digit2.width, digit3.width, digit4.width, digit5.width, digit6.width, digit7.width, digit8.width, digit9.width);\n    let isMonospace = bareFontInfo.fontFeatureSettings === require$_DOT__DOT__SLASH__DOT__DOT__SLASH_common_SLASH_config_SLASH_editorOptions_DOT_js.EditorFontLigatures.OFF;\n    const referenceWidth = monospace[0].width;\n    for (let i = 1, len = monospace.length; isMonospace && i < len; i++) {\n      const diff = referenceWidth - monospace[i].width;\n      if (diff < -0.001 || diff > 0.001) {\n        isMonospace = false;\n        break;\n      }\n    }\n    let canUseHalfwidthRightwardsArrow = true;\n    if (isMonospace && halfwidthRightwardsArrow.width !== referenceWidth) {\n      canUseHalfwidthRightwardsArrow = false;\n    }\n    if (halfwidthRightwardsArrow.width > rightwardsArrow.width) {\n      canUseHalfwidthRightwardsArrow = false;\n    }\n    return new require$_DOT__DOT__SLASH__DOT__DOT__SLASH_common_SLASH_config_SLASH_fontInfo_DOT_js.FontInfo({pixelRatio:browser.PixelRatio.value, fontFamily:bareFontInfo.fontFamily, fontWeight:bareFontInfo.fontWeight, fontSize:bareFontInfo.fontSize, fontFeatureSettings:bareFontInfo.fontFeatureSettings, fontVariationSettings:bareFontInfo.fontVariationSettings, lineHeight:bareFontInfo.lineHeight, letterSpacing:bareFontInfo.letterSpacing, isMonospace:isMonospace, typicalHalfwidthCharacterWidth:typicalHalfwidthCharacter.width, \n    typicalFullwidthCharacterWidth:typicalFullwidthCharacter.width, canUseHalfwidthRightwardsArrow:canUseHalfwidthRightwardsArrow, spaceWidth:space.width, middotWidth:middot.width, wsmiddotWidth:wsmiddotWidth.width, maxDigitWidth:maxDigitWidth}, true);\n  }\n}\nclass FontMeasurementsCache {\n  constructor() {\n    this._keys = Object.create(null);\n    this._values = Object.create(null);\n  }\n  has(item) {\n    const itemId = item.getId();\n    return !!this._values[itemId];\n  }\n  get(item) {\n    const itemId = item.getId();\n    return this._values[itemId];\n  }\n  put(item, value) {\n    const itemId = item.getId();\n    this._keys[itemId] = item;\n    this._values[itemId] = value;\n  }\n  remove(item) {\n    const itemId = item.getId();\n    delete this._keys[itemId];\n    delete this._values[itemId];\n  }\n  getValues() {\n    return Object.keys(this._keys).map(id => this._values[id]);\n  }\n}\nconst FontMeasurements = new FontMeasurementsImpl();\n\n};"],
"names":["shadow$provide","require","module","exports","Object","defineProperties","__esModule","enumerable","value","FontMeasurements","get","FontMeasurementsImpl","browser","require$_DOT__DOT__SLASH__DOT__DOT__SLASH__DOT__DOT__SLASH_base_SLASH_browser_SLASH_window_DOT_js","require$_DOT__DOT__SLASH__DOT__DOT__SLASH__DOT__DOT__SLASH_base_SLASH_common_SLASH_event_DOT_js","require$_DOT__DOT__SLASH__DOT__DOT__SLASH__DOT__DOT__SLASH_base_SLASH_common_SLASH_lifecycle_DOT_js","require$_DOT__SLASH_charWidthReader_DOT_js","require$_DOT__DOT__SLASH__DOT__DOT__SLASH_common_SLASH_config_SLASH_editorOptions_DOT_js","require$_DOT__DOT__SLASH__DOT__DOT__SLASH_common_SLASH_config_SLASH_fontInfo_DOT_js","Disposable","constructor","_onDidChange","_register","Emitter","onDidChange","event","_cache","FontMeasurementsCache","_evictUntrustedReadingsTimeout","dispose","clearTimeout","clearAllFontInfos","fire","_writeToCache","item","put","isTrusted","mainWindow","setTimeout","_evictUntrustedReadings","values","getValues","somethingRemoved","remove","readFontInfo","bareFontInfo","has","readConfig","_actualReadFontInfo","typicalHalfwidthCharacterWidth","typicalFullwidthCharacterWidth","spaceWidth","maxDigitWidth","FontInfo","pixelRatio","PixelRatio","fontFamily","fontWeight","fontSize","fontFeatureSettings","fontVariationSettings","lineHeight","letterSpacing","isMonospace","Math","max","canUseHalfwidthRightwardsArrow","middotWidth","wsmiddotWidth","_createRequest","chr","type","all","monospace","result","CharWidthRequest","push","typicalHalfwidthCharacter","typicalFullwidthCharacter","space","digit0","digit1","digit2","digit3","digit4","digit5","digit6","digit7","digit8","digit9","rightwardsArrow","halfwidthRightwardsArrow","middot","String","fromCharCode","i","len","length","monospaceTestChars","charAt","readCharWidths","width","EditorFontLigatures","OFF","referenceWidth","diff","_keys","create","_values","itemId","getId","keys","map","id"]
}
